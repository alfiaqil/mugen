; 功夫人的中文化cns文档。
; 由MKII翻译。; 这篇文章里有很多注释，对cns的学习有一定的参考作用
;
; 注意：
; p1指玩家，p2指敌人
; y坐标（纵向）里，负数指向上，正数指向下，0为地平线
; 不区分大小写

[Data]
;起始HP
life = 3000;jambu;1000

;最大气值
power = 7000;jambu;9000

;攻击力（数值高更强）
attack = 100

;防御力（数值高更强）
defence = 100

;倒地时增加防御力百分比
fall.defence_up = 80

;倒地后爬起需要的时间
liedown.time = 60

;Juggle点数
airjuggle = 2000

;默认的打击火花号
sparkno = 2

;默认的防御火花号
guard.sparkno = 40

;设为1的话KO时会有回音
KO.echo = 0

;音量调节 (负数声音减小)
volume = 0

;变量号大于以下数值的变量在局与局之间不会被清零。整数变量一共有60个，变量号为0至59。
;此外还有40个浮点变量，变量号为0至39.如果不写以下两行，那么所有的变量都会被清零。
;另外，你需要改变common1.cns里的state 5900来决定每一场之间清零与否。
IntPersistIndex = 40
FloatPersistIndex = 40

[Size]
xscale = 0.5           ;横向缩放比例
yscale = 0.5           ;纵向缩放比例
ground.back = 15     ;人物宽度 (地面上，中心到后方距离)
ground.front = 16    ;人物宽度 (地面上，中心到前方距离)
air.back = 12        ;人物宽度 (空中，中心到后方距离)
air.front = 12       ;人物宽度 (空中，中心到前方距离)
height = 60          ;人物高度(对手需要跳多高才能跳过)
attack.dist = 160    ;默认攻击距离
proj.attack.dist = 90 ;默认飞行道具攻击距离
proj.doscale = 0     ;如果值为1，则缩放飞行道具
head.pos = -5, -90   ;头部的大概位置
mid.pos = -5, -60    ;身体中部的大概位置
shadowoffset = 0     ;人物阴影的纵向偏移量
draw.offset = 0,0    ;人物图像的纵向偏移量 (x, y). 推荐 0,0

[Velocity]
walk.fwd  = 5      ;前进速度
walk.back = -5     ;后退速度
run.fwd  = 10, 0    ;跑步速度 (x, y)
run.back = -4.5,-3.8 ;后跃速度 (x, y)
jump.neu = 0,-10.5    ;跳速度 (x, y)
jump.back = -2.55    ;后跳速度 (x, y)
jump.fwd = 4.5       ;前跳速度 (x, y)
runjump.back = -2.55,-8.1 ;跑跳速度 (可选)
runjump.fwd = 4,-8.1      ;.
airjump.neu = 0,-8.1      ;.
airjump.back = -4      ;二段跳速度 (可选)
airjump.fwd = 2.5         ;.
air.gethit.groundrecover = -.15,-3.5  ;地面受身速度 (x, y) **MUGEN 1.0专用**
air.gethit.airrecover.mul = .5,.2     ;空中受身速度系数 (x, y) **MUGEN 1.0专用**
air.gethit.airrecover.add = 0,-4.5    ;空中受身速度偏移 (x, y) **MUGEN 1.0专用**
air.gethit.airrecover.back = -1       ;按后按键时空中受身速度增加量 **MUGEN 1.0专用**
air.gethit.airrecover.fwd = 0         ;按前按键时空中受身速度增加量 **MUGEN 1.0专用**
air.gethit.airrecover.up = -2         ;按上按键时空中受身速度增加量 **MUGEN 1.0专用**
air.gethit.airrecover.down = 1.5      ;按下按键时空中受身速度增加量 **MUGEN 1.0专用**

[Movement]
airjump.num = 1       ;空中跳跃次数 (可选)
airjump.height = 35   ;空中跳跃时离地最小距离 (可选)
yaccel = .55          ;重力加速度
stand.friction = .85  ;站立时摩擦系数
crouch.friction = .82 ;下蹲时摩擦系数
stand.friction.threshold = 2          ;如果人物站立时速度小于这个数值，停止人物移动 **MUGEN 1.0专用**
crouch.friction.threshold = .05       ;如果人物下蹲时速度小于这个数值，停止人物移动 **MUGEN 1.0专用**
air.gethit.groundlevel = 25           ;当人物的Y坐标大于这个数值时，人物落地 **MUGEN 1.0专用**
air.gethit.groundrecover.ground.threshold = -20 ;当人物的Y坐标小于这个数值时，人物可以受身 **MUGEN 1.0专用**
air.gethit.groundrecover.groundlevel = 10   ;当人物的Y坐标小于这个数值时，人物可以受身落地 **MUGEN 1.0专用**
air.gethit.airrecover.threshold = -1  ;当人物的纵向速度大于这个数值时，人物可以受身 **MUGEN 1.0专用**
air.gethit.airrecover.yaccel = .35    ;人物受身时重力加速度 **MUGEN 1.0专用**
air.gethit.trip.groundlevel = 15      ;当人物在被绊倒的state里，Y坐标大于这个数值时，人物落地 **MUGEN 1.0专用**
down.bounce.offset = 0, 20            ;人物弹地时的坐标偏移量 (x, y) **MUGEN 1.0专用**
down.bounce.yaccel = .4               ;人物弹地时的重力加速度 **MUGEN 1.0专用**
down.bounce.groundlevel = 12          ;在人物弹地时，当人物的Y坐标大于这个数值时，人物落地 **MUGEN 1.0专用**
down.friction.threshold = .05         ;如果人物倒地时速度小于这个数值，停止人物移动 **MUGEN 1.0专用**

;默认语言下的胜利台词 (optional)  **MUGEN 1.0专用**
;如果包括这一段，默认语言必须为英语


;---------------------------------------------------------------------------
; 变量表:
; 这是功夫人用的变量列表。
; 记录下你用的变量可以减少你的工作量。
; var(1)  - 检测可否取消 (每帧更新)
; var(3)  - 脱离开关
; var(6)  - 2600连击数 
; var(7)  - 1450参数
; var(8)  - Impact第一击参数
; var(9)  - shoot修正
; var(10)  - projhit1606
; var(11)  - projhit17022
; var(12) - 记录连击数P-striker
; var(13) - 记录连击数
; var(14) - 记录连击数2
; var(15) - 受击数
; var(17) - 11p当身杀伤力up
; var(20) - AI连段用
; var(21) - AI连段用2
; var(22) - 站C标志
; var(23) - 26150地火燃烧次数
; var(30) - 被拉入p2前记录血量
; var(40) - 1胜开关
; var(44) - 加快写字的开关
; var(45) - Perfect World点数

; fvar(30) - GT记录


;前闪
[Statedef 100]
type    = S
physics = N
ctrl = 0
anim = 100

[State -2, Voice]
type = PlaySnd
trigger1 = Time = 0
value = 100, 0
channel = 0

[State -2, VelSet]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0

[State -2, PosAdd]
type = PosAdd
trigger1 = time = 11
x = 150

[State -2, Width]
type = Width
trigger1 = Time >= 11
edge = 0,16
player = 0,16

[State 100, Changestate]
type = ChangeState
trigger1 = animtime = 0
value = 101
ctrl = 0


[Statedef 101]
type    = S
physics = S
ctrl = 1
anim = 101

[State -2, NotHitBy]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 5

[State -2, ]
type = PosSet
trigger1 = Time = 0
y = 0

[State -2, ]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0

[State 0, CtrlSet]
type = CtrlSet
trigger1 = time >= 3
value = 1

[State -2, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;----------------------------------------------------------------------------
;后闪
;前前
[Statedef 105]
type    = S
physics = N
ctrl = 0
anim = 100

[State -2, Voice]
type = PlaySnd
trigger1 = Time = 0
value = 100, 0
channel = 0


[State -2, VelSet]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0

[State -2, PosAdd]
type = PosAdd
trigger1 = time = 11
x = -150

[State -2, Width]
type = Width
trigger1 = Time >= 11
player = 0,16

[State 100, Changestate]
type = ChangeState
trigger1 = Time >= 11
value = 106
ctrl = 0

[Statedef 106]
type    = S
physics = S
ctrl = 1
anim = 101

[State -2, NotHitBy]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 5

[State -2, turn]
type = turn
trigger1 = time = 2
trigger1 = (Facing = PlayerID(Var(45)),Facing)

[State -2, ]
type = PosSet
trigger1 = Time = 0
y = 0

[State -2, ]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0

[State 0, CtrlSet]
type = CtrlSet
trigger1 = time >= 3
value = 1

[State -2, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; 时间到判负
; CNS难度：基本
[Statedef 170]
type = S
ctrl = 0
anim = 170
velset = 0,0

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; 胜利后姿势判定
; CNS难度：基本
[Statedef 180]
type = S
anim = 11



[State 0, ChangeState]
type = ChangeState
trigger1 = matchover
trigger1 = var(51) > 0
value = 182

[State 180, 1]
type = ChangeState
trigger1 = var(51) = 0
value = 181
;---------------------------------------------------------------------------
; 胜利姿势1
; CNS难度：基本
[Statedef 181]
type = S
ctrl = 0
anim = 181
velset = 0,0

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 181, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S181,0

[State 181, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S1200,11

[Statedef 182]
type = S
ctrl = 0
anim = 182
velset = 0,0

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = time < 280
flag = roundnotover

[State 181, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S182,0
;---------------------------------------------------------------------------
; 开场
; CNS难度：基本
[Statedef 191];-----------| 僀儞僩儘乮慜敿乯 |-------------------------|
type 	= S
ctrl 	= 0
anim 	= 190
velset 	= 0,0

[State 191, 僎乕僕壛嶼]
type 	= powerset
trigger1 = time = 1
value 	= 1500
persistent = 0

[State 191, 僗僥乕僩曄峏]
type 	= ChangeState
trigger1 = RoundState = 1
value 	= 192


[Statedef 192];-----------| 僀儞僩儘乮屻敿乯 |-------------------------|
type 	= S
ctrl 	= 0
anim 	= 191
velset 	= 0, 0

[State 192, 摿庩岠壥]
type 	= AssertSpecial
trigger1 = 1
flag 	= Intro

[State 192, 儃僀僗]
Type 	= PlaySnd
trigger1 = AnimElem = 2
Value 	= s192, 0
channel 	= 0

[State 192, 僿儖僷乕屇傃弌偟]
type 	= Helper
trigger1 = animelem = 2
pos 		= 50, 0
postype 	= p1
facing 	= 1
stateno 	= 10191
ownpal 	= 1

[State 192, 僿儖僷乕屇傃弌偟]
type 	= Helper
trigger1 = animelem = 2
pos 		= -50, 0
postype 	= p1
facing 	= 1
stateno 	= 10192
ownpal 	= 1

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 192
ID = 192
pos = 0,0
postype = p1  ;p2,front,back,left,right
bindtime = 1
removetime = -2
pausemovetime = 0
scale = 0.5,0.5
sprpriority = -2
[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 193
ID = 192
pos = 0,0
postype = p1  ;p2,front,back,left,right
bindtime = 1
removetime = -2
pausemovetime = 0
scale = 0.5,0.5
sprpriority = -1

[State 192, 僗僥乕僩曄峏]
type 	= ChangeState
trigger1 = AnimTime = 0
value 	= 0
;---------------------------------------------------------------------------
; 挑拨
; CNS难度：初级
[Statedef 195]
type = S
ctrl = 0
anim = 195
velset = 0,0
movetype = I
physics = S
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S850,0


[State 195, 1]
type = CtrlSet
trigger1 = Time = 40
value = 1

[State 195, 2]
type = ChangeState
trigger1 = time >= 60
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; 站A
; CNS难度：初级
[Statedef 200]
type    = S                      ;状态: S-站立, C-蹲, A-空中, L-倒地
movetype= A                      ;招式种类: A-攻击, I-非攻击, H-受击
physics = S                      ;物理: S-站立, C-蹲, A-空中
juggle  = 1                      ;增加的juggle点数
;常用的控制器:
velset = 0,0                     ;设定速度 (x,y) (不写这行则不改变速度)
ctrl = 0                        ;设定可控与否 (不写这行则不改变ctrl)
anim = 200                       ;改变动作 (不写这行则不改变anim)
poweradd = 25                    ;增加气 (不写这行则不增加气)
sprpriority = 2                  ;设定p1的贴图优先度到2 (在前面)

[State 200, 1]
type = HitDef
trigger1 = AnimElem = 2
attr = S, NA                     ;Hitdef属性： 站立，普通攻击
damage = ceil(10 *ifelse(var(13)>30,0.5,1)), 5                   ;招式造成的伤害, 防御伤害
animtype = Light                 ;动作种类: Light-轻, Medium-中, Heavy-重, Back-后仰 (默认: Light)
guardflag = MA                   ;能被什么状态的敌人防御
hitflag = MAF                    ;能击中什么状态的敌人
priority = 3, Hit                ;攻击优先度: 0 (最低) to 7 (最高), 4 默认，相杀式的处理：Hit-可以击中非dodge情况的敌方/Miss-我方攻击一定miss/Dodge-一定躲避敌方攻击 (默认: Hit)
pausetime = 6, 8                 ;攻击者暂停的时间, 对手在hitshake的时间
sparkno = -1                      ;火花的动作号 (默认: 在上面设置的动作好)
sparkxy = -10, -76               ;火花相对于p2的X坐标偏移量，火花相对于p1的Y坐标偏移量
hitsound = s1, 0                  ;击中时播放的声音
guardsound = s2, 0                ;被防御时播放的声音
guard.slidetime = 2
ground.type = High               ;种类: High-上段, Low-下段, Trip-绊倒 (默认: Normal)
ground.slidetime = 10             ;对方向后滑的时间
ground.hittime  = 20             ;对方在被击中状态的时间
ground.velocity = -0.5             ;对方被向后推的速度
airguard.velocity = -1.5,-0.8     ;空中防御的速度 (默认: (air.xvel*1.5, air.yvel/2))
air.type = High                  ;空中击中的种类: High-上段, Low-下段, Trip-绊倒 (默认: 和ground.type一样)
air.velocity = -0.1,-2           ;空中击中时对方被向后推的横向速度, 空中击中时对方被向后推的纵向速度
air.hittime = 15                 ;空中击中对方在被击中状态的时间、
getpower = 50,50
fall.recovertime = 40      

[State 200, 2]
type = PlaySnd
trigger1 = Time = 1
value = s0, 0

;---------打击火花------------
[State 700, 轻击]
type = Explod
trigger1 = movehit = 1
anim = 10000
facing = -1
postype = p2
pos = -5,-75
random = 10,10
sprpriority = 3
ownpal = 1
scale = .4,.4
pausemovetime = 73640
supermovetime = 73640
supermove = 1
bindtime = 1
persistent = 0
ignorehitpause = 1
;------------------------
[State 0, CtrlSet]
type = CtrlSet
trigger1 = time = 4
value = 1

[State 200, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; 站B
[Statedef 211]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 100
ctrl = 0
velset = 0,0
anim = 211
sprpriority = -1

[State 211, 1]
type = PlaySnd
trigger1 = Time = 2
value = s210, 0

;---------cancel-------------
[State 0, CtrlSet]
type = CtrlSet
trigger1 = time > 7
value = 1

;----------------------------

[State 211, 2]
type = HitDef
trigger1 = AnimElem = 2
attr = S, NA                     ;Hitdef属性： 站立，普通攻击
damage = 33, 7                   ;招式造成的伤害, 防御伤害
animtype = Medium                 ;动作种类: Light-轻, Medium-中, Heavy-重, Back-后仰 (默认: Light)
guardflag = MA                   ;能被什么状态的敌人防御
hitflag = MAF                    ;能击中什么状态的敌人
priority = 4, Hit                ;攻击优先度: 0 (最低) to 7 (最高), 4 默认，相杀式的处理：Hit-可以击中非dodge情况的敌方/Miss-我方攻击一定miss/Dodge-一定躲避敌方攻击 (默认: Hit)
pausetime = 8, 8                 ;攻击者暂停的时间, 对手在hitshake的时间
sparkno = -1                      ;火花的动作号 (默认: 在上面设置的动作好)
sparkxy = -10, -76               ;火花相对于p2的X坐标偏移量，火花相对于p1的Y坐标偏移量
hitsound = s1, 1                  ;击中时播放的声音
guardsound = s0, 0                ;被防御时播放的声音
guard.slidetime = 4
ground.type = High               ;种类: High-上段, Low-下段, Trip-绊倒 (默认: Normal)
ground.slidetime = 10             ;对方向后滑的时间
ground.hittime  = 25             ;对方在被击中状态的时间
ground.velocity = -1.2             ;对方被向后推的速度
airguard.velocity = -1.5,-0.8     ;空中防御的速度 (默认: (air.xvel*1.5, air.yvel/2))
air.type = High                  ;空中击中的种类: High-上段, Low-下段, Trip-绊倒 (默认: 和ground.type一样)
air.velocity = -0.5,-2           ;空中击中时对方被向后推的横向速度, 空中击中时对方被向后推的纵向速度
air.hittime = 20                 ;空中击中对方在被击中状态的时间
getpower = 20,20
fall.recovertime = 40      


;---------打击火花------------
[State 700, 轻击]
type = Explod
trigger1 = movehit =1
anim = 10000+random%2
facing = -1
postype = p2
pos = -5,-52
sprpriority = 3
ownpal = 1
scale = .4,.4
pausemovetime = 73640
supermovetime = 73640
supermove = 1
bindtime = 1
persistent = 0
ignorehitpause = 1
;------------------------
[State 211, 4]
type = SprPriority
trigger1 = AnimElem = 5
value = 2

[State 211, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; 站C
; CNS难度：初级
[Statedef 230]
type    = S                      ;状态: S-站立, C-蹲, A-空中, L-倒地
movetype= A                      ;招式种类: A-攻击, I-非攻击, H-受击
physics = S                      ;物理: S-站立, C-蹲, A-空中
juggle  = 4                      ;增加的juggle点数
;常用的控制器:
velset = 0,0                     ;设定速度 (x,y) (不写这行则不改变速度)
ctrl = 0                        ;设定可控与否 (不写这行则不改变ctrl)
anim = 230                       ;改变动作 (不写这行则不改变anim)
poweradd = 25                    ;增加气 (不写这行则不增加气)
sprpriority = 2                  ;设定p1的贴图优先度到2 (在前面)

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 1
v =  22    
value = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 10

[State 230, Width]
type = Width
trigger1 = AnimElemTime(4) >= 0 && AnimElemTime(13) < 0
value = 5,0

[State 230, 1]
type = HitDef
trigger1 = animelemtime(3) >= 0
trigger1 = hitcount < 1
trigger1 = !moveguarded
attr = , SA                     ;Hitdef属性： 站立，普通攻击
damage = 40, 15                   ;招式造成的伤害, 防御伤害
animtype = up                 ;动作种类: Light-轻, Medium-中, Heavy-重, Back-后仰 (默认: Light)
guardflag = MA                   ;能被什么状态的敌人防御
hitflag = MAF                    ;能击中什么状态的敌人
priority = 3, Hit                ;攻击优先度: 0 (最低) to 7 (最高), 4 默认，相杀式的处理：Hit-可以击中非dodge情况的敌方/Miss-我方攻击一定miss/Dodge-一定躲避敌方攻击 (默认: Hit)
pausetime = 8, 13                 ;攻击者暂停的时间, 对手在hitshake的时间
sparkno = s10226                      ;火花的动作号 (默认: 在上面设置的动作好)
sparkxy = 0, -76               ;火花相对于p2的X坐标偏移量，火花相对于p1的Y坐标偏移量
hitsound = s1, 4                  ;击中时播放的声音
guardsound = s2,0                    ;被防御时播放的声音
guard.sparkno = -1
guard.slidetime = 2
ground.type = low               ;种类: High-上段, Low-下段, Trip-绊倒 (默认: Normal)
ground.slidetime = 9             ;对方向后滑的时间
ground.hittime  = 25             ;对方在被击中状态的时间
ground.velocity = -3.1,-4.4             ;对方被向后推的速度
airguard.velocity = -1.5,-0.8     ;空中防御的速度 (默认: (air.xvel*1.5, air.yvel/2))
air.type = High                  ;空中击中的种类: High-上段, Low-下段, Trip-绊倒 (默认: 和ground.type一样)
air.velocity = -2.6,-3.3           ;空中击中时对方被向后推的横向速度, 空中击中时对方被向后推的纵向速度
air.hittime = 40                 ;空中击中对方在被击中状态的时间、
fall.recovertime = 90      
fall = 1
getpower = 70,50


;---------打击火花------------
[State 700, 轻击]
type = Explod
trigger1 = movehit = 1
anim = 10002
facing = -1
postype = p2
pos = -5,-66
sprpriority = 3
ownpal = 1
scale = .5,.5
pausemovetime = 73640
supermovetime = 73640
supermove = 1
bindtime = 1
persistent = 0
ignorehitpause = 1
;------------------------
[State 230, 2]
type = PlaySnd
trigger1 = Time = 1
value = s0, 2

[State 0, NotHitBy]
type = NotHitBy
trigger1 = Palno >= 7
value = SCA
time = 1
ignorehitpause = 1

[State 0, CtrlSet]
type = CtrlSet
trigger1 = time >= 14
value = 1

[State 230, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; 前C
; 
[Statedef 231]
type    = S                      ;状态: S-站立, C-蹲, A-空中, L-倒地
movetype= A                      ;招式种类: A-攻击, I-非攻击, H-受击
physics = S                      ;物理: S-站立, C-蹲, A-空中
juggle  = 4                      ;增加的juggle点数
;常用的控制器:
velset = 0,0                     ;设定速度 (x,y) (不写这行则不改变速度)
ctrl = 0                        ;设定可控与否 (不写这行则不改变ctrl)
anim = 231                       ;改变动作 (不写这行则不改变anim)
poweradd = 25                    ;增加气 (不写这行则不增加气)
sprpriority = 2                  ;设定p1的贴图优先度到2 (在前面)

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 1
v =  22    
value = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = time<= 12 + ifelse(Palno>=7,32,0)  + random%6
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = time < 20
x = 1.2

[State 230, Width]
type = Width
trigger1 = AnimElemTime(4) >= 0 && AnimElemTime(13) < 0
value = 5,0

[State 230, 1]
type = HitDef
trigger1 = !moveguarded;animelemtime(3) >= 0
trigger1 = hitcount < 1
attr = , NA                  
damage = 40, 3             
priority = 5,Hit
getpower = 40,50
givepower = 40,0 		
animtype = hard   
hitflag = MAF              
guardflag = H                                         
pausetime = 8, 13               
sparkno = -1;s10225  
guard.sparkno = S8400               
sparkxy = 0, -50               
hitsound = s1,2                  
guardsound = s2,0     
guard.sparkno = -1          
ground.type = high              
ground.slidetime = 5             
ground.hittime  = 20  
guard.hittime = 1
guard.slidetime = 1
guard.ctrltime = 2           
ground.velocity = -8.9,-2.4             
air.type = low                  
air.velocity = -8.6,-2.3           
air.hittime = 40                 
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2facing = 1
;yaccel = .50*const(size.yscale)
fall.recovertime = 90      
fall = 1
;getpower = 50,20
id=230
;p2stateno = 240
;persistent = 2

[State 0, TargetState]
type = TargetState
triggerall = NumTarget;()
trigger1 = movehit=1
value =240
ID = 230
;ignorehitpause = 
;


;---------打击火花------------
[State 700, 轻击]
type = Explod
trigger1 = movehit = 1
anim = 10002
facing = -1
postype = p2
pos = -5,-66
sprpriority = 3
ownpal = 1
scale = .5,.5
pausemovetime = 73640
supermovetime = 73640
supermove = 1
bindtime = 1
persistent = 0
ignorehitpause = 1
;------------------------
[State 230, 2]
type = PlaySnd
trigger1 = Time = 1
value = s220, 0

[State 0, CtrlSet]
type = CtrlSet
trigger1 = time = 30
value = 1

[State 230, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;对手被击飞
[Statedef 240]
type	 = A
movetype = H
physics	 = N

[State 0, ChangeAnim2]
type = ChangeAnim2
trigger1 = time = 0
value = 5035

[State 240 ]
type	= velset
trigger1 = Facing = enemynear,Facing
x = 12
y = -2
persistent = 0

[State 240 ]
type	= velset
trigger1 =Facing != enemynear,Facing
x = -12
y = -2

[State 240]
Type = VelAdd
trigger1 = time > 0
y = 0.4

[State 240, ]
Type = ChangeState
triggerall = Pos y < -15
trigger1 = BackEdgeBodyDist <= 20
trigger2 = FrontEdgeBodyDist <= 20
value = 24111

[State 240, ]
Type 	= SelfState
trigger1 = Vel y > 0 && Pos y >= 0
value 	= 5100
;撞墙
;----------------
[Statedef  24111]
type 	= A
movetype = H
physics = N
velset 	= 0, 0
anim    = 5030

[State 0, ChangeAnim2]
type = ChangeAnim2
trigger1 = time = 0
value = 232

[State 0, LifeAdd]
type = LifeAdd
trigger1 = time = 0
value = -40
kill = 1

[State  241, ]
type 	= Width
trigger1 = 1
edge 	= 2, 0
player 	= 2, 0

[State  241, ]
type 	= ScreenBound
trigger1 = 1
value 	= 1
MoveCamera = 0, 0

[State  241, ]
Type = PlaySnd
trigger1 = time = 1
Value = F5, 4
channel = 1

[State  241, ]
type 	= envshake
trigger1 = time = 0
time = 12
freq = 80
ampl = 10
phase = 10

[State  241, ]
Type = ChangeState
trigger1 = Vel y > 0 && Pos y >= 0
value = 242

[State  241, ]
Type = VelAdd
trigger1 = prevstateno = 715 && time >= 10
trigger2 = prevstateno != 715 && time >= 45
y = 0.35
;-------------------------------------
[Statedef 242]
type = S
movetype = H
physics = N
velset 	= 0, 0

[State 242, ]
Type = ChangeAnim2
trigger1 = time = 0
value = 5035

[State 242, ]
type 	= Width
trigger1 = 1
edge 	= 2, 0
player 	= 2, 0

[State 242, ]
type 	= ScreenBound
trigger1 = 1
value 	= 1
MoveCamera = 0, 0

[State 242,]
type 	= PosSet
trigger1 = Pos Y >= 0
y = 0

[State 242, ]
Type 	= ChangeState
trigger1 = Animtime = 0
value 	= 243
;------------------------------
[Statedef 243]
type = S
movetype = H
physics = N
velset 	= 0, 0

[State 243, ]
Type 	= ChangeAnim2
trigger1 = time = 0
value 	= 5110

[State 243, ]
type 	= Width
trigger1 = 1
edge 	= 2, 0
player 	= 2, 0

[State 243, ]
type 	= PosSet
trigger1 = Pos Y >= 0
y = 0

[State 243, ]
Type 	= SelfState
trigger1 = time = 5
value 	= 5110
;---------------------------------------------------------------------------
; 蹲A
[Statedef 400]
type    = C                      ;状态: S-站立, C-蹲, A-空中, L-倒地
movetype= A                      ;招式种类: A-攻击, I-非攻击, H-受击
physics = C                      ;物理: S-站立, C-蹲, A-空中
juggle  = 1                      ;增加的juggle点数
;常用的控制器:
velset = 0,0                     ;设定速度 (x,y) (不写这行则不改变速度)
ctrl = 0                        ;设定可控与否 (不写这行则不改变ctrl)
anim = 400                       ;改变动作 (不写这行则不改变anim)
poweradd = 50                    ;增加气 (不写这行则不增加气)
sprpriority = 2                  ;设定p1的贴图优先度到2 (在前面)

[State 0, CtrlSet]
type = CtrlSet
trigger1 = time = 4
value = 1

[State 400, 1]
type = HitDef
trigger1 = AnimElem = 2
attr = S, NA                     ;Hitdef属性： 站立，普通攻击
damage = 23, 5                   ;招式造成的伤害, 防御伤害
animtype = Light                 ;动作种类: Light-轻, Medium-中, Heavy-重, Back-后仰 (默认: Light)
guardflag = L                   ;能被什么状态的敌人防御
hitflag = MAF                    ;能击中什么状态的敌人
priority = 3, Hit                ;攻击优先度: 0 (最低) to 7 (最高), 4 默认，相杀式的处理：Hit-可以击中非dodge情况的敌方/Miss-我方攻击一定miss/Dodge-一定躲避敌方攻击 (默认: Hit)
pausetime = 8, 8                 ;攻击者暂停的时间, 对手在hitshake的时间
sparkno = -1                      ;火花的动作号 (默认: 在上面设置的动作好)
sparkxy = -10, -36               ;火花相对于p2的X坐标偏移量，火花相对于p1的Y坐标偏移量
hitsound = s1, 0                  ;击中时播放的声音
guardsound = s2, 0                ;被防御时播放的声音
guard.slidetime = 2
ground.type = High               ;种类: High-上段, Low-下段, Trip-绊倒 (默认: Normal)
ground.slidetime = 5             ;对方向后滑的时间
ground.hittime  = 10             ;对方在被击中状态的时间
ground.velocity = -0.5             ;对方被向后推的速度
airguard.velocity = -1.5,-0.8     ;空中防御的速度 (默认: (air.xvel*1.5, air.yvel/2))
air.type = High                  ;空中击中的种类: High-上段, Low-下段, Trip-绊倒 (默认: 和ground.type一样)
air.velocity = -0.1,-2           ;空中击中时对方被向后推的横向速度, 空中击中时对方被向后推的纵向速度
air.hittime = 15                 ;空中击中对方在被击中状态的时间、
getpower = 50,50
fall.recovertime = 40      

;---------打击火花------------
[State 700, 轻击]
type = Explod
trigger1 = movehit =1
anim = 10000
facing = -1
postype = p2
pos = -10,-36
sprpriority = 3
ownpal = 1
scale = .4,.4
pausemovetime = 73640
supermovetime = 73640
supermove = 1
bindtime = 1
persistent = 0
ignorehitpause = 1
random = 10,10
;------------------------

[State 400, 2]
type = PlaySnd
trigger1 = Time = 1
value = s0, 0

[State 400, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; 蹲B
[Statedef 410]
type    = C
movetype= A
physics = C
juggle  = 4
poweradd= 100
ctrl = 0
velset = 0,0
anim = 410
sprpriority = -1

[State 410, 1]
type = PlaySnd
trigger1 = Time = 2
value = s0, 2

[State 0, CtrlSet]
type = CtrlSet
trigger1 = time = 8
value = 1

[State 410, 2]
type = HitDef
trigger1 = AnimElem = 2
trigger2 = AnimElem = 3
trigger3 = AnimElem = 4
attr = S, NA                     ;Hitdef属性： 站立，普通攻击
damage = 28, 7                   ;招式造成的伤害, 防御伤害
animtype = Medium                 ;动作种类: Light-轻, Medium-中, Heavy-重, Back-后仰 (默认: Light)
guardflag = L                   ;能被什么状态的敌人防御
hitflag = MAF                    ;能击中什么状态的敌人
priority = 4, Hit                ;攻击优先度: 0 (最低) to 7 (最高), 4 默认，相杀式的处理：Hit-可以击中非dodge情况的敌方/Miss-我方攻击一定miss/Dodge-一定躲避敌方攻击 (默认: Hit)
pausetime = 8, 10                 ;攻击者暂停的时间, 对手在hitshake的时间
sparkno = -1                      ;火花的动作号 (默认: 在上面设置的动作好)
sparkxy = -10, -8               ;火花相对于p2的X坐标偏移量，火花相对于p1的Y坐标偏移量
hitsound = s1, 1                  ;击中时播放的声音
guardsound = s2, 0                ;被防御时播放的声音
guard.slidetime = 4
ground.type = High               ;种类: High-上段, Low-下段, Trip-绊倒 (默认: Normal)
ground.slidetime = 5             ;对方向后滑的时间
ground.hittime  = 15             ;对方在被击中状态的时间
ground.velocity = -1.2             ;对方被向后推的速度
airguard.velocity = -1.5,-0.8     ;空中防御的速度 (默认: (air.xvel*1.5, air.yvel/2))
air.type = High                  ;空中击中的种类: High-上段, Low-下段, Trip-绊倒 (默认: 和ground.type一样)
air.velocity = -0.5,-2           ;空中击中时对方被向后推的横向速度, 空中击中时对方被向后推的纵向速度
air.hittime = 15                 ;空中击中对方在被击中状态的时间
getpower = 50,50
fall.recovertime = 40      

;---------打击火花------------
[State 700, 轻击]
type = Explod
triggerall = movecontact 
trigger1 = AnimElemtime(2)  = 2
trigger2 = AnimElem = 3
trigger3 = AnimElem = 4
anim = 10002
facing = -1
postype = p2
pos = -10,-56
sprpriority = 3
ownpal = 1
scale = .4,.4
pausemovetime = 73640
supermovetime = 73640
supermove = 1
bindtime = 1
persistent = 0
ignorehitpause = 1
random = 10,10
;------------------------

[State 410, 4]
type = SprPriority
trigger1 = AnimElem = 5
value = 2

[State 410, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; 蹲C
; CNS难度：初级
[Statedef 430]
type    = C
movetype= A
physics = C
juggle  = 5
poweradd= 100
ctrl = 0
anim = 430
sprpriority = 2

[State 0, CtrlSet]
type = CtrlSet
trigger1 = time = 14
value = 1

[State 430, 1]
type = PlaySnd
trigger1 = Time = 5
value = s210, 0

[State 430, 2]
type = HitDef
trigger1 = AnimElem = 5
attr = C, NA
damage    = 68
animtype  = Heavy
hitflag = MAFD
guardflag = L
pausetime = 8,12
sparkno = -1
sparkxy = -10,-8
hitsound   = S1,2
guardsound = S2,0
ground.type = Low
ground.slidetime = 6
ground.hittime  = 26
ground.velocity = -5
air.velocity = -2,-3
down.velocity = -5,0
down.hittime = 22
getpower = 50,50
fall.recovertime = 40      

;---------打击火花------------
[State 700, 轻击]
type = Explod
trigger1 = movehit = 1
anim = 10003
facing = -1
postype = p2
pos = -10,-25
sprpriority = 3
ownpal = 1
scale = .4,.4
pausemovetime = 73640
supermovetime = 73640
supermove = 1
bindtime = 1
persistent = 0
ignorehitpause = 1
random = 10,10
;------------------------
[State 430, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------

;---------------------------------------------------------------------------
; 跳A
; CNS难度：初级
[Statedef 600]
type    = A
movetype= A
physics = A
juggle  = 2
poweradd= 5
ctrl = 0
anim = 600
sprpriority = 2

[State 0, CtrlSet]
type = CtrlSet
trigger1 = time = 5
value = 1

[State 600, 1]
type = PlaySnd
trigger1 = Time = 1
value = S0, 0

[State 600, 2]
type = HitDef
trigger1 = AnimElem = 2
attr = A, NA
damage    = 15
guardflag = HA
priority = 3
pausetime = 7,8
sparkno = -1
sparkxy = -10,-58
hitsound   = S1,0
guardsound = S2,0
ground.type = High
ground.slidetime = 5
ground.hittime  = 8
ground.velocity = -4
air.velocity = -1.3,-1.5
air.hittime = 14
fall.recovertime = 20
getpower = 50,50
fall.recovertime = 40      
fall = 1
;---------打击火花------------
[State 700, 轻击]
type = Explod
trigger1 = movehit =1
anim = 10000
facing = -1
postype = p2
pos = -10,-58
sprpriority = 3
ownpal = 1
scale = .4,.4
pausemovetime = 73640
supermovetime = 73640
supermove = 1
bindtime = 1
persistent = 0
ignorehitpause = 1
random = 10,10
;------------------------

[State 600, 3]
type = CtrlSet
trigger1 = Time = 17
value = 1

[State 600, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 51
ctrl = 1
;---------------------------------------------------------------------------
; 跳B
; CNS难度：初级
[Statedef 610]
type    = A
movetype= A
physics = A
juggle  = 4
poweradd= 50
ctrl = 0
anim = 610
sprpriority = 2

[State 0, CtrlSet]
type = CtrlSet
trigger1 = time = 5
value = 1

[State 610, 2]
type = PlaySnd
trigger1 = Time = 2
value = s0, 1

[State 610, 3]
type = HitDef
trigger1 = AnimElem = 2
attr = A, NA
damage = 30
guardflag = HA
priority = 4
pausetime = 12,12
sparkno = -1
sparkxy = -10,-55
hitsound   = S1,1
guardsound = S2,0
animtype = Med
ground.type = High
ground.slidetime = 12
ground.hittime  = 23
ground.velocity = -6
air.velocity = -2,-2
air.hittime = 20
fall.recovertime = 30
getpower = 50,50
fall.recovertime = 40      
;---------打击火花------------
[State 700, 轻击]
type = Explod
trigger1 = movehit =1
anim = 10001
facing = -1
postype = p2
pos = -10,-58
sprpriority = 3
ownpal = 1
scale = .4,.4
pausemovetime = 73640
supermovetime = 73640
supermove = 1
bindtime = 1
persistent = 0
ignorehitpause = 1
random = 10,10
;------------------------

[State 440, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 51
ctrl = 1
;---------------------------------------------------------------------------
; 跳C
; CNS难度：初级
[Statedef 630]
type    = A
movetype= A
physics = A
juggle  = 3
poweradd= 60
ctrl = 0
anim = 630
sprpriority = 2

[State 0, CtrlSet]
type = CtrlSet
trigger1 = time = 11
value = 1

[State 630, 1]
type = PlaySnd
trigger1 = Time = 5
value = s220, 0

[State 630, 2]
type = HitDef
trigger1 = animelem = 2
attr = A, NA
damage = 44
guardflag = HA
priority = 3
pausetime = 8,8
sparkno = s10226
sparkxy = -5,-75
hitsound   = S1,2
guardsound = s2,0
ground.type = High
ground.slidetime = 6
ground.hittime  = 20
ground.velocity = -4
air.velocity = -2,-2
air.hittime = 40
fall.recovertime = 60
getpower = 50,50
fall.recovertime = 70      
fall = 1
;---------打击火花------------
[State 700, 轻击]
type = Explod
trigger1 = movehit =1
anim = 10003
facing = -1
postype = p2
pos = -10,-70
sprpriority = 3
ownpal = 1
scale = .5,.5
pausemovetime = 73640
supermovetime = 73640
supermove = 1
bindtime = 1
persistent = 0
ignorehitpause = 1
random = 10,10
;------------------------

[State 440, 4]
type = ChangeState
trigger1 = animTime = 0
value = 51
ctrl = 1
;---------------------------------------------------------------------------

;---------------------------------------------------------------------------
; 投-尝试
; CNS难度：中级-上级
; 投技并不难写，但是有的时候会很繁杂。（翻译这个魂淡文本也是）
; 投技的HitDef需要特殊写法。关键的两个参数是p1stateno和p2stateno。
; 如果HitDef击中了，攻击者会进入p1stateno，受击者会进入p2stateno。
; 关于p2stateno特别的地方是受击者会进入p1的cns文档里写的state。
; 无论p2是谁，他都会进入这个文档(kfm.cns)里声明的state820，直到投技结束。
; （在MUGEN里进入debug模式看p2的状态号，黄色的状态号表明在其他人物的state里。
[Statedef 800]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
poweradd = 30
ctrl = 0
anim = 800
sprpriority = 2

; 注意hitflag参数里的'-'符号，这代表只能击中不在受击状态（被击中或者防御中）。
; 这样就无法用投技去投一个已经被击中的敌人。
; priority务必设为1或2，这样不会覆盖敌方的普通攻击。
; 相杀参数务必设为miss或dodge，否则会出现毛病。
;
; 注意：有的时候（比如KOF的指令投）要求可以打中受击硬直中德敌人，但是不能打中防御硬直中的敌人
; 这时候写两个hitdef，第一个是当对方不在防御状态时触发，hitflag不带减号，第二个当对方在防御状态时触发，hitflag带减号
[State 800, 1]
type = HitDef
Trigger1 = 1;animelem = 2
attr = , NT          ;属性: 站立，普通投
hitflag = MA          ;能击中地面上非受击状态的敌人
priority = 7, dodge    ;低优先度，必须为miss或dodge
damage = 20, 0
sparkno = -1          ;没有火花
p1sprpriority = 1     ;p1的位图在p2之前
                      ;p2的sprpriority默认是0
p1facing = 1
p2facing = 1          ;强制让对方面对我方
p1stateno = 810       ;成功的话p1转到810
p2stateno = 820       ;成功的话p2转到kfm的cns里的820
guard.dist = 0        ;这样对方不能转到防御state
fall = 1              ;强制对方落地
getpower = 50,50

[State 800, 2]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; 投的过程
; 在这个state里，功夫人通过把对方绑定到合适的便宜量来做出投的效果。
; 举例来说，[State 810, Bind 1]把对方绑定到前方28像素的地方，就是功夫人伸出的手的位置。
; 务必在想放开对方之前一直用TargetBind控制器把对方绑定住。
; 这在如果对方有受击判定框（Clsn2）的时候尤其重要。
; 每当人物被击中，这个人物绑定的人物会进入下落状态，如果对方没有被绑定，就会卡在被投的位置。
; 注意对方生命减少是由TargetLifeAdd控制器做到的， 当功夫人放手时一个TargetState控制器把对方转到821里。
[Statedef 810]
type    = S
movetype= A
physics = N
anim = 810
poweradd = 0

; 在这里var(2)用来记忆投技开始时是前方向还是后方向。
; 后面根据var(2)来决定人物转向与否。
[State 810, Grab Sound]
type = PlaySnd
trigger1 = time = 0
value = 800, 0

[State 810, Throw Sound]
type = PlaySnd
trigger1 = time = 45
value = 800, 1

[State 0, Explod]
type = Explod
trigger1 = time = 14
anim = 14503
ID = 14503
pos = 2,-70
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = 46
pausemovetime = 0
scale = 0.3,0.3
sprpriority = 6
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0

[State 810, Explod]
type = Explod
trigger1 = time = 68
anim = 10001
pos = 52,-40
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 12
removetime = -2
pausemovetime = 99999
supermovetime = 99999
scale = 0.5,0.5
sprpriority = 2
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0

[State 810, Explod]
type = Explod
trigger1 = time = 0
anim = 10800
pos = 0,-48
postype = p2  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 34
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 99999
supermovetime = 99999
scale = 0.5,0.5
sprpriority = 2
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0

[State 810, Explod]
type = Explod
trigger1 = time = 10
anim = 14502
pos = 30,-66
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 34
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 99999
supermovetime = 99999
scale = 0.7,0.7
sprpriority = 2
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 812
ID = 812
pos = 0,0
postype = p1  ;p2,front,back,left,right
bindtime = 1
removetime = 60
pausemovetime = 0
scale = 0.5,0.5
sprpriority = -2

[State 0, Explod]
type = Explod
trigger1 = time = 8
anim = 14504
ID = 14504
pos = 32,-56
postype = p1  ;p2,front,back,left,right
bindtime = 1
removetime = 60
pausemovetime = 7
scale = 0.5,0.5
sprpriority = -2
ontop = 1
[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 68
value = S1,2

[State 810, Bind 1]
type = TargetBind
trigger1 = time < 68
pos = 45, 0

[State 810, Width 2-11]
type = Width
trigger1 = AnimElemTime(2) >= 0 && AnimElemTime(12) < 0
edge = 45,0

[State 0, LifeAdd]
type = LifeAdd
trigger1 = Time > 10 && time <= 50
value = 1

[State -2, TargetLifeAdd]
type = TargetLifeAdd
trigger1 = Time > 10 && time <= 50
value = -1
kill = 1

[State -2, TargetpowerAdd]
type = TargetpowerAdd
trigger1 = Time > 10 && time <= 50
value = -3
[State -2, powerAdd]
type = powerAdd
trigger1 = Time > 10 && time <= 50
value = 3+ifelse(Palno>=7,8,0)

[State 810, State End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; (对手)被投中
; （自定义的受击state）
; 在被功夫人的HitDef击中后对手会转到这个state里。
; 注意使用ChangeAnim2控制器，这样对手会读取kfm.air里的动作。
; 如果使用ChangeAnim的话，对手会读取自己的air里的动作
; 参考kfm.air里的动作820。
[Statedef 820]
type    = A
movetype= H
physics = N
velset = 0,0
anim    = 5030

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 0, PalFXWiz]
type = PalFX
trigger1 = 1
time = 1
add = 150,0,150
mul = 256,256,256
sinadd = 0,0,0,1
invertall = 0
color = 256

[State 820, LifeAdd]
type = LifeAdd
trigger1 = time = 67
value = -80
kill = 1
absolute = 1

;假设处于某种原因功夫人出了投的state，这个控制器能保证对方不被卡在这个state里。
[State 820, 2]
type = changeState
trigger1 = Time = 68
value = 821

;---------------------------------------------------------------------------
; （对手）被投中-后续状态
; （自定义的受击state）
; 在这个state里对方在空中落下直到着地。此时，SelfState控制器让对方回到自己cns的state里。
; 821,2和821,3这两个控制器让对方可以受身。
[Statedef 821]
type     = A
movetype = H
physics  = N
poweradd = 0
ctrl     = 0
sprpriority = -3
velset   = -6,-3

[State -2, ChangeAnim2]
Type = ChangeAnim
trigger1 = time = 0
value = 5030
[State -2, ChangeAnim2]
Type = ChangeAnim
trigger1 = vel y> 0 && pos y < 0
value = 5035
[State -2, ChangeAnim2]
Type = ChangeAnim
trigger1 = vel y> 0 && pos y >= 0
value = 5110

[State -2, grv]
Type = VelAdd
trigger1 = time >= 0
y = 0.5
[State 0, VelSet]
type = VelSet
trigger1 = vel y> 0 && pos y >= 0 
x = 0
y = 0

[State 1100, 5]
type = statetypeset
trigger1 = time >= 40
statetype = S
physics = S

[State -2, SelfState]
Type = SelfState
trigger1 = time > 60
value = 5110
;---------------------------
;空投
[Statedef 850]
type    = A
movetype= A
physics = A
juggle  = 0
poweradd = 30
ctrl = 0
anim = 850
sprpriority = 2

[State 800, 1]
type = HitDef
Trigger1 = time > 0
attr = S, NT          ;属性: 站立，普通投
hitflag = MAF          ;能击中地面上非受击状态的敌人
priority = 7, dodge    ;低优先度，必须为miss或dodge
damage = 20, 0
sparkno = -1          ;没有火花
p1sprpriority = 1     ;p1的位图在p2之前
                      ;p2的sprpriority默认是0
p1facing = 1
p2facing = 1          ;强制让对方面对我方
p1stateno = 851       ;成功的话p1转到810
p2stateno = 860       ;成功的话p2转到kfm的cns里的820
guard.dist = 0        ;这样对方不能转到防御state
fall = 1              ;强制对方落地
getpower = 50,50



[State 800, 2]
type = ChangeState
Trigger1 = AnimTime = 0
value = 51
ctrl = 1

;---------------------------------------------------------------------------
; 投的过程
; 在这个state里，功夫人通过把对方绑定到合适的便宜量来做出投的效果。
; 举例来说，[State 810, Bind 1]把对方绑定到前方28像素的地方，就是功夫人伸出的手的位置。
; 务必在想放开对方之前一直用TargetBind控制器把对方绑定住。
; 这在如果对方有受击判定框（Clsn2）的时候尤其重要。
; 每当人物被击中，这个人物绑定的人物会进入下落状态，如果对方没有被绑定，就会卡在被投的位置。
; 注意对方生命减少是由TargetLifeAdd控制器做到的， 当功夫人放手时一个TargetState控制器把对方转到821里。
[Statedef 851]
type    = A
movetype= A
physics = N
velset = 0,0
anim = 851
poweradd = 0

; 在这里var(2)用来记忆投技开始时是前方向还是后方向。
; 后面根据var(2)来决定人物转向与否。
[State 810, Grab Sound]
type = PlaySnd
trigger1 = time = 0
value = 800, 0

[State 810, Throw Sound]
type = PlaySnd
trigger1 = time = 45
value = 800, 1

[State 0, Explod]
type = Explod
trigger1 = time = 14
anim = 14503
ID = 14503
pos = 2,-70
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = 46
pausemovetime = 0
scale = 0.3,0.3
sprpriority = 6
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0

[State 810, Explod]
type = Explod
trigger1 = time = 0
anim = 10800
pos = 0,-48
postype = p2  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 34
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 99999
supermovetime = 99999
scale = 0.5,0.5
sprpriority = 2
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0

[State 810, Explod]
type = Explod
trigger1 = time = 10
anim = 14502
pos = 30,-66
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 34
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 99999
supermovetime = 99999
scale = 0.7,0.7
sprpriority = 2
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 812
ID = 812
pos = 0,-10
postype = p1  ;p2,front,back,left,right
bindtime = 1
removetime = 60
pausemovetime = 0
scale = 0.5,0.5
sprpriority = -2

[State 0, Explod]
type = Explod
trigger1 = time = 8
anim = 14504
ID = 14504
pos = 32,-56
postype = p1  ;p2,front,back,left,right
bindtime = 1
removetime = 60
pausemovetime = 7
scale = 0.5,0.5
sprpriority = -2
ontop = 1
[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 68
value = S1,6

[State 810, Bind 1]
type = TargetBind
trigger1 = time < 68
pos = 45, -5

[State 810, Width 2-11]
type = Width
trigger1 = AnimElemTime(2) >= 0 && AnimElemTime(12) < 0
edge = 45,0

[State 0, LifeAdd]
type = LifeAdd
trigger1 = Time > 10 && time <= 50
value = 1

[State -2, TargetLifeAdd]
type = TargetLifeAdd
trigger1 = Time > 10 && time <= 50
value = -1
kill = 1

[State -2, TargetpowerAdd]
type = TargetpowerAdd
trigger1 = Time > 10 && time <= 50
value = -3
[State -2, powerAdd]
type = powerAdd
trigger1 = Time > 10 && time <= 50
value = 3+ifelse(Palno>=7,8,0)

[State 0, Turn]
type = Turn
trigger1 = animtime = -1

[State 810, State End]
type = ChangeState
trigger1 = AnimTime = 0
value = 51
ctrl = 1

[Statedef 860]
type    = A
movetype= H
physics = N
velset = 0,0
anim    = 5030

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 0, PalFXWiz]
type = PalFX
trigger1 = 1
time = 1
add = 150,0,150
mul = 256,256,256
sinadd = 0,0,0,1
invertall = 0
color = 256

[State 820, LifeAdd]
type = LifeAdd
trigger1 = time = 67
value = -80
kill = 1
absolute = 1

;假设处于某种原因功夫人出了投的state，这个控制器能保证对方不被卡在这个state里。
[State 820, 2]
type = changeState
trigger1 = Time = 68
value = 861

[Statedef 861]
type    = A
movetype= H
physics = N
sprpriority = 8

[State 0, ChangeAnim2]
type = ChangeAnim2
trigger1 = time = 0
value = 856

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = 8
y = -6

[State 0, ChangeAnim2]
type = ChangeAnim2
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5110

[State 0, Gravity]
type = veladd
trigger1 = !((Vel y > 0) && (Pos y >= 0))
y = 0.55
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = (Vel y > 0) && (Pos y >= 0)
x = 0
y = 0

[State 0, SelfState]
type = SelfState
trigger1 = time > 65
value = 5110



;-----------------------------------------------------------
;攻性防御
[Statedef 900]
type    = S                      ;状态: S-站立, C-蹲, A-空中, L-倒地
movetype= A                      ;招式种类: A-攻击, I-非攻击, H-受击
physics = S                      ;物理: S-站立, C-蹲, A-空中
juggle  = 0                      ;增加的juggle点数
velset = 0,0                     ;设定速度 (x,y) (不写这行则不改变速度)
ctrl = 0                        ;设定可控与否 (不写这行则不改变ctrl)
anim = 900                       ;改变动作 (不写这行则不改变anim)
poweradd = 50                    ;增加气 (不写这行则不增加气)

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = random > 450
trigger1 = time = 0
value = S3000,0

[State 900, ReversalDef]
type = ReversalDef
trigger1 = Animelem = 1 
reversal.attr = SCA,AA,AT,AP           ;SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
pausetime = 25,38
sparkno = S10030
hitsound = S2,2
p1stateno = 910
ignorehitpause = 1
;persistent = 

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 11101
ID = 900
pos = 25,-65
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 0
scale = 0.5,0.5
sprpriority = 7

[State 0, CtrlSet]
type = CtrlSet
trigger1 = time > 28
value = 1

[State 900, ]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;反击
[Statedef 910]
type    = S                      ;状态: S-站立, C-蹲, A-空中, L-倒地
movetype= A                      ;招式种类: A-攻击, I-非攻击, H-受击
physics = S                      ;物理: S-站立, C-蹲, A-空中
juggle  = 1                      ;增加的juggle点数
;常用的控制器:
velset = 0,0                     ;设定速度 (x,y) (不写这行则不改变速度)
ctrl = 0                        ;设定可控与否 (不写这行则不改变ctrl)
anim = 910                       ;改变动作 (不写这行则不改变anim)
poweradd = 125                    ;增加气 (不写这行则不增加气)
sprpriority = 2                  ;设定p1的贴图优先度到2 (在前面)

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 2
value = S3000,10

[State 910, 残影]
type = Explod
trigger1 = Animelem = 3
anim = 10340
pos = 42,-78
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 15
scale = 0.5,0.5
sprpriority = 8
removeongethit = 0
ignorehitpause =1

[State 910, HitDef]
type = HitDef
trigger1 = Animelem = 2
attr = ,NA        ;SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
hitflag = MAF        ;HLAFD+-
animtype = medium          ;light,medium,hard,back,up,diagup
air.animtype = medium
damage = 100,0
pausetime = 8 ,50
sparkno = S10040
guard.sparkno = -1
sparkxy = 0,-60
hitsound = S1,2
guardsound = S2,0
air.hittime = 20
ground.slidetime = 20
ground.hittime  = 22
ground.velocity = -17,-7
guard.velocity = -17
air.velocity = -17,-7
airguard.velocity = -12, -4
p2facing = 1
;p2stateno = 912
kill = 1
guard.kill = 1
fall.kill = 1
getpower = 100,0
id = 910

[State 0, TargetState]
type = TargetState
triggerall = NumTarget;()
trigger1 = movehit
trigger1 = target,stateno != [912,921]
value = 912
ID = 910
ignorehitpause = 1
;persistent = 


[State 910, CtrlSet]
type = CtrlSet
trigger1 = Animelem = 5
value = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = time = 1
value = ,AP
time = 12+Palno*6
ignorehitpause = 1

[State 910, 2]
type = changeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;;;;;;;;;;;;;;
;反击击中
[Statedef 912]
type    = A                      ;状态: S-站立, C-蹲, A-空中, L-倒地
movetype= H                      ;招式种类: A-攻击, I-非攻击, H-受击
physics = N                      ;物理: S-站立, C-蹲, A-空中
anim = 5030
ctrl = 0                        ;设定可控与否 (不写这行则不改变ctrl)

[State -2, VelSet]
type = VelSet
trigger1 = Animelem = 1
x = -14
y = -4

[State 912, 镜头]
type = ScreenBound
trigger1 = BackEdgeBodyDist < 20
trigger2 = FrontEdgeBodyDist < 20
value = 1
movecamera = 0,1

[State 912, 撞墙]
type = ChangeState
trigger1 = BackEdgeBodyDist <= 10
trigger2 = FrontEdgeBodyDist <= 10
value = 921


;;;;;;;;;;;;;;
;弹墙
[Statedef 921]
type    = A
movetype= H
physics = N

[State 0, PlaySnd]
type = null;PlaySnd
trigger1 = time = 0
value = f5,4

[State 1028, Vel Y]
type = VelSet
trigger1 = Time = 0
y = -6

[State 1028, Vel X]
type = VelSet
trigger1 = Time = 0
x = 1.6

[State 1028, Gravity]
type = VelAdd
trigger1 = 1
y = .35

[State 1028, Anim 5050] ;自己的落下动画
type = ChangeAnim
trigger1 = Time = 0
trigger1 = !SelfAnimExist(5052)
value = 5050

[State 1028, Anim 5052] ;自己的落下动画（diagup类型）
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5052)
value = 5052

[State 1028, Anim 5060] ;落下-正常
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5050
trigger1 = SelfAnimExist(5060)
persistent = 0
value = 5060

[State 1028, Anim 5062] ;落下-diagup类型
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5052
trigger1 = SelfAnimExist(5062)
persistent = 0
value = 5062

[State 1028, Hit ground]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100

;-----------------------------------------------------------
;P-Gleipnir
[Statedef 1000]
type    = S                      ;状态: S-站立, C-蹲, A-空中, L-倒地
movetype= A                      ;招式种类: A-攻击, I-非攻击, H-受击
physics = S                      ;物理: S-站立, C-蹲, A-空中
juggle  = 1                      ;增加的juggle点数
;常用的控制器:
velset = 0,0                     ;设定速度 (x,y) (不写这行则不改变速度)
ctrl = 0                        ;设定可控与否 (不写这行则不改变ctrl)
anim = 1000                       ;改变动作 (不写这行则不改变anim)
poweradd = 70                    ;增加气 (不写这行则不增加气)
sprpriority = 2                  ;设定p1的贴图优先度到2 (在前面)

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S1325,0

[State 0, Helper]
type = Helper
trigger1 = animelem = 2
helpertype = normal ;player
name = "p-G"
ID = 1001
stateno = 1001
pos = 0,0
postype = p2    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 0
pausemovetime = 0

[State 0, CtrlSet]
type = CtrlSet
trigger1 = time > 43
value = 1

[State 1000, ChangeState]
type = ChangeState
trigger1 = time >= 44
value = 0
ctrl = 1

;P-GleipnirHelper
[Statedef 1001]
type    = S                      ;状态: S-站立, C-蹲, A-空中, L-倒地
movetype= A                      ;招式种类: A-攻击, I-非攻击, H-受击
physics = S                      ;物理: S-站立, C-蹲, A-空中
anim = 1001                      ;改变动作 (不写这行则不改变anim)

[State 1001, Projectile]
type = Projectile
trigger1 = time = 0
ProjID = -1
projanim = 1002
projhitanim = -1
projremanim = -1
projcancelanim = -1
projscale = 1,1   ;缩放
projremove = 1
projremovetime = -1
velocity = 15,0
remvelocity = 0,0
accel = 0,0
velmul = 1
projhits = 1
projpriority = 1
projsprpriority = 3
projedgebound = 40
projstagebound = 40
offset = 0,0		;位置
postype = p2         ;p2,front,back,left,right
projshadow = 0,0,0
supermovetime = 0
pausemovetime = 0
; HitDef
attr = S, NA                     ;Hitdef属性： 站立，普通攻击
damage = 35, 7                   ;招式造成的伤害, 防御伤害
animtype = Medium                 ;动作种类: Light-轻, Medium-中, Heavy-重, Back-后仰 (默认: Light)
guardflag = MA                   ;能被什么状态的敌人防御
hitflag = MAF                    ;能击中什么状态的敌人
priority = 4, Hit                ;攻击优先度: 0 (最低) to 7 (最高), 4 默认，相杀式的处理：Hit-可以击中非dodge情况的敌方/Miss-我方攻击一定miss/Dodge-一定躲避敌方攻击 (默认: Hit)
pausetime = 8, 15                 ;攻击者暂停的时间, 对手在hitshake的时间
sparkno = -1                      ;火花的动作号 (默认: 在上面设置的动作好)
sparkxy = -10, -76               ;火花相对于p2的X坐标偏移量，火花相对于p1的Y坐标偏移量
hitsound = s1, 2                  ;击中时播放的声音
guardsound = s2, 0                ;被防御时播放的声音
guard.slidetime = 4
ground.type = High               ;种类: High-上段, Low-下段, Trip-绊倒 (默认: Normal)
ground.slidetime = 10             ;对方向后滑的时间
ground.hittime  = 25             ;对方在被击中状态的时间
ground.velocity = -1.2             ;对方被向后推的速度
airguard.velocity = -1.5,-0.8     ;空中防御的速度 (默认: (air.xvel*1.5, air.yvel/2))
air.type = High                  ;空中击中的种类: High-上段, Low-下段, Trip-绊倒 (默认: 和ground.type一样)
air.velocity = -0.5,-2           ;空中击中时对方被向后推的横向速度, 空中击中时对方被向后推的纵向速度
air.hittime = 20                 ;空中击中对方在被击中状态的时间
getpower = 50,50
fall.recovertime = 40
p2stateno = 1003

[State 0, DestroySelf]
type = DestroySelf
trigger1 = p2stateno != 1003 && time >= 237


[Statedef 1003]
type    = S                      ;状态: S-站立, C-蹲, A-空中, L-倒地
movetype= H                      ;招式种类: A-攻击, I-非攻击, H-受击
physics = N                      ;物理: S-站立, C-蹲, A-空中
velset = 0,0 

[State 0, ChangeAnim2]
type = ChangeAnim2
trigger1 = TIME =1
value = 1004

[State 0, PosAdd]
type = PosAdd
trigger1 = gametime %2 = 0
x = 2
[State 0, PosAdd]
type = PosAdd
trigger1 = gametime %2 = 1
x = -2

[State 0, SelfState]
type = SelfState
trigger1 = time >240
value = 5050
;-----------------------------------------------------------
;P-Flasher
[Statedef 1030]
type    = S                      ;状态: S-站立, C-蹲, A-空中, L-倒地
movetype= A                      ;招式种类: A-攻击, I-非攻击, H-受击
physics = S                      ;物理: S-站立, C-蹲, A-空中
juggle  = 1                      ;增加的juggle点数
anim = 1030                       ;改变动作 (不写这行则不改变anim)
poweradd = 70                    ;增加气 (不写这行则不增加气)
sprpriority = 2                  ;设定p1的贴图优先度到2 (在前面)
ctrl = 0

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 4
value = s1400,0

[State 0, Helper]
type = Helper
trigger1 = palno >= 7
trigger1 = animelem = 2
helpertype = normal ;player
name = "flash"
ID = 1035
stateno = 1035
pos = 30, -45
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
[State 0, Helper]
type = Helper
trigger1 = animelem = 2
helpertype = normal ;player
name = "flash"
ID = 1036
stateno = 1036
pos = 30, -45
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
[State 0, Helper]
type = Helper
trigger1 = palno >= 7
trigger1 = animelem = 2
helpertype = normal ;player
name = "flash"
ID = 1035
stateno = 1037
pos = 30, -45
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0


[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;-----------------------------------------------------------
;P-AA
[Statedef 1050]
type    = A                      ;状态: S-站立, C-蹲, A-空中, L-倒地
movetype= A                      ;招式种类: A-攻击, I-非攻击, H-受击
physics = A                      ;物理: S-站立, C-蹲, A-空中
juggle  = 1                      ;增加的juggle点数
;常用的控制器:
velset = 0,0                     ;设定速度 (x,y) (不写这行则不改变速度)
ctrl = 0                        ;设定可控与否 (不写这行则不改变ctrl)
anim = 1050                      ;改变动作 (不写这行则不改变anim)
poweradd = 50                    ;增加气 (不写这行则不增加气)
sprpriority = 2                  ;设定p1的贴图优先度到2 (在前面)

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S1200,0

[State 0, NotHitBy]
type = NotHitBy
trigger1 = time < 15
value = SCA
time = 1

[State 1009, VelSet]
type = VelSet
trigger1 = time = 0
x = 1
y = -1
[State 1009, Veladd]
type = Veladd
trigger1 = time = [0,10]
x = 0
y = -1.2

[State 630, 2]
type = HitDef
trigger1 = animelem = 2
trigger2 = animelem = 3
trigger3 = animelem = 4
trigger4 = animelem = 5
attr = A, NA
damage = 44,12
guardflag = MA
priority = 3
pausetime = 8,8
sparkno = s10227
sparkxy = -5,-115+ (random%14)
hitsound = S1,2
guardsound = s2,0
ground.type = High
ground.slidetime = 6
ground.hittime  = 20
ground.velocity = -4,-7
air.velocity = -3,-6
air.hittime = 40
fall.recovertime = 60
getpower = 18,5
fall.recovertime = 70      
fall = 1
;------------------------
;---------打击火花------------
[State 700, 轻击]
type = Explod
triggerall = stateno = 1050
trigger1 = movehit = 1
anim = 10002
facing = -1
postype = p1
pos = 61,-144
sprpriority = 3
ownpal = 1
scale = .5,.5
pausemovetime = 73640
supermovetime = 73640
supermove = 1
bindtime = 1
persistent = 0
ignorehitpause = 1
random = 10,10
;------------------------

[State 0, CtrlSet]
type = CtrlSet
trigger1 = time > 20
value = 1

[State 1010, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 51
ctrl = 1
;-----------------------------------------------------------
;P-Shoot
[Statedef 1100]
type    = S                      ;状态: S-站立, C-蹲, A-空中, L-倒地
movetype= A                      ;招式种类: A-攻击, I-非攻击, H-受击
physics = S                      ;物理: S-站立, C-蹲, A-空中
juggle  = 1                      ;增加的juggle点数
;常用的控制器:
velset = 0,0                     ;设定速度 (x,y) (不写这行则不改变速度)
ctrl = 0                        ;设定可控与否 (不写这行则不改变ctrl)
anim = 1100                       ;改变动作 (不写这行则不改变anim)
poweradd = 100                    ;增加气 (不写这行则不增加气)
sprpriority = 2                  ;设定p1的贴图优先度到2 (在前面)

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S1100,0
[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 6
trigger2 = animelem = 8
value = S1100,5

[State 0, NotHitBy]
type = NotHitBy
trigger1 = time < 5
trigger2 = Palno >=7
value = SCA
time = 1
;--------------------
[State 0, d]
type = Explod
trigger1 = time = 2
anim = 1101
ID = 1101
pos = -15,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 0
scale = 0.5,0.5
sprpriority = 0
[State 0, d]
type = Explod
trigger1 = time = 2
anim = 1102
ID = 1102
pos = -15,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 0
scale = 0.5,0.5
sprpriority = 2

[State 0, d]
type = Explod
trigger1 = animelem = 3
anim = 11102
ID = 11102
pos = 70,-46
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
supermovetime = 999
pausemovetime = 999
scale = 0.5,0.5
sprpriority = 6
[State 0, d]
type = Explod
trigger1 = animelem = 5
anim = 11103
ID = 11103
pos = 65,-77
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
supermovetime = 999
pausemovetime = 999
scale = 0.5,0.5
sprpriority = 6
[State 0, d]
type = Explod
trigger1 = animelem = 7
anim = 11104
ID = 11104
pos = 55,-92
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
supermovetime = 999
pausemovetime = 999
scale = 0.5,0.5
sprpriority = 6
;----------------------------
[State 0, Projectile]
type = Projectile
trigger1 = AnimElem = 4
ProjID = 1100
projanim = 20000
projhitanim = -1
projremanim = -1
projcancelanim = -1
projscale =0.6,0.6   ;缩放
projremove = 0
projremovetime = 450
velocity = 15,0
remvelocity = 0,0
accel = 0,0
velmul = 1
projhits = 1
projpriority = 1
projsprpriority = 3
projedgebound = 40
projstagebound = 40
offset = 70,-46		;位置
postype = p1         ;p2,front,back,left,right
projshadow = 0,0,0
supermovetime = 0
pausemovetime = 0
; HitDef
attr = S, NP                     ;Hitdef属性： 站立，普通攻击
damage = ceil(90 *ifelse(var(13)>7,0.8,1) *ifelse((var(9)>=1 &&(palno<7)),0.6,0.9)), 25                   ;招式造成的伤害, 防御伤害
animtype = Medium                 ;动作种类: Light-轻, Medium-中, Heavy-重, Back-后仰 (默认: Light)
guardflag = MA                   ;能被什么状态的敌人防御
hitflag = MAF                    ;能击中什么状态的敌人
priority = 4, Hit                ;攻击优先度: 0 (最低) to 7 (最高), 4 默认，相杀式的处理：Hit-可以击中非dodge情况的敌方/Miss-我方攻击一定miss/Dodge-一定躲避敌方攻击 (默认: Hit)
pausetime = 0, 13                 ;攻击者暂停的时间, 对手在hitshake的时间
sparkno = s10210                      ;火花的动作号 (默认: 在上面设置的动作好)
sparkxy = 30, 0               ;火花相对于p2的X坐标偏移量，火花相对于p1的Y坐标偏移量
hitsound = s1, 2                  ;击中时播放的声音
guardsound = s2, 0                ;被防御时播放的声音
guard.slidetime = 4
ground.type = low               ;种类: High-上段, Low-下段, Trip-绊倒 (默认: Normal)
ground.slidetime = 5             ;对方向后滑的时间
ground.hittime  = 20             ;对方在被击中状态的时间
ground.velocity = -3.1,-4.4             ;对方被向后推的速度
airguard.velocity = -1.5,-0.8     ;空中防御的速度 (默认: (air.xvel*1.5, air.yvel/2))
air.type = High                  ;空中击中的种类: High-上段, Low-下段, Trip-绊倒 (默认: 和ground.type一样)
air.velocity = -2.6,-3.3           ;空中击中时对方被向后推的横向速度, 空中击中时对方被向后推的纵向速度
air.hittime = 40                 ;空中击中对方在被击中状态的时间、
fall.recovertime = 90      
fall = 1
getpower = 50,50
fall.recovertime = 40
id = 1100
[State 0, Projectile]
type = Projectile
trigger1 = AnimElem = 6
ProjID = 1100
projanim = 20001
projhitanim = -1
projremanim = -1
projcancelanim = -1
projscale = 0.6,0.6   ;缩放
projremove = 0
projremovetime = 450
velocity = 14.48,-3.0
remvelocity = 0,0
accel = 0,0
velmul = 1
projhits = 1
projpriority = 1
projsprpriority = 3
projedgebound = 40
projstagebound = 40
offset = 65,-77		;位置
postype = p1         ;p2,front,back,left,right
projshadow = 0,0,0
supermovetime = 0
pausemovetime = 0
; HitDef
attr = S, NA                     ;Hitdef属性： 站立，普通攻击
damage = ceil(85 *ifelse(var(13)>7,0.8,1)*ifelse(var(9)>=1,0.6,1)), 25                   ;招式造成的伤害, 防御伤害
animtype = Medium                 ;动作种类: Light-轻, Medium-中, Heavy-重, Back-后仰 (默认: Light)
guardflag = MA                   ;能被什么状态的敌人防御
hitflag = MAF                    ;能击中什么状态的敌人
priority = 4, Hit                ;攻击优先度: 0 (最低) to 7 (最高), 4 默认，相杀式的处理：Hit-可以击中非dodge情况的敌方/Miss-我方攻击一定miss/Dodge-一定躲避敌方攻击 (默认: Hit)
pausetime = 0, 13                 ;攻击者暂停的时间, 对手在hitshake的时间
sparkno = s10210                       ;火花的动作号 (默认: 在上面设置的动作好)
sparkxy = 30, 0               ;火花相对于p2的X坐标偏移量，火花相对于p1的Y坐标偏移量
hitsound = s1, 2                  ;击中时播放的声音
guardsound = s2, 0                ;被防御时播放的声音
guard.slidetime = 4
ground.type = low               ;种类: High-上段, Low-下段, Trip-绊倒 (默认: Normal)
ground.slidetime = 5             ;对方向后滑的时间
ground.hittime  = 20             ;对方在被击中状态的时间
ground.velocity = -3.1,-4.4             ;对方被向后推的速度
airguard.velocity = -1.5,-0.8     ;空中防御的速度 (默认: (air.xvel*1.5, air.yvel/2))
air.type = High                  ;空中击中的种类: High-上段, Low-下段, Trip-绊倒 (默认: 和ground.type一样)
air.velocity = -2.6,-3.3           ;空中击中时对方被向后推的横向速度, 空中击中时对方被向后推的纵向速度
air.hittime = 40                 ;空中击中对方在被击中状态的时间、
fall.recovertime = 90      
fall = 1
getpower = 50,50
fall.recovertime = 40
id = 1100
[State 0, Projectile]
type = Projectile
trigger1 = AnimElem = 8
ProjID = 1100
projanim = 20002
projhitanim = -1
projremanim = -1
projcancelanim = -1
projscale = 0.6,0.6   ;缩放
projremove = 0
projremovetime = 450
velocity = 12.99,-6.3
remvelocity = 0,0
accel = 0,0
velmul = 1
projhits = 1
projpriority = 1
projsprpriority = 3
projedgebound = 40
projstagebound = 40
offset = 55,-92		;位置
postype = p1         ;p2,front,back,left,right
projshadow = 0,0,0
supermovetime = 0
pausemovetime = 0
; HitDef
attr = S, NA                     ;Hitdef属性： 站立，普通攻击
damage = ceil(85 *ifelse(var(13)>7,0.8,1)*ifelse(var(9)>=1,0.6,1)), 25                   ;招式造成的伤害, 防御伤害
animtype = Medium                 ;动作种类: Light-轻, Medium-中, Heavy-重, Back-后仰 (默认: Light)
guardflag = MA                   ;能被什么状态的敌人防御
hitflag = MAF                    ;能击中什么状态的敌人
priority = 4, Hit                ;攻击优先度: 0 (最低) to 7 (最高), 4 默认，相杀式的处理：Hit-可以击中非dodge情况的敌方/Miss-我方攻击一定miss/Dodge-一定躲避敌方攻击 (默认: Hit)
pausetime = 0, 13                 ;攻击者暂停的时间, 对手在hitshake的时间
sparkno = s10210                      ;火花的动作号 (默认: 在上面设置的动作好)
sparkxy = 30, 0               ;火花相对于p2的X坐标偏移量，火花相对于p1的Y坐标偏移量
hitsound = s1, 2                  ;击中时播放的声音
guardsound = s2, 0                ;被防御时播放的声音
guard.slidetime = 4
ground.type = low               ;种类: High-上段, Low-下段, Trip-绊倒 (默认: Normal)
ground.slidetime = 5             ;对方向后滑的时间
ground.hittime  = 20             ;对方在被击中状态的时间
ground.velocity = -3.1,-4.4             ;对方被向后推的速度
airguard.velocity = -1.5,-0.8     ;空中防御的速度 (默认: (air.xvel*1.5, air.yvel/2))
air.type = High                  ;空中击中的种类: High-上段, Low-下段, Trip-绊倒 (默认: 和ground.type一样)
air.velocity = -2.6,-3.3           ;空中击中时对方被向后推的横向速度, 空中击中时对方被向后推的纵向速度
air.hittime = 40                 ;空中击中对方在被击中状态的时间、
fall.recovertime = 90      
fall = 1
getpower = 50,50
fall.recovertime = 40
id = 1100

[State 1010, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;残影-Helper


;P-Smasher
;-------------------------------------------------------
[Statedef 1200]
type    = A                      ;状态: S-站立, C-蹲, A-空中, L-倒地
movetype= A                      ;招式种类: A-攻击, I-非攻击, H-受击
physics = N                      ;物理: S-站立, C-蹲, A-空中
juggle  = 1                      ;增加的juggle点数
;常用的控制器:
velset = 0,0                     ;设定速度 (x,y) (不写这行则不改变速度)
ctrl = 0                        ;设定可控与否 (不写这行则不改变ctrl)
anim = 1200                       ;改变动作 (不写这行则不改变anim)
poweradd = -1000                   ;增加气 (不写这行则不增加气)
sprpriority = 2                  ;设定p1的贴图优先度到2 (在前面)

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 3
v = 45    
value = 1 + var(44)

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S2000,0

;-----------暗转--------------
[State 1300, SuperPause]
type = SuperPause
trigger1 = time = 1
time = 50
anim = -1
sound = S2000,1
pos = 10,-40
movetime = 0
darken = 1
p2defmul = 1
poweradd = 0
unhittable = 1
[State 0, Explod]
type = Explod
trigger1 = time = 1
anim = 10320
ID = 10320
pos = 0,-55
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = 50
pausemovetime = 9999999
supermovetime = 9999999
scale = 0.5,0.5
sprpriority = -3
ontop = 0
ownpal = 1
[State 0, Explod]
type = Explod
trigger1 = time = 1
anim = 10330
ID = 10330
pos = 0,-32
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 9999999
supermovetime = 9999999
scale = 0.5,0.5
sprpriority = 7
ontop = 0
ownpal = 1
;--------------------------------------

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 1203
ID = -1
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = 5
pausemovetime = 0
scale = 0.5,0.5
sprpriority = 6
[State 0, Explod]
type = Explod
trigger1 = animelem = 2
anim = 1204
ID = 1204
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = 31
pausemovetime = 0
scale = 0.5,0.5
sprpriority = 6
[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 5
id = 1204


[State 0, Helper]
type = Helper
trigger1 = animelem = 2
helpertype = normal ;player
name = "P-S"
ID = 1205
stateno = 1205 
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 0
pausemovetime = 0
size.xscale = 0.5
size.yscale = 0.5

[State 0, Gravity]
type = Gravity
trigger1 = time = 32

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = -2
value = 51
ctrl = 1
;Smasher-helper
[Statedef 1205]
type    = S                      ;状态: S-站立, C-蹲, A-空中, L-倒地
movetype= A                      ;招式种类: A-攻击, I-非攻击, H-受击
physics = S                      ;物理: S-站立, C-蹲, A-空中
anim = 1205

[State 0, HitDef]
type = HitDef
trigger1 = Numtarget(1205)=0;animelem = 1
attr = ,NA        ;SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
hitflag = MAF        ;HLAFD+-
guardflag = MA         ;HLA
;affectteam = E          ;B,E,F
animtype = hard          ;light,medium,hard,back,up,diagup
air.animtype = hard
damage = 150,0
pausetime = 0 ,10
guard.pausetime = 0,10
sparkno = -1
guard.sparkno = -1
sparkxy = 0,0
hitsound = S1,3
guardsound = S2,0
ground.type = High      ;Low,Trip,None
ground.slidetime = 10
ground.hittime = 10
air.hittime = 20
ground.velocity = 0,0
air.velocity = 0,0
p1getp2facing = 0
;p1stateno = 
;p2stateno = 12066
;p2getp1state = 1
;forcestand = 0
fall = 1
fall.yvelocity = -4.5
fall.recover = 1
fall.recovertime = 4
fall.damage = 35
id=1205
envshake.time = 30
envshake.freq = 170
envshake.ampl = -15
envshake.phase = -9

[State 0, TargetState]
type = TargetState
triggerall = NumTarget;()
trigger1 = movehit
trigger1 = target,stateno != 12066
value = 12066
ID = 1205
ignorehitpause = 1
;persistent = 


[State 0, DestroySelf]
type = DestroySelf
trigger1 = time >20
;Smasher(对手)
[Statedef 12066]
type    = A                      ;状态: S-站立, C-蹲, A-空中, L-倒地
movetype= H                      ;招式种类: A-攻击, I-非攻击, H-受击
physics = N                      ;物理: S-站立, C-蹲, A-空中

[State 0, Pause]
type = Pause
trigger1 = time = 0
time = 30

[State 0, ScreenBound]
type = ScreenBound
trigger1 = time >= 0
value = 1
movecamera = 0,0

[State 1302, ChangeAnim2]
type = ChangeAnim2
trigger1 = time = 0
value = 5030

[State 1302, ChangeAnim2]
type = ChangeAnim2
trigger1 = time = 1
value = 5080

[State 1302, AngleAdd]
type = AngleAdd
trigger1 = time >0
value = 60

[State 0, AngleDraw]
type = AngleDraw
trigger1 = time > 0

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = -4
y = -13

[State 0, VelAdd]
type = VelAdd
trigger1 = time > 0
y = 0.4

[State 1302, VelSet]
type = VelSet 
triggerall = time >5
trigger1 = vel y > 0 && pos y >=0
x = 0
y = 0

[State 0, SelfState]
type = SelfState
triggerall = time >5
trigger1 = vel y >= 0 && pos y >=0
value = 5110

;-----------------------------------------------------------
;P-striker
[Statedef 1300]
type    = S                      ;状态: S-站立, C-蹲, A-空中, L-倒地
movetype= A                      ;招式种类: A-攻击, I-非攻击, H-受击
physics = S                      ;物理: S-站立, C-蹲, A-空中
juggle  = 1                      ;增加的juggle点数
;常用的控制器:
velset = 0,0                     ;设定速度 (x,y) (不写这行则不改变速度)
ctrl = 0                        ;设定可控与否 (不写这行则不改变ctrl)
anim = 1300                       ;改变动作 (不写这行则不改变anim)
poweradd = 0                   ;增加气 (不写这行则不增加气)
sprpriority = 2                  ;设定p1的贴图优先度到2 (在前面)

[State 0, PowerAdd]
type = PowerAdd
trigger1 = animelem = 1
value = -1000
 
[State 0, VarAdd]
type = VarAdd
trigger1 = time = 3
v = 45    
value = 2 + var(44)

[State 1300, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S1300,0

;-----------暗转--------------
[State 1300, SuperPause]
type = SuperPause
trigger1 = time = 3
time = 35
anim = -1
sound = S2000,1
pos = 10,-40
movetime = 9
darken = 1
p2defmul = 1
poweradd = 0
unhittable = 1
[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 10320
ID = 10320
pos = 0,-55
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = 35
pausemovetime = 9999999
supermovetime = 9999999
scale = 0.5,0.5
sprpriority = -3
ontop = 0
ownpal = 1
[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 10330
ID = 10330
pos = 0,-32
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 9999999
supermovetime = 9999999
scale = 0.5,0.5
sprpriority = 7
ontop = 0
ownpal = 1
;--------------------------------------

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 1301
ctrl = 1

;P-striker2
[Statedef 1301]
type    = S                      ;状态: S-站立, C-蹲, A-空中, L-倒地
movetype= A                      ;招式种类: A-攻击, I-非攻击, H-受击
physics = S                      ;物理: S-站立, C-蹲, A-空中
juggle  = 1                      ;增加的juggle点数
;常用的控制器:
velset = 0,0                     ;设定速度 (x,y) (不写这行则不改变速度)
ctrl = 0                        ;设定可控与否 (不写这行则不改变ctrl)
anim = 1301                       ;改变动作 (不写这行则不改变anim)
poweradd = 0                   ;增加气 (不写这行则不增加气)
sprpriority = 4                  ;设定p1的贴图优先度到2 (在前面)

[State 0, VelSet]
type = VelSet
trigger1 = time = 2
x = 60
y = 0

[State 0, HitDef]
type = HitDef
trigger1 = animelem = 2
trigger2 = animelem = 3
trigger3 = animelem = 4
attr = S,NA        ;SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
hitflag = MAF        ;HLAFD+-
guardflag = MA         ;HLA
animtype = up          ;light,medium,hard,back,up,diagup
air.animtype = light
damage = 150 * ifelse(var(12)>0,0.4,(1*ifelse(var(13)>6,0.8,1))),60
pausetime = 0 ,50
sparkno = S10003
guard.sparkno = S3100
sparkxy = 0,-60+(random%14)
hitsound = S1,3
guardsound = S2,0
ground.type = High      ;Low,Trip,None
ground.slidetime = 0
ground.hittime = 0
air.hittime = 100
yaccel = 0.5
ground.velocity = 0,0
air.velocity = 0,0
p1getp2facing = 0
fall = 1
fall.yvelocity = -4.5
fall.recover = 1
fall.recovertime = 4
fall.damage = 50
down.bounce = 0
hitonce = 1
kill = 1
guard.kill = 1
fall.kill = 1
numhits = 1
envshake.time = 20
envshake.freq = 100
envshake.ampl = -4
envshake.phase = 60
p2stateno = 13022
id = 1300
p1getp2facing = -1

[State 0, Explod]
type = Explod
triggerall = gametime % 3 =0
trigger1 = time < 15 && time > 1
anim = 10101
ID = 10101
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
removetime = -2
pausemovetime = 0
scale =0.8,0.8
sprpriority = 3
[State 0, Explod]
type = Explod
triggerall = gametime % 2 =0
trigger1 = time < 26 && time > 1
anim = 10102
ID = 10101
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
removetime = 20+RANDOM%6
pausemovetime = 0
scale =0.5,0.5
sprpriority = 3

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1
;P-striker(对手)
[Statedef 13022]
type    = A                      ;状态: S-站立, C-蹲, A-空中, L-倒地
movetype= H                      ;招式种类: A-攻击, I-非攻击, H-受击
physics = S                      ;物理: S-站立, C-蹲, A-空中

[State 0, ScreenBound]
type = ScreenBound
trigger1 = time >= 0
value = 1
movecamera = 0,0

[State 1302, ChangeAnim2]
type = ChangeAnim2
trigger1 = time = 0
value = 5030

[State 1302, ChangeAnim2]
type = ChangeAnim2
trigger1 = time = 1
value = 5080

[State 1302, AngleAdd]
type = AngleAdd
trigger1 = time >0
value = 60

[State 0, AngleDraw]
type = AngleDraw
trigger1 = time > 0

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = 2
y = -10

[State 0, VelAdd]
type = VelAdd
trigger1 = time > 0
y = 0.3

[State 1302, VelSet]
type = VelSet 
triggerall = time >5
trigger1 = vel y > 0 && pos y >=0
x = 0
y = 0

[State 0, SelfState]
type = SelfState
triggerall = time >5
trigger1 = vel y >= 0 && pos y >=0
value = 5110


;-----------------------------------------------------------
;P-Impact
 [Statedef 1450]
type    = S                      ;状态: S-站立, C-蹲, A-空中, L-倒地
movetype= A                      ;招式种类: A-攻击, I-非攻击, H-受击
physics = S                      ;物理: S-站立, C-蹲, A-空中
juggle  = 1                      ;增加的juggle点数
;常用的控制器:
velset = 0,0                     ;设定速度 (x,y) (不写这行则不改变速度)
ctrl = 0                        ;设定可控与否 (不写这行则不改变ctrl)
anim = 1450                       ;改变动作 (不写这行则不改变anim)
poweradd = 20                    ;增加气 (不写这行则不增加气)
sprpriority = 2                  ;设定p1的贴图优先度到2 (在前面)

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 2
v = 45    
value = 1 + var(44)

[State 0, PowerAdd]
type = PowerAdd
trigger1 = time = 1
value = -1000

[State 0, VarAdd]
type = VarAdd
trigger1 = 1
var(7) = 1

[State 0, Helper]
type = Helper
trigger1 = palno < 10
trigger1 = time = 4
helpertype = player ;player
ID = 1459
stateno = 1459
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1

[State 0, Explod]
type = Explod
trigger1 = animelem = 3
anim = 14505
ID = 14505
pos = 77,-47
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -1
pausemovetime = 0
scale = 0.1,0.1
sprpriority = 6
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0
[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = time = 60
ID = 14505
anim = 14505
pos = 77,-47
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -1
pausemovetime = 0
scale = 0.175,0.175
sprpriority = 6
[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = time = 120
ID = 14505
anim = 14505
pos = 77,-47
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -1
pausemovetime = 0
scale = 0.25,0.25
sprpriority = 6

[State 1450, d]
type = Explod
trigger1 = animelem = 3
anim = 11101
ID = 11101
pos = 70,-46
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -1
pausemovetime = 0
scale = 0.5,0.5
sprpriority = 6
[State 1450, d]
type = Explod
trigger1 = animelem = 3
anim = 1456
ID = 1456
pos = -20,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -1
pausemovetime = 0
scale = 0.5,0.5
sprpriority = -3

[State 0, PowerAdd]
type = PowerAdd
trigger1 = time >30
value = -8
[State 0, PowerAdd]
type = PowerAdd
trigger1 = time >120
value = -1

[State 0, Explod]
type = Explod
trigger1 = animelem = 3
anim = 15421
ID = 15421
pos = 78,-47
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 122
removetime = -1
pausemovetime = 0
scale = 0.7,0.7
sprpriority = 6
ownpal = 1
[State 0, Explod]
type = Explod
trigger1 = animelem = 3
anim = 15422
ID = 15422
pos = 78,-47
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 122
removetime = -1
pausemovetime = 0
scale = 0.7,0.7
sprpriority = 6
ownpal = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time > 6
trigger1 = gametime % 30 = 0
value = S1150,1

[State 0, VarSet]
type = VarSet
trigger1 = Palno >=9
var(7) = 180

[State 1450, 2]
type = changeState
triggerall = var(59) = 0
triggerall = time >= 8
trigger1 = command != "holdb"
trigger2 = power <= 0
trigger2 = time >58
value = 1455

[State 1450, AI shoot]
type = changeState
triggerall = var(59) > 0
triggerall = time >= 8
trigger1 = power <= 0
trigger2 = p2stateno != 1003
trigger3 = helper(1001),time >= 233
trigger4 = Palno >= 9
value = 1455

[State 1450, 2]
type = changeState
trigger1 = time >180
value = 1455

;P-Impact2
[Statedef 1455]
type    = S
movetype= A
physics = N
anim = 1455
poweradd = 10
sprpriority = 2 

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time >= 0
id = 15421
[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time >= 0
id = 15422

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S1150,0

[State 0, VarAdd]
type = VarAdd
trigger1 = var(7) >=120
trigger1 = time = 3
v = 45    
value = 1

;-----------暗转--------------
[State 1300, SuperPause]
type = SuperPause
trigger1 = time = 0
time = 45
anim = -1
sound = S2000,1
pos = 10,-40
movetime = 0
darken = 1
p2defmul = 1
poweradd = 0
unhittable = 0
[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 10320
ID = 10320
pos = 0,-55
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = 45
pausemovetime = 9999999
supermovetime = 9999999
scale = 0.5,0.5
sprpriority = -3
ontop = 0
ownpal = 1
[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 10330
ID = 10330
pos = 0,-32
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 9999999
supermovetime = 9999999
scale = 0.5,0.5
sprpriority = 7
ontop = 0
ownpal = 1

[State 0, Explod]
type = Explod
triggerall = var(7) >=120
trigger1 = time = 0
anim = 11999
ID = 11999
pos = 0,0
postype = back  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 9999999
supermovetime = 9999999
scale = 0.5,0.5
sprpriority = 2
ontop = 0
ownpal = 1


;--------------------------------------
[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time = 1
id = 14505

[State 1450, d]
type = Explod
trigger1 = gametime%13 =0
anim = 1457
ID = 1457
pos = -32,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 0
scale = 1,1
sprpriority = 3
[State 1450, d]
type = Explod
trigger1 = gametime%13 =0
anim = 1457
ID = 1457
pos = 2,0
postype = p1  ;p2,front,back,left,right
facing = -1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 0
scale = 1,1
sprpriority = 3

[State 0, Helper]
type = Helper
trigger1 = time = 1
helpertype = normal ;player
name = "P-Impact"
ID = 1460
stateno = 1460
pos = 69,-47
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 0
pausemovetime = 0
size.xscale = 0.7 
size.yscale = 0.23 + ifelse(var(7)>120,0.3,ifelse(var(7)>60,0.15,0))

[State 0, ChangeState]
type = ChangeState
trigger1 = time > 60 + ifelse(var(7)<=60,0,ifelse(var(7)<=120,var(7)-60,ifelse(var(7)>120,var(7)-60,100)))
value = 1456
[Statedef 1456]
type    = S
movetype= I
physics = S
anim = 1454
sprpriority = 6

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1
;----------------
;推挤用helper
[Statedef 1459]
type    = S
movetype= I
physics = N
anim = 1459
ctrl = 0
[State 0, Width]
type = Width
trigger1 = 1
edge = 0,0
player = 60,60

[State 0, BindToRoot]
type = BindToRoot
trigger1 = 1
time = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = parent,stateno != [1450,1455]

;P-ImpactHelper
[Statedef 1460]
type    = S
movetype= A
physics = N
anim = 15555;14506
poweradd = 10
sprpriority = 7

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 15556
ID = 15556
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -1
pausemovetime = 0
scale = 0.7,0.23 + ifelse(root,var(7)>120,0.3,ifelse(root,var(7)>60,0.15,0))
sprpriority = 7
ontop = 0
ownpal = 1
removeongethit = 0

[State 0, Projectile]
type = Projectile
trigger1 = gametime%3 = 0
ProjID = 14507
projanim = 14509 + ifelse(parent,var(7)>120,2,ifelse(parent,var(7)>60,1,0))
projhitanim = -1
projremanim = -1
projcancelanim = -1
projscale = 0.5,0.5   ;缩放
projremove = 1
projremovetime = 2
velocity = 0,0
remvelocity = 0,0
accel = 0,0
velmul = 1
projhits = 1
projpriority = 1
projsprpriority = 3
projedgebound = 40
projstagebound = 40
offset = 0,0		;位置
postype = p1         ;p2,front,back,left,right
projshadow = 0,0,0
supermovetime = 0
pausemovetime = 0
; HitDef
attr = S, NA                     ;Hitdef属性： 站立，普通攻击
damage = ifelse(parent,var(8)=0,(Palno*10)+150+parent,var(7)/2+(450*(root,Palno>=10)),random%4+4+parent,var(7)/48+5*(Palno>=8)), 5+random%(3+Palno)                   ;招式造成的伤害, 防御伤害
animtype = Medium                 ;动作种类: Light-轻, Medium-中, Heavy-重, Back-后仰 (默认: Light)
guardflag = MA                   ;能被什么状态的敌人防御
hitflag = MAF                    ;能击中什么状态的敌人
animtype = up 
priority = 4, Hit                ;攻击优先度: 0 (最低) to 7 (最高), 4 默认，相杀式的处理：Hit-可以击中非dodge情况的敌方/Miss-我方攻击一定miss/Dodge-一定躲避敌方攻击 (默认: Hit)
pausetime = 1, 5                 ;攻击者暂停的时间, 对手在hitshake的时间
sparkno = -1                      ;火花的动作号 (默认: 在上面设置的动作好)
sparkxy = -10, -76               ;火花相对于p2的X坐标偏移量，火花相对于p1的Y坐标偏移量
hitsound = s1, 2                  ;击中时播放的声音
guardsound = s2, 0                ;被防御时播放的声音
guard.slidetime = 2
ground.type = trip               ;种类: High-上段, Low-下段, Trip-绊倒 (默认: Normal)
ground.slidetime = 20             ;对方向后滑的时间
ground.hittime  = 20             ;对方在被击中状态的时间
ground.velocity = -6,-4.4             ;对方被向后推的速度
airguard.velocity = -6,-0.8     ;空中防御的速度 (默认: (air.xvel*1.5, air.yvel/2))
air.type = High                  ;空中击中的种类: High-上段, Low-下段, Trip-绊倒 (默认: 和ground.type一样)
air.velocity = -6,-3.3           ;空中击中时对方被向后推的横向速度, 空中击中时对方被向后推的纵向速度
air.hittime = 40                 ;空中击中对方在被击中状态的时间、
fall.recovertime = 90     
fall = 1
envshake.time = 13
envshake.freq = 30+(parent,var(7)/2)
envshake.ampl = -3-(parent,var(7)/60)
envshake.phase = 30
getpower = 0,1-(root,palno=11)*100
;p2stateno = 124500

[State 0, DestroySelf]
type = changestate
trigger1 = time > 60 + ifelse(parent,var(7)<=60,0,ifelse(parent,var(7)<=120,parent,var(7)-60,ifelse(parent,var(7)>120,parent,var(7)-60,100)))
value = 1470

[State 0, SelfState]
type = SelfState
trigger1 = !ishelper
value = 2001

;P-ImHepler2----------
[Statedef 1470]
type    = s
movetype= H
physics = N
velset = 0,0
anim = 14508
ctrl = 0

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
id = 15556

[state 1470, destoryself]
type = destroyself
triggerall = ishelper
trigger1 = animtime = 0
trigger2 = time >= 16

[State 0, SelfState]
type = SelfState
trigger1 = !ishelper
value = 2001
;---------------------------------------------------
;p-Impact(air)
 [Statedef 1500]
type    = A                      ;状态: S-站立, C-蹲, A-空中, L-倒地
movetype= A                      ;招式种类: A-攻击, I-非攻击, H-受击
physics = N                      ;物理: S-站立, C-蹲, A-空中
;常用的控制器:
velset = 0,0                     ;设定速度 (x,y) (不写这行则不改变速度)
ctrl = 0                        ;设定可控与否 (不写这行则不改变ctrl)
anim = 1130                       ;改变动作 (不写这行则不改变anim)
poweradd = 20                    ;增加气 (不写这行则不增加气)
sprpriority = 2                  ;设定p1的贴图优先度到2 (在前面)

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 2
v = 45    
value = 1 + var(44)

[State 0, PowerAdd]
type = PowerAdd
trigger1 = time = 1
value = -1000

[State 1450, d]
type = Explod
trigger1 = animelem = 1
anim = 1456
ID = 1456
pos = -20,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -1
pausemovetime = 0
scale = 0.5,0.5
sprpriority = -3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S1150,0
;-----------暗转--------------
[State 1300, SuperPause]
type = SuperPause
trigger1 = time = 0
time = 45
anim = -1
sound = S2000,1
pos = 10,-40
movetime = 6
darken = 1
p2defmul = 1
poweradd = 0
unhittable = 0
[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 10320
ID = 10320
pos = 0,-55
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = 45
pausemovetime = 9999999
supermovetime = 9999999
scale = 0.5,0.5
sprpriority = -3
ontop = 0
ownpal = 1
[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 10330
ID = 10330
pos = 0,-32
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 9999999
supermovetime = 9999999
scale = 0.5,0.5
sprpriority = 7
ontop = 0
ownpal = 1

[State 0, Explod]
type = Explod
triggerall = var(7) >=120
trigger1 = time = 0
anim = 11999
ID = 11999
pos = 0,0
postype = back  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 9999999
supermovetime = 9999999
scale = 0.5,0.5
sprpriority = 2
ontop = 0
ownpal = 1
;--------------------------------------
[State 1450, d]
type = Explod
trigger1 = animelem = 3
anim = 15557
ID = 15557
pos = -3,-5
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 4600
removetime = 4600
pausemovetime = 0
scale = 0.5,0.5
sprpriority = 6
[State 1450, d]
type = Explod
trigger1 = animelem = 3
anim = 15558
ID = 15558
pos = -3,-5
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 4600
removetime = 4600
pausemovetime = 0
scale = 0.5,0.5
sprpriority = 5

[State 0, Projectile]
type = Projectile
trigger1 = gametime%3 = 0
trigger1 = AnimElemtime(3) >0
projid = 14507
projanim = 1131
projhitanim = -1
projremanim = -1
projcancelanim = -1
projscale = 0.5,0.5   ;缩放
projremove = 1
projremovetime = 7
velocity = 0,0
remvelocity = 0,0
accel = 0,0
velmul = 1
projhits = 1
projpriority = 1
projsprpriority = 3
projedgebound = 40
projstagebound = 40
offset = 0,0		;位置
postype = p1         ;p2,front,back,left,right
projshadow = 0,0,0
supermovetime = 0
pausemovetime = 0
; HitDef
attr = S, NA                     ;Hitdef属性： 站立，普通攻击
damage = 20*(1-var(8)*0.05), 7                   ;招式造成的伤害, 防御伤害
animtype = Medium                 ;动作种类: Light-轻, Medium-中, Heavy-重, Back-后仰 (默认: Light)
guardflag = MA                   ;能被什么状态的敌人防御
hitflag = MAFD                    ;能击中什么状态的敌人
priority = 4, Hit                ;攻击优先度: 0 (最低) to 7 (最高), 4 默认，相杀式的处理：Hit-可以击中非dodge情况的敌方/Miss-我方攻击一定miss/Dodge-一定躲避敌方攻击 (默认: Hit)
pausetime = 8, 8                 ;攻击者暂停的时间, 对手在hitshake的时间
sparkno = -1                      ;火花的动作号 (默认: 在上面设置的动作好)
sparkxy = -10, -76               ;火花相对于p2的X坐标偏移量，火花相对于p1的Y坐标偏移量
hitsound = s1, 2                  ;击中时播放的声音
guardsound = s2, 0                ;被防御时播放的声音
guard.slidetime = 4
ground.type = High               ;种类: High-上段, Low-下段, Trip-绊倒 (默认: Normal)
ground.slidetime = 10             ;对方向后滑的时间
ground.hittime  = 25             ;对方在被击中状态的时间
ground.velocity = -1.2             ;对方被向后推的速度
airguard.velocity = -1.5,-0.8     ;空中防御的速度 (默认: (air.xvel*1.5, air.yvel/2))
air.type = High                  ;空中击中的种类: High-上段, Low-下段, Trip-绊倒 (默认: 和ground.type一样)
air.velocity = -0.5,-2           ;空中击中时对方被向后推的横向速度, 空中击中时对方被向后推的纵向速度
air.hittime = 20                 ;空中击中对方在被击中状态的时间
getpower = 3,5-150*(root,Palno=11)
fall.recovertime = 40
envshake.time = 13
envshake.freq = 30
envshake.ampl = -3
envshake.phase = 30
getpower = 0,1

[State 0, ChangeState]
type = ChangeState
trigger1 = time > 80
value = 1501
ctrl = 1

;p-Impact(air)2
 [Statedef 1501]
type    = A                      ;状态: S-站立, C-蹲, A-空中, L-倒地
movetype= A                      ;招式种类: A-攻击, I-非攻击, H-受击
physics = N                      ;物理: S-站立, C-蹲, A-空中
anim = 44

[State 0, NotHitBy]
type = NotHitBy
trigger1 = time = 0
value = SCA
time = 20

[State 0, ChangeState]
type = ChangeState
trigger1 = time > 0
value = 51
ctrl = 1
;---------------------------------------------------------------------------
; P-Strom
;
[Statedef 1600]
type    = S
movetype= I
physics = S
juggle  = 4
poweradd= 0
velset = 0,0
anim = 1600
ctrl = 0
sprpriority = 2

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 0, PowerAdd]
type = PowerAdd
trigger1 = time = 0
value = -1700

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 2
v = 45    
value = 2 + var(44)
;-----------暗转--------------
[State 1300, SuperPause]
type = SuperPause
trigger1 = time = 2
time = 35
anim = -1
sound = S2000,1
pos = 10,-40
movetime = 17
darken = 1
p2defmul = 1
poweradd = 0
unhittable = 1
[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 10320
ID = 10320
pos = 0,-55
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = 35
pausemovetime = 9999999
supermovetime = 9999999
scale = 0.5,0.5
sprpriority = -3
ontop = 0
ownpal = 1
[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 10330
ID = 10330
pos = 0,-32
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 9999999
supermovetime = 9999999
scale = 0.5,0.5
sprpriority = 7
ontop = 0
ownpal = 1
;--------------------------------------

[State 0, Helper]
type = Helper
trigger1 = animelem = 5
helpertype = normal ;player
name = "BH"
ID = 1605
stateno = 1605
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 0
pausemovetime = 0
size.xscale = 0.8
size.yscale = 0.8


[State 0, ChangeState]
type = ChangeState
trigger1 = time > 240
value = 1601
ctrl = 0

[Statedef 1601]
type    = S                      ;状态: S-站立, C-蹲, A-空中, L-倒地
movetype= I                     ;招式种类: A-攻击, I-非攻击, H-受击
physics = S                      ;物理: S-站立, C-蹲, A-空中
;常用的控制器:
velset = 0,0                     ;设定速度 (x,y) (不写这行则不改变速度)
ctrl = 0                        ;设定可控与否 (不写这行则不改变ctrl)
anim = 1601                       ;改变动作 (不写这行则不改变anim)

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 1602, 3]
type = ChangeState
trigger1 = animtime = 0
value = 11
ctrl = 1


;BH-helper
[Statedef 1605]
type    = S                      ;状态: S-站立, C-蹲, A-空中, L-倒地
movetype= A                     ;招式种类: A-攻击, I-非攻击, H-受击
physics = N                      ;物理: S-站立, C-蹲, A-空中
;常用的控制器:
velset = 0,0                     ;设定速度 (x,y) (不写这行则不改变速度)
ctrl = 0                        ;设定可控与否 (不写这行则不改变ctrl)
anim = 1605                       ;改变动作 (不写这行则不改变anim)

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nobg

[State 0, PosSet]
type = PosSet
trigger1 = 1
x = 0
y = -135

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time%11 = 0
value = S1600,0
channel = 450

[State 0, Projectile]
type = Projectile
trigger2 = time = 0
trigger1 = time%10=0
ProjID = 1606
projanim = 1606
projhitanim = -1
projremanim = -1
projcancelanim = -1
projscale = 0.5,0.5   ;缩放
projremove = 1
projremovetime = -1
velocity = 15,0
remvelocity = 0,0
accel = 0,0
velmul = 1
projhits = 1
projpriority = 1
projsprpriority = 3
projedgebound = 40
projstagebound = 40
offset = 0,-50		;位置
postype = p1         ;p2,front,back,left,right
projshadow = 0,0,0
supermovetime = 0
pausemovetime = 0
; HitDef
attr = S, NA                     ;Hitdef属性： 站立，普通攻击
damage = 8+(root,palno)/2+ifelse(root,palno>=9,10,0)+ifelse(root,palno=11,100,0), 7                   ;招式造成的伤害, 防御伤害
animtype = Medium                 ;动作种类: Light-轻, Medium-中, Heavy-重, Back-后仰 (默认: Light)
guardflag = MA                   ;能被什么状态的敌人防御
hitflag = MAF                    ;能击中什么状态的敌人
priority = 4, Hit                ;攻击优先度: 0 (最低) to 7 (最高), 4 默认，相杀式的处理：Hit-可以击中非dodge情况的敌方/Miss-我方攻击一定miss/Dodge-一定躲避敌方攻击 (默认: Hit)
pausetime = 8, 20                 ;攻击者暂停的时间, 对手在hitshake的时间
sparkno = -1                      ;火花的动作号 (默认: 在上面设置的动作好)
sparkxy = -10, -76               ;火花相对于p2的X坐标偏移量，火花相对于p1的Y坐标偏移量
hitsound = s1, 2                  ;击中时播放的声音
guardsound = s2, 0                ;被防御时播放的声音
guard.slidetime = 4
ground.type = High               ;种类: High-上段, Low-下段, Trip-绊倒 (默认: Normal)
ground.slidetime = 15             ;对方向后滑的时间
ground.hittime  = 25+8             ;对方在被击中状态的时间
ground.velocity = -1.2,-3.63             ;对方被向后推的速度
airguard.velocity = -1.5,-3.2     ;空中防御的速度 (默认: (air.xvel*1.5, air.yvel/2))
air.type = High                  ;空中击中的种类: High-上段, Low-下段, Trip-绊倒 (默认: 和ground.type一样)
air.velocity = -0.5,-3.2           ;空中击中时对方被向后推的横向速度, 空中击中时对方被向后推的纵向速度
air.hittime = 20                 ;空中击中对方在被击中状态的时间
getpower = 0,1
fall.recovertime = 90
fall = 1
[State 0, DestroySelf]
type = DestroySelf
trigger1 = time >240

[State 0, SelfState]
type = SelfState
trigger1 = !ishelper
value = 2001

;P-blossom
[Statedef 1700]
type    = S                      ;状态: S-站立, C-蹲, A-空中, L-倒地
movetype= A                     ;招式种类: A-攻击, I-非攻击, H-受击
physics = N                      ;物理: S-站立, C-蹲, A-空中
;常用的控制器:
velset = 0,0                     ;设定速度 (x,y) (不写这行则不改变速度)
ctrl = 0                        ;设定可控与否 (不写这行则不改变ctrl)
anim = 1700                       ;改变动作 (不写这行则不改变anim)

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 0, PowerAdd]
type = PowerAdd
trigger1 = animelem = 1
value = -1700
 
[State 0, VarAdd]
type = VarAdd
trigger1 = time = 3
v = 45    
value = 2 + var(44)

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S1300,0

;-----------暗转--------------
[State 1300, SuperPause]
type = SuperPause
trigger1 = time = 0
time = 35
anim = -1
sound = S2000,1
pos = 10,-40
movetime = 9
darken = 1
p2defmul = 1
poweradd = 0
unhittable = 1
[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 10320
ID = 10320
pos = 0,-55
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = 35
pausemovetime = 9999999
supermovetime = 9999999
scale = 0.5,0.5
sprpriority = -3
ontop = 0
ownpal = 1
[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 10330
ID = 10330
pos = 0,-32
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 9999999
supermovetime = 9999999
scale = 0.5,0.5
sprpriority = 7
ontop = 0
ownpal = 1
;--------------------------------------
[State 0, Helper]
type = Helper
trigger1 = animelem = 3
helpertype = normal ;player
name = "DDD"
ID = 1705
stateno = 1705
pos = 70,-71
postype = p1    ;p2,front,back,left,right
facing = 1
ownpal = 1
supermovetime = 999
pausemovetime = 999
size.xscale = 0.3
size.yscale = 0.3
sprpriority = 6 

[State 1450, d]
type = Explod
trigger1 = time = 1
anim = 1456
ID = 1456
pos = -20,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = 210
pausemovetime = 0
scale = 0.5,0.5
sprpriority = -3

[State 0, Width]
type = Width
trigger1 = 1
edge = 80,20
player = 0,0
;value = 0,0
;ignorehitpause = 
;persistent = 

[State 0, EnvShake]
type = EnvShake
trigger1 = gametime%20=0
time = 20
freq = 60
ampl = -3
phase = 60

[State 0, ChangeState]
type = ChangeState
trigger1 = var(59)=0
trigger1 = time > 11
trigger1 = command != "holda"
trigger2 = time >200
value = 1701
ctrl = 1 

[Statedef 1701]
type    = S                      ;状态: S-站立, C-蹲, A-空中, L-倒地
movetype= I                     ;招式种类: A-攻击, I-非攻击, H-受击
physics = N                      ;物理: S-站立, C-蹲, A-空中
anim = 1701

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S1100,5

[State 0, d]
type = Explod
trigger1 = time = 0
anim = 11103
ID = 11103
pos = 65,-77
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = 16
supermovetime = 999
pausemovetime = 999
scale = 0.5,0.5
sprpriority = 6

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = 1
id = 1456

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;pp-helper
[Statedef 1705]
type    = S                      ;状态: S-站立, C-蹲, A-空中, L-倒地
movetype= A                     ;招式种类: A-攻击, I-非攻击, H-受击
physics = N                      ;物理: S-站立, C-蹲, A-空中
anim = 1705
sprpriority = 6 

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 1706
ID = 1706
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 99999
removetime = 300
pausemovetime = 999
scale = 0.4,0.4
sprpriority = 3
removeongethit = 0
ignorehitpause = 1

[State 0, TargetBind]
type = TargetBind
trigger1 = 1
time = 3
id = 1705
pos = 0,0
ignorehitpause = 1

[State 0, Projectile]
type = HitDef
trigger1 = time > 10
trigger1 = 1;gametime %5=1
attr = , NP                     ;Hitdef属性： 站立，普通攻击
damage = 0+(gametime %6=1)*2+3*(root,palno>=8), 3                   ;招式造成的伤害, 防御伤害
animtype = Medium                 ;动作种类: Light-轻, Medium-中, Heavy-重, Back-后仰 (默认: Light)
guardflag =                  ;能被什么状态的敌人防御
hitflag = MAF                    ;能击中什么状态的敌人
priority = 4, Hit                ;攻击优先度: 0 (最低) to 7 (最高), 4 默认，相杀式的处理：Hit-可以击中非dodge情况的敌方/Miss-我方攻击一定miss/Dodge-一定躲避敌方攻击 (默认: Hit)
pausetime = 0, 8                 ;攻击者暂停的时间, 对手在hitshake的时间
sparkno = -1                      ;火花的动作号 (默认: 在上面设置的动作好)
sparkxy = -10, -76               ;火花相对于p2的X坐标偏移量，火花相对于p1的Y坐标偏移量
hitsound = -1;s1, 1                  ;击中时播放的声音
guardsound = -1;s2, 0                ;被防御时播放的声音
guard.slidetime = 4
ground.type = High               ;种类: High-上段, Low-下段, Trip-绊倒 (默认: Normal)
ground.slidetime = 10             ;对方向后滑的时间
ground.hittime  = 25             ;对方在被击中状态的时间
ground.velocity = -1.2             ;对方被向后推的速度
airguard.velocity = -1.5,-0.8     ;空中防御的速度 (默认: (air.xvel*1.5, air.yvel/2))
air.type = High                  ;空中击中的种类: High-上段, Low-下段, Trip-绊倒 (默认: 和ground.type一样)
air.velocity = -0.5,-2           ;空中击中时对方被向后推的横向速度, 空中击中时对方被向后推的纵向速度
air.hittime = 20                 ;空中击中对方在被击中状态的时间
getpower = 0,0
fall.recovertime = 40
id = 1705
palfx.time=20
palfx.add=0,-50,80
palfx.sinadd=50,50,50,15
palfx.color=1
palfx.invertall=1

[State 0, TargetLifeAdd]
type = TargetLifeAdd
trigger1 = 1
value = -1
kill = 1
absolute = 1

[State 0, TargetState]
type = TargetState
;triggerall = NumTarget
trigger1 = 1
value = 1708
;ID = 1705

[State 0, TargetDrop]
type = TargetDrop
trigger1 = 1
excludeID = 1705
keepone = 0
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = root,stateno != 1700
x = 8.688;14.48
y = -2.4;-4.0
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger3 = time = 160
trigger2 = time = 80
trigger1 = time = 0
value = S12450,8
 
[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S12450,8
 
channel = 6
[State 0, PlaySnd]
type = PlaySnd
trigger1 = gametime%150=0
trigger2 = time = 0
value = S12450,9
 
channel = 7


[State 0, Helper]
type = Helper
trigger1 = time = 0
helpertype = normal ;player
name = "rel"
ID = 1707
stateno = 1707 
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
ownpal = 0
supermovetime = 0
pausemovetime = 0
;size.xscale = 
;size.yscale = 


[State 0, ChangeState]
type = ChangeState
trigger1 = vel x >0 
trigger1 = (BackEdgeBodyDist <20) || (frontEdgeBodyDist <20)
value = 1706
ctrl = 0

[Statedef 1707]
type    = S                      ;状态: S-站立, C-蹲, A-空中, L-倒地
movetype= I                     ;招式种类: A-攻击, I-非攻击, H-受击
physics = N                      ;物理: S-站立, C-蹲, A-空中
anim = 1707

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, ReversalDef]
type = ReversalDef
trigger1 = time >25
reversal.attr = SCA,AA,AT,AP           ;SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
pausetime = 0,0
sparkno = -1
hitsound = -1
p2stateno = 17070

[State 0, TargetBind]
type = TargetBind
trigger1 = 1
time = 2
pos = 0,0

[State 0, DestroySelf]
type = DestroySelf
trigger1 = ishelper
trigger1 = root,stateno != 1700
;ignorehitpause = 
;persistent = 


[Statedef 17070]
type    = S                      ;状态: S-站立, C-蹲, A-空中, L-倒地
movetype= H                     ;招式种类: A-攻击, I-非攻击, H-受击
physics = N                      ;物理: S-站立, C-蹲, A-空中

[State 0, DestroySelf]
type = DestroySelf
trigger1 = ishelper

[State 0, ChangeAnim2]
type = ChangeAnim2
trigger1 = time = 0
value = 1708
ignorehitpause = 1

[Statedef 1706]
type    = S                      ;状态: S-站立, C-蹲, A-空中, L-倒地
movetype= A                     ;招式种类: A-攻击, I-非攻击, H-受击
physics = N                      ;物理: S-站立, C-蹲, A-空中
anim = 1710
sprpriority = 6 

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 0
y = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S12450,10
channel = 6
[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S12450,10
channel = 7

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 1710
ID = 1710
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = -2
pausemovetime = 0
scale = 0.8,0.8
sprpriority = 3

[State 0, Projectile]
type = HitDef
trigger1 = 1
trigger1 = hitcount < 5
attr = , NA                     ;Hitdef属性： 站立，普通攻击
damage = 35, 7                   ;招式造成的伤害, 防御伤害
animtype = Medium                 ;动作种类: Light-轻, Medium-中, Heavy-重, Back-后仰 (默认: Light)
guardflag =                    ;能被什么状态的敌人防御
hitflag = MAFD                    ;能击中什么状态的敌人
priority = 4, Hit                ;攻击优先度: 0 (最低) to 7 (最高), 4 默认，相杀式的处理：Hit-可以击中非dodge情况的敌方/Miss-我方攻击一定miss/Dodge-一定躲避敌方攻击 (默认: Hit)
pausetime = 0, 8                 ;攻击者暂停的时间, 对手在hitshake的时间
sparkno = -1                      ;火花的动作号 (默认: 在上面设置的动作好)
sparkxy = -10, -76               ;火花相对于p2的X坐标偏移量，火花相对于p1的Y坐标偏移量
hitsound = s1, 2                  ;击中时播放的声音
guardsound = s2, 0                ;被防御时播放的声音
guard.slidetime = 4
ground.type = High               ;种类: High-上段, Low-下段, Trip-绊倒 (默认: Normal)
ground.slidetime = 10             ;对方向后滑的时间
ground.hittime  = 25             ;对方在被击中状态的时间
ground.velocity = -1.2             ;对方被向后推的速度
airguard.velocity = -1.5,-0.8     ;空中防御的速度 (默认: (air.xvel*1.5, air.yvel/2))
air.type = High                  ;空中击中的种类: High-上段, Low-下段, Trip-绊倒 (默认: 和ground.type一样)
air.velocity = -0.5,-0.5           ;空中击中时对方被向后推的横向速度, 空中击中时对方被向后推的纵向速度
air.hittime = 20                 ;空中击中对方在被击中状态的时间
getpower = 50,-50
fall = 1
fall.recover = 0
id = 1706

[State 0, TargetState]
type = TargetState
triggerall = NumTarget;()
trigger1 = time > 0
value = 5000
id = 1706
ignorehitpause = 1

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = 1
id = 1706

[State 0, DestroySelf]
type = DestroySelf
trigger1 = animtime = 0
ignorehitpause = 1

[Statedef 1708]
type    = S                      ;状态: S-站立, C-蹲, A-空中, L-倒地
movetype= H                      ;招式种类: A-攻击, I-非攻击, H-受击
physics = N                      ;物理: S-站立, C-蹲, A-空中
velset = 0,0

[State 0, DestroySelf]
type = DestroySelf
trigger1 = ishelper

[State 0, ChangeAnim2]
type = ChangeAnim2
trigger1 = time = 0
value = 1708
ignorehitpause = 1

[State 0, SelfState]
type = SelfState
trigger1 = time >60
value = 5030
ignorehitpause = 1

;灭神斩
[Statedef 1800]
type    = A                      ;状态: S-站立, C-蹲, A-空中, L-倒地
movetype= A                      ;招式种类: A-攻击, I-非攻击, H-受击
physics = N                      ;物理: S-站立, C-蹲, A-空中
velset = 0,0
anim = 1800
ctrl = 0

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 3
v = 45    
value = 1 + var(44)

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S1800,0

[State 0, PowerAdd]
type = PowerAdd
trigger1 = time = 0
value = -1800

;-----------暗转--------------
[State 1300, SuperPause]
type = SuperPause
trigger1 = time = 1
time = 50
anim = -1
sound = S2000,1
pos = 10,-40
movetime = 2
darken = 1
p2defmul = 1
poweradd = 0
unhittable = 1
[State 0, Explod]
type = Explod
trigger1 = time = 1
anim = 10320
ID = 10320
pos = 0,-55
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = 50
pausemovetime = 9999999
supermovetime = 9999999
scale = 0.5,0.5
sprpriority = -3
ontop = 0
ownpal = 1
[State 0, Explod]
type = Explod
trigger1 = time = 1
anim = 10330
ID = 10330
pos = 0,-32
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 9999999
supermovetime = 9999999
scale = 0.5,0.5
sprpriority = 7
ontop = 0
ownpal = 1
;--------------------------------------

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 2
x = 11
y = -1

[State 0, Explod]
type = Explod
trigger1 = time = 5
anim = 1810
ID = 1810
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 10000
removetime = 300
pausemovetime = 0
scale = 0.5,0.5
sprpriority = 3
removeongethit = 0
[State 0, Explod]
type = Explod
trigger1 = time = 5
anim = 1820
ID = 1810
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 10000
removetime = 300
pausemovetime = 0
scale = 0.5,0.5
sprpriority = 3
removeongethit = 0
[State 0, Explod]
type = Explod
trigger1 = time = 5
anim = 1811
ID = 1810
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 10000
removetime = 300
pausemovetime = 0
scale = 0.5,0.5
sprpriority = 3
removeongethit = 0
[State 0, Explod]
type = Explod
trigger1 = time = 5
anim = 1821
ID = 1810
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 10000
removetime = 300
pausemovetime = 0
scale = 0.5,0.5
sprpriority = 3
removeongethit = 0

[State 630, 2]
type = HitDef
trigger1 = 1
trigger1 = (hitcount <13)||(Palno>9)
attr = , NA
hitflag = MAFD
damage = ceil((80-(65+random%10)*(hitcount>3))*ifelse(var(13)>9,0.5,1))+100*(Palno>9);,10
guardflag = HA
priority = 3
pausetime = 4,4
sparkno = s10226
sparkxy = -5,-75
hitsound   = S1,3
guardsound = -1;s2,0
ground.type = High
ground.slidetime = 6
ground.hittime  = 20
ground.velocity = -7,-3
air.velocity = -7,-3
air.hittime = 40
fall.recovertime = 70      
fall = 1
envshake.time = 20
envshake.freq = 50
envshake.ampl = -6
envshake.phase = 40

[State 0, Width]
type = Width
trigger1 = 1
edge = 15,0
player = 10,10
;value = 0,0
;ignorehitpause = 
;persistent = 


[State 0, ChangeState]
type = ChangeState
trigger1 = time >72
value = 1801
ctrl = 0

[Statedef 1801]
type    = A                      ;状态: S-站立, C-蹲, A-空中, L-倒地
movetype= I                      ;招式种类: A-攻击, I-非攻击, H-受击
physics = A                      ;物理: S-站立, C-蹲, A-空中
anim = 44
velset = 2,-5
ctrl = 0

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = 1
id = 1810

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 15


;---------------------------------------------------------------------------


;---------------------------------------------------------------------------
; Perfect World
[Statedef 2000]
type    = S                      ;状态: S-站立, C-蹲, A-空中, L-倒地
movetype= A                      ;招式种类: A-攻击, I-非攻击, H-受击
physics = S                      ;物理: S-站立, C-蹲, A-空中
ctrl = 0                        ;设定可控与否 (不写这行则不改变ctrl)
anim = 2000                       ;改变动作 (不写这行则不改变anim)
poweradd = 50                    ;增加气 (不写这行则不增加气)
sprpriority = 2                  ;设定p1的贴图优先度到2 (在前面)

[State 0, NotHitBy]
type = NotHitBy
trigger1 = time = 0
value = SCA
time = 62

[State 2000, HitDef]
type = HitDef
trigger1 = Palno < 10
trigger1 = 1;Animelem = 2
trigger1 = hitcount <1
attr = ,SA        ;SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
hitflag = MAF        ;HLAFD+-
animtype = hard           ;light,medium,hard,back,up,diagup
air.animtype = hard 
damage = 5,0
pausetime = 0 ,50
sparkno = S10011
sparkxy = 0,0
hitsound = S1,2
ground.type = High      ;Low,Trip,None
air.hittime = 20
ground.slidetime = 20
ground.hittime  = 22
ground.velocity = -17,-7
guard.velocity = -17
air.velocity = -17,-7
p2facing = 1
p2stateno = 2010

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 1
value = S2000,3

[State 2000, Explod]
type = Explod
trigger1 = time = 1
anim = 2002
pos = 0,-50
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
removetime = -2
pausemovetime = 9999999999999
scale = 0.7,0.7
sprpriority = 0
ontop = 1
removeongethit = 0

[State 2000, LifeAdd]
type = LifeAdd
trigger1 = time = 0
value = 25+ceil((lifemax - life) * (0.02+0.03*Palno>=7))+ifelse(Palno>=7,Palno*7,1)
absolute = 1

[State 0, CtrlSet]
type = CtrlSet
trigger1 = time > 38
value = 1

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = 0
y = 0

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 2
v = 45    
value = -1

[State 0, ChangeState]
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl = 1

; Perfect World - air
[Statedef 2001]
type    = A                      ;状态: S-站立, C-蹲, A-空中, L-倒地
movetype= A                      ;招式种类: A-攻击, I-非攻击, H-受击
physics = N                      ;物理: S-站立, C-蹲, A-空中
ctrl = 0                        ;设定可控与否 (不写这行则不改变ctrl)
anim = 2001                       ;改变动作 (不写这行则不改变anim)
poweradd = 50                    ;增加气 (不写这行则不增加气)
sprpriority = 2                  ;设定p1的贴图优先度到2 (在前面)

[State 0, NotHitBy]
type = NotHitBy
trigger1 = time = 0
value = SCA
time = 66

[State 2001, HitDef]
type = HitDef
trigger1 = Palno < 10
trigger1 = 1;Animelem = 2
trigger1 = hitcount <1
attr = ,SA        ;SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
hitflag = MAF        ;HLAFD+-
animtype = hard          ;light,medium,hard,back,up,diagup
air.animtype = hard 
damage = 1,0
pausetime = 0 ,50
sparkno = S10011
sparkxy = 0,0
hitsound = S1,2
ground.type = High      ;Low,Trip,None
air.hittime = 20
ground.slidetime = 20
ground.hittime  = 22
ground.velocity = -17,-7
guard.velocity = -17
air.velocity = -17,-7
p2facing = 1
p2stateno = 2010

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 1
value = S2000,3

[State 2000, Explod]
type = Explod
trigger1 = time = 1
anim = 2002
pos = 0,-50
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
removetime = -2
pausemovetime = 9999999999999
scale = 0.7,0.7
sprpriority = 0
ontop = 1
removeongethit = 0

[State 2000, LifeAdd]
type = LifeAdd
trigger1 = time = 0
value = 15+ceil((lifemax - life) * (0.02+0.03*Palno>=7))+ifelse(Palno>=7,Palno*7,1)
absolute = 1

[State 1100, 5]
type = statetypeset
trigger1 = time >= 50
statetype = A
physics = A

[State 0, Gravity]
type = Gravity
trigger1 = time = 55

[State 2000, CtrlSet]
type = CtrlSet
trigger1 = time >= 60
value = 1

[State 2000, VelSet]
type = VelSet
trigger1 = time = 0
x = 0
y = 0

[State 2000, Gravity]
type = Gravity
trigger1 = animelem = 3

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 2
v = 45    
value = -1

[State 2001, ChangeState]
type = ChangeState
trigger1 = Animtime = 0
value = 2011
ctrl = 1

[Statedef 2011]
type    = A                      ;状态: S-站立, C-蹲, A-空中, L-倒地
movetype= I
physics = A                      ;招式种类: A-攻击, I-非攻击, H-受击

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = 0
y = 2

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time > 12
value = 100



[Statedef 2010]
type    = A                      ;状态: S-站立, C-蹲, A-空中, L-倒地
movetype= H                      ;招式种类: A-攻击, I-非攻击, H-受击
physics = N                      ;物理: S-站立, C-蹲, A-空中
ctrl = 0                        ;设定可控与否 (不写这行则不改变ctrl)

[State 0, ChangeAnim2]
type = ChangeAnim2
trigger1 = time = 0
value = 5035

[State 0, VelSet]
type = VelSet
trigger1 = Animelem = 1
x = -8
y = 0

[State 2010, 镜头]
type = ScreenBound
trigger1 = BackEdgeBodyDist < 20
trigger2 = FrontEdgeBodyDist < 20
value = 1
movecamera = 0,1

[State 2010, 撞墙]
type = selfState
triggerall = time > 60
trigger1 = BackEdgeBodyDist <= 10
trigger2 = FrontEdgeBodyDist <= 10
value = 5100

;Perfect wave1
[statedef 2500];
type = A
movetype = I
physics = N
anim = 2500
velset = 0,0
ctrl = 0

[State 0, VarSet]
type = VarSet    ;变数设定
trigger1 = time = 0
var(30) = 0

[State 0, PowerAdd]
type = PowerAdd
trigger1 = time = 0
value = -3500

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 2
v = 45    
value = 3 + var(44)

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0
;ignorehitpause = 
;persistent = 

[State 0, PlaySnd]
type = PlaySnd  ;播放声音控制器
trigger1 = time = 0
value = s17000,3   ;SND中的声音编号
volume = 255      ;声音的大小 最大为255
[State 0, NotHitBy]
type = NotHitBy   ;不会被一些攻击参数打中 用于无敌处理
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT

[State 0, VelSet]
type = VelSet    ;速度设定
trigger1 = FrontEdgeBodyDist> 140
x = (FrontEdgeBodyDist-70)/15           ;横向速度

[State 0, VelSet]
type = VelSet    ;速度设定
trigger1 = FrontEdgeBodyDist<= 140
x = 0          ;横向速度

[State 0, VelSet]
type = VelSet    ;速度设定
trigger1 = 1
y = -4.5           ;纵向..

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 2501

;Perfect wave2
[statedef 2501]
type    = A                      ;状态: S-站立, C-蹲, A-空中, L-倒地
movetype= I                      ;招式种类: A-攻击, I-非攻击, H-受击
physics = S                      ;物理: S-站立, C-蹲, A-空中
juggle  = 1                      ;增加的juggle点数
;常用的控制器:
velset = 0,0                     ;设定速度 (x,y) (不写这行则不改变速度)
ctrl = 0                        ;设定可控与否 (不写这行则不改变ctrl)
anim = 2501                       ;改变动作 (不写这行则不改变anim)
poweradd = 0                    ;增加气 (不写这行则不增加气)
sprpriority = 2                  ;设定p1的贴图优先度到2 (在前面)

[State 0, VarSet]
type = VarSet    ;变数设定
trigger1 = time = 0
var(30) = 0

;-----------暗转--------------
[State 1300, SuperPause]
type = SuperPause
trigger1 = time = 0
time = 35
anim = -1
sound = S2000,1
pos = 10,-40
movetime = 0
darken = 1
p2defmul = 1
poweradd = 0
unhittable = 1
[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 10320
ID = 10320
pos = 0,-55
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = 35
pausemovetime = 9999999
supermovetime = 9999999
scale = 0.5,0.5
sprpriority = -3
ontop = 0
ownpal = 1
[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 10330
ID = 10330
pos = 0,-32
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 9999999
supermovetime = 9999999
scale = 0.5,0.5
sprpriority = 7
ontop = 0
ownpal = 1
;--------------------------------------

[State 0, BGPalFX]
type = BGPalFX
trigger1 = 1
time = 1
add = -128,-128,-128
;mul = 256,256,256
;sinadd = 0,0,0,10
;invertall = 0
;color = 256
ignorehitpause = 1
;persistent = 

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0
ignorehitpause = 1
;persistent = 

[State 0, NotHitBy]
type = NotHitBy   ;不会被一些攻击参数打中 用于无敌处理
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT

[State 0, Helper]
type = Helper ;援助控制器
trigger1 = time = 1
helpertype = normal ;player 援助级别
name = "star";名字
ID = 17010;援助ID
stateno = 17010;statedef编号
pos = 4,-65 ;位置
postype = p1    ;p2,front,back,left,right 绑定位置
keyctrl = 0 ;控制
ownpal = 1 ;独立色表
size.xscale = .8
size.yscale = .8


[State 0, ChangeState]
type = ChangeState ;改变状态控制器
trigger1 = helper(17010),stateno = 17011
trigger2 = helper(17010),stateno = 17013
value = 2502;statedef编号
ctrl = 0 ;是否可控

;Perfect wave3
[statedef 2502]
type    = A                      ;状态: S-站立, C-蹲, A-空中, L-倒地
movetype= I                      ;招式种类: A-攻击, I-非攻击, H-受击
physics = S                      ;物理: S-站立, C-蹲, A-空中
juggle  = 1                      ;增加的juggle点数
;常用的控制器:
velset = 0,0                     ;设定速度 (x,y) (不写这行则不改变速度)
ctrl = 0                        ;设定可控与否 (不写这行则不改变ctrl)
anim = 2501                       ;改变动作 (不写这行则不改变anim)
poweradd = 0                    ;增加气 (不写这行则不增加气)
sprpriority = 4                  ;设定p1的贴图优先度到2 (在前面)

[State 0, BGPalFX]
type = BGPalFX
trigger1 = 1
time = 1
add = -128,-128,-128
;mul = 256,256,256
;sinadd = 0,0,0,10
;invertall = 0
;color = 256
ignorehitpause = 1
;persistent = 

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 30
value = 2502
;elem = 1
;ignorehitpause = 
;persistent = 

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 35
value = S12450,0
channel = 8
[State 0, Explod]
type = Explod
trigger1 = time = 35
anim = 14517
ID = 14517
pos = 0,-90
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 12450
scale =0.45,0.45
sprpriority = -2
removeongethit = 0
;ignorehitpause =
;trans = 
;persistent =
supermove =1
supermovetime = 12450

[State 0, Explod]
type = Explod
trigger1 = time = 40
anim = 14516
ID = 14516
pos = 0,65
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 12450
scale =0.7,0.7
sprpriority = 8
removeongethit = 0
;ignorehitpause =
;trans = 
;persistent =
supermove =1
supermovetime = 12450

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 44
value = S12450,2+random%3
volume = 1255
channel = 8

[State 0, Explod]
type = Explod
trigger1 = time = 45
anim = 14515
ID = 14515
pos = 0,30
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 12450
scale =0.7,0.7
sprpriority = 9
removeongethit = 0
;ignorehitpause =
;trans = 
;persistent =
supermove =1
supermovetime = 12450

[State 0, Pause]
type = Pause
trigger1 = time = 35
time = 40
movetime = 1

[State 1034, 2]
type = Projectile
trigger1 = time > 55
trigger1 = time%3 = 1
projremove = 1
Projremovetime = 1
projhits = 1
projpriority = 9999
projanim = 1606
offset = 0,0
velocity = 0,0
attr = S, HP
damage = 4+random%2+ifelse(Palno>=9,50+random%40,0)+ifelse(Palno>=9,random%10,0),3+ifelse(Palno>=9,40,0)
getpower = 0,0
givepower = 0,0
animtype = up
guardflag = M
hitflag = MAFD
pausetime = 0,2
sparkno = 4
guard.sparkno = -1
sparkxy = 0,0
hitsound = S17000,1
guardsound = S17000,2
ground.type = High
ground.slidetime = 5
ground.hittime  = 5
guard.hittime = 5
ground.velocity = -1,-0.5
air.velocity = -1,-0.5
fall = 1
fall.recover = 0
sprpriority = 4
ignorehitpause = 1
palfx.time=20
palfx.add=0,-50,80
palfx.sinadd=50,50,50,15
palfx.color=1
palfx.invertall=1

[State 0, Helper]
type = Helper
triggerall = Palno = 11
trigger1 = time > 45
trigger1 = time%45 = 0
trigger1 = Numhelper(2510) < 1
helpertype = player ;player
name = "dangshen"
ID = 2510
stateno = 2510
pos = 0,0
postype = p1    ;p2,front,back,left,right
ownpal = 1
supermovetime = 12450
pausemovetime = 12450

[State 0, VarSet]
type = VarSet    ;变数设定
trigger1 = time> 280
var(30) = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = time > 280
value = 2503
ctrl = 0

[statedef 2503];
type = A
movetype = I
physics = A
anim = 44
velset = 0,0
ctrl = 0

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;11p用当身helper
[statedef 2510]
type = U
movetype = U
physics = N
anim = 2510
movehitpersist = 1
hitdefpersist = 1

[State 状态锁]
type = Statetypeset
trigger1 = 1
statetype = C
movetype = A
physics = N
ignorehitpause = 1

[State 动画变更]
type = Changeanim
trigger1 = !numtarget
value = 2510;带红框
ignorehitpause = 1

[State 超即死当身]
type = Reversaldef
trigger1 = root,Palno = 11;
numhits = 0
reversal.attr = SCA, AA, AT, AP
sparkno = -1
guard.sparkno = -1
fall = 1
fall.recover = 0
pausetime = 10,20
p2stateno = 124500
ignorehitpause = 1

[State 0, SelfState]
type = SelfState
trigger1 = !ishelper
value = 2001

[State 0, DestroySelf]
type = DestroySelf
trigger1 = time > 240

; 受击用 helper
[statedef 2511]
type    = S   ;S,C,A,L
movetype= I
physics = S   ;S,C,A,N
; 隐藏helper
[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = invisible
flag2 = noshadow
supermovetime = 2147483647
pausemovetime = 2147483647
ignorehitpause = 1
; 绑定helper
[State 0, BindToRoot]
type = BindToRoot
trigger1 = 1
time = -1
pos = 0,0
ignorehitpause = 1
; 屏幕不被helper拖动，防排挤，不可控
[State ]
type = Screenbound
trigger1 = 1
value = 0
ignorehitpause = 1
[State ]
type = Playerpush
trigger1 = 1
value = 0
ignorehitpause = 1
[State ]
type = Ctrlset
trigger1 = 1
value = 0
ignorehitpause = 1
; 转变成 受击状态
[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = ishelper(2)
movetype = H        ;I,A,H
ignorehitpause = 1
; 转变成受击 动画
[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = ishelper(2)
value = 666        ; 此动画的受击框 非常大，我用代码模式写的，所以图形编辑器上看不到框。
supermovetime = 2147483647
pausemovetime = 2147483647
ignorehitpause = 1
; 能受击 的 类型
[State 0, HitBy]
type = HitBy
trigger1 = ishelper(2)
value = SCA,AP           ;  仅proj能击中
time = -1
ignorehitpause = 1
[State 0, DestroySelf]
type = DestroySelf
trigger1 = time> 20
ignorehitpause = 0

[statedef 2550];
type = L
movetype = H
physics = A

[State 0, ChangeAnim2]
type = ChangeAnim2
trigger1 = time= 0
value = 5030  

[State 0, DestroySelf]
type = DestroySelf
trigger1 = ishelper
ignorehitpause = 1

[State 0, LifeSet]
type = Lifeadd
trigger1 = time = 0
value = -200-random-(enemy,var(17))*2
ignorehitpause = 1

[State 0, LifeSet]
type = LifeSet
trigger1 = enemy,var(17)>450
value = 0
ignorehitpause = 1

[State 5100, 9]
type = null
trigger1 = Time = random%2	

[State 0, SelfState]
type = SelfState
trigger2 = life = 0
trigger1 = alive = 0
value = 5050

[State 0, SelfState]
type = SelfState
trigger1 = time >= 1
value = 5110

;Perfect arrow
[Statedef 2600]
type    = A                      ;状态: S-站立, C-蹲, A-空中, L-倒地
movetype= H                     ;招式种类: A-攻击, I-非攻击, H-受击
physics = N                      ;物理: S-站立, C-蹲, A-空中
;常用的控制器:
velset = 0,0                     ;设定速度 (x,y) (不写这行则不改变速度)
ctrl = 0                        ;设定可控与否 (不写这行则不改变ctrl)
anim = 2600                       ;改变动作 (不写这行则不改变anim)

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 0, VelSet]
type = VelSet
trigger1 = time <10
x = -6
y = -5

[State 0, VelSet]
type = VelSet
trigger1 = time >10
x = -0.6
y = -0.3

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0

[State 0, Width]
type = Width
trigger1 = 1
edge = 40,40
player = 0,0

[State 0, ChangeState]
type = ChangeState
trigger1 = time >100
value = 2601
ctrl = 0

;Perfect arrow2
[Statedef 2601]
type    = S                      ;状态: S-站立, C-蹲, A-空中, L-倒地
movetype= I                     ;招式种类: A-攻击, I-非攻击, H-受击
physics = N                      ;物理: S-站立, C-蹲, A-空中
;常用的控制器:
velset = 0,0                     ;设定速度 (x,y) (不写这行则不改变速度)
ctrl = 0                        ;设定可控与否 (不写这行则不改变ctrl)
anim = 2601                       ;改变动作 (不写这行则不改变anim)

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 0, Width]
type = Width
trigger1 = 1
edge = 40,40
player = 0,0
;value = 0,0
;ignorehitpause = 
;persistent = 

[State 0, PowerAdd]
type = PowerAdd
trigger1 = animelem = 1
value = -2800
 
[State 0, VarAdd]
type = VarAdd
trigger1 = time = 3
v = 45    
value = 1 + var(44)

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S1450,0

;-----------暗转--------------
[State 1300, SuperPause]
type = SuperPause
trigger1 = time = 0
time = 60
anim = -1
sound = S2000,1
pos = 10,-40
movetime = 12
darken = 1
p2defmul = 1
poweradd = 0
unhittable = 1
[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 10320
ID = 10320
pos = 0,-55
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = 35
pausemovetime = 9999999
supermovetime = 9999999
scale = 0.5,0.5
sprpriority = -3
ontop = 0
ownpal = 1
[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 10330
ID = 10330
pos = 0,-32
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 9999999
supermovetime = 9999999
scale = 0.5,0.5
sprpriority = 7
ontop = 0
ownpal = 1
;--------------------------------------
[State 0, Helper]
type = Helper
trigger1 = time = 0
helpertype = normal ;player
name = "arrow"
ID = 2600
stateno = 2605
pos = -35,-100
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 100
pausemovetime = 100
size.xscale = 0.25
size.yscale = 0.5

[State 0, VelAdd]
type = Velset
trigger1 = 1
x = -0.05
y = -0.03
;ignorehitpause = 
;persistent = 

[State 0, ChangeState]
type = ChangeState
trigger1 = time >300
value = 2602

[Statedef 2602]
type    = S                      ;状态: S-站立, C-蹲, A-空中, L-倒地
movetype= I                     ;招式种类: A-攻击, I-非攻击, H-受击
physics = N                      ;物理: S-站立, C-蹲, A-空中
;常用的控制器:
velset = 0,0                     ;设定速度 (x,y) (不写这行则不改变速度)
ctrl = 0                        ;设定可控与否 (不写这行则不改变ctrl)
anim = 2602                       ;改变动作 (不写这行则不改变anim)

[State 0, PowerAdd]
type = PowerAdd
trigger1 = animelem = 1
value = -600

[State 0, PosAdd]
type = PosAdd
trigger1 = time = 0
y = -20

[State 0, Explod]
type = Explod
trigger1 = animelem = 2
anim = 14411
ID = 14412
pos = 61,-12
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1000
removetime = 12450
pausemovetime = 1000
supermovetime = 1000
scale = 0.5,0.5
sprpriority = 6
removeongethit = 0

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 3
v = 45    
value = 1

[State 1300, SuperPause]
type = SuperPause
trigger1 = animelem = 2
time = 50
anim = -1
sound = S2000,1
pos = 61,-12
movetime = 2
darken = 1
p2defmul = 1
poweradd = 0
unhittable = 1

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 3
id = 14412

[State 0, Helper]
type = Helper
trigger1 = animelem = 3
helpertype = normal ;player
name = "big arrow"
ID = 2610
stateno = 2610
pos = 61,-12
postype = p1    ;p2,front,back,left,right
facing = 1
supermovetime = 0
pausemovetime = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = animelem = 8
value = 50
ctrl = 1

;Big arrow
[Statedef 2610]
type    = S                      ;状态: S-站立, C-蹲, A-空中, L-倒地
movetype= A                      ;招式种类: A-攻击, I-非攻击, H-受击
physics = N                      ;物理: S-站立, C-蹲, A-空中
anim = 2611
sprpriority = 6

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 2610
ID = 2610
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 100000
removetime = -1
pausemovetime = 0
scale = 0.5,0.5
sprpriority = 5
removeongethit = 0

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = 4
y = 2

[State 0, Projectile]
type = Projectile
trigger2 = time = 0
trigger1 = time%3=0
ProjID = 1606
projanim = 1606
projhitanim = -1
projremanim = -1
projcancelanim = -1
projscale = 0.5,0.5   ;缩放
projremove = 1
projremovetime = 3
velocity = 4,2
remvelocity = 0,0
accel = 0,0
velmul = 1
projhits = 1
projpriority = 1
projsprpriority = 3
projedgebound = 40
projstagebound = 40
offset = 0,0		;位置
postype = p1         ;p2,front,back,left,right
projshadow = 0,0,0
supermovetime = 0
pausemovetime = 0
; HitDef
attr = S, NA                     ;Hitdef属性： 站立，普通攻击
damage = 5, 7                   ;招式造成的伤害, 防御伤害
animtype = Medium                 ;动作种类: Light-轻, Medium-中, Heavy-重, Back-后仰 (默认: Light)
guardflag =                    ;能被什么状态的敌人防御
hitflag = MAF                    ;能击中什么状态的敌人
priority = 4, Hit                ;攻击优先度: 0 (最低) to 7 (最高), 4 默认，相杀式的处理：Hit-可以击中非dodge情况的敌方/Miss-我方攻击一定miss/Dodge-一定躲避敌方攻击 (默认: Hit)
pausetime = 0, 0                 ;攻击者暂停的时间, 对手在hitshake的时间
sparkno = -1                      ;火花的动作号 (默认: 在上面设置的动作好)
sparkxy = -10, -76               ;火花相对于p2的X坐标偏移量，火花相对于p1的Y坐标偏移量
hitsound = s1, 2                  ;击中时播放的声音
guardsound = s2, 0                ;被防御时播放的声音
guard.slidetime = 4
ground.type = High               ;种类: High-上段, Low-下段, Trip-绊倒 (默认: Normal)
ground.slidetime = 15             ;对方向后滑的时间
ground.hittime  = 25+8             ;对方在被击中状态的时间
ground.velocity = -3.2,0.63             ;对方被向后推的速度
airguard.velocity = -3.5,0.2     ;空中防御的速度 (默认: (air.xvel*1.5, air.yvel/2))
air.type = High                  ;空中击中的种类: High-上段, Low-下段, Trip-绊倒 (默认: 和ground.type一样)
air.velocity = -3.5,-0.2           ;空中击中时对方被向后推的横向速度, 空中击中时对方被向后推的纵向速度
air.hittime = 20                 ;空中击中对方在被击中状态的时间
getpower = 0,1
fall.recovertime = 90
fall = 1


[State 0, ChangeState]
type = ChangeState
trigger1 = pos y >=-30 && vel y >0
value = 2611

[Statedef 2611]
type    = S                      ;状态: S-站立, C-蹲, A-空中, L-倒地
movetype= A                      ;招式种类: A-攻击, I-非攻击, H-受击
physics = N                      ;物理: S-站立, C-蹲, A-空中
velset = 0,0
sprpriority = 4
anim = 26150

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time <10
id = 2610
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S12450,14

[State 0, EnvShake]
type = EnvShake
trigger1 = time = 0
time = 60
freq = 60
ampl = -14
phase = 150

[State 0, PosSet]
type = PosSet
trigger1 = time = 0
y = 0
[State 0, PosAdd]
type = null;PosAdd
trigger1 = time = 0
x = 30

[State 0, Explod];光柱
type = Explod
trigger1 = time = 0
anim = 2620
ID = 2620
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 112450
removetime = -2
pausemovetime = 0
scale = 0.7,0.6
sprpriority = 6
removeongethit = 0
[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 2621
ID = 2621
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 112450
removetime = -2
pausemovetime = 0
scale = 0.7,0.6
sprpriority = 7
removeongethit = 0

[State 0, Projectile]
type = Projectile
trigger1 = time = 0
ProjID = 1606
projanim = 1606
projhitanim = -1
projremanim = -1
projcancelanim = -1
projscale = 0.5,0.5   ;缩放
projremove = 1
projremovetime = 44
velocity = 0,0
remvelocity = 0,0
accel = 0,0
velmul = 1
projhits = 1
projpriority = 1
projsprpriority = 3
projedgebound = 40
projstagebound = 40
offset = 0,0		;位置
postype = p1         ;p2,front,back,left,right
projshadow = 0,0,0
supermovetime = 0
pausemovetime = 0
; HitDef
attr = S, NA                     ;Hitdef属性： 站立，普通攻击
damage = 150, 7                   ;招式造成的伤害, 防御伤害
animtype = heavy                 ;动作种类: Light-轻, Medium-中, Heavy-重, Back-后仰 (默认: Light)
guardflag =                    ;能被什么状态的敌人防御
hitflag = MAF                    ;能击中什么状态的敌人
priority = 4, Hit                ;攻击优先度: 0 (最低) to 7 (最高), 4 默认，相杀式的处理：Hit-可以击中非dodge情况的敌方/Miss-我方攻击一定miss/Dodge-一定躲避敌方攻击 (默认: Hit)
pausetime = 0, 0                 ;攻击者暂停的时间, 对手在hitshake的时间
sparkno = -1                      ;火花的动作号 (默认: 在上面设置的动作好)
sparkxy = -10, -76               ;火花相对于p2的X坐标偏移量，火花相对于p1的Y坐标偏移量
hitsound = s1, 3                  ;击中时播放的声音
guardsound = s2, 0                ;被防御时播放的声音
guard.slidetime = 4
ground.type = High               ;种类: High-上段, Low-下段, Trip-绊倒 (默认: Normal)
ground.slidetime = 15             ;对方向后滑的时间
ground.hittime  = 25+8             ;对方在被击中状态的时间
ground.velocity = -0,8.63             ;对方被向后推的速度
airguard.velocity = -0,0.2     ;空中防御的速度 (默认: (air.xvel*1.5, air.yvel/2))
air.type = High                  ;空中击中的种类: High-上段, Low-下段, Trip-绊倒 (默认: 和ground.type一样)
air.velocity = -0,-8.2           ;空中击中时对方被向后推的横向速度, 空中击中时对方被向后推的纵向速度
air.hittime = 20                 ;空中击中对方在被击中状态的时间
getpower = 0,1
fall.recovertime = 90
fall = 1

[State 0, Explod];地火
type = Explod
trigger1 = time = 0
trigger2 = gametime%40 =0
anim = 2614
ID = 2614
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 0
scale = 0.5,0.5
sprpriority = 3
removeongethit = 0
[State 0, Explod]
type = Explod
trigger1 = time = 0
trigger2 = gametime%40 =0
anim = 2615
ID = 2614
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 0
scale = 0.5,0.5
sprpriority = 4
removeongethit = 0

[State 0, Projectile]
type = Projectile
trigger2 = time = 0
trigger1 = gametime%5=0
ProjID = 26150
projanim = 26150
projhitanim = -1
projremanim = -1
projcancelanim = -1
projscale = 0.5,0.5   ;缩放
projremove = 1
projremovetime = 5
velocity = 0,0
remvelocity = 0,0
accel = 0,0
velmul = 1
projhits = 1
projpriority = 1
projsprpriority = 3
projedgebound = 40
projstagebound = 40
offset = 0,0		;位置
postype = p1         ;p2,front,back,left,right
projshadow = 0,0,0
supermovetime = 0
pausemovetime = 0
; HitDef
attr = S, NA                     ;Hitdef属性： 站立，普通攻击
damage = 2, 7                   ;招式造成的伤害, 防御伤害
animtype = Medium                 ;动作种类: Light-轻, Medium-中, Heavy-重, Back-后仰 (默认: Light)
guardflag =                  ;能被什么状态的敌人防御
hitflag = MAF                  ;能击中什么状态的敌人
priority = 4, Hit                ;攻击优先度: 0 (最低) to 7 (最高), 4 默认，相杀式的处理：Hit-可以击中非dodge情况的敌方/Miss-我方攻击一定miss/Dodge-一定躲避敌方攻击 (默认: Hit)
pausetime = 0, 0                 ;攻击者暂停的时间, 对手在hitshake的时间
sparkno = -1                      ;火花的动作号 (默认: 在上面设置的动作好)
sparkxy = -10, -76               ;火花相对于p2的X坐标偏移量，火花相对于p1的Y坐标偏移量
hitsound = -1;s1, 2                  ;击中时播放的声音
guardsound = s2, 0                ;被防御时播放的声音
guard.slidetime = 4
ground.type = High               ;种类: High-上段, Low-下段, Trip-绊倒 (默认: Normal)
ground.slidetime = 15             ;对方向后滑的时间
ground.hittime  = 25+8             ;对方在被击中状态的时间
ground.velocity = -0,0             ;对方被向后推的速度
airguard.velocity = 0,0.2     ;空中防御的速度 (默认: (air.xvel*1.5, air.yvel/2))
air.type = High                  ;空中击中的种类: High-上段, Low-下段, Trip-绊倒 (默认: 和ground.type一样)
air.velocity = -0,-0.55           ;空中击中时对方被向后推的横向速度, 空中击中时对方被向后推的纵向速度
air.hittime = 20                 ;空中击中对方在被击中状态的时间
getpower = 0,1
fall.recovertime = 90
fall = 0
palfx.time=20
palfx.add=0,-50,80
palfx.sinadd=50,50,50,15
palfx.color=1
palfx.invertall=1
ID = 26150

[State 0, VarSet]
type = parentVarSet
trigger1 = time <= 3
var(23) = 0


[State 0, DestroySelf]
type = DestroySelf
trigger1 = ishelper
trigger1 = root,var(23)>60
trigger2 = time > 600
;ignorehitpause = 
;persistent = 



;arrow helper
[Statedef 2605]
type    = S                      ;状态: S-站立, C-蹲, A-空中, L-倒地
movetype= A                      ;招式种类: A-攻击, I-非攻击, H-受击
physics = N                      ;物理: S-站立, C-蹲, A-空中
anim = 14410

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
value = -30
;scale = 
ignorehitpause = 1
;persistent = 

[State 0, BindToRoot]
type = BindToRoot
trigger1 = 1
time = 1
;facing = 0
pos = -35,-100
ignorehitpause = 1
;persistent = 

[State 0, PlaySnd]
type = PlaySnd
triggerall = time >100
trigger1 = gametime%12 = 0
trigger2 = gametime%12 = 5
trigger3 = gametime%12 = 10
trigger4 = gametime%13 = 0
trigger5 = gametime%12 = 7
value = S12450,11+random%3

[State 0, Trans]
type = Trans
trigger1 = 1
trans = addalpha ;none, add, addalpha, add1, sub
alpha = ifelse(time*5<256,time*5,256),256
ignorehitpause = 1
;persistent = 
;-------------PROJJJJJJJJJJ---------------
[State 0, Projectile]
type = Projectile
triggerall = time >60
trigger1 = gametime%12 = 0
ProjID = 2600
projanim = 2610
projhitanim = -1
projremanim = -1
projcancelanim = -1
projscale =0.15,0.15   ;缩放
projremove = 0
projremovetime = 450
velocity = 12,6
remvelocity = 0,0
accel = 0,0
velmul = 1
projhits = 1
projpriority = 1
projsprpriority = 3
projedgebound = 40
projstagebound = 40
offset = 0-random%12,-5+random%20		;位置
postype = p1         ;p2,front,back,left,right
projshadow = 0,0,0
supermovetime = 12450
pausemovetime = 0
; HitDef
attr = S, NP                     ;Hitdef属性： 站立，普通攻击
damage = ceil(ifelse(root,var(6)<10,10,3+(root,Palno)/2))+300*(root,Palno=11), 5                   ;招式造成的伤害, 防御伤害
animtype = Medium                 ;动作种类: Light-轻, Medium-中, Heavy-重, Back-后仰 (默认: Light)
guardflag = MA                   ;能被什么状态的敌人防御
hitflag = MAF                    ;能击中什么状态的敌人
priority = 4, Hit                ;攻击优先度: 0 (最低) to 7 (最高), 4 默认，相杀式的处理：Hit-可以击中非dodge情况的敌方/Miss-我方攻击一定miss/Dodge-一定躲避敌方攻击 (默认: Hit)
pausetime = 0, 13                 ;攻击者暂停的时间, 对手在hitshake的时间
sparkno = s10210                      ;火花的动作号 (默认: 在上面设置的动作好)
sparkxy = 30, 0               ;火花相对于p2的X坐标偏移量，火花相对于p1的Y坐标偏移量
hitsound = s1, 2                  ;击中时播放的声音
guardsound = s2, 0                ;被防御时播放的声音
guard.slidetime = 4
ground.type = low               ;种类: High-上段, Low-下段, Trip-绊倒 (默认: Normal)
ground.slidetime = 5             ;对方向后滑的时间
ground.hittime  = 20             ;对方在被击中状态的时间
ground.velocity = -3.1,-4.4             ;对方被向后推的速度
airguard.velocity = -1.5,-0.8     ;空中防御的速度 (默认: (air.xvel*1.5, air.yvel/2))
air.type = High                  ;空中击中的种类: High-上段, Low-下段, Trip-绊倒 (默认: 和ground.type一样)
air.velocity = -2.6,-3.3           ;空中击中时对方被向后推的横向速度, 空中击中时对方被向后推的纵向速度
air.hittime = 40                 ;空中击中对方在被击中状态的时间、
fall.recovertime = 90      
fall = 1
fall.recovertime = 40
id = 2600
[State 0, Projectile]
type = Projectile
triggerall = time >60
trigger1 = gametime%12 = 5
ProjID = 2600
projanim = 2610
projhitanim = -1
projremanim = -1
projcancelanim = -1
projscale =0.15,0.15   ;缩放
projremove = 0
projremovetime = 450
velocity = 12,6
remvelocity = 0,0
accel = 0,0
velmul = 1
projhits = 1
projpriority = 1
projsprpriority = 3
projedgebound = 40
projstagebound = 40
offset = 40-random%12,-65+random%20		;位置
postype = p1         ;p2,front,back,left,right
projshadow = 0,0,0
supermovetime = 12450
pausemovetime = 0
; HitDef
attr = S, NP                     ;Hitdef属性： 站立，普通攻击
damage = ceil(ifelse(root,var(6)<10,10,2+(root,Palno)/2))+300*(root,Palno=11), 5                   ;招式造成的伤害, 防御伤害
animtype = Medium                 ;动作种类: Light-轻, Medium-中, Heavy-重, Back-后仰 (默认: Light)
guardflag = MA                   ;能被什么状态的敌人防御
hitflag = MAF                    ;能击中什么状态的敌人
priority = 4, Hit                ;攻击优先度: 0 (最低) to 7 (最高), 4 默认，相杀式的处理：Hit-可以击中非dodge情况的敌方/Miss-我方攻击一定miss/Dodge-一定躲避敌方攻击 (默认: Hit)
pausetime = 0, 13                 ;攻击者暂停的时间, 对手在hitshake的时间
sparkno = s10210                      ;火花的动作号 (默认: 在上面设置的动作好)
sparkxy = 30, 0               ;火花相对于p2的X坐标偏移量，火花相对于p1的Y坐标偏移量
hitsound = s1, 2                  ;击中时播放的声音
guardsound = s2, 0                ;被防御时播放的声音
guard.slidetime = 4
ground.type = low               ;种类: High-上段, Low-下段, Trip-绊倒 (默认: Normal)
ground.slidetime = 5             ;对方向后滑的时间
ground.hittime  = 20             ;对方在被击中状态的时间
ground.velocity = -3.1,-4.4             ;对方被向后推的速度
airguard.velocity = -1.5,-0.8     ;空中防御的速度 (默认: (air.xvel*1.5, air.yvel/2))
air.type = High                  ;空中击中的种类: High-上段, Low-下段, Trip-绊倒 (默认: 和ground.type一样)
air.velocity = -2.6,-3.3           ;空中击中时对方被向后推的横向速度, 空中击中时对方被向后推的纵向速度
air.hittime = 40                 ;空中击中对方在被击中状态的时间、
fall.recovertime = 90      
fall = 1
fall.recovertime = 40
id = 1100
[State 0, Projectile]
type = Projectile
triggerall = time >60
trigger1 = gametime%12 = 10
ProjID = 2600
projanim = 2610
projhitanim = -1
projremanim = -1
projcancelanim = -1
projscale =0.15,0.15   ;缩放
projremove = 0
projremovetime = 450
velocity = 12,6
remvelocity = 0,0
accel = 0,0
velmul = 1
projhits = 1
projpriority = 1
projsprpriority = 3
projedgebound = 40
projstagebound = 40
offset = -30-random%12,-35+random%20		;位置
postype = p1         ;p2,front,back,left,right
projshadow = 0,0,0
supermovetime = 12450
pausemovetime = 0
; HitDef
attr = S, NP                     ;Hitdef属性： 站立，普通攻击
damage = ceil(ifelse(root,var(6)<10,10,2+(root,Palno)/2))+300*(root,Palno=11), 5                   ;招式造成的伤害, 防御伤害
animtype = Medium                 ;动作种类: Light-轻, Medium-中, Heavy-重, Back-后仰 (默认: Light)
guardflag = MA                   ;能被什么状态的敌人防御
hitflag = MAF                    ;能击中什么状态的敌人
priority = 4, Hit                ;攻击优先度: 0 (最低) to 7 (最高), 4 默认，相杀式的处理：Hit-可以击中非dodge情况的敌方/Miss-我方攻击一定miss/Dodge-一定躲避敌方攻击 (默认: Hit)
pausetime = 0, 13                 ;攻击者暂停的时间, 对手在hitshake的时间
sparkno = s10210                      ;火花的动作号 (默认: 在上面设置的动作好)
sparkxy = 30, 0               ;火花相对于p2的X坐标偏移量，火花相对于p1的Y坐标偏移量
hitsound = s1, 2                  ;击中时播放的声音
guardsound = s2, 0                ;被防御时播放的声音
guard.slidetime = 4
ground.type = low               ;种类: High-上段, Low-下段, Trip-绊倒 (默认: Normal)
ground.slidetime = 5             ;对方向后滑的时间
ground.hittime  = 20             ;对方在被击中状态的时间
ground.velocity = -3.1,-4.4             ;对方被向后推的速度
airguard.velocity = -1.5,-0.8     ;空中防御的速度 (默认: (air.xvel*1.5, air.yvel/2))
air.type = High                  ;空中击中的种类: High-上段, Low-下段, Trip-绊倒 (默认: 和ground.type一样)
air.velocity = -2.6,-3.3           ;空中击中时对方被向后推的横向速度, 空中击中时对方被向后推的纵向速度
air.hittime = 40                 ;空中击中对方在被击中状态的时间、
fall.recovertime = 90      
fall = 1
fall.recovertime = 40
id = 2600
[State 0, Projectile]
type = Projectile
triggerall = time >60
trigger1 = gametime%13 = 0
ProjID = 2600
projanim = 2610
projhitanim = -1
projremanim = -1
projcancelanim = -1
projscale =0.15,0.15   ;缩放
projremove = 0
projremovetime = 450
velocity = 12,6
remvelocity = 0,0
accel = 0,0
velmul = 1
projhits = 1
projpriority = 1
projsprpriority = 3
projedgebound = 40
projstagebound = 40
offset = 30-random%12,40+random%20		;位置
postype = p1         ;p2,front,back,left,right
projshadow = 0,0,0
supermovetime = 12450
pausemovetime = 0
; HitDef
attr = S, NP                     ;Hitdef属性： 站立，普通攻击
damage = ceil(ifelse(root,var(6)<10,10,2+(root,Palno)/2))+300*(root,Palno=11), 5                   ;招式造成的伤害, 防御伤害
animtype = Medium                 ;动作种类: Light-轻, Medium-中, Heavy-重, Back-后仰 (默认: Light)
guardflag = MA                   ;能被什么状态的敌人防御
hitflag = MAF                    ;能击中什么状态的敌人
priority = 4, Hit                ;攻击优先度: 0 (最低) to 7 (最高), 4 默认，相杀式的处理：Hit-可以击中非dodge情况的敌方/Miss-我方攻击一定miss/Dodge-一定躲避敌方攻击 (默认: Hit)
pausetime = 0, 13                 ;攻击者暂停的时间, 对手在hitshake的时间
sparkno = s10210                      ;火花的动作号 (默认: 在上面设置的动作好)
sparkxy = 30, 0               ;火花相对于p2的X坐标偏移量，火花相对于p1的Y坐标偏移量
hitsound = s1, 2                  ;击中时播放的声音
guardsound = s2, 0                ;被防御时播放的声音
guard.slidetime = 4
ground.type = low               ;种类: High-上段, Low-下段, Trip-绊倒 (默认: Normal)
ground.slidetime = 5             ;对方向后滑的时间
ground.hittime  = 20             ;对方在被击中状态的时间
ground.velocity = -3.1,-4.4             ;对方被向后推的速度
airguard.velocity = -1.5,-0.8     ;空中防御的速度 (默认: (air.xvel*1.5, air.yvel/2))
air.type = High                  ;空中击中的种类: High-上段, Low-下段, Trip-绊倒 (默认: 和ground.type一样)
air.velocity = -2.6,-3.3           ;空中击中时对方被向后推的横向速度, 空中击中时对方被向后推的纵向速度
air.hittime = 40                 ;空中击中对方在被击中状态的时间、
fall.recovertime = 90      
fall = 1
fall.recovertime = 40
id = 2600
[State 0, Projectile]
type = Projectile
triggerall = time >60
trigger1 = gametime%12 = 7
ProjID = 2600
projanim = 2610
projhitanim = -1
projremanim = -1
projcancelanim = -1
projscale =0.15,0.15   ;缩放
projremove = 0
projremovetime = 450
velocity = 12,6
remvelocity = 0,0
accel = 0,0
velmul = 1
projhits = 1
projpriority = 1
projsprpriority = 3
projedgebound = 40
projstagebound = 40
offset = 10-random%12,-45+random%20		;位置
postype = p1         ;p2,front,back,left,right
projshadow = 0,0,0
supermovetime = 12450
pausemovetime = 0
; HitDef
attr = S, NP                     ;Hitdef属性： 站立，普通攻击
damage = ceil(ifelse(root,var(6)<10,10,2+(root,Palno)/2))+300*(root,Palno=11), 5                   ;招式造成的伤害, 防御伤害
animtype = Medium                 ;动作种类: Light-轻, Medium-中, Heavy-重, Back-后仰 (默认: Light)
guardflag = MA                   ;能被什么状态的敌人防御
hitflag = MAF                    ;能击中什么状态的敌人
priority = 4, Hit                ;攻击优先度: 0 (最低) to 7 (最高), 4 默认，相杀式的处理：Hit-可以击中非dodge情况的敌方/Miss-我方攻击一定miss/Dodge-一定躲避敌方攻击 (默认: Hit)
pausetime = 0, 13                 ;攻击者暂停的时间, 对手在hitshake的时间
sparkno = s10210                      ;火花的动作号 (默认: 在上面设置的动作好)
sparkxy = 30, 0               ;火花相对于p2的X坐标偏移量，火花相对于p1的Y坐标偏移量
hitsound = s1, 2                  ;击中时播放的声音
guardsound = s2, 0                ;被防御时播放的声音
guard.slidetime = 4
ground.type = low               ;种类: High-上段, Low-下段, Trip-绊倒 (默认: Normal)
ground.slidetime = 5             ;对方向后滑的时间
ground.hittime  = 20             ;对方在被击中状态的时间
ground.velocity = -3.1,-4.4             ;对方被向后推的速度
airguard.velocity = -1.5,-0.8     ;空中防御的速度 (默认: (air.xvel*1.5, air.yvel/2))
air.type = High                  ;空中击中的种类: High-上段, Low-下段, Trip-绊倒 (默认: 和ground.type一样)
air.velocity = -2.6,-3.3           ;空中击中时对方被向后推的横向速度, 空中击中时对方被向后推的纵向速度
air.hittime = 40                 ;空中击中对方在被击中状态的时间、
fall.recovertime = 90      
fall = 1
fall.recovertime = 40
id = 2600
[State 0, Projectile]
type = Projectile
triggerall = time >60
trigger1 = gametime%13 = 0
ProjID = 2600
projanim = 2610
projhitanim = -1
projremanim = -1
projcancelanim = -1
projscale =0.15,0.15   ;缩放
projremove = 0
projremovetime = 450
velocity = 12,6
remvelocity = 0,0
accel = 0,0
velmul = 1
projhits = 1
projpriority = 1
projsprpriority = 3
projedgebound = 40
projstagebound = 40
offset = -30-random%12,30+random%20		;位置
postype = p1         ;p2,front,back,left,right
projshadow = 0,0,0
supermovetime = 12450
pausemovetime = 0
; HitDef
attr = S, NP                     ;Hitdef属性： 站立，普通攻击
damage = ceil(ifelse(root,var(6)<10,10,2+(root,Palno)/2))+300*(root,Palno=11), 5                   ;招式造成的伤害, 防御伤害
animtype = Medium                 ;动作种类: Light-轻, Medium-中, Heavy-重, Back-后仰 (默认: Light)
guardflag = MA                   ;能被什么状态的敌人防御
hitflag = MAF                    ;能击中什么状态的敌人
priority = 4, Hit                ;攻击优先度: 0 (最低) to 7 (最高), 4 默认，相杀式的处理：Hit-可以击中非dodge情况的敌方/Miss-我方攻击一定miss/Dodge-一定躲避敌方攻击 (默认: Hit)
pausetime = 0, 13                 ;攻击者暂停的时间, 对手在hitshake的时间
sparkno = s10210                      ;火花的动作号 (默认: 在上面设置的动作好)
sparkxy = 30, 0               ;火花相对于p2的X坐标偏移量，火花相对于p1的Y坐标偏移量
hitsound = s1, 2                  ;击中时播放的声音
guardsound = s2, 0                ;被防御时播放的声音
guard.slidetime = 4
ground.type = low               ;种类: High-上段, Low-下段, Trip-绊倒 (默认: Normal)
ground.slidetime = 5             ;对方向后滑的时间
ground.hittime  = 20             ;对方在被击中状态的时间
ground.velocity = -3.1,-4.4             ;对方被向后推的速度
airguard.velocity = -1.5,-0.8     ;空中防御的速度 (默认: (air.xvel*1.5, air.yvel/2))
air.type = High                  ;空中击中的种类: High-上段, Low-下段, Trip-绊倒 (默认: 和ground.type一样)
air.velocity = -2.6,-3.3           ;空中击中时对方被向后推的横向速度, 空中击中时对方被向后推的纵向速度
air.hittime = 40                 ;空中击中对方在被击中状态的时间、
fall.recovertime = 90      
fall = 1
fall.recovertime = 40
id = 2600
[State 0, Projectile]
type = Projectile
triggerall = time >60
trigger1 = gametime%12 = 10
ProjID = 2600
projanim = 2610
projhitanim = -1
projremanim = -1
projcancelanim = -1
projscale =0.15,0.15   ;缩放
projremove = 0
projremovetime = 450
velocity = 12,6
remvelocity = 0,0
accel = 0,0
velmul = 1
projhits = 1
projpriority = 1
projsprpriority = 3
projedgebound = 40
projstagebound = 40
offset = -30-random%20,90+random%20		;位置
postype = p1         ;p2,front,back,left,right
projshadow = 0,0,0
supermovetime = 12450
pausemovetime = 0
; HitDef
attr = S, NP                     ;Hitdef属性： 站立，普通攻击
damage = ceil(ifelse(root,var(6)<10,10,2+(root,Palno)/2))+300*(root,Palno=11), 5                   ;招式造成的伤害, 防御伤害
animtype = Medium                 ;动作种类: Light-轻, Medium-中, Heavy-重, Back-后仰 (默认: Light)
guardflag = MA                   ;能被什么状态的敌人防御
hitflag = MAF                    ;能击中什么状态的敌人
priority = 4, Hit                ;攻击优先度: 0 (最低) to 7 (最高), 4 默认，相杀式的处理：Hit-可以击中非dodge情况的敌方/Miss-我方攻击一定miss/Dodge-一定躲避敌方攻击 (默认: Hit)
pausetime = 0, 13                 ;攻击者暂停的时间, 对手在hitshake的时间
sparkno = s10210                      ;火花的动作号 (默认: 在上面设置的动作好)
sparkxy = 30, 0               ;火花相对于p2的X坐标偏移量，火花相对于p1的Y坐标偏移量
hitsound = s1, 2                  ;击中时播放的声音
guardsound = s2, 0                ;被防御时播放的声音
guard.slidetime = 4
ground.type = low               ;种类: High-上段, Low-下段, Trip-绊倒 (默认: Normal)
ground.slidetime = 5             ;对方向后滑的时间
ground.hittime  = 20             ;对方在被击中状态的时间
ground.velocity = -3.1,-4.4             ;对方被向后推的速度
airguard.velocity = -1.5,-0.8     ;空中防御的速度 (默认: (air.xvel*1.5, air.yvel/2))
air.type = High                  ;空中击中的种类: High-上段, Low-下段, Trip-绊倒 (默认: 和ground.type一样)
air.velocity = -2.6,-3.3           ;空中击中时对方被向后推的横向速度, 空中击中时对方被向后推的纵向速度
air.hittime = 40                 ;空中击中对方在被击中状态的时间、
fall.recovertime = 90      
fall = 1
fall.recovertime = 40
id = 2600
;--------------------11P带下落即死-------------------------------------------------------
[State 1011, ReversalDef]
type = ReversalDef
trigger1 =root,Palno = 11
reversal.attr = SCA,AA,AT,AP           ;SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
pausetime = 2,15
sparkno = S811
sparkxy = 0,0
hitsound = S1,2
p2stateno = 5110
fall = 1
fall.damage = random+450+(root,var(17))*2
fall.recover=0
p2getp1state=0
pausemovetime = 9999999999
supermovetime = 9999999999
ignorehitpause = 1
attr =
;==============


[State 0, ChangeState]
type = ChangeState
trigger1 = root,stateno != 2601
trigger1 = time > 260
value = 2606

[Statedef 2606]
type    = U                      ;状态: S-站立, C-蹲, A-空中, L-倒地
movetype= I                      ;招式种类: A-攻击, I-非攻击, H-受击
physics = N                      ;物理: S-站立, C-蹲, A-空中

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
value = -30
scale = 1-time*0.01,1-time*0.01
ignorehitpause = 1

[State 0, Trans]
type = Trans
trigger1 = 1
trans = addalpha ;none, add, addalpha, add1, sub
alpha = ifelse(time*5<256,time*5,256),256
ignorehitpause = 1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = time > 100
;ignorehitpause = 
;persistent = 


;P-Redemption
[Statedef 3000]
type    = S                      ;状态: S-站立, C-蹲, A-空中, L-倒地
movetype= A                      ;招式种类: A-攻击, I-非攻击, H-受击
physics = S                      ;物理: S-站立, C-蹲, A-空中
juggle  = 1                      ;增加的juggle点数
;常用的控制器:
velset = 0,0                     ;设定速度 (x,y) (不写这行则不改变速度)
ctrl = 0                        ;设定可控与否 (不写这行则不改变ctrl)
anim = 3000                       ;改变动作 (不写这行则不改变anim)
poweradd = 0                    ;增加气 (不写这行则不增加气)
sprpriority = 2                  ;设定p1的贴图优先度到2 (在前面)

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S1350,0

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 2
v = 45    
value = -1

;-----------暗转--------------
[State 1300, SuperPause]
type = SuperPause
trigger1 = time = 0
time = 45
anim = -1
sound = S2000,1
pos = 10,-40
movetime = 0
darken = 1
p2defmul = 1
poweradd = 0
unhittable = 1
[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 10320
ID = 10320
pos = 0,-55
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = 45
pausemovetime = 9999999
supermovetime = 9999999
scale = 0.5,0.5
sprpriority = -3
ontop = 0
ownpal = 1
[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 10330
ID = 10330
pos = 0,-32
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 9999999
supermovetime = 9999999
scale = 0.5,0.5
sprpriority = 7
ontop = 0
ownpal = 1
;----------------------------------------------

[State 0, Projectile]
type = Projectile
trigger1 = AnimElem = 2
ProjID = -1
projanim = 3005
projhitanim = -1
projremanim = -1
projcancelanim = -1
projscale = 0.5,0.5   ;缩放
projremove = 1
projremovetime = 42
velocity = 0,0
remvelocity = 0,0
accel = 0,0
velmul = 1
projhits = 1
projpriority = 1
projsprpriority = 3
projedgebound = 40
projstagebound = 40
offset = 0,0		;位置
postype = left        ;p2,front,back,left,right
projshadow = 0,0,0
supermovetime = 0
pausemovetime = 0
; HitDef
attr = S, NA                     ;Hitdef属性： 站立，普通攻击
damage = 33+12450*(Palno>=9), 7                   ;招式造成的伤害, 防御伤害
animtype = Medium                 ;动作种类: Light-轻, Medium-中, Heavy-重, Back-后仰 (默认: Light)
guardflag = MA                   ;能被什么状态的敌人防御
hitflag = MAF                    ;能击中什么状态的敌人
priority = 4, Hit                ;攻击优先度: 0 (最低) to 7 (最高), 4 默认，相杀式的处理：Hit-可以击中非dodge情况的敌方/Miss-我方攻击一定miss/Dodge-一定躲避敌方攻击 (默认: Hit)
pausetime = 8, 8                 ;攻击者暂停的时间, 对手在hitshake的时间
sparkno = -1                      ;火花的动作号 (默认: 在上面设置的动作好)
sparkxy = -10, -76               ;火花相对于p2的X坐标偏移量，火花相对于p1的Y坐标偏移量
hitsound = s1, 2                  ;击中时播放的声音
guardsound = s2, 0                ;被防御时播放的声音
guard.slidetime = 4
ground.type = High               ;种类: High-上段, Low-下段, Trip-绊倒 (默认: Normal)
ground.slidetime = 10             ;对方向后滑的时间
ground.hittime  = 25             ;对方在被击中状态的时间
ground.velocity = -1.2             ;对方被向后推的速度
airguard.velocity = -1.5,-0.8     ;空中防御的速度 (默认: (air.xvel*1.5, air.yvel/2))
air.type = High                  ;空中击中的种类: High-上段, Low-下段, Trip-绊倒 (默认: 和ground.type一样)
air.velocity = -0.5,-2           ;空中击中时对方被向后推的横向速度, 空中击中时对方被向后推的纵向速度
air.hittime = 20                 ;空中击中对方在被击中状态的时间
getpower = 50,50
fall.recovertime = 40
p1stateno = 3005
p2stateno = 3020
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = AnimElem = 2
anim = 3006
ID = 3006
pos = 0,0
postype = left  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 99999
removetime = -2
pausemovetime = 999999
scale = 0.5,0.5
sprpriority = 0
ontop = 1
shadow = 0,0,0
ownpal = 0
removeongethit = 0

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = random < 450
flag = unguardable

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;------------------------------------------------
;P-Redemption-自己
[Statedef 3005]
type    = S                      ;状态: S-站立, C-蹲, A-空中, L-倒地
movetype= A                      ;招式种类: A-攻击, I-非攻击, H-受击
physics = S                      ;物理: S-站立, C-蹲, A-空中
juggle  = 1                      ;增加的juggle点数
;常用的控制器:
velset = 0,0                     ;设定速度 (x,y) (不写这行则不改变速度)
ctrl = 0                        ;设定可控与否 (不写这行则不改变ctrl)
anim = 3001                       ;改变动作 (不写这行则不改变anim)
poweradd = 0                    ;增加气 (不写这行则不增加气)
sprpriority = 2                  ;设定p1的贴图优先度到2 (在前面)

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 45    
value = -11

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time = 1
id = 3100

[State 0, Turn]
type = Turn
trigger1 = facing != 1
ignorehitpause = 0

[State 0, 黑场]
type = BGPalFX
trigger1 = time = [0,515]
time = 1
mul = 0,0,0
ignorehitpause = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay
flag2 = timerfreeze

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0

[State 0, 自身位置]
type = PosSet
trigger1 = time = 0
x = -120
y = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 5
value = S1400,0
[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 5
value = S2000,1

[State 0, Explod]
type = Explod
trigger1 = animelem = 5
anim = 11999
ID = 11999
pos = 0,0
postype = back  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 9999999
supermovetime = 9999999
scale = 0.5,0.5
sprpriority = 2
ontop = 0
ownpal = 1

[State 0, Explod]
type = Explod
trigger1 = animelem = 5
anim = 11101
ID = 301111
pos = 25,-65
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = 52
pausemovetime = 0
scale = 0.5,0.5
sprpriority = 0
removeongethit = 6
ontop = 1

[State 0, Helper]
type = Helper
trigger1 = animelem = 7
helpertype = normal ;player
name = "zzzz"
ID = 3010
stateno = 3010
pos = 0,0
postype = p2    ;p2,front,back,left,right
facing = 1
ownpal = 0
supermovetime = 0
pausemovetime = 0

[State 0, VarSet]
type = VarSet
trigger1 = 1
var(51) = 1
ignorehitpause = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = time >570
trigger1 = enemy,alive = 1 
trigger1 = roundstate > 2
value = 3006
ctrl = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = enemy,alive = 0
trigger1 = time > 570
value = 3006
ctrl = 1
 
;------------------------

[Statedef 3006]
type    = S                      ;状态: S-站立, C-蹲, A-空中, L-倒地
;movetype= I                      ;招式种类: A-攻击, I-非攻击, H-受击
;physics = S                      ;物理: S-站立, C-蹲, A-空中
;ctrl = 0                        ;设定可控与否 (不写这行则不改变ctrl)
anim = 11                       ;改变动作 (不写这行则不改变anim)
;sprpriority = 2                  ;设定p1的贴图优先度到2 (在前面)

[State 0, LifeAdd]
type = LifeAdd
trigger1 = gametime%15=1
value = 1
;ignorehitpause = 
;persistent = 


[State 0, Null]
type = Null
trigger1 = 1
;ignorehitpause = 
;persistent = 

;----------------------

;--------
;P-Redemption-对手
[Statedef 3020]
type    = A                      ;状态: S-站立, C-蹲, A-空中, L-倒地
movetype= H                      ;招式种类: A-攻击, I-非攻击, H-受击
physics = N                      ;物理: S-站立, C-蹲, A-空中
ctrl = 0                        ;设定可控与否 (不写这行则不改变ctrl)
anim = 5030                       ;改变动作 (不写这行则不改变anim)
sprpriority = 1                  ;设定p1的贴图优先度到2 (在前面)
velset = 0,0
[State 0, ChangeAnim2]
type = ChangeAnim2
trigger1 = time = 0
value = 2999

[State 0, PosSet]
type = PosSet
trigger1 = time = 0
x = 50
y = -65

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 0, LifeAdd]
type = LifeAdd
trigger1 = time = [175,430]
trigger1 = (Gametime%7) = 0
value = -12
kill = 1
absolute = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = time = 447
value = 3025
ctrl = 0

[State 0, LifeAdd]
type = Lifeset
trigger1 = time = 468
value = 0

[State 0, SelfState]
type = SelfState
trigger1 = time = 530
value = 5050

;P-Redemption-对手
[Statedef 3025]
type    = A                      ;状态: S-站立, C-蹲, A-空中, L-倒地
movetype= H                      ;招式种类: A-攻击, I-非攻击, H-受击
physics = N                      ;物理: S-站立, C-蹲, A-空中
ctrl = 0                        ;设定可控与否 (不写这行则不改变ctrl)

[State 0, NotHitBy]
type = NotHitBy
trigger1 = time <40
value = SCA
time = 1

[State 0, LifeAdd]
type = LifeAdd
trigger1 = time > 10
trigger1 = (Gametime%7) = 0
value = -100
kill = 1
absolute = 1

[State 0, LifeAdd]
type = Lifeset
trigger1 = time = 20
value = 0

[State 0, SelfState]
type = SelfState
trigger1 = time = 60
value = 5050

;---------------------------------------------------
;受身
[Statedef 4000]
type = S
ctrl = 0
anim = 4000
velset = 0,0
poweradd = 50

[State 4000, ]
type = PosSet
trigger1 = 1
y = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S2,3

[State 4000, 闪烁]
type = PalFX
trigger1 = Time = 0
time = 30
add = 100,100,100
sinadd = 255,255,255,20
invertall = 0
IgnoreHitPause = 1
Persistent = 4

[State 0, ChangeState]
type = ChangeState
trigger1 = Time >= 15
value = 4001
ctrl = 0
;---

[Statedef 4001]
type = S
ctrl = 0
anim = 4001
velset = 0,0

[State 0, PosAdd]
type = PosAdd
trigger1 = time = 0
x = -60 - random%20 

[State 4001,-2]
type = NotHitBy
Trigger1 = 1
value = SCA,AA,AT,AP
ignorehitpause = 1

[State 4001, ]
type = PosSet
trigger1 = Pos Y >= 0
y = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = time = 2
value = 0
ctrl = 1

[Statedef 12450]
type    = S                      ;状态: S-站立, C-蹲, A-空中, L-倒地
movetype= I                      ;招式种类: A-攻击, I-非攻击, H-受击
physics = S                      ;物理: S-站立, C-蹲, A-空中
juggle  = 0                      ;增加的juggle点数
velset = 0,0                     ;设定速度 (x,y) (不写这行则不改变速度)
ctrl = 0                        ;设定可控与否 (不写这行则不改变ctrl)
anim = 900                       ;改变动作 (不写这行则不改变anim)
poweradd = 50                    ;增加气 (不写这行则不增加气)

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = random > 450
trigger1 = time = 0
value = S3000,0

[State 900, ReversalDef]
type = ReversalDef
trigger1 = Animelem = 1 
reversal.attr = SCA,AA,AT,AP           ;SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
pausetime = 25,38
sparkno = S10030
hitsound = S2,2
p1stateno = 910
ignorehitpause = 1
;persistent = 

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 14410
ID = 14410
pos = 25,-65
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -1
pausemovetime = 0
scale = 0.15,0.3
sprpriority = 7

[State 0, CtrlSet]
type = CtrlSet
trigger1 = time > 28
value = 1

[State 900, ]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; 重载common1.cns里的state（用同样的state号）
;---------------------------------------------------------------------------

;---------------------------------------------------------------------------
; 每一帧执行(statedef -2)
;---------------------------------------------------------------------------


;---------------------------------------------------------------------------
; 在自己的state里每一帧执行(statedef -3)
;---------------------------------------------------------------------------

[Statedef 10191];--------| 僀儞僩儘梡僿儖僷乕 |------------------------|
type 	= S
ctrl 	= 0
anim 	= 10191
velset 	= -2, 0
sprpriority = 3

[State 10191]
type 	= velset
trigger1 = parentdist x = 0
x 		= 0

[State 10191]
type 	= DestroySelf
trigger1 = time = 70


[Statedef 10192]
type 	= S
ctrl 	= 0
anim 	= 10192
velset 	= 2, 0
sprpriority = 3

[State 10192]
type 	= velset
trigger1 = parentdist x = 0
x 		= 0

[State 10192]
type 	= DestroySelf
trigger1 = time = 70
