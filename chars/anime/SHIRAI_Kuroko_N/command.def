;==============================================================================================
;=======================================< COMMAND FILE >=======================================
;==============================================================================================
; ; means this line is not used by mugen called commented line, only for human to read.
;===================< BUTTON REMAPPING >===================

[Remap]
;If you are using keyboard or arcade stick use this (Un-comment the ;) (without ; means active)
x = x
y = y
z = z
a = a
b = b
c = c
s = s

;If you are using PS4 or Xbox gamepad, use this (Un-comment the ;)(without ; means active)
;x = x
;y = c
;z = z
;a = a
;b = b
;c = y
;s = s


;===================< DEFAULT VALUES >===================

[Defaults]
command.time = 1
command.buffer.time = 1

;===================< SUPER MOTIONS >===================
[Command]
name = "super-01"
command = ~B,DB,D,DF,F,b+c
time = 32
buffer.time = 22

[Command]
name = "super-02"
command = ~F,DF,D,DB,B,b+c
time = 32
buffer.time = 22

[Command]
name = "cross_super"
command = ~B,DB,D,DF,F,a+x
time = 32
buffer.time = 22

[Command]
name = "support_super"
command = ~B,DB,D,DF,F,x
time = 32
buffer.time = 22

;===================<Special Moves> ====================
[Command]
name = "qcf-ab"
command = ~D, DF, F, a+b
time = 20
buffer.time = 20

[Command]
name = "qcf-P"
command = ~D, DF, F, a
time = 20
buffer.time = 18

[Command]
name = "qcf-P"
command = ~D, DF, F, b
time = 20
buffer.time = 12

[Command]
name = "qcf-P"
command = ~D, DF, F, c
time = 20
buffer.time = 18

[Command]
name = "qcb-ab"
command = ~D, DB, B, a+b
time = 20
buffer.time = 20

[Command]
name = "qcb-P"
command = ~D, DB, B, a
time = 18
buffer.time = 18

[Command]
name = "qcb-P"
command = ~D, DB, B, b
time = 18
buffer.time = 18

[Command]
name = "qcb-P"
command = ~D, DB, B, c
time = 18
buffer.time = 18

[Command]
name = "recovery"
command = ~D, DB, B
time = 16
buffer.time = 12

[Command]
name = "recovery"
command = ~D, DF, F
time = 16
buffer.time = 12

;===================<System Moves>=============
[Command]
name = "highjump"
command = $D, $U
time = 12
buffer.time = 2

[Command]
name = "up_doublejump"
command = $U
time = 2
buffer.time = 2

[Command]
name = "run"
command = F,F
time = 10
buffer.time = 8

[Command]
name = "dashback"
command = B,B
time = 10
buffer.time = 8

[Command]
name = "a+b+c"
command = a+b+c
time = 8
buffer.time = 8

[Command]
name = "a+b"
command = a+b
time = 6
buffer.time = 8

[Command]
name = "b+c"
command = b+c
time = 6
buffer.time = 8

[Command]
name = "a+c"
command = a+c
time = 6
buffer.time = 8

;===================< SINGLE BUTTON >===================

[Command]
name = "a"
command = a
time = 2
buffer.time = 4

[Command]
name = "b"
command = b
time = 2
buffer.time = 4

[Command]
name = "c"
command = c
time = 2
buffer.time = 4

[Command]
name = "x"
command = x
time = 2
buffer.time = 16

[Command]
name = "y"
command = y
time = 2
buffer.time = 4

[Command]
name = "z"
command = z
time = 2
buffer.time = 4

[Command]
name = "start"
command = s
time = 2
buffer.time = 4

;===================< HOLD DIR >===================

[Command]
name = "holdfwd"
command = /$F
time = 1

[Command]
name = "holdback"
command = /$B
time = 1

[Command]
name = "holdup"
command = /$U
time = 1

[Command]
name = "holddown"
command = /$D
time = 1


;===================< HOLD BUTTON >===================

[Command]
name = "holda"
command = /a
time = 1

[Command]
name = "holdb"
command = /b
time = 1

[Command]
name = "holdc"
command = /c
time = 1

[Command]
name = "holdx"
command = /x
time = 1

[Command]
name = "holdy"
command = /y
time = 1

[Command]
name = "holdz"
command = /z
time = 1

[Command]
name = "holdstart"
command = /s
time = 1


;===================< DIR >===================

[Command]
name = "fwd"
command = F
time = 1
buffer.time = 1

[Command]
name = "back"
command = B
time = 1
buffer.time = 1

[Command]
name = "up"
command = U
time = 1
buffer.time = 1

[Command]
name = "down"
command = D
time = 1
buffer.time = 1

[Command]
name = "fwd_release"
command = ~F
time = 1
buffer.time = 1

[Command]
name = "back_release"
command = ~B
time = 1
buffer.time = 1

[Command]
name = "up_release"
command = ~U
time = 1
buffer.time = 1

[Command]
name = "down_release"
command = ~D
time = 1
buffer.time = 1



;===========================================================================
;===============================< -1 STATES >=================================
;===========================================================================

[Statedef -1]
;---------------------- System Wild ---------
;--------------- Double Jump ------------
[State -1, Double Jump Init];Max Allowed times
type = varset
triggerall = !IsHelper
triggerall = var(15) < 1
triggerall = !(StateNo = 39 || StateNo = 40 || StateNo = 45 || StateNo = 980)
trigger1 = StateType != A
trigger2 = StateNo = 5210 && time < 2
var(15) = 1
ignorehitpause = 1

[State -1, Double Jump consume]
type = varadd
triggerall = !IsHelper
triggerall = var(15)
triggerall = StateType = A
trigger1 = (StateNo = [44,45]) && time = 1
trigger2 = StateNo = 110 && time = 1
var(15) = -1
ignorehitpause = 1









;------------------- Blast
[State -2, Blast Power and Combo]; Escape is in -2
type = ChangeState
value = 980
triggerall = AIlevel = 0 && NumEnemy
triggerall = Alive && !(StateNo = [980,989])
triggerall = RoundState = 2
triggerall = !((var(19) & 2) || (var(19) & 4) || (var(19) & 8))
triggerall = NumHelper(20400)
triggerall = Helper(20400),var(5) = 0 || Helper(20400),var(5) = 3
triggerall = Command = "a+b+c" || Command = "z"
trigger1 = Ctrl || (StateNo = 111 && MoveType = I)
trigger1 = var(10) := 1
;Power Up Blast
trigger2 = MoveContact && !(var(18) & 64)
trigger2 = (var(7) && var(7) < 6)
trigger2= var(10) := 2
trigger3 = NumHelper(StateNo+5) && !(var(18) & 64)
trigger3 = Helper(StateNo+5),MoveContact
trigger3 = (var(7) && var(7) < 6)
trigger3= var(10) := 2
;Cancel Blast
;Escape is in -2


;-------------------- Super Moves ----------
; Justice Enforcer
[State -1, Super 01]
type = ChangeState
value = 3000
triggerall = AIlevel = 0 && NumEnemy
triggerall = RoundState = 2
triggerall = StateType != A
triggerall = Power >= 2000 && !NumHelper(7570)
triggerall = Command = "super-01"
trigger1 = Ctrl
trigger2 = MoveContact && var(7) && !(var(18) & 64) && var(7) < 6
trigger3 = NumHelper(StateNo+5) && !(var(18) & 64)
trigger3 = Helper(StateNo+5),MoveContact
trigger3 = var(7) && var(7) < 6

; Rumblo Move Steel Phalanx
[State -1, Super 02]
type = ChangeState
value = 3100
triggerall = AIlevel = 0 && NumEnemy
triggerall = RoundState = 2
triggerall = StateType != A
triggerall = Power >= 2000 && !NumHelper(7570)
triggerall = Command = "super-02"
trigger1 = Ctrl
trigger2 = MoveContact && var(7) && !(var(18) & 64) && var(7) < 6
trigger3 = NumHelper(StateNo+5) && !(var(18) & 64)
trigger3 = Helper(StateNo+5),MoveContact
trigger3 = var(7) && var(7) < 6

;-------------------- Human Trump Card Move
[State -1, Trump Move]
type = ChangeState
value = 2900
triggerall = AIlevel = 0 && NumEnemy
triggerall = RoundState = 2
triggerall = StateType != A
triggerall = var(22)
triggerall = Command = "a+c" || command = "y"
trigger1 = Ctrl
trigger2 = MoveContact && var(7) && !(var(18) & 64) && var(7) < 6
trigger3 = NumHelper(StateNo+5) && !(var(18) & 64)
trigger3 = Helper(StateNo+5),MoveContact
trigger3 = var(7) && var(7) < 6

;-------------------- EX Moves -------------
[State -1, EX-01]
type = ChangeState
value = 1050
triggerall = AIlevel = 0 && NumEnemy
triggerall = RoundState = 2
triggerall = Power >= 1000
triggerall = Command = "qcf-ab"
trigger1 = Ctrl
trigger2 = MoveContact && var(7) && !(var(18) & 64) && var(7) < 5
trigger3 = NumHelper(StateNo+5) && !(var(18) & 64)
trigger3 = Helper(StateNo+5),MoveContact
trigger3 = var(7) && var(7) < 5

[State -1, EX-02 Idiot Combo]
type = ChangeState
value = 1150
triggerall = (var(21) & 1)
triggerall = AIlevel = 0 && NumEnemy
triggerall = RoundState = 2
triggerall = Power >= 1000
triggerall = Command = "a"
trigger1 = StateNo = 907 && NumTarget(907)
trigger1 = MoveContact && var(7) && !(var(18) & 64) && var(7) < 5

[State -1, EX-SP-02]; EX Sexy Teleport
type = ChangeState
value = 1150
triggerall = AIlevel = 0 && NumEnemy
triggerall = RoundState = 2
triggerall = Power >= 1000
triggerall = Command = "qcb-ab"
trigger1 = Ctrl
trigger2 = MoveContact && var(7) && !(var(18) & 64) && var(7) < 5
trigger3 = NumHelper(StateNo+5) && !(var(18) & 64)
trigger3 = Helper(StateNo+5),MoveContact
trigger3 = var(7) && var(7) < 5

;------------------- Special Moves ------------------
[State -1, SP-01]; Steel Darts
type = ChangeState
value = 1000
triggerall = AIlevel = 0 && NumEnemy
triggerall = RoundState = 2
triggerall = Command = "qcf-P"
trigger1 = Ctrl
trigger2 = MoveContact && var(7) && !(var(18) & 64) && var(7) < 4
trigger3 = NumHelper(StateNo+5) && !(var(18) & 64)
trigger3 = Helper(StateNo+5),MoveContact
trigger3 = var(7) && var(7) < 4

[State -1, SP-02]; Sexy Teleport
type = ChangeState
value = 1100
triggerall = AIlevel = 0 && NumEnemy
triggerall = RoundState = 2
triggerall = Command = "qcb-P"
trigger1 = Ctrl
trigger2 = MoveContact && var(7) && !(var(18) & 64) && var(7) < 4
trigger3 = NumHelper(StateNo+5) && !(var(18) & 64)
trigger3 = Helper(StateNo+5),MoveContact
trigger3 = var(7) && var(7) < 4

;------------------- Human Impact Skills ------------
[State -1, Impact Skill 01]
type = ChangeState
value = 900
triggerall = AIlevel = 0 && NumEnemy
triggerall = RoundState = 2
triggerall = StateType != A
triggerall = Command = "a+b" && Command != "holddown" && Command != "holdback"
trigger1 = Ctrl
trigger2 = MoveContact && var(7) && !(var(18) & 64) && var(7) < 4
trigger3 = NumHelper(StateNo+5) && !(var(18) & 64)
trigger3 = Helper(StateNo+5),MoveContact
trigger3 = var(7) && var(7) < 4

[State -1, Impact Skill 01 Idiot combo]
type = ChangeState
value = 900
triggerall = (var(21) & 1)
triggerall = AIlevel = 0 && NumEnemy
triggerall = RoundState = 2
triggerall = StateType != A
triggerall = Command = "a"
triggerall = !(var(18) & 64)
trigger1 = StateNo = 210 && MoveContact

[State -1, Impact Skill 02]
type = ChangeState
value = 950
triggerall = AIlevel = 0 && NumEnemy
triggerall = RoundState = 2
triggerall = StateType != A
triggerall = Command = "a+b" && Command = "holddown"
trigger1 = Ctrl
trigger2 = MoveContact && var(7) && !(var(18) & 64) && var(7) < 4
trigger3 = NumHelper(StateNo+5) && !(var(18) & 64)
trigger3 = Helper(StateNo+5),MoveContact
trigger3 = var(7) && var(7) < 4

[State -1, Impact Skill overhead]
type = ChangeState
value = 930
triggerall = AIlevel = 0 && NumEnemy
triggerall = RoundState = 2
triggerall = StateType != A
triggerall = Command = "a+b" && Command = "holdback"
trigger1 = Ctrl
trigger2 = MoveContact && var(7) && !(var(18) & 64) && var(7) < 4
trigger3 = NumHelper(StateNo+5) && !(var(18) & 64)
trigger3 = Helper(StateNo+5),MoveContact
trigger3 = var(7) && var(7) < 4

; --------------------- Human System ----------------
[State -1, RUN]
type = ChangeState
value = 100
triggerall = AIlevel = 0 && NumEnemy
triggerall = RoundState = 2
triggerall = StateType != A && !(StateNo = [100,101])
triggerall = StateNo < 200
triggerall = Command = "run"
trigger1 = Ctrl

[State -1, DashBack]
type = ChangeState
value = 105
triggerall = AIlevel = 0 && NumEnemy
triggerall = RoundState = 2
triggerall = StateType != A && !(StateNo = [105,106])
triggerall = Command = "dashback"
trigger1 = Ctrl

[State -1, Air Dash]
type = ChangeState
value = 110
triggerall = AIlevel = 0 && NumEnemy
triggerall = RoundState = 2 && !(StateNo = 110)
triggerall = StateType = A || StateNo = 39 || StateNo = 40 || StateNo = 45
triggerall = Pos y < (-90 * Const(Size.yscale))
triggerall = var(48) <= 8
triggerall = Command = "run" || (var(1) >= 10000 && Command = "dashback")
triggerall = StateNo != 111 || var(1) >= 10000
trigger1 = Ctrl

[State -1, Double Jump]
type = ChangeState
value = 45
triggerall = AIlevel = 0 && NumEnemy
triggerall = NumHelper(20400)
triggerall = var(15)
triggerall = RoundState = 2
triggerall = StateType = A
triggerall = (Command = "up_doublejump") && (var(48) <= 8 || (MoveContact = [1,4]))
triggerall = !(StateNo = 980)
trigger1 = Ctrl && !(PrevStateNo = 40 && StateNo=50 && time < 8)
trigger2 = MoveContact && var(7) && !(var(18) & 64) && var(7) < 4
trigger3 = NumHelper(StateNo+5) && !(var(18) & 64)
trigger3 = Helper(StateNo+5),MoveContact
trigger3 = var(7) && var(7) < 4

[State -1, Ground Jump Cancel]
type = ChangeState
value = IFElse(AILevel = 0,40,39)
triggerall = AIlevel = 0 && NumEnemy
triggerall = RoundState = 2
triggerall = StateType != A
triggerall = Command = "holdup"
trigger1 = MoveContact && !(var(18) & 64)
trigger1 = (var(7) && var(7) < 3) || var(24)
trigger2 = NumHelper(StateNo+5) && !(var(18) & 64)
trigger2 = Helper(StateNo+5),MoveContact
trigger2 = (var(7) && var(7) < 3) || var(24)



[State -1, Reflection Guard]
type = Helper
triggerall = AIlevel = 0 && NumEnemy
triggerall = RoundState = 2
triggerall = !NumHelper(7445)
triggerall = (StateNo = [150,155])
triggerall = Command = "a+b"
trigger1 = Power >= 1000
trigger1 = var(6) := 1
trigger2 = (1.0 * Life / LifeMax) < (1.0 * Enemynear,Life / Enemynear,LifeMax)
trigger2 = var(6) := 1
helpertype = normal
stateno = 7445
ID = 7445
name = "Reflection Guard"
postype = P1
pos = Const(Size.ground.front) * Const(Size.xScale), Const(Size.mid.pos.y) * IFElse(StateType = C,0.5,1) * Const(Size.yScale)
size.xScale = Const(Size.xScale)
size.yScale = Const(Size.yScale)
size.proj.doscale = 1; Ignore Hit Pause
;supermovetime = 65535
;pausemovetime = 65535


















;------------------- AI Support Moves ---------------


; Defence type like Touma T1, Accelerator T1, Tatsuya T1
[State -1, Support var set]
type = varset
triggerall = AIlevel && NumEnemy
triggerall = var(31) && StateNo < 3900
;------ Char ------
triggerall = var(31) = 1 || var(31) = 3 || var(31) = 8
;------ Char ------
triggerall = RoundState = 2
triggerall = var(28) = 0
triggerall = NumHelper(20300) && !NumHelper(30000)
triggerall = Helper(20300),var(5) = 0 || Helper(20300),var(5) = 3
triggerall = P2StateType != L || P2StateNo = 5120
triggerall = !(StateNo = [3000,4999])
trigger1 = var(59) = 0 || (var(59) = [13,16]) || var(59) = 99
trigger1 = ((Ctrl || StateNo = 21 || StateNo = 100) && StateType != A) || (var(24) && Ctrl)
trigger1 = P2StateType != A && !InGuardDist
trigger1 = P2Bodydist x = [140,520]
trigger1 = Random < ((IFElse(var(24),80,24) + IFElse(var(24),280,180)*(P2StateNo = 5120 || P2StateType = L)) * (AIlevel ** 2 / 64.0))
trigger1 = var(57) := 2800001
;poke
trigger2 = var(59) = 0
trigger2 = var(24) || Power >= 1000
trigger2 = StateType != A && (var(7) = [3,5])
trigger2 = P2StateType != A && !InGuardDist
trigger2 = MoveGuarded = [1,4]
trigger2 = P2Bodydist x = [-10,520]
trigger2 = Random < ((IFElse(var(24),3,1)*((LifeMax-Life)/10) + 80*(var(7) >= 4)) * (AIlevel ** 2 / 64.0))
trigger2 = var(57) := 2800002
trigger3 = var(59) = 0
trigger3 = var(24) || Power >= 1000
trigger3 = StateType != A && (var(7) = [3,5])
trigger3 = P2StateType != A && !InGuardDist
trigger3 = NumHelper(StateNo+5) && !(var(18) & 64)
trigger3 = (Helper(StateNo+5),MoveGuarded = [1,4])
trigger3 = P2Bodydist x = [-10,520]
trigger3 = Random < ((IFElse(var(24),3,1)*((LifeMax-Life)/10) + 80*(var(7) >= 4)) * (AIlevel ** 2 / 64.0))
trigger3 = var(57) := 2800003
;Combo Guarded
var(28) = 8 + 0


; Long Delayed attack like Mikoto T1
; Kuroko Teleport T1
[State -1, Support var set]
type = varset
triggerall = AIlevel && NumEnemy
triggerall = var(31) && StateNo < 3900
;------ Char ------
triggerall = var(31) = 2 || var(31) = 5
;------ Char ------
triggerall = RoundState = 2
triggerall = var(28) = 0
triggerall = NumHelper(20300) && !NumHelper(30000)
triggerall = Helper(20300),var(5) = 0 || Helper(20300),var(5) = 3
triggerall = P2StateType != L || P2StateNo = 5120
triggerall = !(StateNo = [3000,4999])
trigger1 = var(59) = 0 || var(59) = 99
trigger1 = ((Ctrl || StateNo = 21 || StateNo = 100) && StateType != A) || (var(24) && Ctrl)
trigger1 = P2StateType != A && !InGuardDist
trigger1 = P2Bodydist x = [550,99999]
trigger1 = Random < ((36) * (AIlevel ** 2 / 64.0))
trigger1 = var(57) := 2800101
;poke
var(28) = 8 + 0

; Shoot Delayed attack like Uiharu T1 MiyuKi T1
[State -1, Support var set]
type = varset
triggerall = AIlevel && NumEnemy
triggerall = var(31) && StateNo < 3900
;------ Char ------
triggerall = var(31) = 4 || var(31) = 7
;------ Char ------
triggerall = RoundState = 2
triggerall = var(28) = 0
triggerall = NumHelper(20300) && !NumHelper(30000)
triggerall = Helper(20300),var(5) = 0 || Helper(20300),var(5) = 3
triggerall = P2StateType != L || P2StateNo = 5120
triggerall = !(StateNo = [3000,4999])
trigger1 = var(59) = 0 || var(59) = 99
trigger1 = ((Ctrl || StateNo = 21 || StateNo = 100) && StateType != A) || (var(24) && Ctrl)
trigger1 = P2StateType != A && !InGuardDist
trigger1 = P2Bodydist x = [550,99999]
trigger1 = Random < ((30) * (AIlevel ** 2 / 64.0))
trigger1 = var(57) := 2800401
;poke
trigger2 = var(59) = 0
trigger2 = var(24) || Power >= 1000
trigger2 = (var(7) = [3,4])
trigger2 = !InGuardDist
trigger2 = (MoveHit = [1,2]) && (!(var(18) & 64) || StateNo = 900)
trigger2 = P2Dist x > 0
trigger2 = Random < ((20 + 120*(var(24) > 0) + 200*(StateNo = 900 && UniqHitCount = 1) ) * (AIlevel ** 2 / 64.0))
trigger2 = var(57) := 2800402
trigger3 = var(59) = 0
trigger3 = var(24) || Power >= 1000
trigger3 = (var(7) = [3,4])
trigger3 = !InGuardDist
trigger3 = NumHelper(StateNo+5) && (!(var(18) & 64) || StateNo = 900)
trigger3 = (Helper(StateNo+5),MoveHit = [1,2])
trigger3 = P2Dist x > 0
trigger3 = P2Dist y = [-200,800]
trigger3 = Random < ((20 + 220*(var(7) = 4 && Power >= 3000) + 120*(var(24) > 0)) * (AIlevel ** 2 / 64.0))
trigger3 = var(57) := 2800403
;Combo
trigger4 = var(24)
trigger4 = StateType = A && (Vel x = 0 && Vel y = 0)
trigger4 = P2Dist x > 0
trigger4 = Random < ((400) * (AIlevel ** 2 / 64.0))
;Air and Ground attack
var(28) = 8 + 0

; Add HP at Support Character like Uiharu T2
[State -1, Support var set]
type = varset
triggerall = AIlevel && NumEnemy
triggerall = var(31) && StateNo < 3900
;------ Char ------
triggerall = var(31) = 4
;------ Char ------
triggerall = RoundState = 2
triggerall = var(28) = 0
triggerall = NumHelper(20300) && !NumHelper(30000)
triggerall = Helper(20300),var(5) = 0 || Helper(20300),var(5) = 3
triggerall = !(StateNo = [3000,4999])
triggerall = Life < LifeMax
trigger1 = var(59) = 0 || var(59) = 99 || var(59) = 15
trigger1 = ((Ctrl || StateNo = 21 || StateNo = 100) && StateType != A) || (var(24) && Ctrl)
trigger1 = P2StateType != A && !InGuardDist
trigger1 = P2Bodydist x > 800
trigger1 = Random < ((60) * (AIlevel ** 2 / 64.0))
trigger1 = var(57) := 2800402
;poke
var(28) = 8 + 10

; Quick ATK type like Touma Mikoto and Accelerator T2
[State -1, Support var set]
type = varset
triggerall = AIlevel && NumEnemy
triggerall = var(31) && StateNo < 3900
;------ Char ------
triggerall = var(31) = [1,3]
;------ Char ------
triggerall = RoundState = 2
triggerall = var(28) = 0
triggerall = NumHelper(20300) && !NumHelper(30000)
triggerall = Helper(20300),var(5) = 0 || Helper(20300),var(5) = 3
triggerall = P2StateType != L
triggerall = !(StateNo = [3000,4999])
trigger1 = var(59) = 0 || (var(59) = [13,15])
trigger1 = ((Ctrl || StateNo = 21 || StateNo = 100) && StateType != A) || (var(24) && Ctrl)
trigger1 = StateType != A && !InGuardDist
trigger1 = P2StateType != A && P2Bodydist x > 440
trigger1 = (var(31) = 1 && P2Bodydist x < 800) || (var(31) = 2 && P2Bodydist x < 90000) || (var(31) = 3 && P2Bodydist x < 1400)
trigger1 = Random < ((12 + 200*(var(4) = 3 && Enemynear,AnimTime < -17)) * (AIlevel ** 2 / 64.0))
trigger1 = var(57) := 2800201
;poke
trigger2 = var(59) = 0
trigger2 = var(24) || Power >= 1000
trigger2 = (var(7) = [3,4])
trigger2 = !InGuardDist
trigger2 = (MoveHit = [1,2]) && !(var(18) & 64)
trigger2 = P2Bodydist x > 0
trigger2 = (var(31) = 1 && P2Bodydist x < 600) || (var(31) = 2 && P2Bodydist x < 90000) || (var(31) = 3 && P2Bodydist x < 1400)
trigger2 = Random < ((IFElse(var(24),500 - 450*(Power > 2000),50 + 100*(Power > 3000))) * (AIlevel ** 2 / 64.0))
trigger2 = var(57) := 2800202
trigger3 = var(59) = 0
trigger3 = var(24) || Power >= 1000
trigger3 = (var(7) = [3,4])
trigger3 = !InGuardDist
trigger3 = NumHelper(StateNo+5) && !(var(18) & 64)
trigger3 = (Helper(StateNo+5),MoveHit = [1,2])
trigger3 = P2Bodydist x > 0
trigger3 = (var(31) = 1 && P2Bodydist x < 600) || (var(31) = 2 && P2Bodydist x < 90000) || (var(31) = 3 && P2Bodydist x < 1400)
trigger3 = P2Dist y = [-220,800]
trigger3 = Random < ((IFElse(var(24),500 - 450*(Power > 2000),50 + 100*(Power > 3000))) * (AIlevel ** 2 / 64.0))
trigger3 = var(57) := 2800203
;Combo
var(28) = 8 + 10




; Shoot Delayed attack like Kuroku, Misaki, Miyuki T2
[State -1, Support var set]
type = varset
triggerall = AIlevel && NumEnemy
triggerall = var(31) && StateNo < 3900
;------ Char ------
triggerall = var(31) = 5 || var(31) = 6 || var(31) = 7
;------ Char ------
triggerall = RoundState = 2
triggerall = var(28) = 0
triggerall = NumHelper(20300) && !NumHelper(30000)
triggerall = Helper(20300),var(5) = 0 || Helper(20300),var(5) = 3
triggerall = P2StateType != L || P2StateNo = 5120
triggerall = !(StateNo = [3000,4999])
trigger1 = var(59) = 0 || var(59) = 99 || (var(59) = [14,15])
trigger1 = ((Ctrl || StateNo = 21 || StateNo = 100) && StateType != A) || (var(24) && Ctrl)
trigger1 = P2StateType != A && !InGuardDist
trigger1 = P2MoveType != A && Enemynear,Ctrl = 0 && P2StateNo > 200
trigger1 = P2Bodydist x = [550,99999]
trigger1 = Random < ((30 + 100*(Enemynear,StateNo = [5120,5299])) * (AIlevel ** 2 / 64.0))
trigger1 = var(57) := 2800520
;poke
trigger2 = var(59) = 0
trigger2 = var(24) || Power >= 1000
trigger2 = StateNo = 900
trigger2 = !InGuardDist
trigger2 = (MoveHit = [1,3]) && (!(var(18) & 64) || StateNo = 900)
trigger2 = P2Dist x > 0 && (HitCount = 2)
trigger2 = Random < ((IFElse(var(24),400,40)) * (AIlevel ** 2 / 64.0))
trigger2 = var(57) := 2800521
;Combo
var(28) = 8 + 10

; Air Attack Miyuki T2
[State -1, Support var set]
type = varset
triggerall = AIlevel && NumEnemy
triggerall = var(31) && StateNo < 3900
;------ Char ------
triggerall = var(31) = 7
;------ Char ------
triggerall = RoundState = 2
triggerall = var(28) = 0
triggerall = NumHelper(20300) && !NumHelper(30000)
triggerall = Helper(20300),var(5) = 0 || Helper(20300),var(5) = 3
triggerall = P2StateType != L || P2StateNo = 5120
triggerall = !(StateNo = [3000,4999])
triggerall = StateType = A && (power >= 1000 || var(24))
triggerall = var(59) = 0 || (var(59) = [13,15]) || var(59) = 930 ||  var(59) = 981
trigger1 = (var(7) = [2,3]) && !(var(18) & 64)
trigger1 = (MoveHit = [1,3]) && !var(15)
trigger1 = (P2BodyDist x = [-20,550])
trigger1 = P2Dist y > -280
;trigger1 = Random < ((IFElse(var(24),400,30 + 30*(power>3000))) * (AIlevel ** 2 / 64.0))
trigger1 = var(57) := 2802811
trigger2 = (var(7) = [3,4]) && !(var(18) & 64)
trigger2 = NumHelper(StateNo+5)
trigger2 = (Helper(StateNo+5),MoveHit = [1,3]) && !var(15)
trigger2 = (P2BodyDist x = [-20,550])
trigger2 = P2Dist y > -280
;trigger2 = Random < ((IFElse(var(24),400,30 + 30*(power>3000))) * (AIlevel ** 2 / 64.0))
trigger2 = var(57) := 2802812
;Combo
var(28) = 8 + 10


; Super Long Delayed attack Need to be release during enemy down T1
[State -1, Support var set]
type = varset
triggerall = AIlevel && NumEnemy
triggerall = var(31) && StateNo < 3900
;------ Char ------
triggerall = var(31) = 2 || var(31) = 6
;------ Char ------
triggerall = RoundState = 2
triggerall = var(28) = 0
triggerall = NumHelper(20300) && !NumHelper(30000)
triggerall = Helper(20300),var(5) = 0 || Helper(20300),var(5) = 3
triggerall = !(StateNo = [3000,4999])
trigger1 = var(59) = 0 || (var(59) = [14,15]) || var(59) = 99
trigger1 = ((Ctrl || StateNo = 21 || StateNo = 100) && StateType != A) || (var(24) && Ctrl)
trigger1 = P2StateType = L && !InGuardDist && !(Enemynear,StateNo = [5120,5299])
trigger1 = Random < ((420 - 400*(var(31) = 6 && Life > LifeMax/2)) * (AIlevel ** 2 / 64.0))
trigger1 = var(57) := 2800061
;poke
trigger2 = var(59) = 0 || (var(59) = [14,15])
trigger2 = var(24) || Power >= 1000
trigger2 = !InGuardDist && (Life < (LifeMax/2))
trigger2 = (MoveContact = [1,4]) && (!(var(18) & 64) || StateNo = 900)
trigger2 = P2Dist x > 0 && (HitCount < 2)
trigger2 = Random < ((400) * (AIlevel ** 2 / 64.0))
trigger2 = var(57) := 2800062
;Combo
var(28) = 8 + 0

; Super Long Delayed attack Need to be release during enemy down T2
[State -1, Support var set]
type = varset
triggerall = AIlevel && NumEnemy
triggerall = var(31) && StateNo < 3900
;------ Char ------
triggerall = var(31) = 6
;------ Char ------
triggerall = RoundState = 2
triggerall = var(28) = 0
triggerall = NumHelper(20300) && !NumHelper(30000)
triggerall = Helper(20300),var(5) = 0 || Helper(20300),var(5) = 3
triggerall = !(StateNo = [3000,4999])
trigger1 = var(59) = 0 || (var(59) = [14,15]) || var(59) = 99
trigger1 = ((Ctrl || StateNo = 21 || StateNo = 100) && StateType != A) || (var(24) && Ctrl)
trigger1 = P2StateType = L && !InGuardDist && !(Enemynear,StateNo = [5120,5299])
trigger1 = P2Bodydist x > 380
trigger1 = Random < ((333) * (AIlevel ** 2 / 64.0))
trigger1 = var(57) := 2800161
;poke
var(28) = 8 + 10


; Quick ATK type like Tatsuya T2
[State -1, Support var set]
type = varset
triggerall = AIlevel && NumEnemy
triggerall = var(31) && StateNo < 3900
;------ Char ------
triggerall = var(31) = 8
;------ Char ------
triggerall = RoundState = 2
triggerall = var(28) = 0
triggerall = NumHelper(20300) && !NumHelper(30000)
triggerall = Helper(20300),var(5) = 0 || Helper(20300),var(5) = 3
triggerall = P2StateType != L
triggerall = !(StateNo = [3000,4999])
trigger1 = var(59) = 0 || (var(59) = [14,15])
trigger1 = ((Ctrl || StateNo = 21 || StateNo = 100) && StateType != A) || (var(24) && Ctrl)
trigger1 = StateType != A && !InGuardDist
trigger1 = P2StateType != A && P2Bodydist x = [300,550]
trigger1 = !(var(31) = 8 && Power < 3000)
trigger1 = Random < ((36 + 140*(var(4)=3 && Enemynear,AnimTime < -20)) * (AIlevel ** 2 / 64.0))
trigger1 = var(57) := 2802801
;poke
trigger2 = var(59) = 0 || (var(59) = [13,15])
trigger2 = var(24) || Power >= 1000
trigger2 = (var(7) = [2,3])
trigger2 = !InGuardDist
trigger2 = (MoveHit = [1,3]) && !(var(18) & 64)
trigger2 = (P2BodyDist x = [-20,360]) && P2StateType != A
trigger2 = !(var(31) = 8 && Power < 3000)
trigger2 = Random < ((IFElse(var(24),1000,50 + 300*(Power>3000))) * (AIlevel ** 2 / 64.0))
trigger2 = var(57) := 2802802
trigger3 = var(59) = 0
trigger3 = var(24) || Power >= 1000
trigger3 = (var(7) = [3,4])
trigger3 = !InGuardDist
trigger3 = NumHelper(StateNo+5) && !(var(18) & 64)
trigger3 = (Helper(StateNo+5),MoveHit = [1,3])
trigger3 = (P2BodyDist x = [-20,360]) && (P2StateType != A || (P2Dist y = [-220,20]))
trigger3 = !(var(31) = 8 && Power < 3000)
trigger3 = Random < ((IFElse(var(24),1000,50 + 300*(Power>3000))) * (AIlevel ** 2 / 64.0))
trigger3 = var(57) := 2802803
;Combo
var(28) = 8 + 10




;------------------- Human Support Moves ------------
[State -1, Support var set]
type = varset
triggerall = AIlevel = 0 && NumEnemy
triggerall = var(31) && StateNo < 3900
triggerall = RoundState = 2
triggerall = var(28) = 0
triggerall = NumHelper(20300) && !NumHelper(30000)
triggerall = Helper(20300),var(5) = 0 || Helper(20300),var(5) = 3
triggerall = !(StateNo = [3000,4999])
triggerall = Command = "x"
trigger1 = !var(24)
trigger1 = Ctrl && StateType != A
trigger2 = var(24)
trigger2 = Ctrl || (Vel x = 0 && vel y = 0)
trigger3 = var(24) || Power >= 1000
trigger3 = MoveContact && var(7) && (!(var(18) & 64) || StateNo = 900) && var(7) < 6
trigger4 = var(24) || Power >= 1000
trigger4 = NumHelper(StateNo+5) && (!(var(18) & 64) || StateNo = 900)
trigger4 = Helper(StateNo+5),MoveContact
trigger4 = var(7) && var(7) < 6
var(28) = 8 + 10 * (Command = "holdfwd" || Command = "holdback")

[State -1, Support Char Summer action]
type = ChangeState
value = 600
triggerall = StateNo != 600 && (PrevStateNo != 600 || time > 10)
triggerall = NumEnemy
triggerall = RoundState = 2 && StateType != A
triggerall = NumHelper(20300)
triggerall = Helper(20300),var(5) = 0 || Helper(20300),var(5) = 3
triggerall = var(28)
trigger1 = !var(24)
trigger1 = (Ctrl || StateNo = 21 || StateNo = 100)

[State -1, Create Support Cancel Aura]
type = helper
triggerall = var(31) && StateNo != 600
triggerall = !NumHelper(7460) && !NumHelper(30000)
triggerall = RoundState = 2
trigger1 = var(28)
stateno = 7460
ID = 7460
helpertype = Normal
keyctrl = 0
name = "Support Cancel Aura"
postype = P1
pos = 0 * Const(size.xscale), Const(Size.mid.pos.y) * Const(size.xscale)
ownpal = 1
ignorehitpause = 1
;pausemovetime = 65535
;supermovetime = 65535
size.proj.doscale = ID
size.xscale = Const(size.xscale)
size.yscale = Const(size.yscale)


[State -1, Create Support Char]
type = helper
triggerall = var(31)
triggerall = !NumHelper(30000)
triggerall = RoundState = 2
triggerall = NumHelper(20300)
triggerall = Helper(20300),var(5) = 0 || Helper(20300),var(5) = 3
trigger1 = StateNo = 600
trigger2 = NumHelper(7460)
stateno = (30000 + var(31)*100) + 60 + 10 * Floor(var(28) / 10.0)
ID = 30000
helpertype = Player
keyctrl = 0
name = "Support Character"
postype = P1
pos = -40 * Const(size.xscale),0 * Const(size.xscale)
ownpal = 1
;pausemovetime = 65535
;supermovetime = 65535
size.proj.doscale = ID
size.xscale = Const(size.xscale)
size.yscale = Const(size.yscale)


[State -1, Clear support called buffer]
type = varset
triggerall = RoundState = 2
trigger1 = var(28)
var(28) = IFElse(var(28)%10 = 0,0,var(28)-1)


;--------------- Human Normal Moves ------------------------
[State -1, Normal Stand Heavy Idiot combo]
type = ChangeState
value = 210
triggerall = (var(21) & 1)
triggerall = AIlevel = 0 && NumEnemy
triggerall = RoundState = 2
triggerall = StateType != A
triggerall = Command = "a"
triggerall = !(var(18) & 64)
trigger1 = StateNo = 205 && MoveContact
trigger2 = StateNo = 305 && MoveContact

[State -1, Normal Stand Mid Idiot combo]
type = ChangeState
value = 205
triggerall = !(var(21) & 1)
triggerall = AIlevel = 0 && NumEnemy
triggerall = RoundState = 2
triggerall = StateType != A
triggerall = Command = "a" && Command != "holddown"
trigger1 = !(var(18) & 64)
trigger1 = StateNo = 200 && MoveContact
trigger1 = var(21) := (var(21) + 1)


[State -1, Normal Crouch Middle Idiot combo]
type = ChangeState
value = 305
triggerall = (var(21) & 1)
triggerall = AIlevel = 0 && NumEnemy
triggerall = RoundState = 2
triggerall = StateType != A
triggerall = Command = "a" && Command = "holddown"
trigger1 = !(var(18) & 64)
trigger1 = StateNo = 300 && MoveContact


[State -1, Normal Crouch Light Idiot combo]
type = ChangeState
value = 300
triggerall = !(var(21) & 1)
triggerall = AIlevel = 0 && NumEnemy
triggerall = RoundState = 2
triggerall = StateType != A
triggerall = Command = "a" && Command = "holddown"
trigger1 = !(var(18) & 64)
trigger1 = StateNo = 300 && MoveContact && PrevStateNo = 300
trigger1 = var(21) := (var(21) + 1)

[State -1, Normal Heavy ATK Idiot combo]
type = ChangeState
value = 410
triggerall = (var(21) & 1)
triggerall = AIlevel = 0 && NumEnemy
triggerall = RoundState = 2
triggerall = StateType = A
triggerall = Command = "a"
trigger1 = !(var(18) & 64)
trigger1 = StateNo = 405 && MoveContact

[State -1, Normal Mid ATK Idiot combo]
type = ChangeState
value = 405
triggerall = !(var(21) & 1)
triggerall = AIlevel = 0 && NumEnemy
triggerall = RoundState = 2
triggerall = StateType = A
triggerall = Command = "a"
trigger1 = !(var(18) & 64)
trigger1 = StateNo = 400 && MoveContact
trigger1 = var(21) := (var(21) + 1)




[State -1, Normal Stand Light]
type = ChangeState
value = 200
triggerall = AIlevel = 0 && NumEnemy
triggerall = RoundState = 2
triggerall = StateType != A && StateNo != 200
triggerall = Command = "a" && Command != "holddown"
trigger1 = Ctrl
trigger2 = MoveContact && !(var(18) & 64) && StateNo != 200
trigger2 = (var(7) && var(7) < 2) || (var(24) && var(7) && var(7) <= 3)
trigger3 = NumHelper(StateNo+5) && !(var(18) & 64)
trigger3 = Helper(StateNo+5),MoveContact
trigger3 = (var(7) && var(7) < 2) || (var(24) && var(7) && var(7) <= 3)


[State -1, Normal Stand Mid]
type = ChangeState
value = 205
triggerall = AIlevel = 0 && NumEnemy
triggerall = RoundState = 2
triggerall = StateType != A && StateNo != 205
triggerall = Command = "b" && Command != "holddown"
trigger1 = Ctrl
trigger2 = MoveContact && !(var(18) & 64)
trigger2 = (var(7) && var(7) < 2) || (var(24) && var(7) && var(7) <= 3 && var(7) != 2)
trigger3 = NumHelper(StateNo+5) && !(var(18) & 64)
trigger3 = Helper(StateNo+5),MoveContact
trigger3 = (var(7) && var(7) < 2) || (var(24) && var(7) && var(7) <= 3 && var(7) != 2)



[State -1, Normal Stand Heavy]
type = ChangeState
value = 210
triggerall = AIlevel = 0 && NumEnemy
triggerall = RoundState = 2
triggerall = StateType != A && StateNo != 210
triggerall = Command = "c" && Command != "holddown"
trigger1 = Ctrl
trigger2 = MoveContact && !(var(18) & 64)
trigger2 = (var(7) && var(7) < 3) || (var(24) && var(7) && var(7) <= 3 && var(7) != 3)
trigger3 = NumHelper(StateNo+5) && !(var(18) & 64)
trigger3 = Helper(StateNo+5),MoveContact
trigger3 = (var(7) && var(7) < 3) || (var(24) && var(7) && var(7) <= 3 && var(7) != 3)



[State -1, Normal Crouch Light]
type = ChangeState
value = 300
triggerall = !(var(21) & 1)
triggerall = AIlevel = 0 && NumEnemy
triggerall = RoundState = 2
triggerall = StateType != A
triggerall = Command = "a" && Command = "holddown"
trigger1 = Ctrl
trigger2 = MoveContact && !(var(18) & 64)
trigger2 = (var(7) && var(7) < 2) || (var(24) && var(7) && var(7) <= 3)
trigger3 = NumHelper(StateNo+5) && !(var(18) & 64)
trigger3 = Helper(StateNo+5),MoveContact
trigger3 = (var(7) && var(7) < 2) || (var(24) && var(7) && var(7) <= 3)


[State -1, Normal Crouch Middle]
type = ChangeState
value = 305
triggerall = AIlevel = 0 && NumEnemy
triggerall = RoundState = 2
triggerall = StateType != A && StateNo != 305
triggerall = Command = "b" && Command = "holddown"
trigger1 = Ctrl
trigger2 = MoveContact && !(var(18) & 64)
trigger2 = (var(7) && var(7) < 2) || (var(24) && var(7) && var(7) <= 3 && var(7) != 2)
trigger3 = NumHelper(StateNo+5) && !(var(18) & 64)
trigger3 = Helper(StateNo+5),MoveContact
trigger3 = (var(7) && var(7) < 2) || (var(24) && var(7) && var(7) <= 3 && var(7) != 2)

[State -1, Normal Crouch Heavy]
type = ChangeState
value = 310
triggerall = AIlevel = 0 && NumEnemy
triggerall = RoundState = 2
triggerall = StateType != A && StateNo != 310
triggerall = Command = "c" && Command = "holddown"
trigger1 = Ctrl
trigger2 = MoveContact && !(var(18) & 64)
trigger2 = (var(7) && var(7) < 3) || (var(24) && var(7) && var(7) <= 3 && var(7) != 3)
trigger3 = NumHelper(StateNo+5) && !(var(18) & 64)
trigger3 = Helper(StateNo+5),MoveContact
trigger3 = (var(7) && var(7) < 3) || (var(24) && var(7) && var(7) <= 3 && var(7) != 3)

[State -1, Normal light ATK]
type = ChangeState
value = 400
triggerall = AIlevel = 0 && NumEnemy
triggerall = RoundState = 2
triggerall = StateType = A && StateNo != 400 && StateNo != 930
triggerall = Command = "a"
trigger1 = Ctrl || (StateNo = 111 && MoveType = I)
trigger2 = MoveContact && !(var(18) & 64)
trigger2 = (var(7) && var(7) < 2) || (var(24) && var(7) && var(7) <= 3)
trigger3 = NumHelper(StateNo+5) && !(var(18) & 64)
trigger3 = Helper(StateNo+5),MoveContact
trigger3 = (var(7) && var(7) < 2) || (var(24) && var(7) && var(7) <= 3)

[State -1, Normal Mid ATK]
type = ChangeState
value = 405
triggerall = AIlevel = 0 && NumEnemy
triggerall = RoundState = 2
triggerall = StateType = A && StateNo != 405 && StateNo != 930
triggerall = Command = "b"
trigger1 = Ctrl || (StateNo = 111 && MoveType = I)
trigger2 = MoveContact && !(var(18) & 64)
trigger2 = (var(7) && var(7) < 2) || (var(24) && var(7) && var(7) <= 3 && var(7) != 2)
trigger3 = NumHelper(StateNo+5) && !(var(18) & 64)
trigger3 = Helper(StateNo+5),MoveContact
trigger3 = (var(7) && var(7) < 2) || (var(24) && var(7) && var(7) <= 3 && var(7) != 2)


[State -1, Normal Heavy ATK]
type = ChangeState
value = 410
triggerall = AIlevel = 0 && NumEnemy
triggerall = RoundState = 2
triggerall = StateType = A && StateNo != 410 && StateNo != 930
triggerall = Command = "c"
trigger1 = Ctrl || (StateNo = 111 && MoveType = I)
trigger2 = MoveContact && !(var(18) & 64)
trigger2 = (var(7) && var(7) < 3) || (var(24) && var(7) && var(7) <= 3 && var(7) != 3)
trigger3 = NumHelper(StateNo+5) && !(var(18) & 64)
trigger3 = Helper(StateNo+5),MoveContact
trigger3 = (var(7) && var(7) < 3) || (var(24) && var(7) && var(7) <= 3 && var(7) != 3)

[State -1, Taunt]
type = ChangeState
value = 195
triggerall = AIlevel = 0 && NumEnemy
triggerall = RoundState = 2
triggerall = StateType != A
triggerall = Command = "start"
trigger1 = Ctrl || StateNo = 100






;============ AI Part ====================================

;------------ AI Tasks ----------------------
[State -1, Don't ATK clear]
type = varset
triggerall = var(59) = 99
trigger1 = Ctrl || StateNo < 200 || MoveType = H
trigger2 = NumHelper(30365) && var(31) = 3;	Accelerator T1 Atacking
trigger2 = Helper(30365),NumTarget(30367)
trigger3 = NumHelper(30465)
trigger3 = Helper(30465),Anim = 30465 && Helper(30465),AnimElemTime(3) >= 0
trigger4 = NumHelper(30000)
trigger4 = Helper(30000),StateNo >= 30571 && Helper(30000),var(5) = 0
var(59) = 0

[State -1, Don't ATK]
type = varset
triggerall = AILevel
triggerall = var(59) != 99
;Conflict tasks
triggerall = var(59) != 16
trigger1 = P2StateNo = 5120 || (P2StateNo = [5200,5299])
trigger1 = (P2Bodydist x = [-200,300])
trigger1 = var(57) := 900101
;Enemy getting up
trigger2 = (StateNo = [930,931]) && NumTarget
trigger2 = var(57) := 900102
trigger3 = NumHelper(30365) && var(31) = 3;	Accelerator T1 Atacking
trigger3 = Helper(30365),NumTarget(30365)
trigger3 = var(57) := 900103
trigger4 = !(P2StateNo = [120,159])
trigger4 = NumHelper(30465)
trigger4 = Helper(30465),NumTarget && P2MoveType = H && (P2StateNo = [5000,5029])
trigger4 = var(57) := 900104
trigger5 = !(P2StateNo = [120,159])
trigger5 = NumHelper(30465)
trigger5 = Helper(30465),Anim = 30465 && Helper(30465),AnimElemTime(2) >= 0 && Helper(30465),AnimElemTime(4) < 0
trigger5 = var(57) := 900105
;Uharu AT1
trigger6 = !(P2StateNo = [120,159])
trigger6 = NumHelper(30265)
trigger6 = Helper(30265),var(5) = 1 && Helper(30265),NumTarget = 0
trigger6 = var(57) := 900106
trigger7 = NumHelper(30265)
trigger7 = Helper(30265),NumTarget && Helper(30265),var(5) = 1 && P2MoveType = H && (P2StateNo = [5000,5029])
trigger7 = var(57) := 900107
;Misaka support AT1
trigger8 = !(P2StateNo = [120,159])
trigger8 = NumHelper(30000)
trigger8 = (Helper(30000),StateNo = [30570,30572]) && Helper(30000),var(5) >= 1
trigger8 = var(57) := 900108
trigger9 = !(P2StateNo = [120,159])
trigger9 = NumHelper(30000)
trigger9 = (Helper(30000),StateNo = [30571,30573]) && (Enemynear,StateNo = [5000,5060])
trigger9 = Enemynear,facing != facing && Enemynear,vel x > 0
trigger9 = (P2Bodydist x = [300,600])
trigger9 = var(57) := 900109
;Kuroko Support AT2
trigger10 = !(var(59) = [5300,5301])
trigger10 = !(P2StateNo = [120,159])
trigger10 = NumHelper(30000)
trigger10 = Helper(30000),Anim = 30620 && Helper(30000),AnimElemTime(6) > 1
trigger10 = var(57) := 900110
;SHOKUHOU AT1
var(59) = 99



[State -1, Clear Task Keep distence]
type = varset
triggerall = (var(59) = [13,19])
trigger1 = RoundState != 2
trigger2 = StateType = A
trigger3 = InGuardDist || MoveType = H
trigger4 = P2MoveType = A
trigger4 = Random < (40 * (AILevel ** 2 / 64.0))
trigger5 = MoveContact || var(3)
var(59) = 0

[State -1, Task Keep distence medium or far]
type = varset
triggerall = var(59) = 0 || (var(59) = [13,15])
triggerall = AILevel && RoundState = 2
triggerall = var(6) > 60
triggerall = StateType != A && P2StateType != A && P2StateType != L
triggerall = !InGuardDist
trigger1 = Ctrl || StateNo = 21 || StateNo = 100
trigger1 = P2Bodydist x > 200
trigger1 = Random < (50 * (AILevel ** 2 / 64.0))
trigger1 = var(6) := 1
var(59) = 14 + (Random < 500)
;Random keep distance

[State -1, Clear Task Keep distence Pressure]
type = varset
triggerall = var(59) = 16
trigger1 = Enemynear,Anim = 5120
trigger1 = Enemynear,AnimTime = [-1,0]
trigger2 = Enemynear,Ctrl || P2StateNo < 5000
trigger3 = Enemynear,StateNo = [5130,5299]
var(59) = 0

;keep distance Middle
[State -1, Task Keep distence Pressure]
type = varset
triggerall = var(59) != 16
triggerall = var(59) = 0 || (var(59) = [13,15])
triggerall = AILevel && RoundState = 2
triggerall = StateType != A && P2StateType != A
triggerall = !InGuardDist
triggerall = Ctrl || StateNo = 21 || StateNo = 100
trigger1 = var(6) > 4
trigger1 = P2StateType = L && P2StateNo = 1130403
trigger1 = Random < (300 * (AILevel ** 2 / 64.0))
trigger1 = var(6) := 1
;For Target down under SHOKUHOU T2
trigger2 = (StateNo = [300,305]) && P2StateType = L && P2MoveType = H && !(Enemynear,StateNo = [5120,5299])
trigger2 = (AnimTime = [-2,-1]) && MoveContact = 0
trigger2 = P2Bodydist x = [-200,250]
trigger2 = var(6) := 1
;For missed atack
trigger3 = !(var(59) = [5300,5301])
trigger3 = P2StateNo = 1115080 || P2StateNo = 1115110
trigger3 = Enemynear,sysvar(4) = 1115110
;For limited attack
trigger4 = P2Bodydist x = [500,1500]
trigger4 = P2StateType = L || (Enemynear,Hitfall && Enemynear,vel y > 0)
var(59) = 16


[State -1, Clear Task Run to Support Character]
type = varset
triggerall = var(59) = 19
trigger1 = !NumHelper(30000) || RoundState != 2
trigger2 = InGuardDist || MoveType = H || StateType = A
trigger3 = P2MoveType = A
trigger3 = Random < (40 * (AILevel ** 2 / 64.0))
var(59) = 0

[State -1, Task Run to Support Character]
type = varset
triggerall = var(59) = 0 || (var(59) = [13,15])
triggerall = AILevel && RoundState = 2
triggerall = NumHelper(30000)
triggerall = Helper(30000),StateNo = 30470
triggerall = StateType != A
triggerall = !InGuardDist
trigger1 = Ctrl || StateNo = 21 || StateNo = 100
trigger1 = Helper(30000),Pos x - pos x < P2Bodydist x
trigger1 = P2Bodydist x > 300
trigger1 = Random < (120 * (AILevel ** 2 / 64.0))
trigger1 = var(6) := 1
var(59) = 19


[State -1, 930 Launch up Task clear]
type = varset
triggerall = var(59) = 930
trigger1 = !NumTarget
trigger2 = StateType != A || P2StateType != A
trigger3 = InGuardDist || MoveType = H
var(59) = 0

[State -1, 930 Launch up Task]
type = varset
triggerall = var(59) != 930
triggerall = AILevel && RoundState = 2
trigger1 = StateNo = 931 && MoveContact && NumTarget(931)
trigger1 = (Target(931),StateNo = [5000,5030])
trigger2 = var(59) = 981 && StateNo = 44
var(59) = 930
ignorehitpause = 1

[State -1, 981 Task Cancel Blast Clear]
type = varset
triggerall = var(59) = 981
trigger1 = P2StateType != A || P2MoveType != H
trigger2 = InGuardDist
var(59) = 0

[State -1, 981 Task Cancel Blast]
type = varset
triggerall = var(59) != 981
triggerall = AILevel && RoundState = 2
trigger1 = Anim = 981 && NumHelper(985) && NumTarget(985)
trigger1 = Helper(985),MoveHit && (Target(985),StateNo = [5000,5030]) && var(3)
trigger2 = StateNo = 200 && MoveHit && NumTarget
trigger2 = Target,StateNo && (Target,StateNo = [5000,5030])
trigger2 = P2Dist y < -80
trigger3 = NumHelper(30465)
trigger3 = Helper(30465),NumTarget && P2MoveType = H && (P2StateNo = [5030,5099])
;;If target got hit up by Uiharu
trigger4 = (StateNo < 140 || Ctrl)
trigger4 = (P2MoveType = H && (P2StateNo = [5030,5099]) && Enemynear,vel y < -30)
;If target got hit up in General
var(59) = 981
ignorehitpause = 1

[State -1, Clear Task Try to throw]
type = varset
triggerall = AILevel && (var(59) = 2 )
triggerall = Animtime
trigger1 = StateNo = 800 || InGuardDist
trigger2 = P2MoveType = A
trigger3 = (P2StateNo = [5120,5229]) || P2StateType = A
trigger4 = P2Bodydist x > 1000
trigger5 = (StateNo = 30567 || PrevStateNo = 30567)
var(59) = 0

[State -1, Task Try to throw]
type = varset
triggerall = AILevel && var(59) = 0
triggerall = P2StateType != A
triggerall = P2MoveType != H || (P2StateNo = [120,159])
triggerall = !(StateNo = 30567 || PrevStateNo = 30567)
trigger1 = P2Bodydist x < 220 && P2MoveType != A && P2StateNo < 200
trigger1 = Random < (50 * (AILevel ** 2 / 64.0))
trigger2 = (StateNo = 200 || StateNo = 300) && MoveGuarded && P2Bodydist x < 220
trigger2 = P2StateType != A && P2StateType != L
trigger2 = Random < (80 * (AILevel ** 2 / 64.0))
var(59) = 2

[State -1, Clear Task Chance 2P goes down]
type = varset
triggerall = var(59) = 3
trigger1 = (MoveType = H || InGuardDist)
trigger2 = NumEnemy
trigger2 = (P2Dist y < -800 && Enemynear,time > 200)
trigger3 = Enemynear,vel y > 0
trigger3 = fvar(12) > Abs(P2Dist y / ( (Enemynear,vel y + (Enemynear,vel y + Enemynear,Const(Movement.yaccel) * Enemynear,Const(Size.yScale) * fvar(12) )) * 0.5  )) + 3
trigger4 = Enemynear,Ctrl || (P2StateNo = [20,21])
var(59) = 0

[State -1, Task Chance 2P goes down]
type = varset
triggerall = var(59) = 0
triggerall = AILevel && NumEnemy
triggerall = P2StateType = A && StateType != A && P2MoveType != H
triggerall = !(Enemynear,Ctrl) && !InGuardDist
triggerall = P2Dist x > 0
triggerall = !(P2Dist y < -800 && Enemynear,time > 200)
triggerall = (Enemynear,vel x = [-20,20])
triggerall = (Ctrl || StateNo = 21)
trigger1 = Enemynear,vel y < 0
trigger1 = Random < ((50 + (400*P2StateNo >= 1000)) * (AILevel ** 2 / 64.0))
;goes up
trigger2 = Enemynear,vel y > 0
trigger2 = fvar(12) <= Abs(P2Dist y / ( (Enemynear,vel y + (Enemynear,vel y + Enemynear,Const(Movement.yaccel) * Enemynear,Const(Size.yScale) * fvar(12) )) * 0.5  )) + 3
;Goes Down
var(59) = 3

[State -1, Clear Task Back Open or rush attack]
type = varset
triggerall = var(59) = 4
trigger1 = RoundState != 2
trigger2 = MoveType != I
trigger3 = InGuardDist && Random < 80
trigger4 = NumEnemy
trigger4 = Enemynear,Ctrl || P2StateNo < 120 || ((P2StateNo = [5100,5499]) && P2StateNo != 5300)
var(59) = 0

[State -1, Task Back Open or rush attack]
type = varset
triggerall = var(59) = 0
triggerall = Numenemy
triggerall = !NumTarget && P2MoveType != H && !(P2StateNo = [5100,5999])
triggerall = P2StateNo > 160 && !(Enemynear,Ctrl)
triggerall = !InGuardDist && (!(var(46) & 32) || Enemynear, P2Dist x < 0)
trigger1 = P2StateType != A
trigger1 = P2StateNo >= 200 && (var(4) || Enemynear, P2Dist x < 0)
trigger1 = fvar(12) + 6 <= Abs(Enemynear,Animtime)
trigger1 = !(var(46) & 32) || Enemynear,P2Dist x < 0
trigger1 = Random < (380 * (AILevel ** 2 / 64.0)) || Enemynear, P2Dist x < 0
;land far
var(59) = 4

[State -1, Clear Task Enemy Taunt]
type = varset
triggerall = AILevel && var(59) = 5 && NumEnemy
trigger1 = (Enemynear,Ctrl) || P2StateNo = 21
trigger2 = !(Enemynear,StateNo = [160,199])
var(59) = 0

[State -1, Task Enemy Taunt]
type = varset
triggerall = AILevel && var(59) = 0 && Roundstate = 2 && NumEnemy
trigger1 = !(Enemynear,Ctrl) || !(Enemynear,StateNo = 21)
trigger1 = (Enemynear,StateNo = [160,199])
var(59) = 5


[State -1, Enemy Dizzy clear]
type = varset
triggerall = var(59) = [5300,5301]
trigger1 = (Enemynear,Ctrl) || P2StateNo < 60
trigger2 = InGuardDist
trigger3 = (StateNo = [2900,4999])
var(59) = 0

[State -1, Enemy Dizzy-Normal]
type = varset
triggerall = (AILevel || IsHelper)
triggerall = Roundstate = 2
triggerall = var(59) != 5300
triggerall = !(Enemynear,Ctrl) && Enemynear,StateNo > 60
triggerall = Ctrl || StateNo < 120 || MoveType != H
trigger1 = (P2StateNo = [5300,5330]) || (Enemynear,anim = [5300,5330])
trigger1 = !(Enemynear,StateNo = 1130620 && (Enemynear,Anim != 5300 || Enemynear,time < 90))
;Normal Dizzy
trigger2 = var(59) = 5301
trigger2 = MoveContact || var(3)
;Tatsuya support super flaged
trigger3 = Enemynear,MoveType = H && Enemynear,StateNo = 1130870
var(59) = 5300

[State -1, Enemy Dizzy-Beterhans]
type = varset
triggerall = (AILevel || IsHelper)
triggerall = Roundstate = 2
triggerall = !(var(59) = [5300,5301])
triggerall = !(Enemynear,Ctrl) && Enemynear,StateNo > 60
triggerall = Ctrl || StateNo < 120
;Beterhans's Character dizzy
trigger1 = Enemynear,var(32) = ID
trigger1 = Enemynear,var(39) = [1,2]
;SHOKUHOU HIT
trigger2 = !(NumTarget || var(3))
trigger2 = Enemynear,StateNo = 1130620 && (Enemynear,Anim != 5300 || Enemynear,time < 90)
;Tatsuya Target
trigger3 = Enemynear,MoveType = H && Enemynear,StateNo = 30867
var(59) = 5301


[State -1, Clear Task 100% Combo]
type = varset
triggerall = var(59) = 100
trigger1 = InGuardDist
trigger2 = MoveType = H
trigger3 = !NumTarget && !var(3)
trigger4 = P2MoveType != H
var(59) = 0

[State -1, Task 100% Combo]
type = varset
triggerall = AILevel && var(59) != 100
triggerall = Roundstate = 2 && NumEnemy
triggerall = !(StateNo = 30567 || PrevStateNo = 30567)
triggerall = var(59) < 100
triggerall = var(59) && MoveType = A
triggerall = NumTarget || var(3)
trigger1 = NumTarget
trigger1 = P2MoveType = H && (Target,StateNo = [5000,5030]) && Target,time = 1
var(59) = 100


[State -1, Clear_Enemy_is_Touma_like]
type = varset
triggerall = AILevel && !IsHelper
triggerall = var(59) = 99
trigger1 = Enemynear,var(31) != 1 || Enemynear,NumHelper(30000) = 0
trigger2 = Enemynear,var(31) = 1 && Enemynear,NumHelper(30000)
trigger2 = !((P2StateNo = [30160,30168]) || (P2StateNo = [40110,40129]))
trigger3 = Enemynear,var(31) && Enemynear,NumHelper(30000)
trigger3 = P2StateNO = 30000 + Enemynear,var(31)*100 + 69
var(59) = 0

[State -1, Enemy_is_Touma_like]
type = varset
triggerall = AILevel && !IsHelper
triggerall = Roundstate = 2
triggerall = var(59) != 99
triggerall = (Ctrl || StateNo < 160)
trigger1 = Enemynear,var(31) = 1 && Enemynear,NumHelper(30000)
trigger1 = ((P2StateNo = [30160,30168]) || (P2StateNo = [40110,40129]))
trigger2 = Enemynear,var(31) = 8 && Enemynear,NumHelper(30000)
trigger2 = (P2StateNo = [30860,30864])
var(59) = 99



;------------ AI System 1st -----------------
[State -1, DashBack]
type = ChangeState
value = 105
triggerall = AIlevel && NumEnemy
triggerall = RoundState = 2
triggerall = StateType != A && !(StateNo = [105,106])
triggerall = (Ctrl || StateNo = 21 || StateNo = 100 || (StateNo = [120,140]))
triggerall = !(var(59) = [5300,5301])
trigger1 = var(59) = 0 || (var(59) = [13,19]) || var(59) = 99
trigger1 = P2MoveType = A && !(EnemyNear,NumProj) && Enemynear,vel x <= 0 && (var(4) = [1,2])
trigger1 = (P2Bodydist x = [-10,200])
trigger1 = Random < ((40 + 100 *(EnemyNear,HitDefAttr=SCA,AT)) * (AIlevel ** 2 / 64.0))
trigger1 = var(57) := 1010501
;avoid attack and throw
trigger2 = var(59) = 0 || (var(59) = [13,19]) || var(59) = 99
trigger2 = (p2stateno=5120 || p2stateno=5200 || p2stateno=5210) && Enemynear,AnimTime > -36
trigger2 = (P2Bodydist x = [-10,300])
trigger2 = Random < ((100 - 20 *(var(31)>0)) * (AIlevel ** 2 / 64.0))
trigger2 = var(57) := 1010502
;avoid enemy getting up invinsible
trigger3 = var(59) = [14,16]
trigger3 = !InGuardDist
trigger3 = P2Dist x > 0 && P2Bodydist x < ((var(59)=14) * 250 + (var(59)=15) * 520 + (var(59)=16) * 300)
trigger3 = Random < ((500) * (AIlevel ** 2 / 64.0))
trigger3 = var(57) := 1010503
; keep distance task
trigger4 = var(59) = 19
trigger4 = NumHelper(30000)
trigger4 = !InGuardDist
trigger4 = P2Dist x > 0 && ((Helper(30000),Pos x - Pos x) * facing) < -450
trigger4 = Random < ((100) * (AIlevel ** 2 / 64.0))
trigger4 = var(57) := 1010504
; keep distance task


[State -1, Air Dash]
type = ChangeState
value = 110
triggerall = AIlevel && NumEnemy
triggerall = RoundState = 2 && !(StateNo = 110)
triggerall = StateType = A
triggerall = Pos y < (-90 * Const(Size.yscale))
triggerall = StateNo != 111 || var(1) >= 10000
triggerall = var(59) < 99
trigger1 = Ctrl
trigger1 = !InGuardDist
trigger1 = P2StateType != A && P2StateType != L
trigger1 = P2Bodydist x  = [200,650]
trigger1 = P2Dist y > 220 && vel y > 0
trigger1 = Random < ((32 + 220*(InGuardDist) + 120*(var(4)=1)) * (AIlevel ** 2 / 64.0))
trigger1 = var(57):= 1001101
;Normal Poke

[State -1, AI Double Jump]
type = ChangeState
value = 44
triggerall = AIlevel&& NumEnemy
triggerall = NumHelper(20400)
triggerall = var(15)
triggerall = RoundState = 2
triggerall = StateType = A && StateNo != 39 && StateNo != 44
triggerall = !(StateNo = 980)
trigger1 = var(59) = 930 || var(59) = 981
trigger1 = MoveContact && var(7) && !(var(18) & 64) && var(7) < 4
trigger1 = vel y > -5
trigger1 = P2StateType = A
trigger1 = var(10) := -1
trigger1 = Random < ((1000) * (AIlevel ** 2 / 64.0))
trigger1 = var(57) := 10004401
;Air Combo
trigger2 = var(59) = 0 || var(59) = 930
trigger2 = MoveContact && var(7) && !(var(18) & 64) && var(7) < 4
trigger2 = vel y > 0
trigger2 = P2StateType = A
trigger2 = var(10) := -1
trigger2 = Random < ((500) * (AIlevel ** 2 / 64.0))
trigger2 = var(57) := 10004402
trigger3 = var(59) = 0
trigger3 = NumHelper(StateNo+5) && !(var(18) & 64)
trigger3 = Helper(StateNo+5),MoveContact
trigger3 = var(7) && var(7) < 4
trigger3 = vel y > -5 && (StateNo != 410 && P2Bodydist x < 400)
trigger3 = P2StateType = A
trigger3 = var(10) := -1
trigger3 = Random < ((500) * (AIlevel ** 2 / 64.0))
trigger3 = var(57) := 10004403
;Air Combo when too low
trigger4 = NumHelper(StateNo+5) && !(var(18) & 64)
trigger4 = Helper(StateNo+5),MoveContact
trigger4 = StateNo = 410
trigger4 = var(10) := IFElse((P2StateNo = [150,159]),-1,3);(3 will force into 0)
trigger4 = Random < ((500) * (AIlevel ** 2 / 64.0))
trigger4 = var(57) := 10004404
;Air Long Strike


[State -1, Jump Cancle for AI]
type = ChangeState
value = 39
triggerall = AIlevel && roundstate = 2
triggerall = StateType != A
triggerall = StateNo != 39 && StateNo != 44
trigger1 = MoveContact && var(7) && !(var(18) & 64) && var(7) < 4
trigger1 = StateNo = 205
trigger1 = var(10) := -1 && var(9) := -1
trigger1 = Random < ((700*(P2StateType = A) + 300*(PrevStateNo != 200)) * (AIlevel ** 2 / 64.0))
trigger1 = var(57) := 1000391
;Jump cancle for 205
trigger2 = NumHelper(StateNo+5) && !(var(18) & 64)
trigger2 = Helper(StateNo+5),MoveContact
trigger2 = var(7) = 3 && var(24)
trigger2 = P2StateType = A && P2Dist y < -50
trigger2 = var(10) := -1 && var(9) := -1
trigger2 = Random < ((300) * (AIlevel ** 2 / 64.0))
trigger2 = var(57) := 1000392
;Jump cancle for General
trigger3 = var(59) = 981
trigger3 = MoveContact && var(7) && !(var(18) & 64) && var(7) < 4
trigger3 = StateNo = 205
trigger3 = P2StateType = A
trigger3 = P2Dist y <= -90
trigger3 = var(10) := -1 && var(9) := -1
trigger3 = var(57) := 1000393
;Jump cancle Task

[State -1, Jump for AI]
type = ChangeState
value = 39
triggerall = AIlevel
triggerall = numenemy && roundstate = 2
triggerall = StateType != A
triggerall = StateNo != 39 && StateNo != 44
trigger1 = var(59) = 0 || var(59) = 99
trigger1 = (Ctrl || StateNo = 21 || StateNo = 100)
trigger1 = !(StateNo = 52 || PrevStateNo = 52)
trigger1 = (p2bodydist x = [300,600])  && var(4) != 1
trigger1 = !(P2StateNo = 5120)
trigger1 = Random < ((14 + 200*(P2StateNo > 160 && !InGuardDist && P2StateType != L && Enemynear,AnimTime <= -30)) * (AIlevel ** 2 / 64.0))
trigger1 = var(10) := -1 && var(9) := -1
trigger1 = var(57) := 1003901
; rare normal jump fwd
trigger2 = var(59) = 0 || var(59) = 99
trigger2 = (Ctrl || StateNo = 21 || StateNo = 100)
trigger2 = !(StateNo = 52 || PrevStateNo = 52)
trigger2 = (p2bodydist x = [580,1000])  && var(4) != 1
trigger2 = !(P2StateNo = 5120)
trigger2 = Random < ((14 + 200*(P2StateNo > 160 && !InGuardDist && P2StateType != L && Enemynear,AnimTime <= -35)) * (AIlevel ** 2 / 64.0))
trigger2 = var(10) := -1 && var(9) := -3
trigger2 = var(57) := 1003902
; rare super jump fwd
trigger3 = var(59) = 0
trigger3 = (Ctrl || StateNo = 21 || StateNo=100)
trigger3 = (p2bodydist x = [300,1000]) && P2MoveType =A
trigger3 = (var(46) & 32) && Enemynear,AnimTime <= -30
trigger3 = Random < ((100 + 100*(life < (4/Lifemax))) * (AIlevel ** 2 / 64.0))
trigger3 = var(10) := -1 && var(9) := IFElse(p2bodydist x > 590,-3,-1)
trigger3 = var(57):= 1003903
; jump hakoken
trigger4 = var(59) = 0
trigger4 = (Ctrl || StateNo = 21 || StateNo=100)
trigger4 = (p2bodydist x = [210,380])
trigger4 = Random < ((60 + 100*(P2StateNo = 5120 && Enemynear,AnimTime > -18)) * (AIlevel ** 2 / 64.0))
trigger4 = var(10) := -2 && var(9) := IFElse(p2bodydist x < 280,-3,-1)
trigger4 = var(57):= 1003904
;back jump for long strike
trigger5 = var(59) = [5300,5301]
trigger5 = (Ctrl || StateNo = 21 || StateNo=100)
trigger5 = !(Enemynear,StateType = L || (Enemynear,StateNo = [5300,5119])) || ((Enemynear,StateNo = [5120,5149]) && Enemynear,AnimTime > -26)
trigger5 = (P2bodydist x = [260,500]) || (P2bodydist x = [660,900]) || BackEdgeBodyDist < 2
trigger5 = Enemynear,Vel y >= 0 && Enemynear,Pos y > -220
trigger5 = Random < 600
trigger5 = var(10) := -1 && var(9) := IFElse(p2bodydist x > 600,-3,-1)
trigger5 = var(57):= 1003905
;Jump for dizzy target
trigger6 = var(59) = 0 || (var(59) = [13,19]) || var(59) = 99
trigger6 = (Ctrl || StateNo = 21 || StateNo=100)
trigger6 = P2StateType != A && P2MoveType != A
trigger6 = p2bodydist x < 320 && BackEdgeBodydist < 120
trigger6 = Random < ((60 + 500*(P2StateType = L || (P2StateNo = [5120,5299]))) * (AIlevel ** 2 / 64.0))
trigger6 = var(10) := -1 && var(9) := -3
trigger6 = var(57):= 1003906
;leave corner

[State -1, Run Dash]
type = ChangeState
value = 100
triggerall = AIlevel
triggerall = NumEnemy && Anim!=5 && StateType != A
triggerall = Roundstate = 2 && !InGuardDist && P2bodydist x > 0
triggerall = (Ctrl || StateNo = 21)
trigger1 = var(59) = 0 || var(59) = 99
trigger1 = (p2bodydist x > 1000) && !InGuardDist
trigger1 = Random < ((12 + 80 * (P2StateNo > 160 && (var(4) != [1,2]) + 100*(var(21) & 8))) * (AIlevel ** 2 / 64.0))
trigger1 = var(57) := 1010001
; Too far away
trigger2 = var(59) = 0 || var(59) = 99
trigger2 = NumPartner
trigger2 = Partner,Alive && Partner,movetype = H
trigger2 = !(Partner,stateno=[120,155]) && !(Partner,stateno=[700,702]) && Partner,time > 18
trigger2 = Random < ((100 + 100*(var(21) & 8)) * (AIlevel ** 2 / 64.0))
trigger2 = var(57) := 1010102
; Save Partner
trigger3 = (var(59) = [2,5]) || (var(59) = [5300,5301])
trigger3 = P2bodydist x > IFElse(var(59) = 5301,740,380)
trigger3 = Random < ((600) * (AIlevel ** 2 / 64.0))
trigger3 = var(57) := 1010103
; Have task to do
trigger4 = var(59) = [13,16]
trigger4 = P2bodydist x > (400*(var(59)=13) +  860*(var(59)=14) + 1100*(var(59)=15) + 800*(var(59)=16))
trigger4 = var(57) := 1010104
; Have 0 Distance task
trigger5 = (var(59) = [2,5]) || var(59) = 981
trigger5 = P2bodydist x > 320
trigger5 = var(57) := 1010105
trigger6 = var(59) = 19
trigger6 = NumHelper(30000)
trigger6 = P2Bodydist x > (Helper(30000),Pos x - Pos x)
trigger6 = P2Bodydist x > 600 * Const(Size.xScale)
trigger6 = (Helper(30000),Pos x - Pos x) > 400 * Const(Size.xScale)
trigger6 = var(57) := 1010106
;Run to Support Character
trigger7 = var(59) = 0
trigger7 = (var(21) & 8)
trigger7 = (p2bodydist x > 160) && (P2Dist y = [-200,10]) && Enemynear,vel y > -10
trigger7 = Random < ((40 + 100*InGuardDist + 20*(var(46) & 32)) * (AIlevel ** 2 / 64.0))
trigger7 = var(57) := 1010007
;Personal Potential


[State -1, Blast Power and Combo]; Escape is in -2
type = ChangeState
value = 980
triggerall = AIlevel && NumEnemy
triggerall = Alive && !(StateNo = [980,989])
triggerall = RoundState = 2
triggerall = !((var(19) & 2) || (var(19) & 4) || (var(19) & 8))
triggerall = NumHelper(20400)
triggerall = Helper(20400),var(5) = 0 || Helper(20400),var(5) = 3
triggerall = var(59) != 99
trigger1 = var(59) = 0 || (var(59) = [13,16])
trigger1 = (Ctrl || StateNo = 21 || StateNo = 100 || (StateNo = 111 && MoveType = I))
trigger1 = StateType != A && P2StateType != A
trigger1 = ((P2Bodydist x = [-200,280]) && Enemynear,vel y >= -5) || (P2StateType = L && (((1.0*Life/LifeMax)*1000.0) < 600) && Power < 5000)
trigger1 = P2Dist y + (fvar(8) * 14 + 0.5*(fvar(9) * 14 ** 2)) = [-220,IFElse(P2StateType = C,160,200)]
trigger1 = Random < ((32 + 150 * (var(4) = 1) - 16*(Life = LifeMax) ) * (AIlevel ** 2 / 64.0))
trigger1 = var(10) := 1
trigger1 = var(57) := 1009801
;Power up P2 On Ground
trigger2 = var(59) = 0 || (var(59) = [13,16])
trigger2 = (Ctrl || StateNo = 21 || StateNo = 100 || (StateNo = 111 && MoveType = I))
trigger2 = Life < 500 || Power < 3000
trigger2 = P2StateType = A
trigger2 = (P2Bodydist x - 14*fvar(17)) = [-340,340]
trigger2 = P2Dist y + (Enemynear,vel y * 14 + 0.5*(fvar(19) * 14 ** 2)) = [-400,IFElse(P2StateType = C,320,360)]
trigger2 = Random < ((40 + 100*(Enemynear,MoveType=A) + 300*(Enemynear,MoveType=H)) * (AIlevel ** 2 / 64.0))
trigger2 = var(10) := 1
trigger2 = var(57) := 1009802
;Power up P2 In air
trigger3 = !(P2StateType = L) || P2StateNo = 111108
trigger3 = (MoveHit = [1,5]) && var(7) > 1 && !(var(18) & 64) && var(7) < 6
trigger3 = var(7) >= 4
trigger3 = StateNo = 951 || StateNo = 1108
trigger3 = (P2Bodydist x = [-200,300])
trigger3 = P2Dist y = [-320,IFElse(P2StateType = C,160,200)]
trigger3 = Random < ((100 + 200*(var(7)=5) + 300*(P2Life < 100) + 400*(Power < 2000) + 10*var(59)) * (AIlevel ** 2 / 64.0))
trigger3 = var(10) := 2
trigger3 = var(57) := 1009803
;Combo Blast




;------------ AI Super Moves ----------------

;Justice Enforcer
[State -1, Super 01]
type = ChangeState
value = 3000
triggerall = AIlevel && NumEnemy
triggerall = RoundState = 2
triggerall = StateType != A
triggerall = Power >= 2000 && !NumHelper(7570)
triggerall = !InGuardDist && (P2StateType != L || StateNo = 1108) && !((P2StateNo = [120,159]) ||P2StateNo = 5120 || P2StateNo = 5200 || P2StateNo = 5210)
triggerall = !(StateNo = 801 || PrevStateNo = 801)
triggerall = var(59) != 99
trigger1 = var(59) = 0
trigger1 = (Ctrl || StateNo = 21 || StateNo = 100)
trigger1 = P2StateType != L && P2StateNo > 40 && Enemynear,Vel y >= 0
trigger1 = (P2Bodydist x - (Ceil((P2Bodydist x - 0.0)/(34 * Const(Size.xScale))) * fvar(7))) = [-40,800]
trigger1 = P2Dist y + (fvar(8) * (Ceil((P2Bodydist x - 0.0)/(34 * Const(Size.xScale)))) + 0.5*(fvar(9) * (Ceil((P2Bodydist x - 0.0)/(34 * Const(Size.xScale)))) ** 2)) = [-140,IFElse(P2StateType = C,10,20)]
trigger1 = Random < (((8 - AILevel) + 40*((var(4) = [1,2]) * (Enemynear,AnimTime < -Ceil((P2Bodydist x - 0.0)/(34 * Const(Size.xScale))))) + 500*(var(4) = 3 && Enemynear,AnimTime < -Ceil((P2Bodydist x - 0.0)/(34 * Const(Size.xScale))))) * (AIlevel ** 2 / 64.0))
trigger1 = var(57) := 1030001
; Poke Land
trigger2 = var(59) = 0 || (var(59) = [13,19]) || (var(59) = [3,5]) || var(59) = 100 || var(59) = 930 || var(59) = 981 || (var(59) = [5300,5301])
trigger2 = (var(7) = [3,5])
trigger2 = NumHelper(StateNo+5) && !(var(18) & 64)
trigger2 = (Helper(StateNo+5),MoveHit = [1,3]) && var(3); IF parried stop combo
trigger2 = P2Bodydist x = [-40,1000]
trigger2 = P2Dist y + (fvar(8) * 2 + 0.5*(fvar(9) * 2 ** 2)) = [-140,IFElse(P2StateType = C,10,10)]
trigger2 = Random < ((20 + 180 *(var(7) = 4) + 500*(var(19)&4) + IFElse(var(7) > 3 && ((var(19) & 4) || var(59) >= 100) ,900,0) -900*((power=[2300,4999]) && var(31) && var(1)>=10000)) * (AIlevel ** 2 / 64.0))
trigger2 = var(57) := 1030002
trigger3 = var(59) = 0 || (var(59) = [13,19]) || (var(59) = [3,5]) || var(59) = 100 || var(59) = 930 || var(59) = 981 || (var(59) = [5300,5301])
trigger3 = (var(7) = [3,5]) && !(var(18) & 64)
trigger3 = (MoveHit = [1,4])
trigger3 = P2Bodydist x = [-100,1000]
trigger3 = P2Dist y + (fvar(8) * 2 + 0.5*(fvar(9) * 2 ** 2)) = [-140,IFElse(P2StateType = C,40,60)]
trigger3 = Random < ((20 + 160*(var(7) >= 4) + 400*(Power > 4000 && var(7) > 4) + 500*((var(19)&4) && var(10) = 3) + 150*(StateNo=907) + 900*(var(7) > IFElse(Power >= 3000,4,3) && ((var(19) & 4) || var(59) >= 100)) -900*((power=[2300,4999]) && var(31) && var(1)>=10000)) * (AIlevel ** 2 / 64.0))
trigger3 = var(57) := 1030003
; Combo



;Steel Phalanx
[State -1, Super 02]
type = ChangeState
value = 3100
triggerall = AIlevel && NumEnemy
triggerall = RoundState = 2
triggerall = StateType != A
triggerall = Power >= 2000 && !NumHelper(7570)
triggerall = P2StateType != L
triggerall = var(59) != 99
trigger1 = var(59) = 0
trigger1 = (Ctrl || StateNo = 21 || StateNo = 100 || (StateNo = [120,140]))
trigger1 = P2StateType != A && P2StateType != L
trigger1 = P2Bodydist x > 400
trigger1 = Random < (((8 - AILevel) + 50*((var(4) = [1,2]) && Enemynear,AnimTime < -( P2Bodydist x / (1.8 * const(velocity.run.fwd.x) * Const(Size.xscale)) + 4 )) + 400*(var(4) = 3 && Enemynear,AnimTime < -( P2Bodydist x / (1.8 * const(velocity.run.fwd.x) * Const(Size.xscale)) + 4 )) -900*((power=[2300,4999]) && var(31) && var(1)>=10000)) * (AIlevel ** 2 / 64.0))
trigger1 = var(57) := 1031001
; Poke Land
trigger2 = var(59) = 0 || (var(59) = [13,19]) || (var(59) = [3,5]) || var(59) = 100 || var(59) = 930 || var(59) = 981 || (var(59) = [5300,5301])
trigger2 = (var(7) = [3,4])
trigger2 = NumHelper(StateNo+5) && !(var(18) & 64)
trigger2 = (Helper(StateNo+5),MoveHit = [1,3]) && var(3); IF parried stop combo
trigger2 = P2StateType != A
trigger2 = Random < ((50 + 180 *(var(7) = 4) -900*((power=[2300,4999]) && var(31) && var(1)>=10000)) * (AIlevel ** 2 / 64.0))
trigger2 = var(57) := 1031003
; Combo





;------------ AI Trump Move -----------------
[State -1, Trump Move]
type = ChangeState
value = 2900
triggerall = AIlevel && NumEnemy
triggerall = RoundState = 2
triggerall = StateType != A
triggerall = P2StateType != L
triggerall = var(22)
triggerall = var(59) != 99
trigger1 = var(59) = 0
trigger1 = (Ctrl || StateNo = 21 || StateNo = 100 || (StateNo = [120,140]))
trigger1 = P2StateType != A && P2StateType != L && !(P2StateNo =[39,59]) && P2MoveType = A
trigger1 = (P2Bodydist x = [-20,400])
trigger1 = (var(4) && Enemynear,AnimTime < -24)
trigger1 = Random < ((8 - AILevel)+ 20 + 200*(P2StateNo >= 3000) + IFElse(PrevStateNo = 5120,600,320)*(Life < (LifeMax * 0.6))) * (AIlevel ** 2 / 64.0)
trigger1 = var(57) := 1029001
; Poke Land





;------------ AI System Special Moves -------
[State -1, Impact Skill overhead]
type = ChangeState
value = 930
triggerall = AIlevel && NumEnemy
triggerall = RoundState = 2
triggerall = StateType != A
triggerall = var(59) != 99
trigger1 = var(59) = 0
trigger1 = (Ctrl || StateNo = 21 || StateNo = 100 || (StateNo = [120,140]))
trigger1 = (P2Bodydist x = [-10,280]) && P2StateType != L
trigger1 = (P2Dist y = [-200,40]) && Enemynear,vel y > -5
trigger1 = Random < ((35 + 30 * (var(4) = 1) ) * (AIlevel ** 2 / 64.0))
trigger1 = var(57) := 1009301
;Counter Hit

[State -1, Impact Skill 02]
type = ChangeState
value = 950
triggerall = AIlevel && NumEnemy
triggerall = RoundState = 2
triggerall = StateType != A
triggerall = var(59) != 99
triggerall = var(59) = 0
triggerall = (Ctrl || StateNo = 21 || StateNo = 100)
triggerall = var(4) = 1
triggerall = P2BodyDist x < (300 * Const(Size.xScale)) && Enemynear,vel y >= -16
trigger1 = P2StateType = A && P2MoveType = A && Enemynear,vel x >= 0
trigger1 = Random < ((80) * (AIlevel ** 2 / 64.0))
trigger1 = var(57) := 1009501
trigger2 = P2StateType != A && P2MoveType = A && Enemynear,vel x >= 0
trigger2 = Random < ((90 + 30*(P2StateType = C)) * (AIlevel ** 2 / 64.0))
trigger2 = var(57) := 1009502
;Counter Hit



[State -1, Impact Skill 01]
type = ChangeState
value = 900
triggerall = AIlevel && NumEnemy
triggerall = RoundState = 2
triggerall = StateType != A
triggerall = var(59) != 99
trigger1 = var(59) = 0
trigger1 = (Ctrl || StateNo = 21 || StateNo = 100 || (StateNo = [120,140]))
trigger1 = !(P2StateType = A || P2StateType = L)
trigger1 = (P2Bodydist x = [0,400])
trigger1 = Random < ((10 + 100 * (var(4) = 1)) * (AIlevel ** 2 / 64.0))
trigger1 = var(57) := 1009001
;Counter Hit
trigger2 = var(59) = 0 || (var(59) = [13,19]) || (var(59) = [3,5]) || var(59) = 100 || var(59) = 930 || var(59) = 981 || (var(59) = [5300,5301])
trigger2 = !(P2StateType = L)
trigger2 = (MoveHit = [1,2]) && var(7) > 1 && !(var(18) & 64) && var(7) < 4
trigger2 = P2Bodydist x < 560 && P2Dist x > 0
trigger2 = (P2Dist y = [-100,50])
trigger2 = Random < ((30 + 100 * (var(7) > 2)) * (AIlevel ** 2 / 64.0))
trigger2 = var(57) := 1009002
trigger3 = var(59) = 0 || (var(59) = [13,19]) || (var(59) = [3,5]) || var(59) = 100 || var(59) = 930 || var(59) = 981 || (var(59) = [5300,5301])
trigger3 = !(P2StateType = L)
trigger3 = NumHelper(StateNo+5) && !(var(18) & 64)
trigger3 = (Helper(StateNo+5),MoveHit = [1,2])
trigger3 = var(7) > 1 && var(7) < 4
trigger3 = P2Bodydist x < 560 && P2Dist x > 0
trigger3 = (P2Dist y = [-100,50])
trigger3 = Random < ((30 + 100 * (var(7) > 2)) * (AIlevel ** 2 / 64.0))
trigger3 = var(57) := 1009003
;combo
trigger4 = var(59) = 100 || (var(59) = [5300,5301])
trigger4 = (MoveHit = [1,2]) && var(7) = 3 && !(var(18) & 64)
trigger4 = P2Bodydist x < 560 && P2Dist x > 0
trigger4 = (P2Dist y = [-100,50])
trigger4 = Random < ((200 + 800*(P2StateType = C)) * (AIlevel ** 2 / 64.0))
trigger4 = var(57) := 1009004
;combo 100

;------------ AI Personal EX Special Moves -----
[State -1, EX-01];EX Steel Darts
type = ChangeState
value = 1050
triggerall = AIlevel && NumEnemy
triggerall = RoundState = 2
triggerall = Power >= 1000
triggerall = StateType != A && Power >= 1000
triggerall = P2StateType != L
triggerall = var(59) != 99
trigger1 = var(59) = 0
trigger1 = (Ctrl || StateNo = 21 || StateNo = 100)
trigger1 = P2Bodydist x > 400
trigger1 = Random < ((0 + (var(4) = 3 && Enemynear,AnimTime < -8) * 2 * Floor(P2Bodydist x / 10.0)) * (AIlevel ** 2 / 64.0))
trigger1 = var(57) := 1010501
;poke
trigger2 = var(59) = 0 || (var(59) = [13,19]) || (var(59) = [3,5]) || var(59) = 100 || var(59) = 930 || var(59) = 981 || (var(59) = [5300,5301])
trigger2 = (var(7) = [3,4])
trigger2 = NumHelper(StateNo+5) && !(var(18) & 64)
trigger2 = (Helper(StateNo+5),MoveHit = [1,4]) && (Helper(StateNo+5),HitCount >= 3)
trigger2 = Random < ((60*(var(7)>3) + (P2Bodydist x /10.0) -900*((power=[2300,3999]) && var(31) && var(1)>=10000) ) * (AIlevel ** 2 / 64.0))
trigger2 = var(57) := 1010502
;Combo

[State -1, SP-02]; EX Sexy Teleport
type = ChangeState
value = 1150
triggerall = AIlevel && NumEnemy
triggerall = RoundState = 2
triggerall = Power >= 1000
triggerall = !(StateNo = 930)
triggerall = var(59) != 99 && var(59) != 981
trigger1 = var(59) = 0 || (var(59) = [13,19]) || (var(59) = [3,5]) || var(59) = 100 || var(59) = 930 || var(59) = 981 || (var(59) = [5300,5301])
trigger1 = (MoveHit = [1,4]) && var(7) > 1 && !(var(18) & 64) && var(7) < 5
trigger1 = (var(7) = [3,4])
trigger1 = (P2StateType != L || StateNo = 1108) && P2StateType != C && Enemynear,vel y >= -28
trigger1 = !((StateNo = [405,410]) && P2StateType != A)
trigger1 = (P2Bodydist x - (7 + Ceil((P2Bodydist x - 40.0)/(46 * Const(Size.xScale))))*fvar(7)) = [-80,540]
trigger1 = P2Dist y = [-220,180]
trigger1 = Random < ((10 + 400*(var(15)=0 && var(7)=4) + 300*(P2Life < 50) + 300*(Power>=3000) -900*((power=[2300,3999]) && var(31) && var(1)>=10000)) * (AIlevel ** 2 / 64.0))
trigger1 = var(10) := -3
trigger1 = var(57) := 1011501
trigger2 = var(59) = 0 || (var(59) = [13,19]) || (var(59) = [3,5]) || var(59) = 100 || var(59) = 930 || var(59) = 981 || (var(59) = [5300,5301])
trigger2 = NumHelper(StateNo+5) && !(var(18) & 64)
trigger2 = (Helper(StateNo+5),MoveHit = [1,3]) && (Helper(StateNo+5),HitCount > 2)
trigger2 = var(7) > 2 && var(7) <= 4
trigger2 = (P2StateType != L || StateNo = 1108) && P2StateType != C && Enemynear,vel y >= -10
trigger2 = (P2Bodydist x - (7 + Ceil((P2Bodydist x - 40.0)/(46 * Const(Size.xScale))))*fvar(7)) = [-40,540]
trigger2 = P2Dist y = [-220,150]
trigger2 = Random < ((100 + 200*(StateType != A && var(7) = 3) + 500 * (var(7) = 3 && var(15)=0) -900*((power=[2300,3999]) && var(31) && var(1)>=10000)) * (AIlevel ** 2 / 64.0))
trigger2 = var(57) := 1011502
;combo
trigger3 = var(59) = 100 || var(59) = 930 || var(59) = 981 || (var(59) = [5300,5301])
trigger3 = Power > 3000 || (Power = [1000,1999])
trigger3 = (MoveHit = [1,4]) && var(7) = 4 && !(var(18) & 64)
trigger3 = (P2StateType != L || StateNo = 1108) && P2StateType != C && Enemynear,vel y >= -28
trigger3 = !((StateNo = [405,410]) && P2StateType != A)
trigger3 = (P2Bodydist x - (7 + Ceil((P2Bodydist x - 40.0)/(46 * Const(Size.xScale))))*fvar(7)) = [-80,540]
trigger3 = P2Dist y = [-220,180]
trigger3 = var(10) := -3
trigger3 = var(57) := 1011503
;Combo 100

;------------ AI Personal Special Moves -----
[State -1, SP-02]; Sexy Teleport
type = ChangeState
value = 1100
triggerall = AIlevel && NumEnemy
triggerall = RoundState = 2
triggerall = var(59) != 99 && var(59) != 981
trigger1 = var(59) = 0 || (var(59) = [13,19]) || (var(59) = [3,5]) || var(59) = 930 || var(59) = 981
trigger1 = (MoveHit = [1,3]) && var(7) > 1 && !(var(18) & 64) && var(7) < 4
trigger1 = (P2Bodydist x = [-100,600])
trigger1 = (P2Dist y = [-150,120]) || (var(7) = 3 && var(15)=0)
trigger1 = (P2StateType != L || StateNo = 1108) && P2StateType != C && Enemynear,vel y >= -10
trigger1 = !(StateNo = 410 && vel y > 0 && P2StateType != A)
trigger1 = Random < ((80 + 200*(StateType != A && var(7) = 3) + 900 * (var(7) = 3 && var(15)=0)) * (AIlevel ** 2 / 64.0))
trigger1 = var(57) := 1011001
trigger2 = var(59) = 0 || (var(59) = [13,19]) || (var(59) = [3,5]) || var(59) = 100 || var(59) = 930 || var(59) = 981 || (var(59) = [5300,5301])
trigger2 = NumHelper(StateNo+5) && !(var(18) & 64)
trigger2 = (Helper(StateNo+5),MoveHit = [1,3])
trigger2 = var(7) > 1 && var(7) < 4
trigger2 = (P2Bodydist x = [0,600])
trigger2 = (P2Dist y = [-150,120])
trigger2 = (P2StateType != L || StateNo = 1108) && P2StateType != C && Enemynear,vel y >= -10
trigger2 = Random < ((80 + 200*(StateType != A && var(7) = 3) + 500 * (var(7) = 3 && var(15)=0)) * (AIlevel ** 2 / 64.0))
trigger2 = var(57) := 1011002
;combo
trigger3 = var(59) = 0
trigger3 = (Ctrl || StateNo = 21 || StateNo = 100)
trigger3 = StateType != A
trigger3 = P2StateNo > 40 && !(P2StateNo = [120,159])
trigger3 = (P2StateType != L || StateNo = 1108) && P2StateType != C && Enemynear,vel y >= -10
trigger3 = (P2Bodydist x - ((10 + Ceil((P2Bodydist x - 40.0)/(46 * Const(Size.xScale)))) * fvar(7))) = [-40,440]
trigger3 = P2Dist y + (fvar(8) * (10 + Ceil((P2Bodydist x - 40.0)/(46 * Const(Size.xScale)))) + 0.5*(fvar(9) * (10 + Ceil((P2Bodydist x - 40.0)/(46 * Const(Size.xScale)))) ** 2)) = [-120,IFElse(P2StateType = C,80,150)]
trigger3 = Random < (((10 - AILevel) + 100*(P2Bodydist x > 400) + 100*(P2StateType = A) + 100*(var(4) = 3 && Enemynear,AnimTime < -16)) * (AIlevel ** 2 / 64.0))
trigger3 = var(57) := 1011003
;poke on Ground
trigger4 = var(59) = 0
trigger4 = (Ctrl || StateNo = 21 || StateNo = 100)
trigger4 = StateType = A && P2StateType = A
trigger4 = P2StateNo > 40 && !(P2StateNo = [120,159])
trigger4 = (P2StateType != L || StateNo = 1108) && P2StateType != C && Enemynear,vel y >= -10
trigger4 = (P2Bodydist x - ((10 + Ceil((P2Bodydist x - 40.0)/(46 * Const(Size.xScale)))) * fvar(7))) = [-40,440]
trigger4 = P2Dist y + (fvar(8) * (10 + Ceil((P2Bodydist x - 40.0)/(46 * Const(Size.xScale)))) + 0.5*(fvar(9) * (10 + Ceil((P2Bodydist x - 40.0)/(46 * Const(Size.xScale)))) ** 2)) = [-120,IFElse(P2StateType = C,80,150)]
trigger4 = Random < (((10 - AILevel) + 100*(P2Bodydist x > 400) + 100*(P2StateType = A) + 100*(var(4) = 3 && Enemynear,AnimTime < -16)) * (AIlevel ** 2 / 64.0))
trigger4 = var(57) := 1011004
;poke on Air on Air
trigger5 = var(59) = 100 || (var(59) = [5300,5301])
trigger5 = (MoveHit = [1,3]) && var(7) = 3 && !(var(18) & 64)
trigger5 = StateType != A && P2StateType = S
trigger5 = (P2Bodydist x = [-100,600])
trigger5 = (P2Dist y = [-150,120])
trigger5 = var(57) := 1011005
; Combo 100 or Dizzy


; Steel Darts
[State -1, SP-01]
type = ChangeState
value = 1000
triggerall = AIlevel && NumEnemy
triggerall = RoundState = 2
triggerall = StateType != A
triggerall = !(P2statetype = C && (enemynear,const(size.mid.pos.y) >= -Const720p(120)) || P2statetype = L) || p2statetype = A
triggerall = var(59) != 99
trigger1 = var(59) = 0 || (var(59) = [13,19]) || (var(59) = [3,5]) || var(59) = 100 || var(59) = 930 || var(59) = 981 || (var(59) = [5300,5301])
trigger1 = (MoveContact = [1,3]) && var(7) > 1 && !(var(18) & 64) && var(7) < 4
trigger1 = P2Bodydist x < 600 && P2Dist x > 0
trigger1 = (P2Dist y = [-100,50])
trigger1 = Random < ((60 + 400 * (var(7) > 2)) * (AIlevel ** 2 / 64.0))
trigger1 = var(57) := 1010001
trigger2 = var(59) = 0 || (var(59) = [13,19]) || (var(59) = [3,5]) || var(59) = 100 || var(59) = 930 || var(59) = 981 || (var(59) = [5300,5301])
trigger2 = NumHelper(StateNo+5) && !(var(18) & 64)
trigger2 = (Helper(StateNo+5),MoveContact = [1,3])
trigger2 = var(7) > 1 && var(7) < 4
trigger2 = P2Bodydist x < 600 && P2Dist x > 0
trigger2 = (P2Dist y = [-100,50])
trigger2 = Random < ((60 + 500 * (var(7) > 2)) * (AIlevel ** 2 / 64.0))
trigger2 = var(57) := 1010002
;combo
trigger3 = var(59) = 0 || (var(46) & 2)
trigger3 = (Ctrl || StateNo = 21 || StateNo = 100)
trigger3 = P2StateType != L && Enemynear,vel y >= 0
trigger3 = P2Bodydist x = [IFElse(P2StateType = A && P2MoveType = H,-40,340),1240]
trigger3 = P2Dist y + (fvar(8) * 14 + 0.5*(fvar(9) * 14 ** 2)) = [-160,IFElse(P2StateType = C,40,40)]
trigger3 = Random < (((16 + Floor((P2Bodydist x)/100.0)) + 380*(P2StateType = A) + 500*(var(4) = 3 && Enemynear,AnimTime < -14) + 300*(var(46) & 2)) * (AIlevel ** 2 / 64.0))
trigger3 = var(57) := 1010003
;poke

; Steel Darts for pressure
[State -1, SP-01]
type = ChangeState
value = 1000
triggerall = AIlevel && NumEnemy
triggerall = RoundState = 2
triggerall = StateType != A
triggerall = !(P2statetype = C && (enemynear,const(size.mid.pos.y) >= -Const720p(120))) || p2statetype = A
triggerall = var(59) != 99
trigger1 = var(59) = 0 || (var(59) = [13,16])
trigger1 = (Ctrl || StateNo = 21 || StateNo = 100)
trigger1 = P2StateType = L && P2StateNo = 5120 && Enemynear,vel x = 0
trigger1 = Enemynear,AnimTime = [-40,-18]
trigger1 = P2Bodydist x = [240,1240]
trigger1 = P2Dist y + (fvar(8) * 14 + 0.5*(fvar(9) * 14 ** 2)) = [-160,IFElse(P2StateType = C,40,40)]
trigger1 = Random < ((180) * (AIlevel ** 2 / 64.0))
trigger1 = var(57) := 1010011
;poke


;------------ AI Normal Moves ---------------

[State -1, Normal Heavy ATK]
type = ChangeState
value = 410
triggerall = AIlevel && NumEnemy
triggerall = RoundState = 2
triggerall = StateType = A && StateNo != 410 && StateNo != 930
triggerall = var(59) != 99
trigger1 = var(59) = 0 || (var(59) = [13,19]) || (var(59) = [3,5]) || var(59) = 100 || var(59) = 930 || var(59) = 981 || (var(59) = [5300,5301])
trigger1 = StateNo = 405 && MoveContact
trigger1 = (P2Bodydist x - 9*fvar(7)) = [-180,200]
trigger1 = P2Dist y + (fvar(8) * 12 + 0.5*(fvar(9) * 12 ** 2)) = [-200,IFElse(P2StateType = C,150,250)]
trigger1 = Random < ((700 + 300*(var(59)=930 || var(59)=981)) * (AIlevel ** 2 / 64.0))
trigger1 = var(57):= 104101
;Combo
trigger2 = var(59) = 0
trigger2 = Ctrl || (StateNo = 111 && MoveType = I) || (StateNo = [120,149])
trigger2 = P2StateType != A && (vel y > -20 || vel x < 0)
trigger2 = (P2Bodydist x - 9*fvar(7)) = [-180,200]
trigger2 = P2Dist y + (fvar(8) * 9 + 0.5*(fvar(9) * 9 ** 2)) = [-300,IFElse(P2StateType = C,150,260)]
trigger2 = Random < ((280 + 360*(Vel x < 0) + 300*(StateNo = 111) + 200*(vel y > -10) + 500*(Enemynear,P2Dist x<0)) * (AIlevel ** 2 / 64.0))
trigger2 = var(57):= 104102
;Land Strike
trigger3 = StateNo = 405 && MoveContact
trigger3 = var(15) = 0
trigger3 = (P2Bodydist x = [-180,400])
trigger3 = Random < ((1000) * (AIlevel ** 2 / 64.0))
trigger3 = var(57):= 104103
;No matter what Combo
trigger4 = var(59) = 100 || (var(59) = [5300,5301])
trigger4 = Ctrl || (StateNo = 111 && MoveType = I) || (StateNo = [120,149])
trigger4 = P2StateType != A && (vel y > -20 || vel x < 0)
trigger4 = (P2Bodydist x - 9*fvar(7)) = [-200,200]
trigger4 = P2Dist y + (fvar(8) * 9 + 0.5*(fvar(9) * 9 ** 2)) = [-300,IFElse(P2StateType = C,70,80)]
trigger4 = var(57):= 104104
;Land Strike 100 or for dizzy

[State -1, Normal light ATK]
type = ChangeState
value = 400
triggerall = AIlevel && NumEnemy
triggerall = RoundState = 2
triggerall = StateType = A && StateNo != 400 && StateNo != 930
triggerall = var(59) != 99
trigger1 = Ctrl || (StateNo = 111 && MoveType = I)
trigger1 = P2StateType = A
trigger1 = vel x >= 0
trigger1 = (P2Bodydist x - 6*fvar(7)) = [-100,210]
trigger1 = P2Dist y + (fvar(8) * 6 + 0.5*(fvar(9) * 6 ** 2)) = [-160,IFElse(P2StateType = C,120,250)]
trigger1 = PrevStateNo != 44
trigger1 = Random < ((100 + 70*(Vel y < -20) + 100*(StateNo = 110) + 900*(var(59)=930 || var(59)=981)) * (AIlevel ** 2 / 64.0))
trigger1 = var(57):= 104001
;Normal Poke

[State -1, Normal Mid ATK]
type = ChangeState
value = 405
triggerall = AIlevel && NumEnemy
triggerall = RoundState = 2
triggerall = StateType = A && StateNo != 405 && StateNo != 930
triggerall = var(59) != 99
trigger1 = var(59) = 0 || (var(59) = [13,19]) || (var(59) = [3,5]) || var(59) = 100 || var(59) = 930 || var(59) = 981 || (var(59) = [5300,5301])
trigger1 = StateNo = 400 && MoveContact
trigger1 = (P2Bodydist x - 8*fvar(7)) = [-120,190]
trigger1 = P2Dist y + (fvar(8) * 8 + 0.5*(fvar(9) * 8 ** 2)) = [-200,IFElse(P2StateType = C,160,230)]
trigger1 = Random < ((400 + 900*(var(59)=930 || var(59)=981)) * (AIlevel ** 2 / 64.0))
trigger1 = var(57):= 104051
;Combo
trigger2 = var(59) = 0 || var(59) = 930
trigger2 = Ctrl || (StateNo = 111 && MoveType = I)
trigger2 = NumHelper(20400)
trigger2 = var(15) = 0
trigger2 = P2StateType = A
trigger2 = (P2Bodydist x - 8*fvar(7)) = [-130,190]
trigger2 = P2Dist y + (fvar(8) * 8 + 0.5*(fvar(9) * 8 ** 2)) = [-200,IFElse(P2StateType = C,160,230)]
trigger2 = Random < ((300 + 200*(StateNo = 110) + 300*(Vel x < 0 || var(15)=0) + 500*(PrevStateNo = 44) + 900*(var(59)=930)) * (AIlevel ** 2 / 64.0))
trigger2 = var(57):= 104052
;double jumpped Air Poke for 930
trigger3 = var(59) = 0 || var(59) = 930
trigger3 = Ctrl || (StateNo = 111 && MoveType = I)
trigger3 = P2StateType = A || Vel x < 0
trigger3 = (P2Bodydist x - 8*fvar(7)) = [-60,190]
trigger3 = P2Dist y + (fvar(8) * 8 + 0.5*(fvar(9) * 8 ** 2)) = [-200,IFElse(P2StateType = C,160,230)]
trigger3 = Random < ((300 + 200*(StateNo = 110) + 300*(Vel x < 0) + 500*(PrevStateNo = 44) + 900*(var(59)=930) + 500*(Enemynear,P2Dist x<0)) * (AIlevel ** 2 / 64.0))
trigger3 = var(57):= 104053
;Normal Air Poke
trigger4 = var(59) = 0 || (var(59) = [4,5])
trigger4 = Ctrl || (StateNo = 111 && MoveType = I) || (StateNo = [120,149])
trigger4 = Vel y < -32 || vel y > 10
trigger4 = P2StateType != A
trigger4 = (P2Bodydist x - 8*fvar(7)) = [-60,190]
trigger4 = P2Dist y + (fvar(8) * 8 + 0.5*(fvar(9) * 8 ** 2)) = [-210,IFElse(P2StateType = C,160,250)]
trigger4 = Random < ((100 + 450*(Vel y < -10) + 700*(var(57)=1000391) +500*(Enemynear,P2Dist x<0)) * (AIlevel ** 2 / 64.0))
trigger4 = var(57):= 104054
;Land strike





[State -1, Throw]
type = ChangeState
value = 210
triggerall = AIlevel && NumEnemy
triggerall = RoundState = 2
triggerall = StateType != A && StateNo != 210
triggerall = var(59) != 99
trigger1 = var(59) = 0 || (var(59) = [13,15]) || var(59) = 2
trigger1 = (Ctrl || StateNo = 21 || StateNo = 100)
trigger1 = !InGuardDist
trigger1 = P2StateType != A && P2StateType != L && !(P2StateNo = [150,159])
trigger1 = P2Bodydist x = [-40,60]
trigger1 = Random < ((80 + 900*(var(59) = 2)) * (AIlevel ** 2 / 64.0))
trigger1 = var(10) := -1
trigger1 = var(57) := 112101
;poke

[State -1, Normal Stand Heavy]
type = ChangeState
value = 210
triggerall = AIlevel && NumEnemy
triggerall = RoundState = 2
triggerall = StateType != A && StateNo != 210
triggerall = P2StateType != L
triggerall = var(59) != 99
trigger1 = var(59) = 0 || (var(59) = [13,19]) || (var(59) = [3,5]) || var(59) = 100 || var(59) = 930 || var(59) = 981 || (var(59) = [5300,5301])
trigger1 = MoveContact && !(var(18) & 64)
trigger1 = (var(7) && var(7) = 2) || (var(24) && var(7) && var(7) <= 3 && var(7) != 3)
trigger1 = Enemynear,vel y >= -24
trigger1 = P2Bodydist x = [-40,210]
trigger1 = Random < ((400 - 200*(StateNo = 305 && P2StateType != A)) * (AIlevel ** 2 / 64.0))
trigger1 = var(10):= -1
trigger1 = var(57):= 102101
trigger2 = var(59) = 0 || (var(59) = [13,19]) || (var(59) = [3,5]) || var(59) = 100 || var(59) = 930 || var(59) = 981 || (var(59) = [5300,5301])
trigger2 = NumHelper(StateNo+5) && !(var(18) & 64)
trigger2 = Helper(StateNo+5),MoveContact
trigger2 = (var(7) && var(7) = 2) || (var(24) && var(7) && var(7) <= 3 && var(7) != 3)
trigger2 = Enemynear,vel y >= -24
trigger2 = P2Bodydist x = [-40,210]
trigger2 = Random < ((400 - 200*(StateNo = 305 && P2StateType != A)) * (AIlevel ** 2 / 64.0))
trigger2 = var(10):= -1
trigger2 = var(57):= 102102
;Combo
trigger3 = var(59) = 0 || (var(59) = [13,15])
trigger3 = (Ctrl || StateNo = 21 || StateNo = 100)
trigger3 = P2StateType != A
trigger3 = (P2Bodydist x - 8*fvar(7)) = [240,350]
trigger3 = Random < (((12 + (P2Bodydist x / 60.0)) + 200*(P2StateNo > 160 && !InGuardDist && P2StateType != L)) * (AIlevel ** 2 / 64.0))
trigger3 = var(10):= -1
trigger3 = var(57):= 102103
;Ground poke
trigger4 = var(59) = 100 || (var(59) = [5300,5301])
trigger4 = MoveContact && !(var(18) & 64)
trigger4 = var(7) = 2
trigger4 = P2StateType != A
trigger4 = var(10):= -1
trigger4 = var(57):= 102107
;Combo 100
trigger5 = var(59) = 0 || (var(59) = [13,15]) ||  var(59) = 100 || (var(59) = [5300,5301])
trigger5 = (Ctrl || StateNo = 21 || StateNo = 100)
trigger5 = P2StateType != A && P2MoveType = H && (StateNo = 52 || PrevStateNo = 52)
trigger5 = (P2Bodydist x - 8*fvar(7)) = [220,350]
trigger5 = var(10):= -1
trigger5 = var(57):= 102105
;State 52 combo
trigger6 = var(59) = 100 || (var(59) = [5300,5301])
trigger6 = MoveContact && !(var(18) & 64)
trigger6 = (var(7) = 2)
trigger6 = Enemynear,vel y >= -24
trigger6 = P2Bodydist x = [-40,210]
trigger6 = var(10):= -1
trigger6 = var(57):= 102106
;Combo 100

[State -1, Normal Crouch Heavy]
type = ChangeState
value = 310
triggerall = AIlevel && NumEnemy
triggerall = RoundState = 2
triggerall = StateType != A && StateNo != 310
triggerall = P2StateType != A
triggerall = var(59) != 99
trigger1 = var(59) = 0 || (var(59) = [13,19]) || (var(59) = [3,5]) || var(59) = 930 || var(59) = 981
trigger1 = MoveContact && !(var(18) & 64)
trigger1 = (var(7) && var(7) = 2) || (var(24) && var(7) && var(7) <= 3 && var(7) != 3)
trigger1 = Enemynear,vel y >= -10 && (P2Bodydist x = [-10,210])
trigger1 = StateNo = 305
trigger1 = Random < ((400 + 200*(StateNo = 305 && P2StateType != A) + 300*(P2StateType = L)) * (AIlevel ** 2 / 64.0))
trigger1 = var(57):= 103101
;Combo
trigger2 = var(59) = 0 || (var(59) = [13,15])
trigger2 = (Ctrl || StateNo = 21 || StateNo = 100)
trigger2 = P2StateType != A && !(P2StateNo = [39,40])
trigger2 = (P2Bodydist x - 9*fvar(7)) = [220,370]
trigger2 = Random < ((12 + (P2Bodydist x / 200.0)) * (AIlevel ** 2 / 64.0))
trigger2 = var(10):= -1
trigger2 = var(57):= 103102
;Short version Ground poke


[State -1, Normal Stand Mid]
type = ChangeState
value = 205
triggerall = AIlevel && NumEnemy
triggerall = RoundState = 2
triggerall = StateType != A && StateNo != 205
triggerall = !(P2StateType = C || P2StateType = L)
triggerall = var(59) != 99
trigger1 = var(59) = 0 || (var(59) = [13,15]) || (var(59) = [4,5])
trigger1 = (Ctrl || StateNo = 21 || StateNo = 100)
trigger1 = P2StateType != A && (P2MoveType != A || (var(59) = [3,9])) && !(P2StateNo = [39,40])
trigger1 = (P2Bodydist x - 6*fvar(7)) = [-80,260]
trigger1 = Random < (((8 + 700*(((Pos x - Enemynear,Pos x)*Enemynear,facing) < 0) + (P2Bodydist x / 30.0)) + 500*(var(4) = 3 && Enemynear,AnimTime < -8) + 500*(Enemynear,P2Dist x < 0)) * (AIlevel ** 2 / 64.0))
trigger1 = var(57):= 102051
;P2 on Land Normal poke and Enemy disadvantage frame
trigger2 = var(59) = 0 || (var(59) = [13,19]) || (var(59) = [3,5]) || var(59) = 100 || var(59) = 930 || var(59) = 981 || (var(59) = [5300,5301])
trigger2 = MoveContact && !(var(18) & 64)
trigger2 = (var(7) && var(7) < 2) || (var(24) && var(7) && var(7) <= 3 && var(7) != 2)
trigger2 = Enemynear,vel y >= -80
trigger2 = (P2Bodydist x = [-40,200])
trigger2 = !(StateNo = 300 && var(10) < 2 && P2Bodydist x < 90)
trigger2 = Random < ((80 + 320*(StateNo = 200)) * (AIlevel ** 2 / 64.0))
trigger2 = var(57):= 102052
trigger3 = var(59) = 0 || (var(59) = [13,19]) || (var(59) = [3,5]) || var(59) = 100 || var(59) = 930 || var(59) = 981 || (var(59) = [5300,5301])
trigger3 = NumHelper(StateNo+5) && !(var(18) & 64)
trigger3 = Helper(StateNo+5),MoveContact
trigger3 = (var(7) && var(7) < 2) || (var(24) && var(7) && var(7) <= 3 && var(7) != 2)
trigger2 = (P2Bodydist x = [-40,200])
trigger2 = !(StateNo = 300 && var(10) < 2 && P2Bodydist x < 90)
trigger3 = Random < ((80 + 320*(StateNo = 200)) * (AIlevel ** 2 / 64.0))
trigger3 = var(57):= 102053
;Combo
trigger4 = var(59) = 0 || (var(59) = [13,15]) || var(59) = 981 || (var(59) = [4,5])
trigger4 = (Ctrl || StateNo = 21 || StateNo = 100)
trigger4 = P2StateType = A && (P2MoveType != A || (var(59) = [3,9])) && Enemynear,vel y > -20
trigger4 = (P2Bodydist x - 6*fvar(7)) = [-40,250]
trigger4 = P2Dist y + (fvar(8) * 6 + 0.5*(fvar(9) * 6 ** 2)) = [-220,IFElse(P2StateType = C,0,0)]
trigger4 = Random < ((10 + var(59)*900 ) * (AIlevel ** 2 / 64.0))
trigger4 = var(57):= 102054
;Anti Air ΔY = (Vi * time) + (0.5 * Accele * time ** 2)
trigger5 = var(59) = 3
trigger5 = (Ctrl || StateNo = 21 || StateNo = 100)
trigger5 = P2StateType = A && (P2MoveType != A || (var(59) = [3,9])) && Enemynear,vel y > -16
trigger5 = (P2Bodydist x - 6*fvar(7)) = [-40,250]
trigger5 = P2Dist y + (fvar(8) * 6 + 0.5*(fvar(9) * 6 ** 2)) = [2,IFElse(P2StateType = C,280,280)]
trigger5 = var(57):= 102055
;Land hit ΔY = (Vi * time) + (0.5 * Accele * time ** 2)
trigger6 = (var(59) = [4,5])
trigger6 = (Ctrl || StateNo = 21 || StateNo = 100)
trigger6 = P2StateType != A
trigger6 = (P2Bodydist x - 6*fvar(7)) = [-80,320]
trigger6 = Enemynear,AnimTime = [-15,-9]
trigger6 = Random < ((1000) * (AIlevel ** 2 / 64.0))
trigger6 = var(57):= 102056
;0 Distance task hit

[State -1, Normal Crouch Middle]
type = ChangeState
value = 305
triggerall = AIlevel && NumEnemy
triggerall = RoundState = 2
triggerall = StateType != A && StateNo != 305
triggerall = var(59) != 99
trigger1 = var(59) = 0 || (var(59) = [13,19]) || (var(59) = [3,5]) || var(59) = 100 || var(59) = 930 || var(59) = 981 || (var(59) = [5300,5301])
trigger1 = MoveContact && !(var(18) & 64)
trigger1 = (var(7) && var(7) < 2) || (var(24) && var(7) && var(7) <= 3 && var(7) != 2)
trigger1 = P2Bodydist x = [0,180]
trigger1 = !(StateNo = 300 && var(10) < 2 && P2Bodydist x < 90)
trigger1 = P2StateType != A && Enemynear,vel y >= -10
trigger1 = Random < ((800) * (AIlevel ** 2 / 64.0))
trigger1 = var(57):= 103051
;Combo
trigger2 = var(59) = 0 || (var(59) = [13,15]) || (var(59) = [4,5])
trigger2 = (Ctrl || StateNo = 21 || StateNo = 100)
trigger2 = P2StateType != A && (P2MoveType != A || (var(59) = [3,9])) && !(P2StateNo = [39,40])
trigger2 = (P2Bodydist x - 7*fvar(7)) = [IFElse(StateNo = 52,-20,90),220 + 80*(P2MoveType = A)]
trigger2 = Random < (((32 + 600*(((Pos x - Enemynear,Pos x)*Enemynear,facing) < 0) + 700*(StateNo = 52 && P2MoveType = H) + (P2Bodydist x / 30.0)) + 300*(var(4) = 3 && Enemynear,AnimTime < -9) + var(59)) * (AIlevel ** 2 / 64.0))
trigger2 = var(57):= 103052
;Normal poke and Enemy disadvantage frame
trigger3 = var(59) = 0 || (var(59) = [13,15]) || var(59) = 981
trigger3 = (Ctrl || StateNo = 21 || StateNo = 100)
trigger3 = P2StateType = A && (P2MoveType != A || (var(59) = [3,9])) && Enemynear,vel y > -20
trigger3 = (P2Bodydist x - 7*fvar(7)) = [-80,230]
trigger3 = P2Dist y + (fvar(8) * 7 + 0.5*(fvar(9) * 7 ** 2)) = [-160,IFElse(P2StateType = C,0,0)]
trigger3 = Random < ((10 + 600*(((Pos x - Enemynear,Pos x)*Enemynear,facing) < 0) + var(59)*900 ) * (AIlevel ** 2 / 64.0))
trigger3 = var(57):= 103053
;Anti Air ΔY = (Vi * time) + (0.5 * Accele * time ** 2)
trigger4 = var(59) = 3
trigger4 = (Ctrl || StateNo = 21 || StateNo = 100)
trigger4 = P2StateType = A && (P2MoveType != A || (var(59) = [3,9])) && Enemynear,vel y > -16
trigger4 = (P2Bodydist x - 7*fvar(7)) = [-40,230]
trigger4 = P2Dist y + (fvar(8) * 7 + 0.5*(fvar(9) * 7 ** 2)) = [2,IFElse(P2StateType = C,280,280)]
trigger4 = var(57):= 103054
;Land hit ΔY = (Vi * time) + (0.5 * Accele * time ** 2)
trigger5 = var(59) = 100 || (var(59) = [5300,5301])
trigger5 = (Ctrl || StateNo = 21 || StateNo = 100)
trigger5 = P2Dist y > -200 && P2MoveType = H && (StateNo = 52 || PrevStateNo = 52)
trigger5 = (P2Bodydist x - 7*fvar(7)) = [IFElse(StateNo = 52,-20,90),220 + 80*(P2MoveType = A)]
trigger5 = var(57):= 103055
;State 52 combo
trigger6 = var(59) = 100 || var(59) = 5300
trigger6 = (Ctrl || StateNo = 21 || StateNo = 100)
trigger6 = P2StateType != A && !(P2StateNo = [39,40])
trigger6 = (P2Bodydist x - 9*fvar(7)) = [-110,80]
trigger6 = Random < ((900) * (AIlevel ** 2 / 64.0))
trigger6 = var(57):= 103056
;Dizzy close


[State -1, Normal Stand Light]
type = ChangeState
value = 200
triggerall = AIlevel && NumEnemy
triggerall = RoundState = 2
triggerall = StateType != A && StateNo != 200
triggerall = !(P2StateType = L || (P2StateNo = [5120,5299]))
triggerall = !(P2statetype = C && (enemynear,const(size.mid.pos.y) >= -Const720p(224))) || p2statetype = A
triggerall = var(59) != 99
trigger1 = var(59) = 0 || (var(59) = [4,5]) || (var(59) = [13,15])
trigger1 = (Ctrl || StateNo = 21 || StateNo = 100)
trigger1 = P2StateType != A && (P2MoveType != A || (var(59) = [3,9])) && !(P2StateNo = [39,40])
trigger1 = (P2Bodydist x - 6*fvar(7)) = [-220,150]
trigger1 = Random < (((22 + 600*(((Pos x - Enemynear,Pos x)*Enemynear,facing) < 0) + 120*(StateNo = 52 && P2MoveType = H) + Floor((160-P2Bodydist x)/10.0)) + 500*var(59) + 500*(var(4) = 3 && Enemynear,AnimTime < -5) + 500*(Enemynear,P2Dist x < 0)) * (AIlevel ** 2 / 64.0))
trigger1 = var(57):= 102001
;P2 on Land Normal poke and Enemy disadvantage frame
trigger2 = var(59) = 0 || (var(59) = [13,19]) || (var(59) = [4,5])
trigger2 = (Ctrl || StateNo = 21 || StateNo = 100)
trigger2 = P2StateType = A && (P2MoveType != A || (var(59) = [3,9])) && Enemynear,vel y > -20
trigger2 = (P2Bodydist x - 6*fvar(7)) < 150 && P2Dist x > 0
trigger2 = P2Dist y + (fvar(8) * 6 + 0.5*(fvar(9) * 6 ** 2)) = [-120,IFElse(P2StateType = C,0,-40)]
trigger2 = Random < ((120) * (AIlevel ** 2 / 64.0))
trigger2 = var(57):= 102002
;P2 in Air Anti Air
trigger3 = var(59) = 0 || (var(59) = [13,19]) || (var(59) = [3,5]) || var(59) = 100 || var(59) = 930 || var(59) = 981 || (var(59) = [5300,5301])
trigger3 = MoveContact && !(var(18) & 64)
trigger3 = StateNo = 300 && ((P2Bodydist x - 6*fvar(7)) = [60,90])
trigger3 = P2StateType != A && Enemynear,vel y >= -10
trigger3 = Random < ((200) * (AIlevel ** 2 / 64.0))
trigger3 = var(57):= 102003
;Combo
trigger4 = var(59) = 0 || (var(59) = [13,15]) || (var(59) = [3,5]) || var(59) = 100
trigger4 = (Ctrl || StateNo = 21 || StateNo = 100)
trigger4 = NumHelper(30000)
trigger4 = (Helper(30000),StateNo = [30572,30573]) && (Enemynear,StateNo = [5030,5060])
trigger4 = P2StateType = A && (P2MoveType != A || (var(59) = [3,9]))
trigger4 = (P2Bodydist x - 6*fvar(7)) < 170 && P2Dist x > 0
trigger4 = P2Dist y + (fvar(8) * 6 + 0.5*(fvar(9) * 6 ** 2)) = [-180,IFElse(P2StateType = C,0,-60)]
trigger4 = var(57):= 102003
;Kuroko T2

[State -1, Normal Crouch Light]
type = ChangeState
value = 300
triggerall = AIlevel && NumEnemy
triggerall = RoundState = 2
triggerall = StateType != A
triggerall = !(P2StateNo = [5120,5299])
triggerall = var(59) != 99
trigger1 = var(59) = 0 || (var(59) = [13,15]) || (var(59) = [4,5])
trigger1 = (Ctrl || StateNo = 21 || StateNo = 100)
trigger1 = P2StateType != A && (P2MoveType != A || (var(59) = [3,9])) && !(P2StateNo = [39,40])
trigger1 = (P2Bodydist x - 6*fvar(7)) = [-260,140]
trigger1 = Random < (((40 + 700*(((Pos x - Enemynear,Pos x)*Enemynear,facing) < 0) + 800*(StateNo = 52 && P2MoveType = H) + Floor((300-P2Bodydist x)/10.0)) + 500*(var(4) = 3 && Enemynear,AnimTime < -5)) * (AIlevel ** 2 / 64.0))
trigger1 = var(57):= 103001
;P2 on Land Normal poke and Enemy disadvantage frame
trigger2 = var(59) = 0 || (var(59) = [13,19]) || (var(59) = [3,5]) || var(59) = 100 || var(59) = 930 || var(59) = 981 || (var(59) = [5300,5301])
trigger2 = StateNo = 300 && MoveContact && !(var(18) & 64)
trigger2 = (var(7) && var(7) < 2) || (var(24) && var(7) && var(7) <= 3)
trigger2 = Enemynear,vel y >= -10
trigger2 = P2Bodydist x  = [-20,90]
trigger2 = var(10) < 2
trigger2 = Random < ((800) * (AIlevel ** 2 / 64.0))
trigger2 = var(57):= 103002
;SelfCombo





;------------ AI System 2nd ---------------

[State -1, Recover near ground] ;Recover near ground AI is in 5050
type = ChangeState
triggerall = AILevel
triggerall = Alive && StateNo = 5050
triggerall = Vel Y > 0
triggerall = Pos Y >= Const(movement.air.gethit.groundrecover.ground.threshold)
triggerall = Vel Y < (Const720p(46) * Const(Size.yScale))
triggerall = CanRecover
trigger1 = Random < ((120) * (AIlevel ** 2 / 64.0))
trigger1 = var(57) := 1052001
value = 5200 ;Air get-hit (fall recovery on ground)

[State -1, Recover in mid air]; Recover in mid air AI is in 5050
type = ChangeState
triggerall = AILevel
triggerall = Alive && StateNo = 5050
triggerall = Pos Y < Const(movement.air.gethit.groundrecover.ground.threshold)
triggerall = Vel Y > Const(movement.air.gethit.airrecover.threshold)
triggerall = Vel Y < (Const720p(46) * Const(Size.yScale))
triggerall = CanRecover
trigger1 = Random < ((60 + 20*GetHitVar(hitcount)) * (AIlevel ** 2 / 64.0))
trigger1 = var(57) := 1052101
value = 5210 ;Air get-hit (fall recovery in air)

[State -1, Guard]
type = ChangeState
value = 120
triggerall = AIlevel
triggerall = Numenemy && Roundstate=2 && InguardDist
triggerall = !(var(18) & 1)
triggerall = (Ctrl || StateNo=21) && (stateno!=[120,155])
triggerall = !(enemynear,hitdefattr = SCA,AT)
triggerall = !(StateNo = 100 && var(10) = 16)
trigger1 = Random < ((500 * (var(59) = 1) + 800*(PrevStateNo = [5120,5299]) + IFElse((p2stateno=[200,699]), 450, IFElse((p2stateno=[1000,2999]), 733, 1000))) * (AIlevel ** 2 / 64.0))
trigger1 = var(57) := 10012001

[State -1, Reflection Guard]
type = Helper
triggerall = AIlevel && NumEnemy
triggerall = RoundState = 2
triggerall = !NumHelper(7445)
triggerall = StateType != A && time = 1
triggerall = StateNo = 150 || StateNo = 152 || StateNo = 154
triggerall = (P2Bodydist x = [-10,360]) && (P2Dist y = [-200,200])
trigger1 = Power >= 1000
trigger1 = Random < ((40) * (AIlevel ** 2 / 64.0))
trigger1 = var(6) := 1
trigger2 = (1.0 * Life / LifeMax) < (1.0 * Enemynear,Life / Enemynear,LifeMax)
trigger2 = Random < ((400) * (AIlevel ** 2 / 64.0))
trigger2 = var(6) := 1
helpertype = normal
stateno = 7445
ID = 7445
name = "Reflection Guard"
postype = P1
pos = Const(Size.ground.front) * Const(Size.xScale), Const(Size.mid.pos.y) * IFElse(StateType = C,0.5,1) * Const(Size.yScale)
size.xScale = Const(Size.xScale)
size.yScale = Const(Size.yScale)
size.proj.doscale = 1; Ignore Hit Pause
;supermovetime = 65535
;pausemovetime = 65535




[State -1, AI Walk]
type = ChangeState
value = 21
triggerall = AIlevel
triggerall = NumEnemy && Anim!=5 && StateType != A
triggerall = Roundstate = 2 && !InGuardDist
triggerall = Ctrl || StateNo = 40
trigger1 = var(59) = 0 || var(59) = 99
trigger1 = Ctrl || StateNo = 20 || StateNo = 40
trigger1 = P2Bodydist x > 40
trigger1 = Random < ((120 + 900 * (StateNo = 40)) * (AIlevel ** 2 / 64.0))
trigger1 = var(14) := -1
trigger1 = var(57) := 1002101; Natual walk state into AI walk
; Random
trigger2 = (var(59) = [2,5]) || (var(59) = [13,19]) || var(59) = 99 || var(59) = 981 || (var(59) = [5300,5301])
trigger2 = var(57) := 1002102
; Keep distance or task
trigger3 = Ctrl && StateType != A
trigger3 = P2Bodydist x < 200 && P2StateType != A && P2StateNo = 5120
trigger3 = var(14) := -3
trigger3 = var(57) := 1002103; Enemy Up
trigger4 = StateNo = 20 || StateNo = 40
;force state 21


;Taunt
[State -1, Taunt]
type = ChangeState
value = 195
triggerall = AIlevel
triggerall = Numenemy && Roundstate=2 && !InguardDist
triggerall = StateType != A && Enemynear,MoveType != A
trigger1 = (Ctrl || StateNo=21)
trigger1 = P2Bodydist x > 500
trigger1 = Enemynear,StateNo = 1115110
trigger1 = Enemynear,time < 10
trigger1 = Life > (Enemynear,Life * 2)
trigger1 = Random < ((30) * (AIlevel ** 2 / 64.0))
trigger1 = var(57) := 10019501



;----------- TEST Moves -----------------
;[State -1, Test]
;type = Helper
;triggerall = AIlevel = 0 && NumEnemy
;triggerall = RoundState = 2
;triggerall = StateType != A
;triggerall = Command = "start"
;triggerall = !NumHelper(7445)
;trigger1 = Ctrl
;helpertype = normal
;stateno = 7445
;ID = 7445
;name = "Reflection Guard"
;postype = P1
;pos = Const(Size.ground.front) * Const(Size.xScale), Const(Size.mid.pos.y) * IFElse(StateType = C,0.5,1) * Const(Size.yScale)
;size.xScale = Const(Size.xScale)
;size.yScale = Const(Size.yScale)
;size.proj.doscale = 1; Give Parent ID to Child
;;supermovetime = 65535
;;pausemovetime = 65535


;============= Master Counter ==========================================================================================
[State -1, Run Counter]
type = varadd
triggerall = !IsHelper
triggerall = MoveType != A
triggerall = RoundState = 2
trigger1 = var(6) < 16777215
var(6) = 1
ignorehitpause = 1

[State -1, Run Counter]
type = varset
triggerall = !IsHelper
triggerall = MoveType != A
triggerall = RoundState = 2
trigger1 = var(6) >= 16777215
var(6) = 1
ignorehitpause = 1