
;---------------------------------------------------------------------------
; Override common states (use same number to override) :
;---------------------------------------------------------------------------

;---------------------------------------------------------------------------
; Stand to Crouch
[Statedef 10]
type = S
physics = S
anim = 10; + ((PrevStateNo = 100)*91)

;[State 10, 1]
;type = ChangeAnim
;triggerall = command = "holddown"
;trigger1 = anim = 101 && AnimTime = 0
;value = 10

[State 10, 2]
type = StateTypeSet
trigger1 = anim = 10
statetype = C
physics = C

[State 10, 3]
type = VelSet
trigger1 = anim = 10
x = 0

;[State 10, 4]
;type = ChangeState
;trigger1 = anim = 101 && AnimTime = 0
;value = 0
;ctrl = 1

[State 10, 5]
type = ChangeState
trigger1 = anim = 10 && AnimElem = 1, = 1
value = 11

;---------------------------------------------------------------------------
; Crouching
[Statedef 11]
type    = C
physics = C
anim = 11
sprpriority = 0
ctrl = 1

[State 11, 1] ;Change from turning animation
type = ChangeAnim
trigger1 = Anim = 6 && AnimTime = 0
value = 11

;---------------------------------------------------------------------------
; Walk
[Statedef 20]
type    = S
physics = S
sprpriority = 0

[State 20, 1]
type = VelSet
trigger1 = command = "holdfwd"
trigger2 = var(59)
x = const(velocity.walk.fwd.x)

[State 20, 2]
type = VelSet
triggerall = !var(59)
trigger1 = command = "holdback"
x = const(velocity.walk.back.x)

[State 20, 3]
type = ChangeAnim
triggerall = vel x > 0
trigger1 = Anim != 20 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0
value = 20

[State 20, 4]
type = ChangeAnim
triggerall = vel x < 0
trigger1 = Anim != 21 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0
value = 21

;---------------------------------------------------------------------------
; Jump Start
[Statedef 40]
type    = S
physics = S
anim = 40
ctrl = 0
sprpriority = 1

[State 40, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 40, 2]
type = VarSet
trigger1 = command = "holdfwd"
sysvar(1) = 1

[State 40, 3]
type = VarSet
trigger1 = command = "holdback"
sysvar(1) = -1

[State 40, 4]
type = VelSet
trigger1 = !var(59)
trigger1 = AnimTime = 0
x = ifelse(sysvar(1)=0, const(velocity.jump.neu.x), ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = ifelse(command != "holdup", const(velocity.jump.y)*.8 ,const(velocity.jump.y))

[State 40, 4]
type = VelSet
trigger1 = var(59)
trigger1 = AnimTime = 0
x = const(velocity.jump.fwd.x)
y = const(velocity.jump.y)

[State 40, 5]
type = VelSet
trigger1 = AnimTime = 0
trigger1 = prevstateno = 100 ;RUN_FWD
trigger1 = sysvar(1) = 1
x = const(velocity.runjump.fwd.x)

[State 40, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;---------------------------------------------------------------------------
; Jump Land
[Statedef 52]
type    = S
physics = S
ctrl = 0
anim = 47
facep2 = 1


[State 52, 1]
type = VelSet
trigger1 = Time = 0
y = 0
x = 0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52, 3]
type = MakeDust
trigger1 = Time = 0
pos = 40, 0
spacing = 1

[State 52, 3]
type = CtrlSet
trigger1 = Time = 3
value = 1

[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; RUN_FWD
[Statedef 100]
type = S
physics = S
anim = 100
sprpriority = 1
ctrl = 0

[State 100, 1]
type = PlaySnd
trigger1 = Time = 0
value = 15, 0
channel = 6
loop = 1

[State 100, 2]
type = VelSet
trigger1 = 1
x = const(velocity.run.fwd.x)

[State 100, 3]
type = AssertSpecial
trigger1 = 1
flag = NoWalk
flag2 = NoAutoTurn

;[State 100, 3]
;type = ChangeState
;trigger1 = command = "holddown" && !var(59)
;value = 10

[State 100, 4]
type = ChangeState
trigger1 = command = "holdup" && !var(59)
value = 40

[State 100, 5]
type = ChangeState
trigger1 = command != "holdfwd" && !var(59)
value = 101
ctrl = 1

;---------------------------------------------------------------------------
; RUN_FWD Stop
[Statedef 101]
type = S
physics = N
ctrl = 1
anim = 101

[State 101, 1]
type = PlaySnd
trigger1 = Time = 0
value = 15, 8
channel = 5

[State 101, 2]
type = VelMul
trigger1 = 1
x = .89

[State 101, 3]
type = MakeDust
trigger1 = AnimElem = 1
pos = 40, 0
spacing = 1

[State 101, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl =1

;---------------------------------------------------------------------------
; RUN_BACK
[Statedef 105]
type    = A
physics = A
ctrl = 0
anim = 105
sprpriority = 1

[State 105, 2]
type = PosAdd
trigger1 = AnimElem = 1 && PrevStateNo = 270
x = -24



[State 105, 1]
type = VelSet
trigger1 = Time = 0
x = const(velocity.run.back.x)
y = const(velocity.run.back.y)

[State 105, 2]
type = VelMul
trigger1 = Time = 2
x = .8
y = .5

[State 105, 3]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 106

;---------------------------------------------------------------------------
; RUN_BACK2 (land)
[Statedef 106]
type    = S
physics = S
ctrl = 0
anim = 106



[State 106, 1]
type = VelSet
trigger1 = Time = 0
y = 0
x = 0

[State 106, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 106, 3]
type = MakeDust
trigger1 = Time = 0
pos = 40, 0
spacing = 1

[State 106, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; HITA_SHAKE
[Statedef 5020]
type    = A
movetype= H
physics = N
velset = 0,0

;[State 5020, 1] ;Anim for HIT_LIGHT to HIT_HARD
;type = ChangeAnim
;trigger1 = Time = 0
;trigger1 = GetHitVar(animtype) != [3,5]
;value = ifelse((GetHitVar(airtype) = 1),5000,5010) + GetHitVar(animtype)

[State 5020, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
;trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 5020, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 5020, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5020, 5]
type = ChangeState
trigger1 = HitShakeOver
value = 5030

[State 5020, FFB Light]
type = ForceFeedback
trigger1 = anim = 5000
trigger2 = anim = 5010
persistent = 0
time = 6
waveform = square

[State 5020, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5001
trigger2 = anim = 5011
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5020, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012
trigger2 = anim = 5002
trigger3 = anim = 5030
trigger4 = anim = [5051,5059]
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

;---------------------------------------------------------------------------
; HITA_RECOV (recovering in air, not falling)
[Statedef 5040]
type    = A
movetype= H
physics = N

[State 5040, 1]
type = ChangeState
trigger1 = !Alive
value = 5050

[State 5040, 2]
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim != 5040
trigger2 = Time = 0
trigger2 = Anim != 5035
value = 5040

[State 5040, 3]
type = CtrlSet
trigger1 = HitOver
value = 1

[State 5040, 4]
type = StateTypeSet
trigger1 = HitOver
movetype = I

[State 5040, 5]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel) * 1.15

[State 5040, 6]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 52 ;JUMPLAND

;---------------------------------------------------------------------------
; HITA_FALL (knocked up, falling)
[Statedef 5050]
type    = A
movetype= H
physics = N

[State 5050, 1] ;Change anim when done with transition
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0     ;If no transition anim
trigger2 = Anim != 5035
trigger2 = (Anim != [5051, 5059]) && (Anim != [5061, 5069])
trigger2 = Anim != 5090 ;Not if hit off ground anim
value = 5050

[State 5050, 2] ;Coming down anim
type = ChangeAnim
trigger1 = anim = [5050,5059]
trigger1 = Vel Y >= ifelse(anim = 5050, 1, -2)
trigger1 = SelfAnimExist(anim+10)
value = anim+10
persistent = 0

[State 5050, 3] ;Gravity
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel) * 1.15

[State 5050, 4] ;Recover near ground
type = ChangeState
triggerall = Vel Y > 0
triggerall = Pos Y >= -20
triggerall = alive
triggerall = CanRecover
trigger1 = Command = "recovery"
value = 5200 ;HITFALL_RECOVER

[State 5050, 5]; Recover in mid air
type = ChangeState
triggerall = Vel Y > -1
triggerall = alive
triggerall = CanRecover
trigger1 = Command = "recovery"
value = 5210 ;HITFALL_AIRRECOVER

[State 5050, 6]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= ifelse((anim = [5051,5059]) || (anim = [5061,5069]), 0, 25)
value = 5100 ;HIT_BOUNCE

;---------------------------------------------------------------------------
; HIT_BOUNCE (hit ground)
[Statedef 5100]
type    = L
movetype= H
physics = N

[State 5100, 1]
type = VelSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
trigger1 = vel x > 1
x = 1

[State 5100, 1]
type = ChangeState
trigger1 = alive
trigger1 = command = "b"
value = 5201

[State 5100, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 5100, Var] ;Save fall velocity
type = VarSet
trigger1 = Time = 0
;trigger1 = GetHitVar(fall.yvel) = 0
sysvar(1) = floor(vel y)

[State 5100, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = (anim != [5051,5059]) && (anim != [5061,5069])
trigger2 = !SelfAnimExist(5100 + (anim % 10))
value = 5100

[State 5100, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
trigger1 = time = 0
trigger1 = (anim = [5051,5059]) || (anim = [5061,5069])
trigger1 = SelfAnimExist(5100 + (anim % 10))
value = 5100 + (anim % 10)

[State 5100, 4]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5100, 5]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5100, 6] ;Reduce speed
type = VelMul
trigger1 = Time = 0
x = 0.75

[State 5100, 7]
type = ChangeState
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
value = 5110 ;HIT_LIEDOWN

;[State 5100, 8]
;type = GameMakeAnim
;trigger1 = Time = 1
;;value = 61
;;pos = 0, 0
;;under = 1
;value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
;pos = 0, 0
;under = sysvar(1) <= 10

[State 5100, 9]
type = HitFallDamage
trigger1 = Time = 3

[State 5100, 10]
type = PlaySnd
trigger1 = Time = 1
value = 15, 7
channel = 5

[State 5100, 10]
type = PlaySnd
trigger1 = alive
trigger1 = Time = 1
value = 5, 4 + (Random>499)
channel = 0

[State 5100, 11]
type = PosFreeze
trigger1 = 1

[State 5100, 12]
type = ChangeState
trigger1 = AnimTime = 0
value = 5101

[State 5100, 13]
type = ForceFeedback
trigger1 = Time = 0
waveform = sinesquare
ampl = 128,-3,-.2,.005
time = 20

;---------------------------------------------------------------------------
; HIT_LIEDOWN
[Statedef 5110]
type    = L
movetype= H
physics = N

[State 5110, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 5110, 1] ;Tombe vers l'avant (from state 5071)
type = ChangeAnim
persistent = 0
trigger1 = PrevStateNo = 5071
value = 5081

[State 5110, 1] ;For hit up/up-diag type (from state 5081)
type = ChangeAnim
persistent = 0
trigger1 = SelfAnimExist(5110 + (anim % 10))
trigger1 = anim = [5081,5089]
value = 5110 + (anim % 10)

[State 5110, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim != [5161,5169]
trigger2 = !SelfAnimExist(5170 + (anim % 10))
value = 5170

[State 5110, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim = [5161,5169]
trigger1 = SelfAnimExist(5170 + (anim % 10))
value = 5170 + (anim % 10)

[State 5110, 4]
type = HitFallDamage
trigger1 = Time = 0

[State 5110, 5]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5110, Var] ;Get fall velocity
type = VarSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) != 0
sysvar(1) = floor(vel y)

;[State 5110, 7]
;type = GameMakeAnim
;trigger1 = Time = 0
;trigger1 = !SysVar(0)
;value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
;pos = 0, 0
;under = sysvar(1) <= 10

[State 5110, 8]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5110, 9] ;For hit up type
type = ChangeAnim
persistent = 0
triggerall = anim = [5171,5179]
triggerall = SelfAnimExist(5110 + (anim % 10))
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground anim
value = 5110 + (anim % 10)

[State 5110, 10] ;For normal
type = ChangeAnim
persistent = 0
triggerall = Anim != [5111,5119]
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
value = 5110

[State 5110, 11] ;If just died
type = ChangeState
triggerall = !alive
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
trigger3 = Anim = [5110,5119]
value = 5150

[State 5110, 12]
type = VarSet
trigger1 = SysVar(0)
trigger1 = Time = 0
sysvar(0) = 0

[State 5110, 13] ;Friction
type = VelMul
trigger1 = 1
x = 0.85

[State 5110, 14]
type = ForceFeedback
trigger1 = alive
trigger1 = Time = 0
time = 8
ampl = 240
waveform = sine

[State 5110, 15]
type = ForceFeedback
trigger1 = !alive
trigger1 = Time = 0
ampl = 200, 7, -.467
time = 30
waveform = sine

;---------------------------------------------------------------------------
; HIT_GETUP
[Statedef 5120]
type = L
movetype = I
physics = N

[State 5120, 1a] ;Get up anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim != [5111,5119]
trigger2 = !SelfAnimExist(5120 + (anim % 10))
value = 5120

[State 5120, 1b] ;Get up anim (for hit up/diag-up)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim = [5111,5119]
trigger1 = SelfAnimExist(5120 + (anim % 10))
value = 5120 + (anim % 10)

[State 5120, 2]
type = VelSet
trigger1 = Time = 0
x = 0

[State 5120, ChangeState]
type = ChangeState
triggerall = command = "holdfwd"
trigger1 = Anim = 5120
trigger1 = AnimElem = 3, = 1
trigger2 = AnimElem = 3, = 2
trigger2 = Anim = 5121
trigger3 = AnimElem = 3, = 2
trigger3 = Anim = 5122
value = 5123
ctrl = 0

[State 5120, ChangeState]
type = ChangeState
triggerall = command = "holdback"
trigger1 = Anim = 5120
trigger1 = AnimElem = 3, = 1
trigger2 = AnimElem = 3, = 2
trigger2 = Anim = 5121
trigger3 = AnimElem = 3, = 2
trigger3 = Anim = 5122
value = 5124
ctrl = 0

[State 5120, 3]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 5120, 4]
type = HitFallSet
trigger1 = AnimTime = 0
value = 1

[State 5120, 5] ;Can't be thrown right after getting up
type = NotHitBy
trigger1 = AnimTime = 0
value = , NT,ST,HT
time = 12

[State 5120, 6] ;Can't be hit right after getting up (short time)
type = NotHitBy
trigger1 = AnimTime = 0
value2 = SCA
time = 3

[State 5120, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; HIT_GETUP FWD
[Statedef 5123]
type = L
movetype = I
physics = N
anim = 5123

[State 5123, 1]
type = PlayerPush
trigger1 = 1
value = 0

[State 5123, 2]
type = StateTypeSet
trigger1 = AnimElem = 2
type = A
movetype = I
physics = A

[State 5123, 3]
type = VelSet
trigger1 = AnimElem = 2
x = 5
y = -6

[State 5123, 4]
type = HitFallSet
trigger1 = AnimTime = 0
value = 1

[State 5123, 5] ;Can't be thrown right after getting up
type = NotHitBy
trigger1 = AnimTime = 0
value = , NT,ST,HT
time = 12

[State 5123, 6] ;Can't be hit right after getting up (short time)
type = NotHitBy
trigger1 = AnimTime = 0
value2 = SCA
time = 3

;---------------------------------------------------------------------------
; HIT_GETUP BACK
[Statedef 5124]
type = L
movetype = I
physics = N
anim = 5124

[State 5124, 1]
type = PlayerPush
trigger1 = 1
value = 0

[State 5124, 2]
type = StateTypeSet
trigger1 = AnimElem = 2
type = A
movetype = I
physics = A

[State 5124, 3]
type = VelSet
trigger1 = AnimElem = 2
x = -4
y = -6

[State 5124, 4]
type = HitFallSet
trigger1 = AnimTime = 0
value = 1

[State 5124, 5] ;Can't be thrown right after getting up
type = NotHitBy
trigger1 = AnimTime = 0
value = , NT,ST,HT
time = 12

[State 5124, 6] ;Can't be hit right after getting up (short time)
type = NotHitBy
trigger1 = AnimTime = 0
value2 = SCA
time = 3

;---------------------------------------------------------------------------
; Collapse
[Statedef 5130]
type = U
movetype = H
physics = S
anim = 5130

[State 5130, 1]
type = PlaySnd
trigger1 = AnimElem = 2
value = 5, var(3)
channel = 0
ignorehitpause = 1
persistent = 0

[State 5130, 2]
type = ChangeState
trigger1 = anim = 5130 || anim = 5132
trigger1 = animtime = 0
value = 5131

;---------------------------------------------------------------------------
; Collapse (lying Down)
[Statedef 5131]
type = L
movetype = H
physics = C
anim = anim + 1

[State 5131, 1]
type = PlaySnd
trigger1 = AnimElem = 4, = 2
value = 15, 13
channel = 5

[State 5131, 2]
type = PosAdd
trigger1 = 1
x = IfElse((AnimElem = 1), 18, IfElse((AnimElem = 2) || (AnimElem = 3), 16, 0))

[State 5131, 3]
type = ChangeAnim
trigger1 = anim = 5131
trigger1 = AnimTime = 0
value = IfElse(SelfAnimExist(5111), 5111, 5110)

[State 5131, 4]
type = ChangeState
trigger1 = Anim = [5110,5111]
value = 5110 + IfElse(Alive, 0, 40) ;;HIT_BOUNCE

;---------------------------------------------------------------------------
; HIT_FALLRECOVER (still falling)
[Statedef 5200]
type    = A
movetype= H
physics = N

[State 5200, 1] ;Change anim if done with transition
type = ChangeAnim
trigger1 = Anim = 5035
trigger1 = AnimTime = 0
value = 5050

[State 5200, 2]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5200, 3]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 10
value = 5201

;---------------------------------------------------------------------------
; HIT_FALLRECOVER (on the ground)
[Statedef 5201]
type = A
movetype = I
physics = N
anim = 5200

[State 5201, 1]
type = PalFX
trigger1 = Time = 0
time = 13
add = 104, 32, 200

[State 5201, 1] ;Turn if not facing opponent
type = Turn
trigger1 = Time = 0
trigger1 = p2dist X < -5

[State 5201, 2]
type = VelSet
trigger1 = Time = 0
x = -5
y = -4

[State 5201, 3]
type = Gravity
trigger1 = 1

[State 5201, 4]
type = Explod
trigger1 = Time = 0
anim = 4900
pos = -3, -47
facing = 1
postype = P1
bindtime = 1
removetime = 16
sprpriority = 1

[State 5201, 5]
type = ChangeState
trigger1 = vel y > 0
trigger1 = pos y >= -1
value = 5202

;---------------------------------------------------------------------------
; HIT_FALLRECOVER (on the ground)
[Statedef 5202]
type = S
movetype = I
physics = S
anim = 5202

[State 5202, 3]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0

[State 5202, 3]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5202, 3]
type = MakeDust
trigger1 = AnimElem = 1
pos = 40, 0
spacing = 1

[State 5202, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; HIT_AIRFALLRECOVER
[Statedef 5210]
type    = A
movetype= I
physics = N
anim = 5210
ctrl = 0

[State 5210, 1] ;Blink white
type = PalFX
trigger1 = Time = 0
time = 10
add = 104, 32, 200

[State 5210, Explod]
type = Explod
trigger1 = Time = 1
anim = 4900
pos = 4,-87
facing = 1
postype = P1
bindtime = 1
removetime = 16
sprpriority = 1

[State 5210, 1]
type = PosFreeze
trigger1 = Time = 0
value = 4

[State 5210, 2] ;Turn if not facing opponent
type = Turn
trigger1 = Time = 0
trigger1 = p2dist X < -20

[State 5210, 1] 
type = VelMul
trigger1 = Time = 4
x = .8
y = .8

[State 5210, 1]
type = VelAdd
trigger1 = Time = 4
y = -4.5

[State 5210, 1] 
type = VelMul
trigger1 = Time = 4
trigger1 = Vel Y > 0
y = .5

[State 5210, 1]
type = VelAdd
trigger1 = Time = 4
trigger1 = Vel Y > -3
y = -2

[State 5210, 1]
type = VelAdd
trigger1 = Time = 4
trigger1 = Vel Y > -2
y = -1

[State 5210, 2] ;Go up
type = VelAdd
trigger1 = Time = 4
trigger1 = Command = "holdup"
y = -2

[State 5210, 2] ;Go down
type = VelAdd
trigger1 = Time = 4
trigger1 = Command = "holddown"
y = 1.5

[State 5210, 2] ;Go fwd
type = VelMul
trigger1 = Time = 4
trigger1 = Command = "holdfwd"
x = 1

[State 5210, 2] ;Go back
type = VelAdd
trigger1 = Time = 4
trigger1 = Command = "holdback"
x = -1

[State 5210, 3]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 15

[State 5210, 4]
type = CtrlSet
trigger1 = Time = 20
value = 1

[State 5210, 5]
type = VelAdd;Gravity
trigger1 = Time >= 4
y = .35

[State 5210, 5] ;Land on ground
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 52 ;JUMP_LAND
ctrl = 1

;---------------------------------------------------------------------------
; Dizzy
[Statedef 5300]
type = S
movetype= I
physics = S
ctrl = 0
anim = 5300
velset = 0,0

[State 5300, 3]
type = VarSet
trigger1 = 1
var(4) = 0

[State 5300, 3]
type = ChangeState
trigger1 = Time = 110
value = 5301
ctrl = 0

;---------------------------------------------------------------------------
; Dizzy End
[Statedef 5301]
type = S
movetype= I
physics = S
ctrl = 0
anim = 5301
velset = 0,0

[State 5301, 3]
type = VarSet
trigger1 = 1
var(4) = 0

[State 5301, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Win state decider
[Statedef 180]
type = S

[State 180, 1]
type = ChangeState
trigger1 = !MatchOver
trigger2 = MatchOver && var(58) != 3
value = IfElse(Random>499, 181,182) 

[State 180, 2]
type = ChangeState
trigger1 = MatchOver && var(58) = 3
value = 183

;---------------------------------------------------------------------------
; Win 1
[Statedef 181]
type = S
ctrl = 0
anim = 181

[State 181, 1]
type = PlaySnd
trigger1 = AnimElem = 8
value = 10, 5
channel = 0

[State 181, 1]
type = PlaySnd
trigger1 = AnimElem = 17
value = 15, 17
channel = 1

[State 181, 1]
type = PlaySnd
trigger1 = AnimElem = 18
value = 15, 18
channel = 2

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 181, 2]
type = AssertSpecial
trigger1 = Time = [0, 221]
flag = roundnotover

;---------------------------------------------------------------------------
; Win 2
[Statedef 182]
type = S
ctrl = 0
anim = 182

[State 182, 1]
type = PlaySnd
trigger1 = AnimElem = 16
value = 15, 1
channel = 1

[State 182, 1]
type = PlaySnd
trigger1 = AnimElem = 28
value = 10, 8
channel = 0

[State 182, 1]
type = PlaySnd
trigger1 = AnimElem = 37
value = 10, 9
channel = 0

[State 182, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 182, 2]
type = AssertSpecial
trigger1 = Time = [0, 361]
flag = roundnotover

;---------------------------------------------------------------------------
; Win 3
[Statedef 183]
type = S
ctrl = 0
anim = 183

[State 183, 1]
type = PlaySnd
trigger1 = AnimElem = 10
trigger2 = AnimElem = 17
trigger3 = AnimElem = 24
value = 15, 18
channel = 1

[State 183, 1]
type = PlaySnd
trigger1 = AnimElem = 24
value = 10, 6
channel = 0

[State 183, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 183, 2]
type = AssertSpecial
trigger1 = Time = [0, 395]
flag = roundnotover

;---------------------------------------------------------------------------
; Intro state decider
[Statedef 190]
type = S

;[State 190, 1]
;type = helper
;trigger1 = 1
;name = "mode"
;ID = 194
;pos = 0, -120
;keyctrl = 0
;ownpal = 0
;stateno = 194
;persistent = 0

[State 190, 2]
type = VarSet
trigger1 = PalNo = 1 || PalNo = 2 || PalNo = 7 || PalNo = 8
var(12) = 187

[State 190, 3]
type = VarSet
trigger1 = PalNo = 3 || PalNo = 4 || PalNo = 9 || PalNo = 10
var(12) = 188

[State 190, 4]
type = VarSet
trigger1 = PalNo = 5 || PalNo = 6 || PalNo = 11 || PalNo = 12
var(12) = 189

[State 190, 5]
type = ChangeState
trigger1 = 1
value = IfElse(Random>499, 191,192) 

;---------------------------------------------------------------------------
; Intro 1
[Statedef 191]
type = S
ctrl = 0
anim = 191

[State 191, 1]
type = PlaySnd
trigger1 = AnimElem = 14
value = 10, 2
channel = 0

[State 191, 2]
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 191, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
; Intro 2
[Statedef 192]
type = S
ctrl = 0
anim = 192

[State 192, 1]
type = PlaySnd
trigger1 = AnimElem = 2
value = 10, 3
channel = 0

[State 192, 2]
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 192, 3]
type = helper
trigger1 = AnimElem = 21
name = "intro2"
ID = 193
postype = P1
pos = 0, 0
facing = 1
keyctrl = 0
ownpal = 0
stateno = 193
persistent = 0

[State 192, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
; Intro 2 Helper
[Statedef 193]
type = A
movetype = I
physics = N
anim = 193
sprpriority = 4
ctrl = 0

[State 193, 1]
type = PlaySnd
trigger1 = AnimElem = 2
value = 10, 4
channel = 0

[State 193, 1]
type = PlaySnd
trigger1 = AnimElem = 2
value = 15, 10
channel = 1

[State 193, 6]
type = VelSet
trigger1 = Time = 0
x = -3
y = -4

[State 193, 6]
type = VelMul
trigger1 = Time = 1
x = 1.5

[State 193, 6]
type = VelAdd
trigger1 = TimeMod = 2, 1
trigger1 = Time < 25
y = -.8

[State 193, 6]
type = VelAdd
trigger1 = TimeMod = 2, 1
trigger1 = Time > 24
y = -.4

[State 193, 6]
type = AssertSpecial
trigger1 = Time > 20
trigger1 = Time < 60
trigger1 = TimeMod = 2, 1
Flag = Invisible

[State 193, 6]
type = Gravity
trigger1 = 1

[State 193, 6]
type = DestroySelf
trigger1 = Time = 60

;---------------------------------------------------------------------------
; Modes Helper
;[Statedef 194]
;type = A
;movetype = I
;physics = N
;anim = root, var(12)
;sprpriority = 4
;ctrl = 0

;[State 194, 1]
;type = AssertSpecial
;trigger1 = 1
;flag = Intro

;[State 194, 2]
;type = Turn
;trigger1 = Facing = -1

;[State 194, 3]
;type = ChangeAnim
;trigger1 = anim < 189
;trigger1 = root, command = "down"
;value = anim + 1

;[State 194, 4]
;type = ChangeAnim
;trigger1 = anim > 187
;trigger1 = root, command = "up"
;value = anim - 1

;[State 194, 6]
;type = DestroySelf
;trigger1 = Time = 300

;---------------------------------------------------------------------------
; Taunt
[Statedef 195]
type = S
ctrl = 0
anim = 195
velset = 0,0
movetype = I
physics = S
sprpriority = 2

[State 195, 1]
type = PlaySnd
trigger1 = AnimElem = 7
value = 10, 14
channel = 0

[State 195, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = IfElse(command = "Ibuki", 196,197)
ctrl = command != "Ibuki"

;---------------------------------------------------------------------------
; Taunt prolongée (recharge life)
[Statedef 196]
type = S
movetype = I
physics = S
anim = 196
velset = 0,0
ctrl = 0
sprpriority = -1

[State 196, 1]
type = PlaySnd
trigger1 = Time = 4
value = 10, 15
channel = 0

[State 196, 2]
type = LifeAdd
trigger1 = TimeMod = 2, 1
value = 1

[State 196, 3]
type = PalFX
trigger1 = AnimElem = 2
time = 1
add = 48, 48, 48

[State 196, 5]
type = ChangeState
trigger1 = command != "Ibuki" && !var(59)
value = 197
ctrl = 1

;---------------------------------------------------------------------------
; Taunt End
[Statedef 197]
type = S
ctrl = 0
anim = 197
velset = 0,0

[State 197, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl =1

;---------------------------------------------------------------------------
; Stand Light Punch
[Statedef 200]
type = S
movetype= A
physics = S
ctrl = 0
anim = 200
sprpriority = 2
poweradd = 30

[State 200, 1]
type = PlaySnd
trigger1 = AnimElem = 3
value = 0, var(2)
channel = 0

[State 200, 1]
type = PlaySnd
trigger1 = time = 0
value = S1,0

[State 200, 3]
type = VelSet
trigger1 = AnimElem = 1
y = 0
x = 0

[State 200, 4]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 200, 3]
type = VelSet
trigger1 = AnimElem = 3
x = 2

[State 200, 3]
type = Width
trigger1 = AnimElem = 2, >= 0
trigger1 = AnimElem = 3, < 0
value = 10, 0

[State 200, 3]
type = Width
trigger1 = AnimElem = 3, >= 0
trigger1 = AnimElem = 7, < 0
value = 20, 0

[State 200, 1]
type = HitDef
trigger1 = time = 0
attr = S, NA
damage = 20
animtype = Light
guardflag = M
hitflag = MAF
priority = 3, Hit
pausetime = 8, 8
sparkno = S30000
guard.sparkno = S30040
sparkxy = -10, -80
hitsound = S55,0
guardsound = s66,0
ground.type = High
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -4
air.velocity = -1,-3


[State 200, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Stand Light Punch Sequence Speed & EX
[Statedef 215]
type = S
movetype= A
physics = S
ctrl = 0
anim = 201
sprpriority = 2
poweradd = 60

[State 201, 1]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, var(2)
channel = 0

[State 200, 1]
type = PlaySnd
trigger1 = time = 0
value = S1,1

[State 201, 3]
type = VelSet
trigger1 = AnimElem = 2
x = 2

[State 201, 3]
type = Width
trigger1 = AnimElem = 1, >= 0
trigger1 = AnimElem = 2, < 0
value = 10, 0

[State 201, 3]
type = Width
trigger1 = AnimElem = 2, >= 0
trigger1 = AnimElem = 7, < 0
value = 20, 0

[State 201, 1]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA
damage = 45
animtype = hard
guardflag = M
hitflag = MAF
priority = 3, Hit
pausetime = 12,12
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10, -56
hitsound = S55,1
guardsound = s66,0
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -10
air.velocity = -2,-4


[State 201, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Stand Light Punch Back
[Statedef 205]
type = S
movetype= A
physics = S
ctrl = 0
anim = 205
sprpriority = 2
poweradd = 30

[State 205, 1]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, var(2)
channel = 0

[State 200, 1]
type = PlaySnd
trigger1 = time = 0
value = S1,0

[State 205, 3]
type = VelSet
trigger1 = AnimElem = 1
y = 0
x = 0

[State 205, 4]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 205, 1]
type = HitDef
trigger1 = AnimElem = 2
attr = S, NA
damage = 20
animtype = Light
guardflag = M
hitflag = MAF
priority = 3, Hit
pausetime = 8, 8
sparkno = S30000
guard.sparkno = S30040
sparkxy = -10, -90
hitsound = S55,0
guardsound = s66,0
ground.type = High
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -4
air.velocity = -1,-3


[State 205, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Stand Medium Kick
[Statedef 233]
type = S
movetype= A
physics = S
ctrl = 0
anim = 210
sprpriority = 2
poweradd = 30

[State 210, 1]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, var(2)
channel = 0

[State 200, 1]
type = PlaySnd
trigger1 = time = 0
value = S1,0

[State 210, 3]
type = VelSet
trigger1 = AnimElem = 1
y = 0
x = 0

[State 210, 4]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 210, 1]
type = PosAdd
trigger1 = AnimElem = 3
x = 20

[State 210, 1]
type = HitDef
trigger1 = AnimElem = 4
attr = S, NA
damage = 20
animtype = Light
guardflag = M
hitflag = MAF
priority = 3, Hit
pausetime = 8,8
sparkno = S30000
guard.sparkno = S30040
sparkxy = -10, -90
hitsound = S55,2
guardsound = s66,0
ground.type = High
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -4
air.velocity = -1,-3


[State 210, 1]
type = PosAdd
trigger1 = AnimElem = 8
x = -20

[State 210, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Stand Double Kick
[Statedef 246]
type = S
movetype= A
physics = S
ctrl = 0
anim = 215
sprpriority = 2
poweradd = 60

[State 215, 1]
type = PlaySnd
trigger1 = AnimElem = 4
value = 0, 4 + (Random > 499)
channel = 0

[State 200, 1]
type = PlaySnd
trigger1 = animelem = 1
trigger2 = animelem = 10
value = S1,3

[State 215, 3]
type = VelSet
trigger1 = AnimElem = 1
y = 0
x = 0

[State 215, 4]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 215, 1]
type = PosAdd
trigger1 = AnimElem = 2
x = 5

[State 215, 1]
type = PosAdd
trigger1 = AnimElem = 3
x = 21

[State 215, 1]
type = HitDef
trigger1 = AnimElem = 5
trigger1 = !var(1)
attr = S, NA
damage = 20
animtype = hard
guardflag = M
hitflag = MAF
priority = 3, Hit
pausetime = 8, 8
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10, -105
hitsound = S55,3
guardsound = s66,0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -4
air.velocity = -2,-4


[State 215, 1]
type = PosAdd
trigger1 = AnimElem = 6
x = 5

[State 215, 1]
type = PosAdd
trigger1 = AnimElem = 9
x = 5

[State 215, 1]
type = PosAdd
trigger1 = AnimElem = 11
x = 12

[State 215, 3]
type = MakeDust
trigger1 = AnimElem = 9
pos = 0, 0
spacing = 1

[State 215, 1]
type = HitDef
trigger1 = AnimElem = 12
attr = S, NA
damage = 25
animtype = hard
guardflag = M
hitflag = MAF
priority = 3, Hit
pausetime = 12,12
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10, -85
hitsound = S20, 3
guardsound = s66,0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -10
air.velocity = -2,-4

[State 215, 1]
type = PosAdd
trigger1 = AnimElem = 13
x = 28

[State 215, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Stand Light Kick
[Statedef 232]
type = S
movetype= A
physics = S
ctrl = 0
anim = 220
sprpriority = 2
poweradd = 30

[State 220, 1]
type = PlaySnd
trigger1 = AnimElem = 4
value = 0, var(2)
channel = 0

[State 200, 1]
type = PlaySnd
trigger1 = time = 0
value = S1,2

[State 220, 3]
type = VelSet
trigger1 = AnimElem = 1
y = 0
x = 0

[State 220, 4]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 220, 1]
type = HitDef
trigger1 = AnimElem = 4
attr = S, NA
damage = 20
animtype = Light
guardflag = M
hitflag = MFD
priority = 3, Hit
pausetime = 8, 8
sparkno = S30000
guard.sparkno = S30040
sparkxy = -10, -5
hitsound = S55,2
guardsound = s66,0
ground.type = Low
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -4
air.velocity = -1,-3


[State 220, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Stand Strong Kick
[Statedef 240]
type = S
movetype= A
physics = S
ctrl = 0
anim = 225
sprpriority = 2
poweradd = 60

[State 225, 1]
type = PlaySnd
trigger1 = AnimElem = 4
value = 0, 4 + (Random > 499)
channel = 0

[State 200, 1]
type = PlaySnd
trigger1 = time = 0
value = S1,3

[State 225, 3]
type = VelSet
trigger1 = AnimElem = 1
y = 0
x = 0

[State 225, 4]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 225, 1]
type = PosAdd
trigger1 = AnimElem = 2
x = 25


[State 210, 1]
type = HitDef
trigger1 = AnimElem = 4
trigger1 = !var(1)
attr = S, NA
damage = 45
animtype = Hard
guardflag = M
hitflag = MAF
priority = 3, Hit
pausetime = 12, 12
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10, -67
hitsound = S55,3
guardsound = s66,0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -10
air.velocity = -2,-4


[State 225, 1]
type = PosAdd
trigger1 = AnimElem = 9
x = -25

[State 225, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Stand Strong Kick P2
[Statedef 226]
type = S
movetype = H
physics = N
velset = 0, 0
ctrl = 0

[State 226, 1]
type = ChangeAnim2
trigger1 = Time = 0
value = 226

[State 226, 1]
type = PosAdd
triggerall = anim = 226
triggerall = AnimElem = 1, >= 0
triggerall = AnimElem = 1, < 10
trigger1 = TimeMod = 2, 0
x = -1

[State 226, 1]
type = PosAdd
triggerall = anim = 226
triggerall = AnimElem = 1, >= 0
triggerall = AnimElem = 1, < 10
trigger1 = TimeMod = 2, 1
x = 1

[State 226,2]
type = VelSet
trigger1 = Time = 10
x = -7

[State 226,2]
type = VelMul
trigger1 = Time >= 12
x = 1.2

[State 226, 2]
type = ChangeState
trigger1 = BackEdgeBodyDist <= 0
value = 227

[State 226,4]
type = SelfState
trigger1 = Time = 60
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Stand Strong Kick P2
[Statedef 227]
type = S
movetype = H
physics = N

[State 227, 1]
type = EnvShake
trigger1 = Time = 0
time = 10
ampl = 4

[State 227, 1]
type = ChangeAnim2
trigger1 = Time = 0
value = 227

[State 227,2]
type = VelSet
trigger1 = Time = 9
x = 2.5
y = -10.5

[State 227, 1]
type = StateTypeSet
trigger1 = Time = 9
StateType = A

[State 227, 3]
type = Gravity
trigger1 = Time >= 9

[State 227,4]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= -1
value = 228

;---------------------------------------------------------------------------
; Stand Strong Kick P2
[Statedef 228]
type = L
movetype = H
physics = C

[State 228, 1]
type = PlayerPush
trigger1 = 1
value = 0

[State 228, 1]
type = EnvShake
trigger1 = Time = 0
time = 5
ampl = 4

[State 228,2]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0

[State 228,2]
type = PosSet
trigger1 = Time = 0
trigger1 = Pos Y != 0
y = 0

[State 228, 1]
type = ChangeAnim
trigger1 = Time = 0
value = IfElse(SelfAnimExist(5081), 5081, 5080)

[State 228, 1]
type = Turn
trigger1 = anim = 5080
trigger1 = Time = 0

[State 228,4]
type = SelfState
trigger1 = Time = 15
value = 5110

;---------------------------------------------------------------------------
; Stand Repel (Try) - N
[Statedef 230]
type = S
movetype= I
physics = S
ctrl = 0
anim = 230
sprpriority = -2

[State 230, 2]
type = PalFX
trigger1 = Time = 0
time = 6
add = 40, 40, 40

[State 230, 1]
type = AfterImage
trigger1 = time = 0
time = 39
length = 3
paladd = -24, -24, 96
palbright = 0,0,0
palcontrast = 256,256,256
timeGap = 3
frameGap = 1

[State 230, 2]
type = NotHitBy
trigger1 = AnimElem = 1, >= 0
trigger1 = AnimElem = 5, < 0
value = SCA, NA

[State 230, 3]
type = ReversalDef
trigger1 = Time = 0
reversal.attr = SCA, NA
p1stateno = 235

[State 230, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Stand Repel (Try) - S & H
[Statedef 231]
type = S
movetype= I
physics = S
ctrl = 0
anim = 230
sprpriority = -2

[State 231, 2]
type = PalFX
trigger1 = Time = 0
time = 6
add = 40, 40, 40

[State 231, 1]
type = AfterImage
trigger1 = time = 0
time = 39
length = 3
paladd = -24, -24, 96
palbright = 0,0,0
palcontrast = 256,256,256
timeGap = 3
frameGap = 1

[State 231, 2]
type = NotHitBy
trigger1 = AnimElem = 1, >= 0
trigger1 = AnimElem = 5, < 0
value = SCA, NA, SA, HA

[State 231, 3]
type = ReversalDef
trigger1 = Time = 0
reversal.attr = SCA, NA, SA, HA
p1stateno = 235

[State 231, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Stand Repel
[Statedef 235]
type = S
movetype= A
physics = S
ctrl = 0
anim = 235
sprpriority = 3
poweradd = IfElse((PrevStateNo = 150 || PrevStateNo = 152), -3000, 0)

[State 235, 1]
type = PlaySnd
trigger1 = AnimElem = 3
value = 0, var(2)
channel = 0

[State 235, 1]
type = PlaySnd
trigger1 = AnimElem = 3
value = 15, 1
channel = 1

[State 235, 3]
type = NotHitBy
trigger1 = 1
value = SCA

[State 235, 2]
type = AfterImageTime
trigger1 = Time = 0
time = 0

[State 235, 3]
type = Width
trigger1 = AnimElem = 1, >= 0
trigger1 = AnimElem = 7, < 0
value = 5, 0

[State 235, 1]
type = HitDef
trigger1 = PrevStateNo != 150 && PrevStateNo != 152
trigger1 = AnimElem = 4
attr = S, NA
damage = 0, 0
getpower = 0, 0
givepower = 0, 0
animtype = Light
guardflag = M
hitflag = MA
priority = 3, Dodge
pausetime = 0, 0
sparkno = S4035
sparkxy = -10, -100
hitsound = S25, 1
ground.type = High
ground.hittime = 28
air.velocity = -1,-8
air.hittime = 4
envshake.time = 6
envshake.freq = 60
envshake.ampl = 6
numhits = 0

[State 235, 1]
type = TargetState
trigger1 = PrevStateNo != 150 && PrevStateNo != 152
trigger1 = Movehit
trigger1 = enemy, StateType != A
value = 5185
ignorehitpause = 1
persistent = 0

[State 235, 4]
type = HitDef
trigger1 = PrevStateNo = 150 || PrevStateNo = 152
trigger1 = AnimElem = 4
attr = S, NA
damage = 0, 0
getpower = 0, 0
givepower = 0, 0
animtype = Back
guardflag = M
hitflag = MA
priority = 3, Dodge
pausetime = 0, 20
sparkno = S4035
sparkxy = -10, -100
hitsound = S25, 1
ground.slidetime = 12
air.hittime = 12
ground.velocity = -1, -6
guard.velocity = -6.5
air.velocity = -1, -8

[State 235, 2]
type = AssertSpecial
trigger1 = AnimElem = 4, = 1 || AnimElem = 6, = 0 || AnimElem = 6, = 2 || AnimElem = 6, = 4
trigger1 = MoveHit
flag = nobg
flag2 = nofg
ignorehitpause = 1

[State 235, 1]
type = Explod
trigger1 = AnimElem = 4, = 1 || AnimElem = 6, = 2
trigger1 = MoveHit
anim = 236
pos = 0, 0
scale = 1.05263, 1.07142
facing = 1
postype = Left
bindtime = -1
removetime = 1
sprpriority = -5
ignorehitpause = 1

[State 235, 1]
type = Explod
trigger1 = AnimElem = 6, = 0 || AnimElem = 6, = 4
trigger1 = MoveHit
anim = 237
pos = 0, 0
scale = 1.05263, 1.07142
facing = 1
postype = Left
bindtime = -1
removetime = 1
sprpriority = -5
ignorehitpause = 1

[State 235, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Stand Repel Sequence
[Statedef 415]
type = S
movetype= A
physics = S
ctrl = 0
anim = 240
velset = 6
sprpriority = 2
poweradd = 60

[State 240, 1]
type = PlaySnd
trigger1 = AnimElem = 7
value = 0, 4 + (Random > 499)
channel = 0

[State 200, 1]
type = PlaySnd
trigger1 = time = 0
value = S1,1

[State 240, 1]
type = HitDef
trigger1 = AnimElem = 7
attr = C, NA
damage = 45
animtype = Hard
guardflag = L
hitflag = M
priority = 5, Hit
pausetime = 12, 12
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10, -90
hitsound = S55,1
guardsound = s66,0
ground.type = trip
ground.slidetime = 20
ground.hittime = 20
ground.velocity = -10
air.velocity = -2,-4



[State 240, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Run Kick
[Statedef 250]
type = S
movetype= A
physics = S
ctrl = 0
anim = 250
sprpriority = 2

[State 250, 1]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, var(2)
channel = 0

[State 250, 1]
type = PlaySnd
trigger1 = AnimElem = 2
value = 15, 3
channel = 1

[State 250, 1]
type = PosAdd
trigger1 = AnimElem = 1
x = -26

[State 250, 1]
type = PosAdd
trigger1 = AnimElem = 2
x = 12

[State 250, 3]
type = MakeDust
trigger1 = AnimElem = 1
pos = 0, 0
spacing = 1

[State 250, 1]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA
damage = IfElse(var(58) = 3, 78, IfElse(var(58) = 2, 57, 66)), IfElse(var(58) = 3, 7, IfElse(var(58) = 2, 0, 6))
getpower = IfElse(var(58) = 3, 375, 140), IfElse(var(58) = 3, 190, IfElse(var(58) = 2, 47, 0))
givepower = 94, 0
animtype = Hard
guardflag = M
hitflag = MA
priority = 3, Hit
pausetime = 14, 14
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10, -85
hitsound = S20, 7
guardsound = s66,0
ground.type = High
ground.slidetime = 18
ground.hittime = 28
ground.velocity = -5
guard.velocity = -3
air.velocity = -3,-9
air.hittime = 8

[State 250, 1]
type = PosAdd
trigger1 = AnimElem = 4
x = 28

[State 250, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Run Tacle
[Statedef 255]
type = C
movetype= A
physics = C
ctrl = 0
anim = 255
velset = const(velocity.run.fwd.x)
sprpriority = 2

[State 255, 1]
type = PlaySnd
trigger1 = AnimElem = 1
value = 0, var(2)
channel = 0

[State 255, 1]
type = PlaySnd
trigger1 = AnimElem = 2
value = 15, 4
channel = 1

[State 255, 3]
type = MakeDust
trigger1 = AnimElem = 1
pos = 0, 0
spacing = 1

[State 255, 1]
type = HitDef
trigger1 = Time = 0
attr = C, NA
damage = IfElse(var(58) = 3, 78, IfElse(var(58) = 2, 57, 66)), IfElse(var(58) = 3, 7, IfElse(var(58) = 2, 0, 6))
getpower = IfElse(var(58) = 3, 375, 140), IfElse(var(58) = 3, 190, IfElse(var(58) = 2, 47, 0))
givepower = 94, 0
animtype = DiagUp
guardflag = L
hitflag = M
priority = 3, Hit
pausetime = 14, 14
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10, -5
hitsound = S20, 7
guardsound = s66,0
ground.type = Trip
ground.velocity = 0, -5
guard.velocity = -2
fall = 1
fall.envshake.time = 4
fall.envshake.freq = 60
fall.envshake.ampl = 6

[State 255, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; Ground Attack (Ender2) on air
[Statedef 260]
type = S
movetype= A
physics = N
ctrl = 0
anim = 260
sprpriority = 2

[State 260, 3]
type = VelSet
trigger1 = AnimElem = 1
y = 0
x = 0

[State 260, 4]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 260, 1]
type = PlaySnd
trigger1 = AnimElem = 2
value = 15, 5
channel = 5

[State 260, 2]
type = StateTypeSet
trigger1 = AnimElem = 2
statetype = A

[State 260, 5]
type = VelSet
trigger1 = AnimElem = 2
x = 4
y = -15

[State 260, 3]
type = Gravity
trigger1 = AnimElem = 2, >= 0
trigger1 = AnimElem = 12, <= 1

[State 260, 5]
type = VelMul
trigger1 = vel y > 0
y = 1.5
x = IfElse((P2BodyDist X < 30), 0, IfElse((P2BodyDist X > 100), 2, 1))

[State 260, 4]
type = ChangeState
trigger1 = vel y > 0
trigger1 = pos y >= -1
value = 270

;---------------------------------------------------------------------------
; Ground Attack (Ender2) on ground
[Statedef 270]
type = S
movetype= A
physics = N
ctrl = 0
anim = 270
sprpriority = -5

[State 270, 1]
type = PlaySnd
trigger1 = AnimElem = 1
value = 0, var(2)
channel = 0

[State 270, 1]
type = PlaySnd
trigger1 = AnimElem = 1
value = 15, 6
channel = 5

[State 270, 1]
type = PlaySnd
trigger1 = AnimElem = 3
value = 15, 2
channel = 1

[State 270, 3]
type = VelSet
trigger1 = AnimElem = 1
y = 0
x = 0

[State 270, 4]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 270, 3]
type = MakeDust
trigger1 = AnimElem = 1
pos = 0, 0
spacing = 1

[State 270, 1]
type = HitDef
trigger1 = Time = 0
attr = S, NA
damage = IfElse(var(58) = 1, 75, 63), IfElse(var(58) = 1, 7, IfElse(var(58) = 3, 6, 0))
getpower = IfElse(var(58) = 3, 94, 47), 0
givepower = 94, 0
animtype = Hard
guardflag = M
hitflag = MAFD
priority = 5, Hit
pausetime = 0, 10
sparkno = S30002
guard.sparkno = S30040
sparkxy = 0, 0
hitsound = S20, 0 + (Random > 499)*5
ground.type = Low
ground.slidetime = 12
ground.hittime  = 20

[State 270, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 105
ctrl = 0

;---------------------------------------------------------------------------
; Special Attack Power
[Statedef 300]
type = S
movetype = I
physics = S
ctrl = 0
anim = 300
sprpriority = 2

[State 300, 3]
type = Explod
trigger1 = AnimElem = 1, = 1
anim = 301
pos = 0, 0
postype = P1
bindtime = -1
removetime = 41
sprpriority = 3
removeongethit = 1
ownpal = 1
trans = add

[State 300, 4]
type = Explod
trigger1 = AnimElem = 1, = 1
anim = 302
pos = 0, 0
postype = P1
bindtime = -1
removetime = 41
sprpriority = -3
removeongethit = 1
ownpal = 1
trans = add

[State 300, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 310;IfElse(command = "SpecialAttack", 305, 310)
ctrl = 0

;---------------------------------------------------------------------------
; Special Attack 2 Power
[Statedef 305]
type = S
movetype = I
physics = S
ctrl = 0
anim = 305
sprpriority = 2

[State 305, 3]
type = Explod
trigger1 = AnimElem = 1
anim = 306
pos = 0, 0
postype = P1
bindtime = -1
removetime = 20
sprpriority = 3
removeongethit = 1
ownpal = 1
trans = add

[State 305, 4]
type = Explod
trigger1 = AnimElem = 1
anim = 307
pos = 0, 0
postype = P1
bindtime = -1
removetime = 20
sprpriority = -3
removeongethit = 1
ownpal = 1
trans = add

[State 305, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 310
ctrl = 0

;---------------------------------------------------------------------------
; Special Attack End Power
[Statedef 310]
type = S
movetype = A
physics = S
ctrl = 0
anim = 310
sprpriority = 2

[State 310, 1]
type = PlaySnd
trigger1 = AnimElem = 5
value = 10, 0
channel = 0

[State 310, 1]
type = PlaySnd
trigger1 = AnimElem = 5
value = 15, 3
channel = 1

[State 310, 3]
type = MakeDust
trigger1 = AnimElem = 5
pos = 70, 0
spacing = 1

[State 310, 3]
type = Width
trigger1 = AnimElem = 5, >= 0
trigger1 = AnimElem = 10, < 0
value = 30, 0

[State 310, 3]
type = Width
trigger1 = AnimElem = 10, >= 0
trigger1 = AnimElem = 11, < 0
value = 20, 0

[State 310, 3]
type = Explod
trigger1 = AnimElem = 1
anim = 306
pos = 0, 0
postype = P1
bindtime = -1
removetime = 10
sprpriority = 3
removeongethit = 1
ownpal = 1
trans = add

[State 310, 4]
type = Explod
trigger1 = AnimElem = 1
anim = 307
pos = 0, 0
postype = P1
bindtime = -1
removetime = 10
sprpriority = -3
removeongethit = 1
ownpal = 1
trans = add

[State 310, 1]
type = HitDef
trigger1 = AnimElem = 5
attr = S, NA
damage = 183
getpower = 560
givepower = 90
animtype = Back
guardflag = -1
hitflag = MA
priority = 5, Hit
guard.dist = 0
pausetime = 16, 16
sparkno = S30002
sparkxy = -10, -65
hitsound = S21, 0
ground.type = High
ground.velocity = -6, -7
fall = 1
fall.recover = 0
fall.envshake.time = 6
fall.envshake.freq = 60
fall.envshake.ampl = 6
air.velocity = -6,-7
air.fall = 1

[State 310, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1





















[Statedef 520]
type = S
movetype = A
physics = S
ctrl = 0
anim = 310
sprpriority = 2
poweradd = 80

[State 310, 1]
type = PlaySnd
trigger1 = AnimElem = 5
value = s7,4
channel = 0

[State 200, 1]
type = PlaySnd
trigger1 = time = 0
value = S1,4

[State 310, 3]
type = MakeDust
trigger1 = AnimElem = 5
pos = 70, 0
spacing = 1

[State 310, 3]
type = Width
trigger1 = AnimElem = 5, >= 0
trigger1 = AnimElem = 10, < 0
value = 30, 0

[State 310, 3]
type = Width
trigger1 = AnimElem = 10, >= 0
trigger1 = AnimElem = 11, < 0
value = 20, 0


[State 310, 1]
type = HitDef
trigger1 = AnimElem = 5
attr = S, NA
damage = 100,10
animtype = Hard
guardflag = -1
hitflag = MA
priority = 5, Hit
guard.dist = 0
pausetime = 15, 15
sparkno = S30002
sparkxy = -10, -65
hitsound = S55,4
ground.type = High
ground.velocity = -10
fall = 1
air.velocity = -4,-6
envshake.time = 12
envshake.ampl = 6; or 7



[State 310, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1














;---------------------------------------------------------------------------
; Special Attack Speed & EX
[Statedef 315]
type = S
movetype= A
physics = S
ctrl = 0
anim = 315
sprpriority = 2

[State 315, 1]
type = PlaySnd
trigger1 = AnimElem = 7
value = 10, 1
channel = 0

[State 315, 1]
type = PlaySnd
trigger1 = AnimElem = 6
value = 15, 22
channel = 1

[State 315, 1]
type = HitDef
trigger1 = AnimElem = 8
trigger1 = !var(1)
attr = S, NA
damage = IfElse(var(58) = 2, 57, 66), IfElse(var(58) = 2, 0, 6)
getpower = 140, IfElse(var(58) = 2, 47, 0)
givepower = 94, 0
animtype = DiagUp
guardflag = M
hitflag = MAF
priority = 3, Hit
pausetime = 8, 8
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10, -90
hitsound = S20, var(9)
guardsound = s66,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 20
ground.velocity = -1.5, -9
guard.velocity = -2
air.velocity = -3,-9
air.hittime = 8
air.fall = 0
fall = 1
fall.recover = 0
fall.envshake.time = 6
fall.envshake.freq = 60
fall.envshake.ampl = 6

[State 315, 1]
type = VarSet
trigger1 = AnimElem = 8, >= 0 && MoveContact
trigger1 = command = "Ensenshou"
trigger1 = !var(11)
var(11) = 1
ignorehitpause = 1


[State 315, 2]
type = ChangeState
trigger1 = AnimElem = 13, = 5
trigger1 = var(11) = 1
value = 370
ctrl = 0

[State 315, 2]
type = ChangeState
trigger1 = AnimElem = 13, = 5
trigger1 = var(11) = 2
value = 1100
ctrl = 0

[State 315, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Kasumi
[Statedef 320]
type = S
movetype= I
physics = S
ctrl = 0
anim = 320
sprpriority = -1

[State 320, 1]
type = PlaySnd
trigger1 = AnimElem = 5
value = 10, 23
channel = 2

[State 320, 1]
type = PlaySnd
trigger1 = AnimElem = 5
value = 15, 1
channel = 1

[State 320, 3]
type = NotHitBy
trigger1 = 1
value = SCA, AP, AT

[State 320, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 325
ctrl = 0

;---------------------------------------------------------------------------
; Kasumi End
[Statedef 325]
type = S
movetype= I
physics = S
ctrl = 0
anim = 325
sprpriority = -1

[State 325, 3]
type = NotHitBy
trigger1 = 1
value = SCA, AP, AT

[State 325, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Hokage
[Statedef 206]
type = S
movetype= A
physics = S
ctrl = 0
anim = 330
sprpriority = -1
poweradd = 45

[State 330, 1]
type = PlaySnd
trigger1 = AnimElem = 4
value = 10, 24
channel = 0

[State 200, 1]
type = PlaySnd
trigger1 = time = 0
value = S1,1


[State 330, 1]
type = PosAdd
trigger1 = AnimElem = 1
x = 30

[State 330, 1]
type = PosAdd
trigger1 = AnimElem = 3
x = 30

[State 330, 3]
type = MakeDust
trigger1 = AnimElem = 4
pos = 40, 0
spacing = 1

[State 330, 1]
type = HitDef
trigger1 = AnimElem = 5
attr = S, NA
damage = 30
animtype = med
guardflag = M
hitflag = MA
priority = 3, Hit
pausetime = 10,10
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10, -75
hitsound = S55,1
guardsound = s66,0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -7
air.velocity = -2,-4


[State 330, 1]
type = PosAdd
trigger1 = AnimElem = 9
x = -30

[State 330, 1]
type = PosAdd
trigger1 = AnimElem = 11
x = -30

[State 330, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Homura
[Statedef 340]
type = S
movetype= A
physics = S
ctrl = 0
anim = 340
sprpriority = 2
poweradd = IfElse(var(58) = 3, 94, 47)

[State 340, 1]
type = PlaySnd
trigger1 = AnimElem = 5
value = 10, 25
channel = 0

[State 340, 1]
type = PlaySnd
trigger1 = AnimElem = 5
value = 15, 11
channel = 1

[State 340, 1]
type = AfterImage
triggerall = prevstateno != 210
trigger1 = time = 0
time = 13
length = 3
paladd = -60, -80, -40
palbright = 0,0,0
palcontrast = 256,256,256
timeGap = 4
frameGap = 1

[State 340, 4]
type = StateTypeSet
trigger1 = AnimElem = 1
statetype = A
physics = A

[State 340, 5]
type = VelSet
trigger1 = AnimElem = 1
x = 4
y = -5

[State 340, 3]
type = Explod
triggerall = prevstateno != 210
trigger1 = AnimElem = 4
anim = 341
pos = 0, 0
postype = P1
bindtime = 1
removetime = 16
sprpriority = 3
removeongethit = 1
ownpal = 1
ignorehitpause = 1

[State 340, 1]
type = HitDef
trigger1 = Time = 0
attr = S, NA
damage = IfElse(var(58) = 3, 78, IfElse(var(58) = 2, 57, 66)), IfElse(var(58) = 3, 7, 6)
getpower = IfElse(var(58) = 3, 370, 140), IfElse(var(58) = 3, 187, IfElse(var(58) = 2, 47, 0))
givepower = 94, 0
animtype = Medium
guardflag = MA
hitflag = MA
priority = 3, Hit
pausetime = 14, 14
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10, IfElse((AnimElem = 5), -50, -70)
hitsound = S20, 5 + (Random > 499)*3
guardsound = s66,0
ground.type = High
ground.hittime  = 26
ground.velocity = -3, IfElse(prevstateno = 210, -8, -10)
guard.velocity = -4
fall = 1
air.fall = 1
air.velocity = -3,-9
airguard.velocity = -5,-5
air.hittime = 48
palfx.time = IfElse(prevstateno = 210, 0, 73)
palfx.add = 112,-88,-255
palfx.color = 0

[State 340, 1]
type = VarSet
triggerall = prevstateno != 210
trigger1 = MoveHit
trigger1 = !var(0)
var(0) = EnemyNear, ID
ignorehitpause = 1

[State 340, 1]
type = Helper
triggerall = prevstateno != 210
trigger1 = MoveHit
name = "Flammes"
postype = P2
pos = 0, 0
Facing = -1
ID = 1000
stateno = 341
ownpal = 1
persistent = 0
ignorehitpause = 1

[State 340, 2]
type = ChangeState
triggerall = command = "holdup" && command = "a"
trigger1 = PrevStateNo = 210
trigger1 = MoveContact && vel y > 0
value = 345
ctrl = 0

;---------------------------------------------------------------------------
; P2 Burning
[Statedef 341]
type = A
movetype = I
physics = N
anim = 1030
sprpriority = 4
ctrl = 0

[State 341, 2]
type = PosSet
trigger1 = 1
X = Floor(PlayerID(parent,var(0)), Pos X)
Y = Floor(PlayerID(parent,var(0)), Pos Y)

[State 341, 6]
type = ChangeAnim
trigger1 = P2stateno = 5100
value = 342

[State 341, 6]
type = DestroySelf
trigger1 = anim = 342
trigger1 = AnimTime = 0
trigger2 = P2stateno = 0 || P2stateno = 52 || P2stateno = 5040 || (P2stateno = [5201, 5210]) || P2stateno = 5120
trigger3 = EnemyNear, MoveType = A

;---------------------------------------------------------------------------
; Way to ender Speed & EX
[Statedef 345]
type = A
movetype= I
physics = N
ctrl = 0
anim = 345
sprpriority = 2

[State 345, 2]
type = Gravity
trigger1 = 1

[State 345, 2]
type = ChangeState
trigger1 = vel y > 0
trigger1 = pos y >= -1
value = 260
ctrl = 0

;---------------------------------------------------------------------------
; Senpuu
[Statedef 350]
type = S
movetype= A
physics = S
ctrl = 0
anim = 350
sprpriority = -1
poweradd = IfElse(var(58) = 3, 94, 47)

[State 350, 1]
type = PlaySnd
trigger1 = AnimElem = 9
value = 10, 25
channel = 0

[State 350, 1]
type = PlaySnd
trigger1 = AnimElem = 9
value = 15, 4
channel = 1

[State 350, 3]
type = Width
trigger1 = AnimElem = 8, >= 0
trigger1 = AnimElem = 9, <= 0
value = 10, 0

[State 350, 1]
type = AfterImage
trigger1 = time = 0
time = 12
length = 3
paladd = -60, -80, -40
palbright = 0,0,0
palcontrast = 256,256,256
timeGap = 4
frameGap = 1

[State 350, 4]
type = StateTypeSet
trigger1 = AnimElem = 4
statetype = C
physics = C

[State 350, 1]
type = HitDef
trigger1 = AnimElem = 9
attr = C, NA
damage = IfElse(var(58) = 3, 30, IfElse(var(58) = 2, 21, 24)), 3
getpower = IfElse(var(58) = 3, 280, 94), IfElse(var(58) = 3, 140, IfElse(var(58) = 2, 47, 0))
givepower = 94, 0
animtype = Light
guardflag = L
hitflag = M
priority = 3, Hit
pausetime = 10, 10
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10, -5
hitsound = S20, 4
guardsound = s66,0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 20
ground.velocity = -4
guard.velocity = -2

[State 350, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 351
ctrl = 0

;---------------------------------------------------------------------------
; Senpuu End
[Statedef 351]
type = C
movetype= A
physics = C
ctrl = 0
anim = 351
sprpriority = 3

[State 351, 1]
type = AfterImage
trigger1 = time = 0
time = 17
length = 3
paladd = -60, -80, -40
palbright = 0,0,0
palcontrast = 256,256,256
timeGap = 4
frameGap = 1

[State 351, 3]
type = MakeDust
trigger1 = AnimElem = 1
pos = 70, 0
spacing = 1

[State 351, 3]
type = Width
trigger1 = AnimElem = 1, >= 0
trigger1 = AnimElem = 3, < 0
value = 10, 0

[State 351, 2]
type = ChangeState
trigger1 = enemy, MoveType = H
trigger1 = command = "Ensenshou"
value = 370
ctrl = 0

[State 351, 2]
type = ChangeState
trigger1 = enemy, MoveType = H
trigger1 = command = "EnryuHaibi1"
value = 1000
ctrl = 0


[State 351, 2]
type = ChangeState
trigger1 = enemy, MoveType = H
trigger1 = command = "RyuTsuisen"
value = 1300
ctrl = 0

[State 351, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; Senpuu 2
[Statedef 352]
type = C
movetype= A
physics = C
ctrl = 0
anim = 352
sprpriority = -1

[State 352, 1]
type = PlaySnd
trigger1 = AnimElem = 5
value = 10, 25
channel = 0

[State 352, 1]
type = PlaySnd
trigger1 = AnimElem = 5
value = 15, 4
channel = 1

[State 352, 2]
type = VelSet
trigger1 = 1
x = 2

[State 352, 3]
type = Width
trigger1 = AnimElem = 4, >= 0
trigger1 = AnimElem = 5, <= 0
value = 10, 0

[State 352, 1]
type = AfterImage
trigger1 = time = 0
time = 14
length = 3
paladd = -60, -80, -40
palbright = 0,0,0
palcontrast = 256,256,256
timeGap = 4
frameGap = 1

[State 352, 1]
type = HitDef
trigger1 = AnimElem = 5
attr = C, NA
damage = IfElse(var(58) = 3, 45, IfElse(var(58) = 2, 27, 33)), 3
getpower = IfElse(var(58) = 3, 320, 115), IfElse(var(58) = 3, 160, IfElse(var(58) = 2, 58, 0))
givepower = 0, 0
animtype = Medium
guardflag = L
hitflag = M
priority = 3, Hit
pausetime = 10, 10
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10, -5
hitsound = S20, 5
guardsound = s66,0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 20
ground.velocity = -4
guard.velocity = -2

[State 352, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 353
ctrl = 0

;---------------------------------------------------------------------------
; Senpuu 2 End
[Statedef 353]
type = C
movetype= A
physics = C
ctrl = 0
anim = 353
sprpriority = 3

[State 353, 1]
type = AfterImage
trigger1 = time = 0
time = 20
length = 3
paladd = -60, -80, -40
palbright = 0,0,0
palcontrast = 256,256,256
timeGap = 4
frameGap = 1

[State 353, 3]
type = MakeDust
trigger1 = AnimElem = 1
pos = 70, 0
spacing = 1

[State 353, 3]
type = Width
trigger1 = AnimElem = 1, >= 0
trigger1 = AnimElem = 3, < 0
value = 10, 0

[State 353, 2]
type = ChangeState
trigger1 = enemy, MoveType = H
trigger1 = command = "Ensenshou"
value = 370
ctrl = 0

[State 353, 2]
type = ChangeState
trigger1 = enemy, MoveType = H
trigger1 = command = "EnryuHaibi1"
value = 1000
ctrl = 0


[State 353, 2]
type = ChangeState
trigger1 = enemy, MoveType = H
trigger1 = command = "RyuTsuisen"
value = 1300
ctrl = 0

[State 353, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; Senpuu 3
[Statedef 354]
type = C
movetype= A
physics = C
ctrl = 0
anim = 354
sprpriority = -1

[State 354, 1]
type = PlaySnd
trigger1 = AnimElem = 5
value = 10, 27
channel = 0

[State 354, 1]
type = PlaySnd
trigger1 = AnimElem = 5
value = 15, 4
channel = 1

[State 354, 2]
type = VelSet
trigger1 = 1
x = 1

[State 354, 1]
type = AfterImage
trigger1 = time = 0
time = 14
length = 3
paladd = -60, -80, -40
palbright = 0,0,0
palcontrast = 256,256,256
timeGap = 4
frameGap = 1

[State 354, 3]
type = Width
trigger1 = AnimElem = 4, >= 0
trigger1 = AnimElem = 5, <= 0
value = 10, 0

[State 354, 1]
type = HitDef
trigger1 = AnimElem = 5
attr = C, NA
damage = IfElse(var(58) = 3, 63, IfElse(var(58) = 2, 57, 66)), 6
getpower = IfElse(var(58) = 3, 320, 115), IfElse(var(58) = 3, 160, IfElse(var(58) = 2, 58, 0))
givepower = 0, 0
animtype = DiagUp
guardflag = L
hitflag = M
priority = 3, Hit
pausetime = 10, 10
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10, -5
hitsound = S20, 4
guardsound = s66,0
ground.type = Trip
ground.hittime  = 18
ground.velocity = 0, -1
guard.velocity = -2
fall = 1
fall.envshake.time = 4
fall.envshake.freq = 60
fall.envshake.ampl = 6

[State 354, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 355
ctrl = 0

;---------------------------------------------------------------------------
; Senpuu 3 End
[Statedef 355]
type = C
movetype= A
physics = C
ctrl = 0
anim = 355
sprpriority = 3

[State 355, 1]
type = AfterImage
trigger1 = time = 0
time = 20
length = 3
paladd = -60, -80, -40
palbright = 0,0,0
palcontrast = 256,256,256
timeGap = 4
frameGap = 1

[State 355, 3]
type = MakeDust
trigger1 = AnimElem = 1
pos = 70, 0
spacing = 1

[State 355, 3]
type = Width
trigger1 = AnimElem = 1, >= 0
trigger1 = AnimElem = 3, < 0
value = 10, 0

[State 355, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; Overhead Kick
[Statedef 245]
type = S
movetype= A
physics = S
ctrl = 0
anim = 356
sprpriority = 2
poweradd = 60

[State 356, 1]
type = PlaySnd
trigger1 = AnimElem = 5
value = 10, 26
channel = 0

[State 200, 1]
type = PlaySnd
trigger1 = time = 0
value = S1,3


[State 356, 2]
type = VelSet
trigger1 = AnimElem = 4, >= 0
trigger1 = AnimElem = 9, < 0
x = 1

[State 356, 1]
type = PosAdd
trigger1 = AnimElem = 5
x = 20

[State 356, 1]
type = HitDef
trigger1 = AnimElem = 12
trigger2 = AnimElem = 14
attr = S, NA
damage = 23
animtype = Hard
guardflag = MA
hitflag = MA
priority = 2, Hit
pausetime = 12,12
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10, IfElse((AnimElem = 11), -120, IfElse((AnimElem = 12), -95, IfElse((AnimElem = 13), -60, -35)))
hitsound = S55,3
guardsound = s66,0
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -10
air.velocity = -2,-4


[State 356, 1]
type = PosAdd
trigger1 = AnimElem = 17
x = -20

[State 356, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Overhead Kick
[Statedef 357]
type = S
movetype= A
physics = S
ctrl = 0
anim = 357
sprpriority = 2

[State 357, 1]
type = PlaySnd
trigger1 = AnimElem = 1
value = 10, 26
channel = 0

[State 357, 1]
type = PlaySnd
trigger1 = AnimElem = 1
value = 15, 4
channel = 1

[State 357, 1]
type = AfterImage
trigger1 = time = 0
time = 43
length = 3
paladd = -60, -80, -40
palbright = 0,0,0
palcontrast = 256,256,256
timeGap = 4
frameGap = 1

[State 357, 1]
type = HitDef
trigger1 = AnimElem = 7
trigger2 = AnimElem = 8
trigger3 = AnimElem = 9
trigger4 = AnimElem = 10
attr = S, NA
damage = IfElse(var(58) = 2, 12, 15), 3
getpower = IfElse(var(58) = 3, 160, 94), IfElse(var(58) = 3, 80, IfElse(var(58) = 2, 47, 0))
givepower = 24, 0
animtype = Light
guardflag = MA
hitflag = MA
priority = 2, Hit
pausetime = 8, 8
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10, IfElse((AnimElem = 7), -120, IfElse((AnimElem = 8), -95, IfElse((AnimElem = 9), -60, -35)))
hitsound = S20, var(9)
guardsound = s66,0
ground.type = Low
ground.slidetime = 16
ground.hittime  = 24
ground.velocity = -5
guard.velocity = -3
air.velocity = -3,-10
airguard.velocity = -5,-5
air.hittime = 8

[State 357, 1]
type = PosAdd
trigger1 = AnimElem = 12
x = -20

[State 357, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Hakkei
[Statedef 210]
type = S
movetype= A
physics = S
ctrl = 0
anim = 360
sprpriority = 2
poweradd = 60

[State 360, 1]
type = PlaySnd
trigger1 = AnimElem = 6
value = 10, 24
channel = 0

[State 200, 1]
type = PlaySnd
trigger1 = time = 0
value = S1,1


[State 360, 1]
type = HitDef
trigger1 = time = 0
attr = S, NA
damage = 45
animtype = Hard
guardflag = M
hitflag = MA
priority = 3, Hit
pausetime = 12, 12
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10, -70
hitsound = S55,1
guardsound = s66,0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -10
air.velocity = -2,-4


[State 360, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Ensenshou
[Statedef 1370]
type = S
movetype= A
physics = S
poweradd = -100
ctrl = 0
anim = 370
sprpriority = 3


[State 370, 1]
type = PlaySnd
trigger1 = AnimElem = 4
value = 10, 19
channel = 0

[State 370, 1]
type = PlaySnd
trigger1 = AnimElem = 6
value = 15, 11
channel = 1

[State 370, 4]
type = PosAdd
trigger1 = AnimElem = 1
x = 15

[State 370, 4]
type = StateTypeSet
trigger1 = AnimElem = 4
statetype = A
movetype= A
physics = A

[State 370, 3]
type = MakeDust
trigger1 = AnimElem = 4
pos = 10, 0
spacing = 1

[State 370, 5]
type = VelSet
trigger1 = AnimElem = 4
y = const(velocity.jump.y)

;[State 370, 5]
;type = VelSet
;trigger1 = AnimElem = 8
;x = -.5

[State 370, 3]
type = Explod
trigger1 = AnimElem = 4
anim = 371
pos = -31, -173
postype = P1
bindtime = 1
removetime = 16
sprpriority = 3
removeongethit = 1
ownpal = 1
ignorehitpause = 1

[State 370, 3]
type = Explod
trigger1 = AnimElem = 6
anim = 372
pos = -44, -34
postype = P1
bindtime = 1
removetime = 16
sprpriority = 3
removeongethit = 1
ownpal = 1
ignorehitpause = 1

[State 370, 3]
type = Explod
trigger1 = AnimElem = 8
anim = 373
pos = -71, -120
postype = P1
bindtime = 1
removetime = 16
sprpriority = 3
removeongethit = 1
ownpal = 1
ignorehitpause = 1

[State 370, 1]
type = HitDef
trigger1 = AnimElem = 4
attr = A, NA
damage = 20,2
animtype = Back
guardflag = MA
hitflag = MAFD
priority = 3, Hit
pausetime = 6, 2
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10, -75
hitsound = S55,3
guardsound = s66,0
ground.type = High
ground.velocity = 0, -12
guard.velocity = -3
fall = 1
air.velocity = -2,-9
airguard.velocity = -5,-5
air.fall = 1
palfx.time = 75
palfx.add = 112,-88,-255
palfx.color = 0
envshake.time = 12
envshake.ampl = 6; or 7

[State 370, 1]
type = HitDef
trigger1 = AnimElem = 5
attr = A, NA
damage = 20,2
animtype = Back
guardflag = MA
hitflag = MAFD
priority = 3, Hit
pausetime = 8, 4
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10, -115
hitsound = S55,1
guardsound = s66,0
ground.type = High
ground.velocity = 0, -12
guard.velocity = -3
fall = 1
air.velocity = -2,-9
airguard.velocity = -5,-5
air.fall = 1
palfx.time = 75
palfx.add = 112,-88,-255
palfx.color = 0
envshake.time = 12
envshake.ampl = 6; or 7

[State 370, 1]
type = HitDef
trigger1 = AnimElem = 6
attr = A, NA
damage = 20,2
animtype = Back
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 12, 12
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10, -130
hitsound = S55,3
guardsound = s66,0
ground.type = High
ground.velocity = -2, -9
guard.velocity = -3
fall = 1
air.velocity = -2,-9
airguard.velocity = -5,-5
air.fall = 1
palfx.time = 68
palfx.add = 112,-88,-255
palfx.color = 0
envshake.time = 12
envshake.ampl = 6; or 7

[State 370, 1]
type = HitDef
trigger1 = AnimElem = 7
attr = A, NA
damage = 20,2
animtype = Back
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 8, 8
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10, -110
hitsound = S55,1
guardsound = s66,0
ground.type = High
ground.velocity = -2, -9
guard.velocity = -3
fall = 1
air.velocity = -2,-9
airguard.velocity = -5,-5
air.fall = 1
palfx.time = 68
palfx.add = 112,-88,-255
palfx.color = 0
envshake.time = 12
envshake.ampl = 6; or 7

[State 370, 1]
type = HitDef
trigger1 = AnimElem = 8
attr = A, NA
damage = 20,2
animtype = Back
guardflag = MA
hitflag = MAFD
priority = 3, Hit
pausetime = 8, 8
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10, -140
hitsound = S55,3
guardsound = s66,0
ground.type = High
ground.velocity = -3, -9
guard.velocity = -3
fall = 1
air.velocity = -3,-5
airguard.velocity = -5,-5
air.fall = 1
palfx.time = 52
palfx.add = 112,-88,-255
palfx.color = 0
envshake.time = 12
envshake.ampl = 6; or 7

[State 370, 1]
type = HitDef
trigger1 = AnimElem = 9
attr = A, NA
damage = 20,2
animtype = Back
guardflag = MA
hitflag = MAFD
priority = 3, Hit
pausetime = 8, 8
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10, -125
hitsound = S55,1
guardsound = s66,0
ground.type = High
ground.velocity = -3, -9
guard.velocity = -3
fall = 1
air.velocity = -3,-5
airguard.velocity = -5,-5
air.fall = 1
palfx.time = 52
palfx.add = 112,-88,-255
palfx.color = 0
envshake.time = 12
envshake.ampl = 6; or 7

[State 370, 1]
type = VelAdd
trigger1 = AnimElem = 10
y = -2
x = -.5



[State 370, 4]
type = PosAdd
trigger1 = AnimElem = 13
x = -15

;---------------------------------------------------------------------------
; Ensenshou Sequence
[Statedef 380]
type = A
movetype= A
physics = A
ctrl = 0
anim = 380
sprpriority = 3

[State 380, 1]
type = PlaySnd
trigger1 = AnimElem = 4
value = 15, 4
channel = 1

[State 380, 1]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage = IfElse(var(58) = 3, 51, IfElse(var(58) = 2, 33, 39)), IfElse(var(58) = 3, 6, 3)
getpower = IfElse(var(58) = 3, 94, 65), IfElse(var(58) = 1, 0, 47)
givepower = 18, 0
animtype = Hard
guardflag = A
hitflag = AF
priority = 4, Hit
pausetime = 12, 12
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10, -100
hitsound = S20, 7
guardsound = s66,0
ground.type = High
air.velocity = -3, 8
airguard.velocity = -5, -5
air.fall = 1
palfx.time = 52
palfx.add = 112,-88,-255
palfx.color = 0
envshake.time = 12
envshake.ampl = 6; or 7
fall.envshake.time = 20
fall.envshake.ampl = 8

[State 380, 1]
type = VarSet
trigger1 = MoveHit
trigger1 = !var(0)
var(0) = EnemyNear, ID
ignorehitpause = 1

[State 380, 1]
type = Helper
trigger1 = MoveHit
name = "Flammes"
postype = P2
pos = 0, 0
Facing = -1
ID = 1000
stateno = 1351
ownpal = 1
persistent = 0
ignorehitpause = 1

[State 380, 2]
type = ChangeState
triggerall = command = "holdup" && command = "a"
trigger1 = MoveHit && vel y > 0
value = 390
ctrl = 0














; Ensenshou Sequence
[Statedef 650]
type = A
movetype= A
physics = A
ctrl = 0
anim = 650
sprpriority = 3
poweradd = 80

[State 200, 1]
type = PlaySnd
trigger1 = time = 0
value = S7,1

[State 200, 1]
type = PlaySnd
trigger1 = time = 0
value = S1,4

[State 380, 1]
type = HitDef
trigger1 = AnimElem = 2
attr = A, NA
damage = 100,10
animtype = Hard
guardflag = HA
hitflag = MAF
;priority = 4, Hit
pausetime = 15, 15
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10, -43
hitsound = S55,4
guardsound = s66,0
ground.type = High
ground.slidetime = 22
ground.hittime = 22
ground.velocity = -10
air.velocity = -4,-6
envshake.time = 12
envshake.ampl = 6; or 7
fall = 1










;---------------------------------------------------------------------------
; Ensenshou Sequence Ground Attack
[Statedef 390]
type = A
movetype= I
physics = N
ctrl = 0
anim = 390
sprpriority = 2

[State 390, 2]
type = Gravity
trigger1 = 1

[State 390, 2]
type = ChangeState
trigger1 = vel y > 0
trigger1 = pos y >= -1
value = 260
ctrl = 0

;---------------------------------------------------------------------------
; Crouching Light Punch
[Statedef 400]
type = C
movetype= A
physics = C
ctrl = 0
anim = 400
sprpriority = 2
poweradd = 30

[State 400, 1]
type = PlaySnd
trigger1 = AnimElem = 3
value = 0, var(2)
channel = 0

[State 200, 1]
type = PlaySnd
trigger1 = time = 0
value = S1,0

[State 400, 3]
type = VelSet
trigger1 = AnimElem = 1
y = 0
x = 0

[State 400, 4]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 400, 3]
type = Width
trigger1 = AnimElem = 3, >= 0
trigger1 = AnimElem = 4, < 0
trigger2 = AnimElem = 6, >= 0
trigger2 = AnimElem = 7, < 0
value = 10, 0

[State 400, 3]
type = Width
trigger1 = AnimElem = 4, >= 0
trigger1 = AnimElem = 6, < 0
value = 20, 0

[State 400, 1]
type = HitDef
trigger1 = AnimElem = 4
attr = C, NA
damage = 20
animtype = Light
guardflag = L
hitflag = M
priority = 3, Hit
pausetime = 8, 8
sparkno = S30000
guard.sparkno = S30040
sparkxy = -10, -25
hitsound = S55,0
guardsound = s66,0
ground.type = Low
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -4
air.velocity = -1,-3


[State 400, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; Crouching Medium Kick
[Statedef 435]
type = C
movetype= A
physics = C
ctrl = 0
anim = 410
sprpriority = 1
poweradd = 30

[State 410, 1]
type = PlaySnd
trigger1 = AnimElem = 5
value = 0, 4 + (Random > 499)
channel = 0

[State 200, 1]
type = PlaySnd
trigger1 = time = 0
value = S1,2

[State 410, 3]
type = VelSet
trigger1 = AnimElem = 1
y = 0
x = 0

[State 410, 4]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 410, 3]
type = MakeDust
trigger1 = AnimElem = 5
pos = 70, 0
spacing = 1

[State 410, 3]
type = Width
trigger1 = AnimElem = 4, >= 0
trigger1 = AnimElem = 8, < 0
value = 10, 0

[State 410, 1]
type = HitDef
trigger1 = AnimElem = 5
attr = C, NA
damage = 20
animtype = light
guardflag = L
hitflag = M
priority = 3, Hit
pausetime = 8,8
sparkno = S30000
guard.sparkno = S30040
sparkxy = -10, -5
hitsound = S55,2
guardsound = s66,0
ground.type = Low
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -4
air.velocity = -1,-3


[State 410, 5]
type = SprPriority
trigger1 = AnimElem = 6
value = 3

[State 410, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; Crouching Light Kick
[Statedef 433]
type = C
movetype= A
physics = C
ctrl = 0
anim = 420
sprpriority = 2
poweradd = 30

[State 420, 1]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, var(2)
channel = 0

[State 200, 1]
type = PlaySnd
trigger1 = time = 0
value = S1,2

[State 420, 3]
type = VelSet
trigger1 = AnimElem = 1
y = 0
x = 0

[State 420, 4]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 420, 1]
type = HitDef
trigger1 = AnimElem = 3
attr = C, NA
damage = 20
animtype = Light
guardflag = L
hitflag = M
priority = 3, Hit
pausetime = 8, 8
sparkno = S30000
guard.sparkno = S30040
sparkxy = -10, -5
hitsound = S55,2
guardsound = s66,0
ground.type = Low
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -4
air.velocity = -1,-3


[State 420, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; Crouching Strong Kick
[Statedef 440]
type = C
movetype= A
physics = C
ctrl = 0
anim = 425
sprpriority = 1
poweradd = 60

[State 425, 1]
type = PlaySnd
trigger1 = AnimElem = 3
value = 0, var(2)
channel = 0

[State 200, 1]
type = PlaySnd
trigger1 = time = 0
value = S1,3

[State 425, 1]
type = HitDef
trigger1 = AnimElem = 6
attr = C, NA
damage = 45
animtype = hard
guardflag = L
hitflag = M
priority = 3, Hit
pausetime = 12, 12
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10, -25
hitsound = S55,3
guardsound = s66,0
ground.type = Trip
ground.velocity = -2,-4
air.velocity = -2,-4


[State 425, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; Crouching Repel (Try)
[Statedef 430]
type = C
movetype= I
physics = C
ctrl = 0
anim = 430
sprpriority = -2



[State 430, 3]
type = ReversalDef
trigger1 = Time = 0
reversal.attr = SCA, NA
p1stateno = 435

[State 430, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; Crouching Repel (Try) - S & H
[Statedef 431]
type = C
movetype= I
physics = C
ctrl = 0
anim = 430
sprpriority = -2

[State 431, 2]
type = PalFX
trigger1 = Time = 0
time = 4
add = 40, 40, 40

[State 431, 1]
type = AfterImage
trigger1 = time = 0
time = 42
length = 3
paladd = -24, -24, 96
palbright = 0,0,0
palcontrast = 256,256,256
timeGap = 3
frameGap = 1

[State 431, 2]
type = NotHitBy
trigger1 = AnimElem = 1, >= 0
trigger1 = AnimElem = 5, < 0
value = SCA, NA, SA, HA

[State 431, 3]
type = ReversalDef
trigger1 = Time = 0
reversal.attr = SCA, NA, SA, HA
p1stateno = 435

[State 431, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; Crouching Repel
[Statedef 410]
type = C
movetype= A
physics = C
ctrl = 0
anim = 435
sprpriority = 3
poweradd = 60

;[State 435, 2]
;type = AfterImageTime
;trigger1 = Time = 0
;time = 0

[State 435, 1]
type = PlaySnd
trigger1 = AnimElem = 4
value = 0, var(2)
channel = 0

[State 200, 1]
type = PlaySnd
trigger1 = time = 0
value = S1,1

;[State 435, 3]
;type = NotHitBy
;trigger1 = 1
;value = SCA

[State 400, 1]
type = HitDef
trigger1 = AnimElem = 4
attr = C, NA
damage = 45
animtype = hard
guardflag = L
hitflag = M
priority = 3, Hit
pausetime = 8, 8
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10, -55
hitsound = S55,1
guardsound = s66,0
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -10
air.velocity = -2,-4



[State 435, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; Jump Light Punch
[Statedef 600]
type = A
movetype= A
physics = A
ctrl = 0
anim = 600
sprpriority = 2
poweradd = 30

[State 600, 1]
type = PlaySnd
trigger1 = AnimElem = 3
value = 0, var(2)
channel = 0

[State 200, 1]
type = PlaySnd
trigger1 = time = 0
value = S1,0

[State 600, 1]
type = HitDef
trigger1 = AnimElem = 2
attr = A, NA
damage = 20
animtype = Light
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 12, 12
sparkno = S30000
guard.sparkno = S30040
sparkxy = -10, -60
hitsound = S55,0
guardsound = s66,0
ground.type = High
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -4
air.velocity = -1,-3







; Jump Light Punch
[Statedef 610]
type = A
movetype= A
physics = A
ctrl = 0
anim = 600
sprpriority = 2
poweradd = 40

[State 600, 1]
type = PlaySnd
trigger1 = AnimElem = 3
value = 0, var(2)
channel = 0

[State 600, 1]
type = PlaySnd
trigger1 = AnimElem = 3
value = 15, 2
channel = 1

[State 600, 1]
type = HitDef
trigger1 = AnimElem = 2
attr = A, NA
damage = 25
animtype = Medium
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 12, 12
sparkno = S30000
guard.sparkno = S30040
sparkxy = -10, -60
hitsound = S20, 1
guardsound = s66,0
ground.type = High
ground.slidetime = 12
ground.hittime = 20
ground.velocity = -4
guard.velocity = -2
air.hittime = 8
air.velocity = -1,-7
airguard.velocity = -5,-5
envshake.time = 9
envshake.ampl = 4; or 5







;---------------------------------------------------------------------------
; Jump Light Punch Alternate (Jump & EX A+C)
[Statedef 601]
type = A
movetype= A
physics = A
ctrl = 0
anim = 600
sprpriority = 2

[State 601, 1]
type = PlaySnd
trigger1 = AnimElem = 3
value = 0, var(2)
channel = 0

[State 601, 1]
type = PlaySnd
trigger1 = AnimElem = 3
value = 15, 2
channel = 1

[State 601, 1]
type = HitDef
triggerall = Time = 0
trigger1 = !var(1)
trigger2 = PrevStateNo = 601
trigger3 = PrevStateNo = 635
attr = A, NA
damage = IfElse(var(58) = 2, 30, 36), IfElse(var(58) = 2, 0, 3)
getpower = IfElse(var(58) = 3, 270, 94), IfElse(var(58) = 3, 140, IfElse(var(58) = 2, 47, 0))
givepower = 94, 0
animtype = Light
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 8, 8
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10, -60
hitsound = S20, 1
guardsound = s66,0
ground.type = High
ground.slidetime = 12
ground.hittime = 20
ground.velocity = -3
guard.velocity = -2
air.hittime = 8
air.velocity = -2,-7
airguard.velocity = -5,-5
envshake.time = 12
envshake.ampl = 6; or 7
fall.envshake.time = 20
fall.envshake.ampl = 8

;---------------------------------------------------------------------------
; Jump Strong Kick
[Statedef 640]
type = A
movetype= A
physics = A
ctrl = 0
anim = 610
sprpriority = 2
poweradd = 60

[State 610, 1]
type = PlaySnd
trigger1 = AnimElem = 5
value = 0, var(2)
channel = 0

[State 200, 1]
type = PlaySnd
trigger1 = time = 0
value = S1,3

[State 610, 1]
type = HitDef
trigger1 = time = 0
attr = A, NA
damage = 45
animtype = hard
guardflag = MA
hitflag = MA
priority = 3, Hit
pausetime = 12, 12
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10, -33
hitsound = S55,3
guardsound = s66,0
ground.type = High
ground.slidetime = 20
ground.hittime = 20
ground.velocity = -10
air.velocity = -2,-4


;---------------------------------------------------------------------------
; Jump Strong Kick End A
[Statedef 615]
type = A
movetype= I
physics = N
ctrl = 0
anim = 615
sprpriority = 2

[State 615, 2]
type = Gravity
trigger1 = 1

[State 615, 2]
type = ChangeState
trigger1 = vel y > 0
trigger1 = pos y >= -1
value = IfElse((Command = "holddown"), 400, IfElse((Command = "holdback"), 205, 200))
ctrl = 0

;---------------------------------------------------------------------------
; Jump Strong Kick End B
[Statedef 616]
type = A
movetype= I
physics = N
ctrl = 0
anim = 615
sprpriority = 2

[State 616, 2]
type = Gravity
trigger1 = 1

[State 616, 2]
type = ChangeState
trigger1 = vel y > 0
trigger1 = pos y >= -1
value = IfElse((Command = "holddown"), 410, IfElse((Command = "holdfwd"), 215, 210))
ctrl = 0

;---------------------------------------------------------------------------
; Jump Strong Kick End C
[Statedef 617]
type = A
movetype= I
physics = N
ctrl = 0
anim = 615
sprpriority = 2

[State 617, 2]
type = Gravity
trigger1 = 1

[State 617, 2]
type = ChangeState
trigger1 = vel y > 0
trigger1 = pos y >= -1
value = IfElse((Command = "holddown"), 420, IfElse((Command = "holdfwd"), 225, 220))
ctrl = 0

;---------------------------------------------------------------------------
; Jump Light Kick
[Statedef 633]
type = A
movetype= A
physics = A
ctrl = 0
anim = 620
sprpriority = 2
poweradd = 30

[State 620, 1]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, var(2)
channel = 0

[State 200, 1]
type = PlaySnd
trigger1 = time = 0
value = S1,2

[State 620, 1]
type = HitDef
trigger1 = AnimElem = 2
attr = A, NA
damage = 20
animtype = Light
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 12, 12
sparkno = S30000
guard.sparkno = S30040
sparkxy = -10, -43
hitsound = S55,2
guardsound = s66,0
ground.type = High
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -4
air.velocity = -1,-3




;---------------------------------------------------------------------------
; Jump Repel (Try)
[Statedef 630]
type = A
movetype= I
physics = N
ctrl = 0
anim = 630
sprpriority = -2

[State 630, 3]
type = Gravity
trigger1 = 1

[State 630, 2]
type = PalFX
trigger1 = Time = 0
time = 4
add = 40, 40, 40

[State 630, 1]
type = AfterImage
trigger1 = time = 0
time = 100
length = 3
paladd = -24, -24, 96
palbright = 0,0,0
palcontrast = 256,256,256
timeGap = 3
frameGap = 1

[State 630, 2]
type = NotHitBy
trigger1 = AnimElem = 1, >= 0
trigger1 = AnimElem = 5, < 0
value = SCA, NA, SA, HA

[State 630, 3]
type = ReversalDef
trigger1 = Time = 0
reversal.attr = SCA, NA, SA, HA
p1stateno = 635

[State 630, 4]
type = ChangeState
trigger1 = vel y > 0
trigger1 = pos y >= -1
value = 632

;---------------------------------------------------------------------------
; Jump Repel (Try) - S & H
[Statedef 631]
type = A
movetype= I
physics = N
ctrl = 0
anim = 630
sprpriority = -2

[State 631, 3]
type = Gravity
trigger1 = 1

[State 631, 2]
type = PalFX
trigger1 = Time = 0
time = 4
add = 40, 40, 40

[State 631, 1]
type = AfterImage
trigger1 = time = 0
time = 100
length = 3
paladd = -24, -24, 96
palbright = 0,0,0
palcontrast = 256,256,256
timeGap = 3
frameGap = 1

[State 631, 2]
type = NotHitBy
trigger1 = AnimElem = 1, >= 0
trigger1 = AnimElem = 5, < 0
value = SCA, NA

[State 631, 3]
type = ReversalDef
trigger1 = Time = 0
reversal.attr = SCA, NA, SA, HA
p1stateno = 635

[State 631, 4]
type = ChangeState
trigger1 = vel y > 0
trigger1 = pos y >= -1
value = 632

;---------------------------------------------------------------------------
; Jump Repel (Try) Land
[Statedef 632]
type    = S
physics = S
ctrl = 0
anim = 632

[State 632, 1]
type = PlaySnd
trigger1 = Time = 0
value = 15, 6
channel = 5

[State 632, 2]
type = StateTypeSet
trigger1 = Time = 0
statetype = C
movetype = I
physics = C

[State 632, 3]
type = VelSet
trigger1 = AnimElem = 1
y = 0
x = 0

[State 632, 4]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 632, 4]
type = AfterImageTime
trigger1 = Time = 0
time = 10

[State 632, 3]
type = MakeDust
trigger1 = AnimElem = 1
pos = 40, 0
spacing = 1

[State 632, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; Jump Repel
[Statedef 611]
type = A
movetype= A
physics = A
ctrl = 0
anim = 635
sprpriority = 3
poweradd = 60

[State 635, 1]
type = PlaySnd
trigger1 = AnimElem = 3
value = 0, var(2)
channel = 0

[State 200, 1]
type = PlaySnd
trigger1 = time = 0
value = S1,1



[State 600, 1]
type = HitDef
trigger1 = AnimElem = 2
attr = A, NA
damage = 45
animtype = Heavy
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 12, 12
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10, -70
hitsound = S55,1
guardsound = s66,0
ground.type = High
ground.slidetime = 20
ground.hittime = 20
ground.velocity = -10
air.velocity = -2,-4


;---------------------------------------------------------------------------
;Throw - Attempt
[Statedef 800]
type = S
movetype= A
physics = S
ctrl = 0
anim = 800
sprpriority = -1

[State 800, 1]
type = PlaySnd
trigger1 = AnimElem = 3
value = 10, 13
channel = 0

[State 800, 1]
type = PlaySnd
trigger1 = time = 0
value = s1,0

[State 800, 1]
type = HitDef
trigger1 = AnimElem = 1
getpower = IfElse(var(58) = 3, 94, 47), 0
givepower = 94, 0
attr = S, NT
hitflag = M-
priority = 1, Miss
sparkno = -1
sprpriority = 1
p2facing = 1
p1stateno = 810
p2stateno = 820
guard.dist = 0
fall = 1

[State 800, 5]
type = SprPriority
trigger1 = AnimElem = 4
value = 3

[State 800, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Throw
[Statedef 810]
type = S
movetype= I
physics = S
anim = 810
ctrl = 0
sprpriority = 3

[State 810, 1]
type = PlaySnd
trigger1 = AnimElem = 1
value = s800,100
channel = 1

[State 810, 1]
type = PlaySnd
trigger1 = AnimElem = 8
value = 0, 2 + IfElse(Random < 333, 0, IfElse(Random < 666, 1, 2))
channel = 0

[State 800, 1]
type = PlaySnd
trigger1 = animelem = 7
value = s1,1

[State 810, 1]
type = PlaySnd
trigger1 = AnimElem = 8
value = 21, 0
channel = 2

[State 810, 2]
type = TargetVelSet
trigger1 = AnimElem = 8, = 0
X = -6
Y = -7

[State 810, 2]
type = TargetDrop
trigger1 = AnimElem = 8, = 0

[State 810, 1]
type = Explod
trigger1 = AnimElem = 8, = 0
anim = 30002
pos = 65, -70
facing = 1
postype = P1
bindtime = 1
removetime = 14
sprpriority = 5

[State 810, 1]
type = Explod
trigger1 = AnimElem = 8, = 0
anim = 815
pos = 65, -70
facing = 1
postype = P1
bindtime = 1
removetime = 14
sprpriority = 4
trans = add

[State 810, 3]
type = MakeDust
trigger1 = AnimElem = 8
pos = 60, 0
spacing = 1

[State 810, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Thrown
[Statedef 820]
type = S
movetype= H
physics = N

[State 820, 1]
type = ChangeAnim
triggerall = Time = 0 && AnimExist(821)
trigger1 = Name = "Lee Rekka"
trigger2 = Name = "Amano Hyo"
value = 821

[State 820, 1]
type = ChangeAnim2
trigger1 = Time = 0
trigger1 = anim != 821
value = 820

[State 820, 1]
type = VelSet
trigger1 = Time = 0
x = 0

[State 820, 1]
type = LifeAdd
trigger1 = AnimElem = 7
value = IfElse(enemy, var(58) = 3, -84, IfElse(enemy, var(58) = 2, -66, -78))

[State 820, 1]
type = StateTypeSet
trigger1 = anim = 820
trigger1 = AnimElem = 7, = 1
trigger2 = anim = 821
trigger2 = AnimElem = 8, = 1
StateType = A

[State 820, 1]
type = Gravity
trigger1 = anim = 820
trigger1 = AnimElem = 7, > 1
trigger2 = anim = 821
trigger2 = AnimElem = 8, > 1

[State 820, 1]
type = EnvShake
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
time = 12
ampl = 5

[State 820, 2]
type = SelfState
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 5100


;-----------------------------------------------------------------------
[Statedef 801]
type = S
movetype= A
physics = S
ctrl = 0
anim = 800
sprpriority = -1

[State 800, 1]
type = PlaySnd
trigger1 = time = 0
value = s1,0

[State 800,1]
type = PlaySnd
trigger1 = AnimElem = 3
value = 7,13
channel = 0

[State 800,1]
type = HitDef
trigger1 = AnimElem = 1
attr = S,NT
hitflag = M-
priority = 4,Miss
sparkno = 8
sparkxy = 0,-97
sprpriority = 1
p2facing = 1
p1stateno = 850
p2stateno = 855
guard.dist = 0
fall = 1

[State 800,2]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------
[Statedef 850]
type = S
movetype= I
physics = S
anim = 850
ctrl = 0
sprpriority = 1

[State 800, 1]
type = PlaySnd
trigger1 = animelem = 1
value = s1,1

[State 810, 1]
type = PlaySnd
trigger1 = AnimElem = 1
value = s800,100
channel = 1

[State 810,1]
type = Width
trigger1 = 1
edge = 30,0

[State 810,1]
type = PlaySnd
trigger1 = AnimElem = 3
value = 0+var(15)*10,2+random%2
channel = 0

[State 0,VarSet]
type = VarAdd
trigger1 = time=0
fv = 8
value = 10+(fvar(11))*(var(10)!=0)

[State 800,1]
type = PlaySnd
trigger1 = AnimElem = 1
value = F800,0
channel = 1

[State 905,13]
type = ChangeState
triggerall =!var(58)
triggerall = animelem = 1,>= 0
triggerall = animelem = 3,< 0
trigger1 = enemy,command = "holdfwd" && enemy,command = "b"
trigger2 = enemy,command = "holdback" && enemy,command = "b"
value = 890

[State 1500,]
type = Turn
trigger1 = AnimElem = 7
value = 1

[State 810,3]
type = TargetBind
Trigger1 = AnimElemtime(3) >=0 && AnimElemtime(4) <0
pos = 88,-100

[State 810,3]
type = TargetBind
Trigger1 = AnimElemtime(4) >=0 && AnimElemtime(5) <0
pos = 50,-132

[State 810,3]
type = TargetBind
Trigger1 = AnimElemtime(5) >=0 && AnimElemtime(6) <0
pos = 18,-135

[State 810,3]
type = TargetBind
Trigger1 = AnimElemtime(6) >=0 && AnimElemtime(7) <0
pos = 8,-137

[State 810,3]
type = TargetBind
Trigger1 = AnimElemtime(7) >=0 && AnimElemtime(8) <0
pos = 17,-120

[State 810,3]
type = TargetBind
Trigger1 = AnimElemtime(8) >=0 && AnimElemtime(9) <0
pos = 53,-65

[State 810,3]
type = TargetBind
Trigger1 = AnimElemtime(9) >=0 && AnimElemtime(9) <10
pos = 26,0

[State 1100,1]
type = PosAdd
trigger1 = AnimElem = 9
x = 25


[State 1301,1]
type = PlaySnd
trigger1 = animelem = 9,0
value = F5,4
channel = 0

[State 183,3]
type = EnvShake
trigger1 = animelem = 9
ignorehitpause = 1
ampl = 4
freq = 160
time = 10

[State 810,1]
type = TargetLifeAdd
trigger1 = AnimElem = 9
value = -100

[State 810,2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-----------------------------------------------------------------------
[Statedef 855]
type    = A
movetype= H
physics = N
velset = 0,0

[State 820,1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 855

[State 1500,]
type = Turn
Trigger1 = Time = 23
value = 1

[State 800,1]
type = HitBy
trigger1 = 1
value = SCA,HT
time = 1

[State 1100,1]
type = velset
trigger1 = AnimElem = 5,10
x = -10

[state screenbound]
type = screenbound
trigger1 = 1
value = 1     
movecamera = 0,0

[State 855,39]
type = ChangeState
trigger1 = AnimTime = 0
value = 856

[Statedef 856]
type = A
movetype = H
physics = N
velset = -5,-4
sprpriority = -2

[State 865,2]
type = VelAdd
trigger1 = 1
y = .5

[State 865,4]
type = ChangeAnim
trigger1 = Time = 0
value = 5050

[State 865,5]
type = SelfState
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 5100

;---------------------------------------------------------------------------
; Enryu Haibi 1
[Statedef 1000]
type = S
movetype= A
physics = S
anim = 1000
ctrl = 0
sprpriority = 3
poweradd = 100

[State 1000, 1]
type = PlaySnd
trigger1 = AnimElem = 5
value = 10, 21
channel = 0

[State 1000, 1]
type = PlaySnd
trigger1 = AnimElem = 5
value = 15, 11
channel = 1

[State 1000, 2]
type = Width
trigger1 = AnimElem = 3, >= 0
trigger1 = AnimElem = 4, < 0
trigger2 = AnimElem = 10, >= 0
trigger2 = AnimElem = 11, < 0
value = 20, 0

[State 1000, 2]
type = Width
trigger1 = AnimElem = 4, >= 0
trigger1 = AnimElem = 10, < 0
value = 30, 0

[State 1000, 2]
type = VelSet
trigger1 = AnimElem = 2, >= 0
trigger1 = AnimElem = 9, < 0
x = 8

[State 1000, 2]
type = VelSet
trigger1 = AnimElem = 10
x = 0

[State 1000, 3]
type = Explod
trigger1 = AnimElem = 4
anim = 1020
pos = 0, 0
postype = P1
bindtime = -1
removetime = 25
sprpriority = 4
removeongethit = 1
ownpal = 1
ignorehitpause = 0
trans = add

[State 1000, 1]
type = HitDef
trigger1 = AnimElem = 7
attr = S, SA
damage = 60,6
getpower = 0,0
animtype = Hard
guardflag = M
hitflag = HA
priority = 5, Hit
pausetime = 6, 6
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10, -55
hitsound = S55,3
guardsound = s66,0
ground.type = High
ground.slidetime = 14
ground.hittime  = 22
ground.velocity = -10
guard.velocity = -3
air.velocity = -2,-4
air.hittime = 8
palfx.time = 25
palfx.add = 112,-88,-255
palfx.color = 0
envshake.time = 12
envshake.ampl = 6; or 7


[State 1000, 1]
type = HitDef
trigger1 = AnimElem = 8
attr = S, SA
damage = 60,6
getpower = 0,0
animtype = Medium
guardflag = M
hitflag = HA
priority = 5, Hit
pausetime = 14, 14
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10, -70
hitsound = S55,1
guardsound = s66,0
ground.type = High
ground.slidetime = 14
ground.hittime  = 22
ground.velocity = -4
guard.velocity = -3
air.velocity = -3,-9
air.hittime = 8
palfx.time = 25
palfx.add = 112,-88,-255
palfx.color = 0
envshake.time = 12
envshake.ampl = 6; or 7
fall = 1



[State 1000, 3]
type = Explod
trigger1 = AnimElem = 8
anim = 1010
pos = 0, 0
postype = P1
bindtime = 1
removetime = 16
sprpriority = 4
removeongethit = 1
ownpal = 1
ignorehitpause = 1


[State 1000, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; P2 Burning
[Statedef 1030]
type = S
movetype = I
physics = N
anim = 1030
sprpriority = 4
ctrl = 0

[State 1030, 2]
type = PosSet
trigger1 = 1
X = Floor(PlayerID(parent,var(0)), Pos X)
Y = Floor(PlayerID(parent,var(0)), Pos Y)

[State 1030, 6]
type = ChangeAnim
trigger1 = Time = 15
value = 1035

[State 1030, 6]
type = DestroySelf
trigger1 = anim = 1035
trigger1 = AnimTime = 0
trigger2 = P2stateno = 0 || (P2stateno = [10, 12]) || P2stateno = 52 || P2stateno = 5040 || (P2stateno = [5201, 5210]) || P2stateno = 5120
trigger3 = EnemyNear, MoveType = A

;---------------------------------------------------------------------------
; P2 Burning Crouch
[Statedef 1031]
type = S
movetype = I
physics = N
anim = 1030
sprpriority = 4
ctrl = 0

[State 1031, 1]
type = PosSet
trigger1 = 1
X = Floor(PlayerID(parent,var(0)), Pos X)
Y = Floor(PlayerID(parent,var(0)), Pos Y)

[State 1031, 2]
type = DestroySelf
trigger1 = Time = 8

;---------------------------------------------------------------------------
; Enryu Haibi 2
[Statedef 1100]
type = S
movetype= A
physics = S
anim = 1100
ctrl = 0
sprpriority = 3
poweradd = 100

[State 1100, 1]
type = PlaySnd
trigger1 = AnimElem = 5
value = 10, 21
channel = 0

[State 1100, 1]
type = PlaySnd
trigger1 = AnimElem = 5
value = 15, 11
channel = 1

[State 1100, 2]
type = Width
trigger1 = AnimElem = 3, >= 0
trigger1 = AnimElem = 4, < 0
trigger2 = AnimElem = 16, >= 0
trigger2 = AnimElem = 17, < 0
value = 20, 0

[State 1100, 2]
type = Width
trigger1 = AnimElem = 4, >= 0
trigger1 = AnimElem = 16, < 0
value = 30, 0

[State 1100, 2]
type = PlayerPush
trigger1 = AnimElem = 4, >= 0
trigger1 = AnimElem = 11, < 0
value = 0

[State 1100, 2]
type = VelSet
trigger1 = AnimElem = 3, >= 0
trigger1 = AnimElem = 12, < 0
x = 12

[State 1100, 3]
type = Explod
trigger1 = AnimElem = 6, = 1
anim = 1120
pos = 0, 0
postype = P1
bindtime = 14
removetime = 19
sprpriority = 4
removeongethit = 1
ownpal = 1
ignorehitpause = 0
trans = add

[State 1100, 1]
type = HitDef
trigger1 = animelem = 13
trigger2 = animelem = 14
attr = S, SA
damage = 60,6
animtype = Hard
guardflag = M
hitflag = HA
priority = 5, Hit
pausetime = 12, 12
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10, IfElse((AnimElem = 4), -67, IfElse((AnimElem = 13), -67, -55))
hitsound = S20, 2
guardsound = s66,0
ground.type = High
ground.slidetime = 18
ground.hittime  = 26
ground.velocity = -5
guard.velocity = -2.5
air.velocity = -3,-9
air.hittime = 8
palfx.time = 33
palfx.add = 112,-88,-255
palfx.color = 0
persistent = 0
fall=1
envshake.time = 12
envshake.ampl = 6; or 7


[State 1100, 3]
type = Explod
trigger1 = AnimElem = 14
anim = 1010
pos = 0, 0
postype = P1
bindtime = 1
removetime = 16
sprpriority = 4
removeongethit = 1
ownpal = 1
ignorehitpause = 1


[State 1100, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; P2 Burning
[Statedef 1130]
type = S
movetype = I
physics = N
anim = 1030
sprpriority = 4
ctrl = 0

[State 1130, 2]
type = PosSet
trigger1 = 1
X = Floor(PlayerID(parent,var(0)), Pos X)
Y = Floor(PlayerID(parent,var(0)), Pos Y)

[State 1130, 6]
type = ChangeAnim
trigger1 = Time = 10
value = 1035

[State 1130, 6]
type = DestroySelf
trigger1 = anim = 1035
trigger1 = AnimTime = 0
trigger2 = P2stateno = 0 || (P2stateno = [10, 12]) || P2stateno = 52 || P2stateno = 5040 || (P2stateno = [5201, 5210]) || P2stateno = 5120
trigger3 = EnemyNear, MoveType = A

;---------------------------------------------------------------------------
; Enryu Haibi Sequence
[Statedef 1200]
type = S
movetype= A
physics = S
anim = 1200
poweradd = 100
ctrl = 0
sprpriority = 3
facep2 = 1

[State 1200, 1]
type = PlaySnd
trigger1 = AnimElem = 10
value = 10, 22
channel = 0

[State 1200, 1]
type = PlaySnd
trigger1 = AnimElem = 12
value = 15, 13
channel = 1

[State 1200, 2]
type = Width
trigger1 = AnimElem = 4, >= 0
trigger1 = AnimElem = 5, < 0
trigger2 = AnimElem = 13, >= 0
trigger2 = AnimElem = 14, < 0
value = 20, 0

[State 1200, 2]
type = Width
trigger1 = AnimElem = 5, >= 0
trigger1 = AnimElem = 13, < 0
value = 30, 0

[State 1200, 2]
type = VelSet
trigger1 = AnimElem = 4, >= 0
trigger1 = AnimElem = 8, < 0
x = 5

[State 1200, 2]
type = VelSet
trigger1 = AnimElem = 8, >= 0
trigger1 = AnimElem = 12, < 0
x = 9

[State 1200, 1]
type = HitDef
trigger1 = AnimElem = 10
attr = S, SA
damage = 120,12
animtype = Back
guardflag = M
hitflag = MA
priority = 5, Hit
pausetime = 10, 10
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10, -80
hitsound = S55,1
guardsound = s66,0
ground.type = High
ground.slidetime = 18
ground.hittime  = 26
ground.velocity = -3, -10
guard.velocity = -2
fall = 1
air.velocity = -3,-10
air.hittime = 8
palfx.time = 70
palfx.add = 112,-88,-255
palfx.color = 0
persistent = 0
envshake.time = 12
envshake.ampl = 6; or 7

[State 1200, 3]
type = Explod
trigger1 = AnimElem = 10
anim = 1210
pos = 0, 0
postype = P1
bindtime = -1
removetime = 32
sprpriority = 4
removeongethit = 1
ownpal = 1
ignorehitpause = 1

[State 1200, 3]
type = Explod
trigger1 = AnimElem = 12, = 0
anim = 1220
pos = 90, -48
postype = P1
bindtime = 1
removetime = 22
sprpriority = 5
removeongethit = 1
ownpal = 1
ignorehitpause = 0

[State 1200, 3]
type = Explod
trigger1 = AnimElem = 12, = 2
anim = 1220
pos = 75, -96
postype = P1
bindtime = 1
removetime = 22
sprpriority = 5
removeongethit = 1
ownpal = 1
ignorehitpause = 0

[State 1200, 3]
type = Explod
trigger1 = AnimElem = 12, = 4
anim = 1220
pos = 140, -82
postype = P1
bindtime = 1
removetime = 22
sprpriority = 5
removeongethit = 1
ownpal = 1
ignorehitpause = 0

[State 1200, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Ryu Tsuisen
[Statedef 1300]
type = S
movetype= A
physics = S
anim = 1300
ctrl = 0
sprpriority = 3
poweradd = 100

[State 1300, 1]
type = PlaySnd
trigger1 = AnimElem = 7
value = 15, 5
channel = 5

[State 1300, 1]
type = PlaySnd
trigger1 = AnimElem = 11
value = 10, 24
channel = 0

[State 1300, 1]
type = PlaySnd
trigger1 = AnimElem = 9
trigger2 = AnimElem = 13
value = 15, 11
channel = 1

[State 1300, 1]
type = PosAdd
trigger1 = 1
x = IfElse((AnimElem = 2 || AnimElem = 3 || AnimElem = 4 || AnimElem = 6), 6, IfElse((AnimElem = 5), 12, 0))

[State 1300, 2]
type = VelSet
trigger1 = AnimElem = 7
x = 3
y = -6

[State 1300, 2]
type = StateTypeSet
trigger1 = AnimElem = 7
statetype = A
physics = A

[State 1300, 3]
type = Explod
trigger1 = AnimElem = 9
anim = 1302
pos = 52, -88
postype = P1
bindtime = 1
removetime = 16
sprpriority = 4
removeongethit = 1
ownpal = 1
ignorehitpause = 1

[State 1300, 3]
type = Explod
trigger1 = AnimElem = 13
anim = 1303
pos = -12, 38
postype = P1
bindtime = 1
removetime = 16
sprpriority = 4
removeongethit = 1
ownpal = 1
ignorehitpause = 1

[State 1300, 1]
type = HitDef
trigger1 = AnimElem = 8 && P2StateType = A
trigger2 = AnimElem = 9 && !MoveHit
trigger3 = AnimElem = 10
trigger4 = AnimElem = 12 && P2StateType = A
attr = S, SA
damage = 13,1
animtype = Medium
guardflag = MA
hitflag = MA
priority = 5, Hit
pausetime = 4, 4
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10, IfElse((AnimElem = 8), -123, IfElse((AnimElem = 9), -70, -10))
hitsound = S20, var(9)
guardsound = s66,0
ground.type = High
ground.slidetime = 14
ground.hittime = 22
ground.velocity = -2.5
guard.velocity = -2
air.velocity = IfElse((AnimElem = 10), -3, -2), IfElse((AnimElem = 10), -10, -9)
airguard.velocity = -5,-5
air.hittime = 48
envshake.time = 12
envshake.ampl = 6; or 7


[State 1300, 2]
type = VelAdd
trigerall = MoveHit
trigger1 = AnimElem = 11, >= 0
trigger1 = AnimElem = 14, < 0
x = -.25

[State 1300, 1]
type = HitDef
trigger1 = AnimElem = 13
attr = S, SA
damage = 13,1
animtype = Medium
guardflag = MA
hitflag = MA
priority = 5, Hit
pausetime = 4, 4
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10, -22
hitsound = S20, var(9)
guardsound = s66,0
ground.type = High
ground.slidetime = 14
ground.hittime  = 22
ground.velocity = -2, -8
guard.velocity = -3
air.velocity = -3,-10
airguard.velocity = -5,-5
air.hittime = 50
fall = 1
fall.recovertime = 30
air.fall = 1
palfx.time = 50
palfx.add = 112,-88,-255
palfx.color = 0
envshake.time = 12
envshake.ampl = 6; or 7


[State 1300, 1]
type = VarSet
trigger1 = AnimElem = 8, >= 0 && MoveContact
trigger1 = command = "a" || command = "b"
trigger1 = !var(10)
var(10) = 1
ignorehitpause = 1


[State 1300, 1]
type = ChangeState
triggerall = P2Life > 0
triggerall = AnimElem = 14, >= 0 && MoveContact
trigger1 = command = "a" || command = "b"
trigger2 = var(10)
value = 1350
ctrl = 0

[State 1300, 3]
type = Gravity
trigger1 = AnimElem = 14, > 0

[State 1300, 2]
type = StateTypeSet
trigger1 = AnimElem = 14
physics = N

[State 1300, 2]
type = ChangeState
trigger1 = vel y > 0
trigger1 = pos y >= -1
value = 1301
ctrl = 0

;---------------------------------------------------------------------------
; Ryu Tsuisen  & Ryu Shousen Land
[Statedef 1301]
type = U
ctrl = 0
anim = 1301

[State 1301, 1]
type = PlaySnd
trigger1 = Time = 0
value = 15, 6
channel = 5

[State 1301, 2]
type = StateTypeSet
trigger1 = Time = 0
statetype = S
movetype = I
physics = S

[State 1301, 3]
type = VelSet
trigger1 = AnimElem = 1
y = 0
x = 0

[State 1301, 4]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 1301, 1]
type = PosAdd
trigger1 = AnimElem = 1
x = 29

[State 1301, 3]
type = MakeDust
trigger1 = AnimElem = 1
pos = 0, 0
spacing = 1



[State 1301, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Ryu Tsuisen & Ryu Shousen Sequence
[Statedef 1350]
type = A
movetype= A
physics = A
anim = 1350
ctrl = 0
velset = 3, -7.5
sprpriority = 3
poweradd = 0

[State 1350, 1]
type = PlaySnd
trigger1 = var(7) = 2
trigger1 = AnimElem = 3
value = 10, 18
channel = 0

[State 1350, 1]
type = PlaySnd
trigger1 = AnimElem = 4
trigger2 = AnimElem = 8
value = 15, 11
channel = 1

[State 1350, 1]
type = VarSet
trigger1 = AnimElem = 1
trigger1 = var(10) = 1
var(10) = 0

[State 1350, 3]
type = VarAdd
triggerall = AnimElem = 3
trigger1 = var(7) = 1
trigger2 = var(7) = 2
var(7) = 1

[State 1350, 3]
type = VarAdd
trigger1 = AnimElem = 4
trigger1 = PrevStateNo = 1300
var(7) = 1

[State 1350, 3]
type = VarAdd
trigger1 = AnimElem = 4
trigger1 = PrevStateNo = 1400
var(7) = 2

[State 1350, 3]
type = Explod
trigger1 = AnimElem = 4
anim = 1302
pos = 52, -88
postype = P1
bindtime = 1
removetime = 16
sprpriority = 4
removeongethit = 1
ownpal = 1
ignorehitpause = 1

[State 1350, 3]
type = Explod
trigger1 = AnimElem = 8
anim = 1303
pos = -12, 38
postype = P1
bindtime = 1
removetime = 16
sprpriority = 4
removeongethit = 1
ownpal = 1
ignorehitpause = 1

[State 1350, 1]
type = HitDef
trigger1 = AnimElem = 4
trigger2 = AnimElem = 5
attr = A, SA
damage = 13,1
animtype = Medium
guardflag = MA
hitflag = MAF
priority = 5, Hit
pausetime = 4, 4
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10, IfElse((AnimElem = 8), -123, IfElse((AnimElem = 9), -70, -10))
hitsound = S20, var(9)
guardsound = s66,0
ground.type = High
ground.slidetime = 14
ground.hittime = 22
ground.velocity = -2.5
guard.velocity = -2
air.velocity = -2, -7.5
airguard.velocity = -5,-5
air.hittime = 48
palfx.time = 50
palfx.add = 112,-88,-255
palfx.color = 0
envshake.time = 12
envshake.ampl = 6; or 7
fall.envshake.time = 20
fall.envshake.ampl = 8

[State 1350, 2]
type = VelAdd
trigger1 = AnimElem = 6, >= 0
trigger1 = AnimElem = 9, < 0
x = -.3

[State 1350, 1]
type = HitDef
trigger1 = AnimElem = 8
attr = A, SA
damage = 13,1
animtype = Medium
guardflag = MA
hitflag = MAF
priority = 5, Hit
pausetime = 4, 4
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10, -22
hitsound = S20, var(9)
guardsound = s66,0
ground.type = High
ground.slidetime = 14
ground.hittime  = 22
ground.velocity = -2, -8
guard.velocity = -3
air.velocity = -3, IfElse((var(7) = 2), 10, -7.5)
airguard.velocity = -5,-5
air.hittime = 50
fall = 1
fall.recovertime = 30
air.fall = 1
palfx.time = 50
palfx.add = 112,-88,-255
palfx.color = 0
envshake.time = 12
envshake.ampl = 6; or 7
fall.envshake.time = 20
fall.envshake.ampl = 8

[State 1350, 1]
type = VarSet
trigger1 = AnimElem = 4, >= 0 && MoveContact
trigger1 = command = "a" || command = "b"
trigger1 = !var(10)
var(10) = 1
ignorehitpause = 1

[State 1350, 1]
type = ChangeState
triggerall = var(7) < 2 && P2Life > 0
triggerall = AnimElem = 9, > 0 && MoveContact
trigger1 = command = "a" || command = "b"
trigger2 = var(10)
value = 1350
ctrl = 0

[State 1350, 3]
type = Gravity
trigger1 = AnimElem = 9, > 0

[State 1350, 2]
type = StateTypeSet
trigger1 = AnimElem = 9
physics = N

[State 1350, 2]
type = ChangeState
trigger1 = vel y > 0
trigger1 = pos y >= -1
value = 1301
ctrl = 0

;---------------------------------------------------------------------------
; P2 Burning
[Statedef 1351]
type = A
movetype = I
physics = N
anim = 1030
sprpriority = 4
ctrl = 0

[State 1351, 2]
type = PosSet
trigger1 = 1
X = Floor(PlayerID(parent,var(0)), Pos X)
Y = Floor(PlayerID(parent,var(0)), Pos Y)

[State 1351, 3]
type = Explod
triggerall = P2stateno = 5100
trigger1 = root, var(7) = 2
trigger2 = root, stateno = 380
anim = 1351
pos = 0, 0
postype = P2
bindtime = 1
removetime = 20
sprpriority = 3
removeongethit = 0
ownpal = 1
persistent = 0

[State 1351, 1]
type = PlaySnd
triggerall = P2stateno = 5100
trigger1 = root, var(7) = 2
trigger2 = numexplod(1351)
value = 15, 9
channel = 1

[State 1351, 6]
type = ChangeAnim
trigger1 = P2stateno = 5100
value = 1035

[State 1351, 6]
type = DestroySelf
trigger1 = anim = 1035
trigger1 = AnimTime = 0
trigger2 = P2stateno = 0 || P2stateno = 52 || P2stateno = 5040 || (P2stateno = [5201, 5210]) || P2stateno = 5120
trigger3 = EnemyNear, MoveType = A

;---------------------------------------------------------------------------
; Ryu Shousen
[Statedef 1400]
type = A
movetype= A
physics = A
anim = 1400
ctrl = 0
sprpriority = 3
poweradd = 100

[State 1400, 1]
type = PlaySnd
trigger1 = AnimElem = 4
trigger2 = AnimElem = 8
value = 15, 11
channel = 1

[State 1400, 3]
type = VelAdd
trigger1 = 1
y = -.3

[State 1400, 3]
type = Explod
trigger1 = AnimElem = 4
anim = 1302
pos = 52, -88
postype = P1
bindtime = 1
removetime = 16
sprpriority = 4
removeongethit = 1
ownpal = 1
ignorehitpause = 1

[State 1400, 3]
type = Explod
trigger1 = AnimElem = 8
anim = 1303
pos = -12, 38
postype = P1
bindtime = 1
removetime = 16
sprpriority = 4
removeongethit = 1
ownpal = 1
ignorehitpause = 1

[State 1400, 1]
type = HitDef
trigger1 = AnimElem = 4
trigger2 = AnimElem = 5
trigger3 = AnimElem = 7
attr = A, SA
damage = 40,4
animtype = Medium
guardflag = MA
hitflag = MAF
priority = 5, Hit
pausetime = 4, 4
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10, IfElse((AnimElem = 8), -123, IfElse((AnimElem = 9), -70, -10))
hitsound = S55,1
guardsound = s66,0
ground.type = High
ground.slidetime = 14
ground.hittime = 22
ground.velocity = -2, -8
guard.velocity = -2
air.velocity = -2, -8
airguard.velocity = -5,-5
air.hittime = 48
fall = 1
air.fall = 1
palfx.time = 50
palfx.add = 112,-88,-255
palfx.color = 0
envshake.time = 12
envshake.ampl = 6; or 7


[State 1400, 1]
type = HitDef
trigger1 = AnimElem = 8
attr = A, SA
damage = 40,4
animtype = Medium
guardflag = MA
hitflag = MAF
priority = 5, Hit
pausetime = 4, 4
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10, -22
hitsound = S55,1
guardsound = s66,0
ground.type = High
ground.slidetime = 14
ground.hittime  = 22
ground.velocity = -2, -8
guard.velocity = -3
air.velocity = -2,-8
airguard.velocity = -5,-5
air.hittime = 50
fall = 1
air.fall = 1
palfx.time = 50
palfx.add = 112,-88,-255
palfx.color = 0
envshake.time = 12
envshake.ampl = 6; or 7




[State 1400, 3]
type = Gravity
trigger1 = AnimElem = 9, > 0

[State 1400, 2]
type = StateTypeSet
trigger1 = AnimElem = 9
physics = N

[State 1400, 3]
type = VelAdd
trigger1 = AnimElem = 9, >= 4
y = .3

[State 1400, 2]
type = ChangeState
trigger1 = vel y > 0
trigger1 = pos y >= -1
value = 1301
ctrl = 0

;---------------------------------------------------------------------------
; Muei Kyaku Try
[Statedef 1500]
type = A
movetype= A
physics = N
anim = 1500
ctrl = 0
velset = 0, 0
sprpriority = 3
poweradd = 100

[State 1500, 1]
type = PlaySnd
trigger1 = AnimElem = 2
value = 10, 20
channel = 0
persistent = 0

[State 1500, 2]
type = PlaySnd
trigger1 = AnimElem = 4
value = 15, 12
channel = 1
persistent = 0

[State 1500, 3]
type = VelSet
trigger1 = Time = 3
x = .5
y = .5

[State 1500, 4]
type = VelMul
trigger1 = Time >= 3
x = 1.175
y = 1.175

[State 1500, 5]
type = HitDef
trigger1 = Time = 0
attr = A, SA
damage = 12,1
animtype = Medium
guardflag = MA
hitflag = MA
priority = 4, Hit
pausetime = 8, 8
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10, -15
hitsound = S55,1
guardsound = s66,0
ground.type = High
ground.slidetime = 12
ground.hittime = 18
ground.velocity = -3
guard.velocity = -4
air.velocity = -3, -9
airguard.velocity = -5,-5
air.hittime = 8
mindist = 30
maxdist = 80
envshake.time = 12
envshake.ampl = 6; or 7


[State 1500, 6]
type = ChangeState
trigger1 = MoveContact
value = 1550

[State 1500, 7]
type = ChangeState
trigger1 = vel y > 0
trigger1 = pos y >= -10
value = 1501
ctrl = 0

;---------------------------------------------------------------------------
; Muei Kyaku Try Land
[Statedef 1501]
type = U
ctrl = 0
anim = 1501

[State 1501, 1]
type = PlaySnd
trigger1 = Time = 0
value = 15, 6
channel = 5

[State 1501, 2]
type = StateTypeSet
trigger1 = Time = 0
statetype = S
movetype = I
physics = S

[State 1501, 3]
type = VelSet
trigger1 = AnimElem = 1
y = 0
x = 0

[State 1501, 4]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 1501, 3]
type = MakeDust
trigger1 = AnimElem = 2
pos = 0, 0
spacing = 1

[State 1501, 1]
type = PosAdd
trigger1 = AnimElem = 2
x = 29

[State 1501, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Muei Kyaku MoveHit Sequence
[Statedef 1550]
type = A
movetype= A
physics = N
anim = 1550
ctrl = 0
velset = 1.25, 2
sprpriority = 3

[State 1550, 1]
type = PlaySnd
trigger1 = AnimElem = 6 || AnimElem = 8
value = 15, 3

[State 1550, 1]
type = HitDef
trigger1 = AnimElem = 5 || AnimElem = 7
attr = A, SA
damage = 12,1
animtype = Medium
guardflag = MA
hitflag = MA
priority = 4, Hit
pausetime = 4, 4
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10, IfElse((AnimElem = 4), -30, -40)
hitsound = S55,1
guardsound = s66,0
ground.type = Low
ground.slidetime = 12
ground.hittime = 18
ground.velocity = -3
guard.velocity = -4
air.velocity = -3, -9
airguard.velocity = -5,-5
air.hittime = 8
envshake.time = 12
envshake.ampl = 6; or 7

[State 1550, 2]
type = ChangeState
trigger1 = vel y > 0
trigger1 = pos y >= 20
value = 1551
ctrl = 0

;---------------------------------------------------------------------------
; Muei Kyaku MoveHit Sequence Land
[Statedef 1551]
type = U
ctrl = 0
anim = 1551

[State 1551, 1]
type = PlaySnd
trigger1 = Time = 0
value = 15, 6
channel = 5

[State 1551, 2]
type = StateTypeSet
trigger1 = Time = 0
statetype = C
movetype = I
physics = C

[State 1551, 3]
type = MakeDust
trigger1 = AnimElem = 2
pos = 20, 0
spacing = 1

[State 1551, 3]
type = VelSet
trigger1 = AnimElem = 2
y = 0
x = 0

[State 1551, 4]
type = PosSet
trigger1 = AnimElem = 2
y = 0

[State 1551, 1]
type = PosAdd
trigger1 = AnimElem = 2
x = 29

[State 1551, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Combo Special A
[Statedef 2000]
type = S
movetype= A
physics = S
ctrl = 0
anim = 2000
sprpriority = 2
poweradd = -3000

[State 2000, 1]
type = PlaySnd
trigger1 = AnimElem >= 7
value = 15, 0
channel = 6
loop = 1

[State 2000, 1]
type = PlaySnd
trigger1 = AnimElem = 2
value = 10, 32
channel = 0

[State 2000, 1]
type = PlaySnd
trigger1 = AnimElem = 1
value = 15, 21
channel = 1

[State 2000, 1]
type = Explod
trigger1 = AnimElem = 1
anim = 2010
pos = 21, -48
facing = 1
postype = P1
bindtime = 1
removetime = 25
sprpriority = 3
removeongethit = 1
ownpal = 1
pausemovetime = 30

[State 2000, 2]
type = Pause
trigger1 = AnimElem = 4
time = 30
movetime = 30

[State 2000, 2]
type = Explod
trigger1 = AnimElem = 4
anim = 2020
pos = 0, 0
facing = 1
postype = Left
scale = 1.05263, 1.07142
bindtime = -1
removetime = 30
sprpriority = -5
removeongethit = 1
ownpal = 1
ignorehitpause = 1
pausemovetime = 30

[State 2000, 3]
type = AssertSpecial
trigger1 = AnimElem = 4, >= 0
trigger1 = AnimElem = 4, <= 30
flag = nobg
flag2 = nofg
ignorehitpause = 1

[State 2000, 4]
type = PalFX
trigger1 = AnimElem = 1, => 2 + (Time % 2)
time = 1
add = -255, -255, 255
ignorehitpause = 1

[State 2000, 5]
type = AfterImage
trigger1 = AnimElem = 1, => 2
time = 107
length = 2
paladd = -255, -255, 255
palbright = 1,1,255
palcontrast = 1,1,255
timeGap = 3
frameGap = 1
ignorehitpause = 1

[State 2000, 6]
type = PosAdd
trigger1 = 1
x = IfElse((AnimElem = 3), 15, IfElse((AnimElem = 5), -15, IfElse((AnimElem = 6), 40, 0)))

[State 2000, 7]
type = VelSet
trigger1 = AnimElem = 7, >= 0
trigger1 = AnimElem = 12, <= 1
x = 8.75

[State 2000, 1]
type = HitDef
trigger1 = Time = 0
attr = S, HA
damage = 0, 0
getpower = 0, 0
givepower = 0, 0
animtype = Light
guardflag = H
hitflag = MA
priority = 5, Hit
pausetime = 0, 0
ground.type = High
ground.hittime = 12
forcestand = 1
numhits = 0
p1stateno = 2001
p2stateno = 2010
envshake.time = 12
envshake.ampl = 6; or 7
fall.envshake.time = 20
fall.envshake.ampl = 8

[State 2000, 8]
type = ChangeState
type = ChangeState
trigger1 = AnimTime = 0
value = 2001

;---------------------------------------------------------------------------
; Combo Special A - 1st hit
[Statedef 2001]
type = S
movetype= A
physics = S
ctrl = 0
anim = 2001
sprpriority = 2

[State 2001, 1]
type = PlaySnd
trigger1 = AnimElem = 7
value = 0, var(2)
channel = 0

[State 2001, 1]
type = PlaySnd
trigger1 = AnimElem = 6
value = 15, 1
channel = 1

[State 2001, 4]
type = PalFX
trigger1 = AnimElem = 1 + (Time % 2)
time = 1
add = -255, -255, 255
ignorehitpause = 1

[State 2001, 5]
type = AfterImage
trigger1 = AnimElem = 1
time = 34
length = 2
paladd = -255, -255, 255
palbright = 1,1,255
palcontrast = 1,1,255
timeGap = 3
frameGap = 1
ignorehitpause = 1

[State 2001, 2]
type = VelSet
trigger1 = AnimElem = 1
x = 5

[State 2001, 1]
type = HitDef
trigger1 = AnimElem = 8
attr = S, HA
damage = IfElse(var(58) = 2, 57, 66), 6
getpower = 0, 0
givepower = 94, 0
animtype = Medium
guardflag = M
hitflag = MAF
priority = 3, Hit
pausetime = 8, 8
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10, -90
hitsound = S20, var(9)
guardsound = s66,0
ground.type = High
ground.slidetime = 12
ground.hittime = 20
ground.velocity = -3
guard.velocity = -2
air.velocity = -3,-9
air.hittime = 8
forcestand = 1
envshake.time = 12
envshake.ampl = 6; or 7
fall.envshake.time = 20
fall.envshake.ampl = 8

[State 2001, 7]
type = Explod
trigger1 = MoveHit
anim = 2030
pos = 0, 0
scale = 1.05263, 1.07142
facing = 1
postype = Left
bindtime = -1
removetime = 3
sprpriority = -5
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 2001, 8]
type = ChangeState
trigger1 = AnimTime = 0
value = 2100

;[State 2001, 9]
;type = ChangeState
;trigger1 = AnimTime = 0
;value = 0
;ctrl = 1

;---------------------------------------------------------------------------
; Combo Special P2 in air
[Statedef 2010]
type = S
movetype= A
physics = S
ctrl = 0
sprpriority = 2

[State 2010, 1]
type = ChangeAnim
trigger1 = Time = 0
value = 5002

[State 2010, 3]
type = VelSet
trigger1 = AnimElem = 1
y = 0
x = 0

[State 2010, 4]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 2010, 9]
type = SelfState
trigger1 = Time = 30
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Combo Special B
[Statedef 2050]
type = S
movetype= A
physics = S
ctrl = 0
anim = 2000
sprpriority = 2
poweradd = -3000

[State 2050, 1]
type = PlaySnd
trigger1 = AnimElem >= 7
value = 15, 0
channel = 6
loop = 1

[State 2050, 1]
type = PlaySnd
trigger1 = AnimElem = 2
value = 10, 32
channel = 0

[State 2050, 1]
type = PlaySnd
trigger1 = AnimElem = 1
value = 15, 21
channel = 1

[State 2050, 1]
type = Explod
trigger1 = AnimElem = 1
anim = 2010
pos = 21, -48
facing = 1
postype = P1
bindtime = 1
removetime = 25
sprpriority = 3
removeongethit = 1
ownpal = 1
pausemovetime = 30

[State 2050, 2]
type = Pause
trigger1 = AnimElem = 4
time = 30
movetime = 30

[State 2050, 2]
type = Explod
trigger1 = AnimElem = 4
anim = 2020
pos = 0, 0
facing = 1
postype = Left
scale = 1.05263, 1.07142
bindtime = -1
removetime = 30
sprpriority = -5
removeongethit = 1
ownpal = 1
ignorehitpause = 1
pausemovetime = 30

[State 2050, 3]
type = AssertSpecial
trigger1 = AnimElem = 4, >= 0
trigger1 = AnimElem = 4, <= 30
flag = nobg
flag2 = nofg
ignorehitpause = 1

[State 2050, 4]
type = PalFX
trigger1 = AnimElem = 1, => 2 + (Time % 2)
time = 1
add = -255, -255, 255
ignorehitpause = 1

[State 2050, 5]
type = AfterImage
trigger1 = AnimElem = 1, => 2
time = 107
length = 2
paladd = -255, -255, 255
palbright = 1,1,255
palcontrast = 1,1,255
timeGap = 3
frameGap = 1
ignorehitpause = 1

[State 2050, 6]
type = PosAdd
trigger1 = 1
x = IfElse((AnimElem = 3), 15, IfElse((AnimElem = 5), -15, IfElse((AnimElem = 6), 40, 0)))

[State 2050, 7]
type = VelSet
trigger1 = AnimElem = 7, >= 0
trigger1 = AnimElem = 12, <= 1
x = 8.75

[State 2050, 1]
type = HitDef
trigger1 = Time = 0
attr = S, HA
damage = 0, 0
getpower = 0, 0
givepower = 0, 0
animtype = Light
guardflag = L
hitflag = MA
priority = 5, Hit
pausetime = 0, 0
ground.type = High
ground.hittime = 12
forcestand = 1
numhits = 0
p1stateno = 2051
p2stateno = 2010
envshake.time = 12
envshake.ampl = 6; or 7
fall.envshake.time = 20
fall.envshake.ampl = 8

[State 2050, 8]
type = ChangeState
trigger1 = MoveContact
trigger2 = Time = 107
value = 2051
ctrl = 0

;---------------------------------------------------------------------------
; Combo Special B - 1st hit
[Statedef 2051]
type = S
movetype= A
physics = S
ctrl = 0
anim = 400
sprpriority = 2

[State 2051, 1]
type = PlaySnd
trigger1 = AnimElem = 3
value = 0, var(2)
channel = 0

[State 2051, 1]
type = PlaySnd
trigger1 = AnimElem = 3
value = 15, 2
channel = 1

[State 2051, 4]
type = PalFX
trigger1 = AnimElem = 1 + (Time % 2)
time = 1
add = -255, -255, 255
ignorehitpause = 1

[State 2051, 5]
type = AfterImage
trigger1 = AnimElem = 1
time = 23
length = 2
paladd = -255, -255, 255
palbright = 1,1,255
palcontrast = 1,1,255
timeGap = 3
frameGap = 1
ignorehitpause = 1

[State 2051, 2]
type = VelSet
trigger1 = AnimElem = 1
x = 5

[State 2051, 3]
type = Width
trigger1 = AnimElem = 3, >= 0
trigger1 = AnimElem = 4, < 0
trigger2 = AnimElem = 6, >= 0
trigger2 = AnimElem = 7, < 0
value = 10, 0

[State 2051, 3]
type = Width
trigger1 = AnimElem = 4, >= 0
trigger1 = AnimElem = 6, < 0
value = 20, 0

[State 2051, 1]
type = HitDef
trigger1 = AnimElem = 4
attr = C, HA
damage = IfElse(var(58) = 2, 57, 66), 6
getpower = 0, 0
givepower = 94, 0
animtype = Light
guardflag = L
hitflag = M
priority = 3, Hit
pausetime = 8, 8
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10, -25
hitsound = S20, var(9)
guardsound = s66,0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 20
ground.velocity = -3
guard.velocity = -2
air.velocity = -3,-9
air.hittime = 8
forcestand = 1
envshake.time = 12
envshake.ampl = 6; or 7
fall.envshake.time = 20
fall.envshake.ampl = 8

[State 2051, 7]
type = Explod
trigger1 = MoveHit
anim = 2030
pos = 0, 0
scale = 1.05263, 1.07142
facing = 1
postype = Left
bindtime = -1
removetime = 3
sprpriority = -5
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 2051, 8]
type = ChangeState
triggerall = AnimElem = 6, < 0
trigger1 = MoveContact && command = "x"
value = 2100
ctrl = 0

[State 2051, 9]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; Combo Special A1 - (1, 2, 3 & 4)
[Statedef 2100]
type = S
movetype= A
physics = S
ctrl = 0
anim = 2100
sprpriority = 2

[State 2100, 1]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, var(2)
channel = 0

[State 2100, 1]
type = PlaySnd
trigger1 = AnimElem = 2
value = 15, 2
channel = 1

[State 2100, 4]
type = PalFX
trigger1 = AnimElem = 1 + (Time % 2)
time = 1
add = -255, -255, 255
ignorehitpause = 1

[State 2100, 5]
type = AfterImage
trigger1 = AnimElem = 1
time = 27
length = 2
paladd = -255, -255, 255
palbright = 1,1,255
palcontrast = 1,1,255
timeGap = 3
frameGap = 1
ignorehitpause = 1

[State 2100, 2]
type = VelSet
trigger1 = AnimElem = 1 || AnimElem = 2
x = 4

[State 2100, 3]
type = HitDef
trigger1 = AnimElem = 3
attr = S, HA
damage = IfElse(var(58) = 2, 27, 33), 3
getpower = 0, 0
givepower = 0, 0
animtype = Light
guardflag = M
hitflag = MAF
priority = 3, Hit
pausetime = 12, 12
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10, -90
hitsound = S20, var(9)
guardsound = s66,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 20
ground.velocity = -3
guard.velocity = -2
envshake.time = 12
envshake.ampl = 6; or 7
fall.envshake.time = 20
fall.envshake.ampl = 8

[State 2100, 7]
type = Explod
trigger1 = MoveHit
anim = 2030
pos = 0, 0
scale = 1.05263, 1.07142
facing = 1
postype = Left
bindtime = -1
removetime = 3
sprpriority = -5
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 2100, 8]
type = ChangeState
trigger1 = AnimTime = 0
value = 2125

;[State 2100, 9]
;type = ChangeState
;trigger1 = AnimTime = 0
;value = 0
;ctrl = 1

;---------------------------------------------------------------------------
; Combo Special B1 - (1, 2, 3 & 4)
[Statedef 2125]
type = S
movetype= A
physics = S
ctrl = 0
anim = 2125
sprpriority = 2

[State 2125, 1]
type = PlaySnd
trigger1 = AnimElem = 3
value = 0, var(2)
channel = 0

[State 2125, 1]
type = PlaySnd
trigger1 = AnimElem = 3
value = 15, 2
channel = 1

[State 2125, 4]
type = PalFX
trigger1 = AnimElem = 1 + (Time % 2)
time = 1
add = -255, -255, 255
ignorehitpause = 1

[State 2125, 5]
type = AfterImage
trigger1 = AnimElem = 1
time = 32
length = 2
paladd = -255, -255, 255
palbright = 1,1,255
palcontrast = 1,1,255
timeGap = 3
frameGap = 1
ignorehitpause = 1

[State 2125, 2]
type = VelSet
trigger1 = AnimElem = 5
x = 4

[State 2125, 3]
type = Width
trigger1 = AnimElem = 2, >= 0
trigger1 = AnimElem = 3, < 0
value = 10, 0

[State 2125, 3]
type = Width
trigger1 = AnimElem = 3, >= 0
trigger1 = AnimElem = 7, < 0
value = 20, 0

[State 2125, 1]
type = HitDef
trigger1 = AnimElem = 4
attr = S, HA
damage = IfElse(var(58) = 2, 27, 33), 3
getpower = 0, 0
givepower = 0, 0
animtype = Light
guardflag = M
hitflag = MAF
priority = 3, Hit
pausetime = 12, 12
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10, -80
hitsound = S20, var(9)
guardsound = s66,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 20
ground.velocity = -3
guard.velocity = -2
envshake.time = 12
envshake.ampl = 6; or 7
fall.envshake.time = 20
fall.envshake.ampl = 8

[State 2125, 7]
type = Explod
trigger1 = MoveHit
anim = 2030
pos = 0, 0
scale = 1.05263, 1.07142
facing = 1
postype = Left
bindtime = -1
removetime = 3
sprpriority = -5
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 2125, 8]
type = ChangeState
trigger1 = AnimTime = 0
value = 2150


;[State 2125, 9]
;type = ChangeState
;trigger1 = AnimTime = 0
;value = 0
;ctrl = 1

;---------------------------------------------------------------------------
; Combo Special C1 - (1, 2, 3 & 4)
[Statedef 2150]
type = S
movetype= A
physics = S
ctrl = 0
anim = 2150
sprpriority = 2

[State 2150, 1]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, var(2)
channel = 0

[State 2150, 1]
type = PlaySnd
trigger1 = AnimElem = 2
value = 15, 3
channel = 1

[State 2150, 4]
type = PalFX
trigger1 = AnimElem = 1 + (Time % 2)
time = 1
add = -255, -255, 255
ignorehitpause = 1

[State 2150, 5]
type = AfterImage
trigger1 = AnimElem = 1
time = 36
length = 2
paladd = -255, -255, 255
palbright = 1,1,255
palcontrast = 1,1,255
timeGap = 3
frameGap = 1
ignorehitpause = 1

[State 2150, 2]
type = VelSet
trigger1 = AnimElem = 4
x = 4

[State 2150, 3]
type = Width
trigger1 = AnimElem = 1, >= 0
trigger1 = AnimElem = 2, < 0
value = 10, 0

[State 2150, 3]
type = Width
trigger1 = AnimElem = 2, >= 0
trigger1 = AnimElem = 7, < 0
value = 20, 0

[State 2150, 1]
type = HitDef
trigger1 = AnimElem = 3
attr = S, HA
damage = IfElse(var(58) = 2, 27, 33), 3
getpower = 0, 0
givepower = 0, 0
animtype = Light
guardflag = M
hitflag = MAF
priority = 3, Hit
pausetime = 12, 12
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10, -56
hitsound = S20, var(9)
guardsound = s66,0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 20
ground.velocity = -3
guard.velocity = -2
envshake.time = 12
envshake.ampl = 6; or 7
fall.envshake.time = 20
fall.envshake.ampl = 8

[State 2150, 7]
type = Explod
trigger1 = MoveHit
anim = 2030
pos = 0, 0
scale = 1.05263, 1.07142
facing = 1
postype = Left
bindtime = -1
removetime = 3
sprpriority = -5
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 2150, 8]
type = ChangeState
trigger1 = AnimTime = 0
value = 2175


;[State 2150, 8]
;type = ChangeState
;triggerall = AnimElem = 4, < 7
;trigger1 = MoveContact && command = "a" && command = "holddown"
;value = 2425
;ctrl = 0

;[State 2150, 9]
;type = ChangeState
;trigger1 = AnimTime = 0
;value = 0
;ctrl = 1

;---------------------------------------------------------------------------
; Combo Special A2 - (1 & 2)
[Statedef 2175]
type = S
movetype= A
physics = S
ctrl = 0
anim = 2175
sprpriority = 2

[State 2175, 1]
type = PlaySnd
trigger1 = AnimElem = 11
value = 0, var(2)
channel = 0

[State 2175, 1]
type = PlaySnd
trigger1 = AnimElem = 11
value = 15, 3
channel = 1

[State 2175, 4]
type = PalFX
trigger1 = AnimElem = 1 + (Time % 2)
time = 1
add = -255, -255, 255
ignorehitpause = 1

[State 2175, 5]
type = AfterImage
trigger1 = AnimElem = 1
time = 50
length = 2
paladd = -255, -255, 255
palbright = 1,1,255
palcontrast = 1,1,255
timeGap = 3
frameGap = 1
ignorehitpause = 1

[State 2175, 2]
type = VelSet
trigger1 = AnimElem = 11
x = 4

[State 2175, 3]
type = Width
trigger1 = AnimElem = 11, >= 0
trigger1 = AnimElem = 16, < 0
value = 30, 0

[State 2175, 3]
type = Width
trigger1 = AnimElem = 16, >= 0
trigger1 = AnimElem = 17, < 0
value = 20, 0

[State 2175, 1]
type = HitDef
trigger1 = AnimElem = 11
attr = S, HA
damage = IfElse(var(58) = 2, 42, 48), 6
getpower = 0, 0
givepower = 0, 0
animtype = Hard
guardflag = M
hitflag = MAF
priority = 3, Hit
pausetime = 12, 12
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10, -65
hitsound = S20, var(9)
guardsound = s66,0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 20
ground.velocity = -3
guard.velocity = -2
envshake.time = 12
envshake.ampl = 6; or 7
fall.envshake.time = 20
fall.envshake.ampl = 8

[State 2175, 7]
type = Explod
trigger1 = MoveHit
anim = 2030
pos = 0, 0
scale = 1.05263, 1.07142
facing = 1
postype = Left
bindtime = -1
removetime = 3
sprpriority = -5
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 2175, 8]
type = ChangeState
trigger1 = AnimTime = 0
value = 2200


;[State 2175, 9]
;type = ChangeState
;trigger1 = AnimTime = 0
;value = 0
;ctrl = 1

;---------------------------------------------------------------------------
; Combo Special B2 - (1 & 2)
[Statedef 2200]
type = S
movetype= A
physics = S
ctrl = 0
anim = 2200
sprpriority = 2

[State 2200, 1]
type = PlaySnd
trigger1 = AnimElem = 4
value = 0, var(2)
channel = 0

[State 2200, 1]
type = PlaySnd
trigger1 = AnimElem = 4
value = 15, 3
channel = 1

[State 2200, 4]
type = PalFX
trigger1 = AnimElem = 1 + (Time % 2)
time = 1
add = -255, -255, 255
ignorehitpause = 1

[State 2200, 5]
type = AfterImage
trigger1 = AnimElem = 1
time = 36
length = 2
paladd = -255, -255, 255
palbright = 1,1,255
palcontrast = 1,1,255
timeGap = 3
frameGap = 1
ignorehitpause = 1

[State 2200, 2]
type = VelSet
trigger1 = AnimElem = 2
x = 4

[State 2200, 1]
type = HitDef
trigger1 = AnimElem = 4
attr = S, HA
damage = IfElse(var(58) = 2, 33, 39), 3
getpower = 0, 0
givepower = 0, 0
animtype = Light
guardflag = L
hitflag = M
priority = 3, Hit
pausetime = 12, 12
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10, -5
hitsound = S20, var(9)
guardsound = s66,0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 20
ground.velocity = -3
guard.velocity = -2
envshake.time = 12
envshake.ampl = 6; or 7
fall.envshake.time = 20
fall.envshake.ampl = 8

[State 2200, 7]
type = Explod
trigger1 = MoveHit
anim = 2030
pos = 0, 0
scale = 1.05263, 1.07142
facing = 1
postype = Left
bindtime = -1
removetime = 3
sprpriority = -5
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 2200, 8]
type = ChangeState
trigger1 = AnimTime = 0
value = 2225


;[State 2200, 9]
;type = ChangeState
;trigger1 = AnimTime = 0
;value = 0
;ctrl = 1

;---------------------------------------------------------------------------
; Combo Special C2 - (1 & 2)
[Statedef 2225]
type = S
movetype= A
physics = S
ctrl = 0
anim = 2225
sprpriority = 2

[State 2225, 1]
type = PlaySnd
trigger1 = AnimElem = 4
value = 0, var(2)
channel = 0

[State 2225, 1]
type = PlaySnd
trigger1 = AnimElem = 4
value = 15, 4
channel = 1

[State 2225, 4]
type = PalFX
trigger1 = AnimElem = 1 + (Time % 2)
time = 1
add = -255, -255, 255
ignorehitpause = 1

[State 2225, 5]
type = AfterImage
trigger1 = AnimElem = 1
time = 38
length = 2
paladd = -255, -255, 255
palbright = 1,1,255
palcontrast = 1,1,255
timeGap = 3
frameGap = 1
ignorehitpause = 1

[State 2225, 2]
type = VelSet
trigger1 = AnimElem = 1
x = 4

[State 2225, 1]
type = PosAdd
trigger1 = AnimElem = 2
x = 25

[State 2225, 1]
type = PosAdd
trigger1 = AnimElem = 9
x = -25

[State 2225, 1]
type = HitDef
trigger1 = AnimElem = 4
attr = S, HA
damage = IfElse(var(58) = 2, 33, 39), 3
getpower = 0, 0
givepower = 0, 0
animtype = Medium
guardflag = M
hitflag = MAF
priority = 3, Hit
pausetime = 12, 12
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10, -67
hitsound = S20, var(9)
guardsound = s66,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 20
ground.velocity = -3
guard.velocity = -2
envshake.time = 12
envshake.ampl = 6; or 7
fall.envshake.time = 20
fall.envshake.ampl = 8

[State 2225, 7]
type = Explod
trigger1 = MoveHit
anim = 2030
pos = 0, 0
scale = 1.05263, 1.07142
facing = 1
postype = Left
bindtime = -1
removetime = 3
sprpriority = -5
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 2225, 8]
type = ChangeState
trigger1 = AnimTime = 0
value = 2250

;[State 2225, 8]
;type = ChangeState
;triggerall = AnimElem = 6, < 0
;trigger1 = MoveContact && command = "a"
;value = 2325
;ctrl = 0

;[State 2225, 9]
;type = ChangeState
;trigger1 = AnimTime = 0
;value = 0
;ctrl = 1

;---------------------------------------------------------------------------
; Combo Special A3 - (1)
[Statedef 2250]
type = S
movetype= A
physics = S
ctrl = 0
anim = 2250
sprpriority = 2

[State 2250, 1]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, var(2)
channel = 0

[State 2250, 1]
type = PlaySnd
trigger1 = AnimElem = 2
value = 15, 3
channel = 1

[State 2250, 4]
type = PalFX
trigger1 = AnimElem = 1 + (Time % 2)
time = 1
add = -255, -255, 255
ignorehitpause = 1

[State 2250, 5]
type = AfterImage
trigger1 = AnimElem = 1
time = 36
length = 2
paladd = -255, -255, 255
palbright = 1,1,255
palcontrast = 1,1,255
timeGap = 3
frameGap = 1
ignorehitpause = 1

[State 2250, 2]
type = VelSet
trigger1 = AnimElem = 1
x = 4

[State 2250, 1]
type = PosAdd
trigger1 = AnimElem = 3
x = 20

[State 2250, 1]
type = PosAdd
trigger1 = AnimElem = 8
x = -20

[State 2250, 1]
type = HitDef
trigger1 = AnimElem = 4
attr = S, HA
damage = IfElse(var(58) = 2, 33, 39), 3
getpower = 0, 0
givepower = 0, 0
animtype = Medium
guardflag = M
hitflag = MAF
priority = 3, Hit
pausetime = 12, 12
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10, -90
hitsound = S20, var(9)
guardsound = s66,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 20
ground.velocity = -3
guard.velocity = -2
envshake.time = 12
envshake.ampl = 6; or 7
fall.envshake.time = 20
fall.envshake.ampl = 8

[State 2250, 7]
type = Explod
trigger1 = MoveHit
anim = 2030
pos = 0, 0
scale = 1.05263, 1.07142
facing = 1
postype = Left
bindtime = -1
removetime = 3
sprpriority = -5
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 2250, 8]
type = ChangeState
trigger1 = AnimTime = 0
value = 2275

;[State 2250, 9]
;type = ChangeState
;trigger1 = AnimTime = 0
;value = 0
;ctrl = 1

;---------------------------------------------------------------------------
; Combo Special B3 - (1)
[Statedef 2275]
type = S
movetype= A
physics = S
ctrl = 0
anim = 2275
sprpriority = 2

[State 2275, 1]
type = PlaySnd
trigger1 = AnimElem = 4
value = 0, var(2)
channel = 0

[State 2275, 1]
type = PlaySnd
trigger1 = AnimElem = 4
value = 15, 4
channel = 1

[State 2275, 1]
type = PlaySnd
trigger1 = AnimElem = 11
value = 15, 3
channel = 1

[State 2275, 4]
type = PalFX
trigger1 = AnimElem = 1 + (Time % 2)
time = 1
add = -255, -255, 255
ignorehitpause = 1

[State 2275, 5]
type = AfterImage
trigger1 = AnimElem = 1
time = 36
length = 2
paladd = -255, -255, 255
palbright = 1,1,255
palcontrast = 1,1,255
timeGap = 3
frameGap = 1
ignorehitpause = 1

[State 2275, 2]
type = VelSet
trigger1 = AnimElem = 1
x = 4

[State 2275, 1]
type = PosAdd
trigger1 = 1
x = IfElse((AnimElem = 2) || (AnimElem = 6) || (AnimElem = 9), 5, IfElse((AnimElem = 3), 21, IfElse((AnimElem = 11), 12, IfElse((AnimElem = 13), 28, 0))))

[State 2275, 1]
type = HitDef
trigger1 = AnimElem = 5
attr = S, HA
damage = IfElse(var(58) = 2, 33, 39), 3
getpower = 0, 0
givepower = 0, 0
animtype = Medium
guardflag = M
hitflag = MAF
priority = 3, Hit
pausetime = 12, 12
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10, -105
hitsound = S20, var(9)
guardsound = s66,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 20
ground.velocity = -3
guard.velocity = -2
envshake.time = 12
envshake.ampl = 6; or 7
fall.envshake.time = 20
fall.envshake.ampl = 8

[State 2275, 2]
type = HitDef
trigger1 = AnimElem = 12
attr = S, HA
damage = IfElse(var(58) = 2, 21, 24), 3
getpower = 0, 0
givepower = 0, 0
animtype = Medium
guardflag = M
hitflag = MAF
priority = 3, Hit
pausetime = 12, 12
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10, -85
hitsound = S20, var(9)
guardsound = s66,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 20
ground.velocity = -3
guard.velocity = -2
envshake.time = 12
envshake.ampl = 6; or 7
fall.envshake.time = 20
fall.envshake.ampl = 8

[State 2275, 7]
type = Explod
triggerall = MoveHit
trigger1 = AnimElem = 5 || AnimElem = 12
anim = 2030
pos = 0, 0
scale = 1.05263, 1.07142
facing = 1
postype = Left
bindtime = -1
removetime = 3
sprpriority = -5
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 2275, 8]
type = ChangeState
trigger1 = AnimTime = 0
value = 2300


;[State 2275, 9]
;type = ChangeState
;trigger1 = AnimTime = 0
;value = 0
;ctrl = 1

;---------------------------------------------------------------------------
; Combo Special "MueiKyaku" - (1, end)
[Statedef 2300]
type = S
movetype= A
physics = S
ctrl = 0
anim = 2300
sprpriority = 2

[State 2300, 1]
type = PlaySnd
trigger1 = AnimElem = 4
value = 10, 19
channel = 0

[State 2300, 1]
type = PlaySnd
trigger1 = AnimElem = 6
value = 15, 11
channel = 1

[State 2300, 4]
type = PalFX
trigger1 = AnimElem = 1 + (Time % 2)
time = 1
add = -255, -255, 255
ignorehitpause = 1

[State 2300, 5]
type = AfterImage
trigger1 = AnimElem = 1
time = 42
length = 2
paladd = -255, -255, 255
palbright = 1,1,255
palcontrast = 1,1,255
timeGap = 3
frameGap = 1
ignorehitpause = 1

[State 2300, 4]
type = PosAdd
trigger1 = AnimElem = 1
x = 15

[State 2300, 4]
type = StateTypeSet
trigger1 = AnimElem = 4
statetype = A
movetype= A
physics = A

[State 2300, 5]
type = VelSet
trigger1 = AnimElem = 4
y = const(velocity.jump.y)

[State 2300, 5]
type = VelSet
trigger1 = AnimElem = 8
x = -.5

[State 2300, 1]
type = HitDef
trigger1 = AnimElem = 4
trigger2 = AnimElem = 5
trigger3 = AnimElem = 7
attr = S, HA
damage = IfElse(var(58) = 2, 15, 18), 1
getpower = 0, 0
givepower = 0, 0
animtype = Medium
guardflag = MA
hitflag = MAFD
priority = 3, Hit
pausetime = 6, 2
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10, -75
hitsound = S20, 6 + (Random > 333) + (Random > 666)
guardsound = s66,0
ground.type = High
ground.velocity = 0, -12
guard.velocity = -3
fall = 1
air.velocity = 0,-6
airguard.velocity = -5,-5
air.fall = 1
palfx.time = 61
palfx.add = 112,-88,-255
palfx.color = 0
envshake.time = 12
envshake.ampl = 6; or 7
fall.envshake.time = 20
fall.envshake.ampl = 8

[State 2300, 1]
type = HitDef
trigger1 = AnimElem = 8
attr = S, HA
damage = IfElse(var(58) = 2, 33, 39), 3
getpower = 0, 0
givepower = 0, 0
animtype = Medium
guardflag = MA
hitflag = MAFD
priority = 3, Hit
pausetime = 6, 2
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10, -75
hitsound = S20, 6 + (Random > 333) + (Random > 666)
guardsound = s66,0
ground.type = High
ground.velocity = 0, -12
guard.velocity = -3
fall = 1
air.velocity = -2,-6.5
airguard.velocity = -5,-5
air.fall = 1
palfx.time = 54
palfx.add = 112,-88,-255
palfx.color = 0
envshake.time = 12
envshake.ampl = 6; or 7
fall.envshake.time = 20
fall.envshake.ampl = 8

[State 2300, 7]
type = Explod
trigger1 = MoveHit
anim = 2030
pos = 0, 0
scale = 1.05263, 1.07142
facing = 1
postype = Left
bindtime = -1
removetime = 3
sprpriority = -5
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 2300, 1]
type = VelAdd
trigger1 = AnimElem = 10
y = -2
x = -.5

[State 2300, 1]
type = VarSet
trigger1 = MoveHit
trigger1 = !var(0)
var(0) = EnemyNear, ID
ignorehitpause = 1

[State 2300, 1]
type = Helper
trigger1 = MoveHit
name = "Flammes"
postype = P2
pos = 0, 0
Facing = -1
ID = 1000
stateno = 1351
ownpal = 1
persistent = 0
ignorehitpause = 1

[State 2300, 4]
type = PosAdd
trigger1 = AnimElem = 13
x = -15

;---------------------------------------------------------------------------
; Combo Special C3 - (2)
[Statedef 2325]
type = S
movetype= A
physics = S
ctrl = 0
anim = 2325
sprpriority = 2

[State 2325, 1]
type = PlaySnd
trigger1 = AnimElem = 5
value = 0, var(2)
channel = 0

[State 2325, 1]
type = PlaySnd
trigger1 = AnimElem = 8 || AnimElem = 10
value = 15, 3
channel = 1

[State 2325, 4]
type = PalFX
trigger1 = AnimElem = 1 + (Time % 2)
time = 1
add = -255, -255, 255
ignorehitpause = 1

[State 2325, 5]
type = AfterImage
trigger1 = AnimElem = 1
time = 60
length = 2
paladd = -255, -255, 255
palbright = 1,1,255
palcontrast = 1,1,255
timeGap = 3
frameGap = 1
ignorehitpause = 1

[State 2325, 2]
type = VelSet
trigger1 = AnimElem = 1
x = 1
y = -2

[State 2325, 2]
type = StateTypeSet
trigger1 = Time = 0
statetype = A
physics = N

[State 2325, 2]
type = VelSet
trigger1 = Time >= 10
x = 1
y = 1.5

[State 2325, 1]
type = HitDef
trigger1 = AnimElem = 7 || AnimElem = 9
attr = A, HA
damage = IfElse(var(58) = 2, 24, 27), 3
getpower = 0, 0
givepower = 0, 0
animtype = Medium
guardflag = MA
hitflag = MA
priority = 4, Hit
pausetime = 6, 6
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10, IfElse((AnimElem = 4), -30, -40)
hitsound = S20, var(9)
guardsound = s66,0
ground.type = Low
ground.slidetime = 18
ground.hittime = 24
ground.velocity = -3
guard.velocity = -2
envshake.time = 12
envshake.ampl = 6; or 7
fall.envshake.time = 20
fall.envshake.ampl = 8

[State 2325, 7]
type = Explod
triggerall = MoveHit
trigger1 = AnimElem = 7 || AnimElem = 9
anim = 2030
pos = 0, 0
scale = 1.05263, 1.07142
facing = 1
postype = Left
bindtime = -1
removetime = 3
sprpriority = -5
ownpal = 1
ignorehitpause = 1

[State 2325, 8]
type = ChangeState
triggerall = vel y > 0
triggerall = pos y >= 20
trigger1 = MoveContact && command = "y"
value = 2350
ctrl = 0

[State 2325, 9]
type = ChangeState
trigger1 = vel y > 0
trigger1 = pos y >= 20
value = 2326
ctrl = 0

;---------------------------------------------------------------------------
; Combo Special C3 Land - (2)
[Statedef 2326]
type = U
ctrl = 0
anim = 2326

[State 2326, 1]
type = PlaySnd
trigger1 = Time = 0
value = 15, 6
channel = 5

[State 2326, 2]
type = StateTypeSet
trigger1 = Time = 0
statetype = C
movetype = I
physics = C

[State 2326, 4]
type = PalFX
trigger1 = AnimElem = 1 + (Time % 2)
time = 1
add = -255, -255, 255
ignorehitpause = 1

[State 2326, 5]
type = AfterImage
trigger1 = AnimElem = 1
time = 29
length = 2
paladd = -255, -255, 255
palbright = 1,1,255
palcontrast = 1,1,255
timeGap = 3
frameGap = 1
ignorehitpause = 1

[State 2326, 3]
type = VelSet
trigger1 = AnimElem = 2
y = 0
x = 3

[State 2326, 4]
type = PosSet
trigger1 = AnimElem = 2
y = 0

[State 2326, 1]
type = PosAdd
trigger1 = AnimElem = 2
x = 29

[State 2326, 1]
type = PosAdd
trigger1 = AnimElem = 3
x = -15

[State 2326, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Combo Special B3 - (2)
[Statedef 2350]
type = S
movetype= A
physics = S
ctrl = 0
anim = 2350
sprpriority = 2

[State 2350, 1]
type = PlaySnd
trigger1 = AnimElem = 4
value = 0, var(2)
channel = 0

[State 2350, 1]
type = PlaySnd
trigger1 = AnimElem = 4
value = 15, 4
channel = 1

[State 2350, 4]
type = PalFX
trigger1 = AnimElem = 1 + (Time % 2)
time = 1
add = -255, -255, 255
ignorehitpause = 1

[State 2350, 5]
type = AfterImage
trigger1 = AnimElem = 1
time = 43
length = 2
paladd = -255, -255, 255
palbright = 1,1,255
palcontrast = 1,1,255
timeGap = 3
frameGap = 1
ignorehitpause = 1

[State 2350, 3]
type = VelSet
trigger1 = AnimElem = 1
y = 0
x = 4

[State 2350, 4]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 2350, 1]
type = PosAdd
trigger1 = AnimElem = 2
x = 25

[State 2350, 1]
type = PosAdd
trigger1 = AnimElem = 9
x = -25

[State 2350, 1]
type = HitDef
trigger1 = AnimElem = 4
attr = S, HA
damage = IfElse(var(58) = 2, 48, 57), 6
getpower = 0, 0
givepower = 0, 0
animtype = Medium
guardflag = M
hitflag = MAF
priority = 3, Hit
pausetime = 12, 12
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10, -67
hitsound = S20, var(9)
guardsound = s66,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 20
ground.velocity = -3
guard.velocity = -2
envshake.time = 12
envshake.ampl = 6; or 7
fall.envshake.time = 20
fall.envshake.ampl = 8

[State 2350, 7]
type = Explod
trigger1 = MoveHit
anim = 2030
pos = 0, 0
scale = 1.05263, 1.07142
facing = 1
postype = Left
bindtime = -1
removetime = 3
sprpriority = -5
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 2350, 8]
type = ChangeState
triggerall = AnimElem = 6, < 0
trigger1 = MoveContact && command = "x"
value = 2375
ctrl = 0

[State 2350, 9]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Combo Special A3 - (2)
[Statedef 2375]
type = S
movetype= A
physics = S
ctrl = 0
anim = 2375
sprpriority = 2

[State 2375, 1]
type = PlaySnd
trigger1 = AnimElem = 3
value = 0, var(2)
channel = 0

[State 2375, 1]
type = PlaySnd
trigger1 = AnimElem = 3
value = 15, 2
channel = 1

[State 2375, 4]
type = PalFX
trigger1 = AnimElem = 1 + (Time % 2)
time = 1
add = -255, -255, 255
ignorehitpause = 1

[State 2375, 5]
type = AfterImage
trigger1 = AnimElem = 1
time = 38
length = 2
paladd = -255, -255, 255
palbright = 1,1,255
palcontrast = 1,1,255
timeGap = 3
frameGap = 1
ignorehitpause = 1

[State 2375, 2]
type = VelSet
trigger1 = AnimElem = 5
x = 4

[State 2375, 3]
type = Width
trigger1 = AnimElem = 2, >= 0
trigger1 = AnimElem = 3, < 0
value = 10, 0

[State 2375, 3]
type = Width
trigger1 = AnimElem = 3, >= 0
trigger1 = AnimElem = 7, < 0
value = 20, 0

[State 2375, 1]
type = HitDef
trigger1 = AnimElem = 4
attr = S, HA
damage = IfElse(var(58) = 2, 48, 57), 6
getpower = 0, 0
givepower = 0, 0
animtype = Light
guardflag = M
hitflag = MAF
priority = 3, Hit
pausetime = 12, 12
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10, -80
hitsound = S20, var(9)
guardsound = s66,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 20
ground.velocity = -3
guard.velocity = -2
envshake.time = 12
envshake.ampl = 6; or 7
fall.envshake.time = 20
fall.envshake.ampl = 8

[State 2375, 7]
type = Explod
trigger1 = MoveHit
anim = 2030
pos = 0, 0
scale = 1.05263, 1.07142
facing = 1
postype = Left
bindtime = -1
removetime = 3
sprpriority = -5
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 2375, 8]
type = ChangeState
triggerall = AnimElem = 5, < 7
trigger1 = MoveContact && command = "MueiKyaku"
value = 2400
ctrl = 0

[State 2375, 9]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Combo Special "MueiKyaku" - (2, end)
[Statedef 2400]
type = C
movetype= A
physics = C
ctrl = 0
anim = 2400
sprpriority = 2
poweradd = 40

[State 2400, 1]
type = PlaySnd
trigger1 = AnimElem = 7 || AnimElem = 16
value = 10, 25
channel = 0

[State 2400, 1]
type = PlaySnd
trigger1 = AnimElem = 7 || AnimElem = 16 || AnimElem = 25
value = 15, 4
channel = 1

[State 2400, 1]
type = PlaySnd
trigger1 = AnimElem = 25
value = 10, 27
channel = 0

[State 2400, 1]
type = PlaySnd
trigger1 = AnimElem = 25
value = 15, 9
channel = 2

[State 2400, 4]
type = PalFX
trigger1 = AnimElem = 1 + (Time % 2)
time = 1
add = -255, -255, 255
ignorehitpause = 1

[State 2400, 5]
type = AfterImage
trigger1 = AnimElem = 1
time = 71
length = 2
paladd = -255, -255, 255
palbright = 1,1,255
palcontrast = 1,1,255
timeGap = 3
frameGap = 1
ignorehitpause = 1

[State 2400, 2]
type = VelSet
trigger1 = AnimElem = 1, >= 0
trigger1 = AnimElem = 28, < 0
x = 1.5

[State 2400, 1]
type = HitDef
trigger1 = AnimElem = 7 || AnimElem = 16
attr = C, HA
damage = 25
animtype = Medium
guardflag = -1
hitflag = M
priority = 3, Hit
pausetime = 6, 6
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10, -5
hitsound = S20, var(9)
guardsound = s66,0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 20
ground.velocity = -4
guard.velocity = -3
envshake.time = 12
envshake.ampl = 6; or 7
fall.envshake.time = 20
fall.envshake.ampl = 8

[State 2400, 1]
type = HitDef
trigger1 = AnimElem = 25
attr = C, HA
damage = 25
animtype = Medium
guardflag = L
hitflag = M
priority = 3, Hit
pausetime = 24, 24
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10, -5
hitsound = S20, var(9)
guardsound = s66,0
ground.type = High
ground.hittime  = 20
ground.velocity = -4
guard.velocity = -2
fall = 0
envshake.time = 12
envshake.ampl = 6; or 7
fall.envshake.time = 20
fall.envshake.ampl = 8

[State 2400, 7]
type = Explod
triggerall = MoveHit
trigger1 = AnimElem = 7 || AnimElem = 16 || AnimElem = 25
anim = 2030
pos = 0, 0
scale = 1.05263, 1.07142
facing = 1
postype = Left
bindtime = -1
removetime = 3
sprpriority = -5
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 2400, 9]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; Combo Special d+C2 - (3 & 4)
[Statedef 2425]
type = C
movetype= A
physics = C
ctrl = 0
anim = 2425
sprpriority = 2

[State 2425, 1]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, var(2)
channel = 0

[State 2425, 1]
type = PlaySnd
trigger1 = AnimElem = 2
value = 15, 3
channel = 1

[State 2425, 4]
type = PalFX
trigger1 = AnimElem = 1 + (Time % 2)
time = 1
add = -255, -255, 255
ignorehitpause = 1

[State 2425, 5]
type = AfterImage
trigger1 = AnimElem = 1
time = 37
length = 2
paladd = -255, -255, 255
palbright = 1,1,255
palcontrast = 1,1,255
timeGap = 3
frameGap = 1
ignorehitpause = 1

[State 2425, 2]
type = VelSet
trigger1 = AnimElem = 1
x = 4

[State 2425, 1]
type = HitDef
trigger1 = AnimElem = 3
attr = C, HA
damage = IfElse(var(58) = 2, 33, 39), 3
getpower = 0, 0
givepower = 0, 0
animtype = Light
guardflag = L
hitflag = M
priority = 3, Hit
pausetime = 12, 12
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10, -5
hitsound = S20, var(9)
guardsound = s66,0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 20
ground.velocity = -3
guard.velocity = -2
envshake.time = 12
envshake.ampl = 6; or 7
fall.envshake.time = 20
fall.envshake.ampl = 8

[State 2425, 7]
type = Explod
trigger1 = MoveHit
anim = 2030
pos = 0, 0
scale = 1.05263, 1.07142
facing = 1
postype = Left
bindtime = -1
removetime = 3
sprpriority = -5
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 2425, 8]
type = ChangeState
triggerall = AnimElem = 4, < 6
trigger1 = MoveContact && command = "x"
value = 2450
ctrl = 0

[State 2425, 9]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Combo Special A2 - (3 & 4)
[Statedef 2450]
type = S
movetype= A
physics = S
ctrl = 0
anim = 2450
sprpriority = 2

[State 2450, 1]
type = PlaySnd
trigger1 = AnimElem = 6
value = 0, var(2)
channel = 0

[State 2450, 1]
type = PlaySnd
trigger1 = AnimElem = 6
value = 15, 2
channel = 1

[State 2450, 4]
type = PalFX
trigger1 = AnimElem = 1 + (Time % 2)
time = 1
add = -255, -255, 255
ignorehitpause = 1

[State 2450, 5]
type = AfterImage
trigger1 = AnimElem = 1
time = 42
length = 2
paladd = -255, -255, 255
palbright = 1,1,255
palcontrast = 1,1,255
timeGap = 3
frameGap = 1
ignorehitpause = 1

[State 2450, 2]
type = VelSet
trigger1 = AnimElem = 1
x = 4

[State 2450, 1]
type = HitDef
trigger1 = AnimElem = 6
attr = S, HA
damage = IfElse(var(58) = 2, 27, 33), 3
getpower = 0, 0
givepower = 0, 0
animtype = Hard
guardflag = M
hitflag = MA
priority = 3, Hit
pausetime = 12, 12
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10, -70
hitsound = S20, var(9)
guardsound = s66,0
ground.type = High
ground.slidetime = 18
ground.hittime  = 26
ground.velocity = -5
guard.velocity = -3
envshake.time = 10
envshake.freq = 60
envshake.ampl = 5
envshake.time = 12
envshake.ampl = 6; or 7
fall.envshake.time = 20
fall.envshake.ampl = 8

[State 2450, 7]
type = Explod
trigger1 = MoveHit
anim = 2030
pos = 0, 0
scale = 1.05263, 1.07142
facing = 1
postype = Left
bindtime = -1
removetime = 3
sprpriority = -5
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 2450, 8]
type = ChangeState
triggerall = AnimElem = 8, < 5
trigger1 = MoveContact && command = "y" && command = "a" && command = "holdfwd"
value = 2475
ctrl = 0

[State 2450, 8]
type = ChangeState
triggerall = AnimElem = 8, < 5
trigger1 = MoveContact && command = "a" && command = "holddown"
value = 2575
ctrl = 0

[State 2450, 9]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Combo Special f+BC - (3)
[Statedef 2475]
type = S
movetype= A
physics = S
ctrl = 0
anim = 2475
sprpriority = 2

[State 2475, 1]
type = PlaySnd
trigger1 = AnimElem = 5
value = 0, var(2)
channel = 0

[State 2475, 1]
type = PlaySnd
trigger1 = AnimElem = 5
value = 15, 4
channel = 1

[State 2475, 4]
type = PalFX
trigger1 = AnimElem = 1 + (Time % 2)
time = 1
add = -255, -255, 255
ignorehitpause = 1

[State 2475, 5]
type = AfterImage
trigger1 = AnimElem = 1
time = 41
length = 2
paladd = -255, -255, 255
palbright = 1,1,255
palcontrast = 1,1,255
timeGap = 3
frameGap = 1
ignorehitpause = 1

[State 2475, 2]
type = PosAdd
trigger1 = AnimElem = 3
x = 19

[State 2475, 1]
type = PosAdd
trigger1 = AnimElem = 15
x = -20

[State 2475, 2]
type = VelSet
trigger1 = AnimElem = 1
x = 5

[State 2475, 1]
type = HitDef
trigger1 = AnimElem = 10
attr = S, HA
damage = IfElse(var(58), 12, 15), 3
getpower = 0, 0
givepower = 0, 0
animtype = Light
guardflag = MA
hitflag = MA
priority = 3, Hit
pausetime = 12, 12
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10, -110
hitsound = S20, var(9)
guardsound = s66,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 20
ground.velocity = -3
guard.velocity = -2
envshake.time = 12
envshake.ampl = 6; or 7
fall.envshake.time = 20
fall.envshake.ampl = 8

[State 2475, 1]
type = HitDef
trigger1 = AnimElem = 11
attr = S, HA
damage = IfElse(var(58), 21, 24), 3
getpower = 0, 0
givepower = 0, 0
animtype = Light
guardflag = MA
hitflag = MA
priority = 3, Hit
pausetime = 12, 12
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10, -95
hitsound = S20, var(9)
guardsound = s66,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 20
ground.velocity = -3
guard.velocity = -2
envshake.time = 12
envshake.ampl = 6; or 7
fall.envshake.time = 20
fall.envshake.ampl = 8

[State 2475, 1]
type = HitDef
trigger1 = AnimElem = 12
attr = S, HA
damage = IfElse(var(58), 24, 27), 3
getpower = 0, 0
givepower = 0, 0
animtype = Medium
guardflag = MA
hitflag = MA
priority = 3, Hit
pausetime = 12, 12
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10, -60
hitsound = S20, var(9)
guardsound = s66,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 20
ground.velocity = -3
guard.velocity = -2
envshake.time = 12
envshake.ampl = 6; or 7
fall.envshake.time = 20
fall.envshake.ampl = 8

[State 2475, 1]
type = HitDef
trigger1 = AnimElem = 13
attr = S, HA
damage = IfElse(var(58) = 2, 27, 33), 3
getpower = 0, 0
givepower = 0, 0
animtype = Hard
guardflag = MA
hitflag = MA
priority = 3, Hit
pausetime = 12, 12
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10, -35
hitsound = S20, var(9)
guardsound = s66,0
ground.type = Low
ground.slidetime = 20
ground.hittime  = 24
ground.velocity = -3
guard.velocity = -2
envshake.time = 12
envshake.ampl = 6; or 7
fall.envshake.time = 20
fall.envshake.ampl = 8

[State 2475, 7]
type = Explod
triggerall = MoveHit
trigger1 = AnimElem = 10 || AnimElem = 11 || AnimElem = 12 || AnimElem = 13
anim = 2030
pos = 0, 0
scale = 1.05263, 1.07142
facing = 1
postype = Left
bindtime = -1
removetime = 3
sprpriority = -5
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 2475, 8]
type = ChangeState
triggerall = AnimElem = 14, < 2
trigger1 = MoveContact && command = "x"
value = 2500
ctrl = 0

[State 2475, 9]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Combo Special A3 - (3)
[Statedef 2500]
type = S
movetype= A
physics = S
ctrl = 0
anim = 2500
sprpriority = 2

[State 2500, 1]
type = PlaySnd
trigger1 = AnimElem = 3
value = 0, var(2)
channel = 0

[State 2500, 1]
type = PlaySnd
trigger1 = AnimElem = 3
value = 15, 2
channel = 1

[State 2500, 4]
type = PalFX
trigger1 = AnimElem = 1 + (Time % 2)
time = 1
add = -255, -255, 255
ignorehitpause = 1

[State 2500, 5]
type = AfterImage
trigger1 = AnimElem = 1
time = 35
length = 2
paladd = -255, -255, 255
palbright = 1,1,255
palcontrast = 1,1,255
timeGap = 3
frameGap = 1
ignorehitpause = 1

[State 2500, 2]
type = VelSet
trigger1 = AnimElem = 5
x = 4

[State 2500, 3]
type = Width
trigger1 = AnimElem = 2, >= 0
trigger1 = AnimElem = 3, < 0
value = 10, 0

[State 2500, 3]
type = Width
trigger1 = AnimElem = 3, >= 0
trigger1 = AnimElem = 7, < 0
value = 20, 0

[State 2500, 1]
type = HitDef
trigger1 = AnimElem = 4
attr = S, HA
damage = IfElse(var(58) = 2, 33, 39), 3
getpower = 0, 0
givepower = 0, 0
animtype = Light
guardflag = M
hitflag = MAF
priority = 3, Hit
pausetime = 12, 12
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10, -80
hitsound = S20, var(9)
guardsound = s66,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 20
ground.velocity = -3
guard.velocity = -2
envshake.time = 12
envshake.ampl = 6; or 7
fall.envshake.time = 20
fall.envshake.ampl = 8

[State 2500, 7]
type = Explod
trigger1 = MoveHit
anim = 2030
pos = 0, 0
scale = 1.05263, 1.07142
facing = 1
postype = Left
bindtime = -1
removetime = 3
sprpriority = -5
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 2500, 8]
type = ChangeState
triggerall = AnimElem = 5, < 6
trigger1 = MoveContact && command = "y"
value = 2525
ctrl = 0

[State 2500, 9]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Combo Special B3 - (3)
[Statedef 2525]
type = S
movetype= A
physics = S
ctrl = 0
anim = 2150
sprpriority = 2

[State 2525, 1]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, var(2)
channel = 0

[State 2525, 1]
type = PlaySnd
trigger1 = AnimElem = 2
value = 15, 3
channel = 1

[State 2525, 4]
type = PalFX
trigger1 = AnimElem = 1 + (Time % 2)
time = 1
add = -255, -255, 255
ignorehitpause = 1

[State 2525, 5]
type = AfterImage
trigger1 = AnimElem = 1
time = 36
length = 2
paladd = -255, -255, 255
palbright = 1,1,255
palcontrast = 1,1,255
timeGap = 3
frameGap = 1
ignorehitpause = 1

[State 2525, 2]
type = VelSet
trigger1 = AnimElem = 4
x = 4

[State 2525, 3]
type = Width
trigger1 = AnimElem = 1, >= 0
trigger1 = AnimElem = 2, < 0
value = 10, 0

[State 2525, 3]
type = Width
trigger1 = AnimElem = 2, >= 0
trigger1 = AnimElem = 7, < 0
value = 20, 0

[State 2525, 1]
type = HitDef
trigger1 = AnimElem = 3
attr = S, HA
damage = IfElse(var(58) = 2, 42, 48), 6
getpower = 0, 0
givepower = 0, 0
animtype = Light
guardflag = M
hitflag = MAF
priority = 3, Hit
pausetime = 12, 12
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10, -56
hitsound = S20, var(9)
guardsound = s66,0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 20
ground.velocity = -3
guard.velocity = -2
envshake.time = 12
envshake.ampl = 6; or 7
fall.envshake.time = 20
fall.envshake.ampl = 8

[State 2525, 7]
type = Explod
trigger1 = MoveHit
anim = 2030
pos = 0, 0
scale = 1.05263, 1.07142
facing = 1
postype = Left
bindtime = -1
removetime = 3
sprpriority = -5
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 2525, 8]
type = ChangeState
trigger1 = AnimTime = 0
value = 2550


;[State 2525, 9]
;type = ChangeState
;trigger1 = AnimTime = 0
;value = 0
;ctrl = 1

;---------------------------------------------------------------------------
; Combo Special "CS3end" - (3, end)
[Statedef 2550]
type = S
movetype= A
physics = S
ctrl = 0
anim = 2550
sprpriority = 2

[State 2550, 1]
type = PlaySnd
trigger1 = AnimElem = 10
value = 0, var(2)
channel = 0

[State 2550, 1]
type = PlaySnd
trigger1 = AnimElem = 12
value = 15, 23
channel = 1

[State 2550, 1]
type = PlaySnd
trigger1 = AnimElem = 12
value = 15, 13
channel = 2

[State 2550, 2]
type = Width
trigger1 = AnimElem = 4, >= 0
trigger1 = AnimElem = 5, < 0
trigger2 = AnimElem = 13, >= 0
trigger2 = AnimElem = 14, < 0
value = 20, 0

[State 2550, 2]
type = Width
trigger1 = AnimElem = 5, >= 0
trigger1 = AnimElem = 13, < 0
value = 30, 0

[State 2550, 4]
type = PalFX
trigger1 = AnimElem = 1 + (Time % 2)
time = 1
add = -255, -255, 255
ignorehitpause = 1

[State 2550, 5]
type = AfterImage
trigger1 = AnimElem = 1
time = 50
length = 2
paladd = -255, -255, 255
palbright = 1,1,255
palcontrast = 1,1,255
timeGap = 3
frameGap = 1
ignorehitpause = 1

[State 2550, 2]
type = VelSet
trigger1 = AnimElem = 2
x = 5

[State 2550, 1]
type = HitDef
trigger1 = AnimElem = 10
attr = S, HA
damage = IfElse(var(58) = 2, 186, 216), 18
getpower = 0, 0
givepower = 0, 0
animtype = Back
guardflag = M
hitflag = MA
priority = 5, Hit
pausetime = 12, 12
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10, 80
hitsound = S20, 4
guardsound = s66,0
ground.type = High
ground.hittime  = 26
ground.velocity = -3, -10
guard.velocity = -2
fall = 1
palfx.time = 70
palfx.add = 112,-88,-255
palfx.color = 0
envshake.time = 6
envshake.freq = 60
envshake.ampl = 6
fall.envshake.time = 6
fall.envshake.freq = 60
fall.envshake.ampl = 6

[State 2550, 3]
type = Explod
trigger1 = MoveHit
anim = 1210
pos = 0, 0
postype = P1
bindtime = -1
removetime = 32
sprpriority = 4
removeongethit = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 2550, 7]
type = Explod
trigger1 = MoveHit
anim = 2030
pos = 0, 0
scale = 1.05263, 1.07142
facing = 1
postype = Left
bindtime = -1
removetime = 3
sprpriority = -5
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 2550, 1]
type = VarSet
trigger1 = MoveHit
trigger1 = P2StateType = S
trigger1 = !var(0)
var(0) = EnemyNear, ID
ignorehitpause = 1
persistent = 0

[State 2550, 1]
type = Helper
trigger1 = P2StateType = S
trigger1 = MoveHit
name = "Flammes"
postype = P2
pos = 0, 0
Facing = -1
ID = 1000
stateno = 341
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 2550, 9]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Combo Special d+C3 - (4)
[Statedef 2575]
type = C
movetype= A
physics = C
ctrl = 0
anim = 2575
sprpriority = 2

[State 2575, 1]
type = PlaySnd
trigger1 = AnimElem = 5
value = 0, var(2)
channel = 0

[State 2575, 1]
type = PlaySnd
trigger1 = AnimElem = 5
value = 15, 4
channel = 1

[State 2575, 4]
type = PalFX
trigger1 = AnimElem = 1 + (Time % 2)
time = 1
add = -255, -255, 255
ignorehitpause = 1

[State 2575, 5]
type = AfterImage
trigger1 = AnimElem = 1
time = 45
length = 2
paladd = -255, -255, 255
palbright = 1,1,255
palcontrast = 1,1,255
timeGap = 3
frameGap = 1
ignorehitpause = 1

[State 2575, 2]
type = VelSet
trigger1 = AnimElem = 1
x = 4

[State 2575, 1]
type = HitDef
trigger1 = AnimElem = 5
attr = C, HA
damage = IfElse(var(58) = 2, 27, 33), 3
getpower = 0, 0
givepower = 0, 0
animtype = Light
guardflag = L
hitflag = M
priority = 3, Hit
pausetime = 12, 12
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10, -15
hitsound = S20, var(9)
guardsound = s66,0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 20
ground.velocity = -3
guard.velocity = -2
envshake.time = 12
envshake.ampl = 6; or 7
fall.envshake.time = 20
fall.envshake.ampl = 8

[State 2575, 7]
type = Explod
trigger1 = MoveHit
anim = 2030
pos = 0, 0
scale = 1.05263, 1.07142
facing = 1
postype = Left
bindtime = -1
removetime = 3
sprpriority = -5
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 2575, 8]
type = ChangeState
triggerall = AnimElem = 7, < 0
trigger1 = MoveContact && command = "y" && command = "a" && command = "holdfwd"
value = 2600
ctrl = 0

[State 2575, 9]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; Combo Special f+BC2 - (4, end)
[Statedef 2600]
type = S
movetype= A
physics = S
ctrl = 0
anim = 2600
sprpriority = 2

[State 2600, 1]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, var(2)
channel = 0

[State 2600, 1]
type = PlaySnd
trigger1 = AnimElem = 5
value = 15, 3
channel = 1

[State 2600, 4]
type = PalFX
trigger1 = AnimElem = 1 + (Time % 2)
time = 1
add = -255, -255, 255
ignorehitpause = 1

[State 2600, 5]
type = AfterImage
trigger1 = AnimElem = 1
time = 35
length = 2
paladd = -255, -255, 255
palbright = 1,1,255
palcontrast = 1,1,255
timeGap = 3
frameGap = 1
ignorehitpause = 1

[State 2600, 2]
type = VelSet
trigger1 = AnimElem = 4
x = 4

[State 2600, 1]
type = HitDef
trigger1 = AnimElem = 7
attr = S, HA
damage = IfElse(var(58) = 2, 69, 81)
getpower = 0, 0
givepower = 0, 0
animtype = DiagUp
guardflag = -1
hitflag = MAF
priority = 5, Hit
pausetime = 20, 20
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10, -90
hitsound = S20, var(9)
guardsound = s66,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 20
ground.velocity = -1.5, -11
fall = 1
fall.envshake.time = 6
fall.envshake.freq = 60
fall.envshake.ampl = 6

[State 2600, 1]
type = TargetState
trigger1 = Movehit
trigger1 = enemy, Name = "Lee Rekka"
value = 2610
ignorehitpause = 0
persistent = 0

[State 2600, 1]
type = PlaySnd
trigger1 = Movehit
value = 15, 9
channel = 2
ignorehitpause = 1
persistent = 0

[State 2600, 7]
type = Explod
trigger1 = MoveHit
anim = 2030
pos = 0, 0
scale = 1.05263, 1.07142
facing = 1
postype = Left
bindtime = -1
removetime = 3
sprpriority = -5
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 2600, 9]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Combo Special f+BC2 - (4, end) P2 on air
[Statedef 2610]
type = A
movetype = H
physics = N
velset =  -1.5, -11
ctrl = 0

[State 2610, 1]
type = Helper
trigger1 = Time = 0
name = "AfterImage"
postype = P1
pos = 0, 0
Facing = 1
ID = 2615
stateno = 2615
ownpal = 1
persistent = 0
ignorehitpause = 1

[State 2610, 1]
type = ChangeAnim
trigger1 = Time = 0
value = IfElse(SelfAnimExist(5052), 5052, 5030)

[State 2610, 1]
type = ChangeAnim
trigger1 = Time = 6 && anim = 5030
value = IfElse(SelfAnimExist(5035), 5035, 5030)

[State 2610, 1]
type = ChangeAnim
trigger1 = Time = 26
value = IfElse(SelfAnimExist(5062), 5062, 5050)

[State 2610, 3]
type = Gravity
trigger1 = Time >= 7

[State 2610,4]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= -1
value = 2620

;---------------------------------------------------------------------------
; Combo Special f+BC2 - (4, end) P2 on air Helper AfterImage
[Statedef 2615]
type = A
movetype = I
physics = N
velset =  -1.5, -11
sprpriority = -3
ctrl = 0

[State 2615, 1]
type = ChangeAnim
trigger1 = Time = 0
value = IfElse(SelfAnimExist(5052), 5052, 5030)

[State 2615, 2]
type = ChangeAnim
trigger1 = Time = 6 && anim = 5030
value = IfElse(SelfAnimExist(5035), 5035, 5030)

[State 2615, 3]
type = ChangeAnim
trigger1 = Time = 26
value = IfElse(SelfAnimExist(5062), 5062, 5050)

[State 2615, 5]
type = AssertSpecial
trigger1 = Time > 0
trigger1 = Time < 60
Flag = Invisible

[State 2615, 6]
type = AfterImage
trigger1 = time = 0
time = 60
length = 3
paladd = -24, -24, 96
palbright = 0,0,0
palcontrast = 256,256,256
timeGap = 3
frameGap = 1

[State 2615, 7]
type = Gravity
trigger1 = Time >= 7

[State 2615, 8]
type = DestroySelf
trigger1 = root, MoveHit
trigger2 = root, Pos Y >= -1 && Vel Y > 0

;---------------------------------------------------------------------------
; Combo Special f+BC2 - (4, end) P2 falling on ground
[Statedef 2620]
type = L
movetype = H
physics = C

[State 2620, 1]
type = EnvShake
trigger1 = Time = 0
time = 10
ampl = 5

[State 2620,2]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0

[State 2620,2]
type = PosSet
trigger1 = Time = 0
trigger1 = Pos Y != 0
y = 0

[State 2620, 1]
type = ChangeAnim
trigger1 = Time = 0
value = IfElse(SelfAnimExist(5102), 5102, 5100)

[State 2620, 1]
type = ChangeAnim
trigger1 = anim = 5102 && AnimTime = 0
trigger2 = anim = 5100 && AnimTime = 0
value = IfElse(SelfAnimExist(5162), 5162, 5160)

[State 2620, 1]
type = ChangeAnim
trigger1 = Time = 18
value = IfElse(SelfAnimExist(5172), 5172, 5170)

[State 2620, 1]
type = ChangeAnim
trigger1 = Time = 24
value = IfElse(SelfAnimExist(5112), 5112, 5110)

[State 2620,4]
type = SelfState
trigger1 = Life < 1
value = 5081

[State 2620,4]
type = ChangeState
trigger1 = Time = 40
value = 2630

;---------------------------------------------------------------------------
; Combo Special f+BC2 - (4, end) P2 Get up anim
[Statedef 2630]
type = L
movetype = I
physics = C

[State 2630, 1]
type = ChangeAnim
trigger1 = Time = 0
value = IfElse(SelfAnimExist(5122), 5122, 5120)

[State 2630,2]
type = SelfState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Ougi Enryu Tenshin
[Statedef 3000]
type = S
movetype= A
physics = S
ctrl = 0
anim = 3000
sprpriority = 2
poweradd = -1000



[State 863, 1]
type = SuperPause
trigger1 = AnimElem = 2
anim = -1
time = 30
movetime = 0
darken = 0

[State 1050, NotHitBy]
type = NotHitBy
trigger1 = time <= 40
value = SCA,NA,SA,HA,NP,SP,HP

[State 863, 4]
type = Explod
trigger1 = AnimElem = 2
anim = 17000
pos = 9,-59
postype = p1
sprpriority = -2
supermove = 1
bindtime = 1
scale = .5,.5

[State 863, 4]
type = Explod
trigger1 = AnimElem = 2
anim = 17010
pos = 9,-59
postype = p1
sprpriority = 9
persistent = 0
supermove = 1
bindtime = 1
scale = .5,.5

[State 1700, 3]
type = PlaySnd
trigger1 = AnimElem = 2
value = 17000,0

[State 4000, BGPalFX]
type = BGPalFX
trigger1 = 1
time = 2
mul = 900,900,900
add = -250,-250,-250
ignorehitpause = 1

[State 3000,ºÚÉ«µ×É«]
type = Envcolor
trigger1 = 1
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 70
under = 1
supermove = 1


[State 3000, 1]
type = PlaySnd
trigger1 = AnimElem = 7
value = 10, 28
channel = 0

[State 3000, 1]
type = PlaySnd
trigger1 = AnimElem = 8
value = 15, 20
channel = 1

[State 3000, 1]
type = PlaySnd
trigger1 = AnimElem = 9
value = 15, 21
channel = 2

[State 3000, 2]
type = Width
trigger1 = AnimElem = 13, >= 0
trigger1 = AnimElem = 13, <= 1
value = 20, 0

[State 3000, 1]
type = HitDef
trigger1 = time = 0
attr = S, NA
damage = 50,5
animtype = Back
hitflag = MAF
guardflag = MA
priority = 4, Hit
pausetime = 4, 30
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10, -90
hitsound = S20, 3
guardsound = s66,0
air.type = High
ground.velocity = -7
air.velocity = -2,-4
air.hittime = 80
palfx.time = 78
palfx.add = 112,-88,-255
palfx.color = 0
envshake.time = 12
envshake.ampl = 6; or 7



[State 3000, 3]
type = Helper
trigger1 = AnimElem = 8
trigger1 = Anim = 3000
name = "fan"
ID = 3010
postype = P1
pos = 25, -127
facing = 1
keyctrl = 0
ownpal = 1
stateno = 3010
persistent = 0



[State 3000, 2]
type = PosAdd
trigger1 = AnimElem = 13, = 1
x = 22

[State 3000, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 3100
ctrl = 0

;---------------------------------------------------------------------------
; Ougi Enryu Tenshin Helper Fan
[Statedef 3010]
type = A
movetype = I
physics = A
anim = 3010
velset = 0, -7.5
sprpriority = 4
ctrl = 0

[State 3010, 2]
type = VelMul
trigger1 = Vel Y > 0
y = 1.25

[State 3010, 1]
type = Explod
trigger1 = AnimElem = 2, = 1
anim = 3011
pos = 0, 0
facing = 1
postype = P1
bindtime = -1
removetime = 22
sprpriority = 5
removeongethit = 1
ownpal = 1

[State 3010, 1]
type = DestroySelf
trigger1 = Time = 24

;---------------------------------------------------------------------------
; Ougi Enryu Tenshin P2
[Statedef 3050]
type = S
movetype = H
physics = N
velset = 0, 0
ctrl = 0

[State 3050, 1]
type = ChangeAnim
trigger1 = Time = 0
value = IfElse(SelfAnimExist(5180), 5180, 5300)

[State 3050, 1]
type = VelSet
trigger1 = Time = 0
x = IfElse((anim = 5180), -1.5, 0)

[State 3050,4]
type = SelfState
trigger1 = Time = 90
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Ougi Enryu Tenshin 2
[Statedef 3100]
type = S
movetype= A
physics = N
ctrl = 0
velset = 22, 0
anim = 3100
sprpriority = 4

[State 4000, BGPalFX]
type = BGPalFX
trigger1 = 1
time = 2
mul = 900,900,900
add = -250,-250,-250
ignorehitpause = 1

[State 3000,ºÚÉ«µ×É«]
type = Envcolor
trigger1 = 1
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 70
under = 1
supermove = 1

[State 3100, 1]
type = PlaySnd
trigger1 = AnimElem = 4
value = 10, 29
channel = 0

[State 3100, 1]
type = PlaySnd
trigger1 = AnimElem = 1
value = 15, 14
channel = 1

[State 3100, 1]
type = PlaySnd
trigger1 = AnimElem = 1
value = 15, 1
channel = 2

[State 3100, 2]
type = Width
trigger1 = AnimElem = 6, >= 0
trigger1 = AnimElem = 7, < 0
value = 30, 0

[State 3100, 2]
type = PlayerPush
trigger1 = AnimElem = 1, >= 0
trigger1 = AnimElem = 6, < 20
value = 0
ignorehitpause = 0

[State 3100, 2]
type = PalFX
trigger1 = AnimElem = 1, = 0
time = 48
add = 152, 8, -16

[State 3100, 4]
type = StateTypeSet
trigger1 = AnimElem = 5
physics = S

[State 3100, 3]
type = Explod
trigger1 = AnimElem = 1, = 1
trigger2 = AnimElem = 4, = 1
trigger3 = AnimElem = 5, = 10
anim = 1120
pos = 0, 0
postype = P1
bindtime = -1
removetime = 19
sprpriority = 5
removeongethit = 1
ownpal = 1
ignorehitpause = 0
trans = add

[State 3100, 1]
type = Explod
trigger1 = AnimElem = 2
anim = 3105
pos = 160, 168
facing = 1
postype = Back
bindtime = -1
removetime = 10
sprpriority = 5
removeongethit = 1
ownpal = 1

[State 3100, 1]
type = Explod
trigger1 = AnimElem = 5, = 10
anim = 3110
pos = -60, -30
facing = 1
postype = P1
bindtime = 1
removetime = 24
sprpriority = 5
removeongethit = 1
ownpal = 1

[State 3100, 1]
type = Explod
trigger1 = AnimElem = 5, = 10
anim = 3110
pos = -250, -30
facing = 1
postype = P1
bindtime = 1
removetime = 24
sprpriority = 5
removeongethit = 1
ownpal = 1

[State 3100, 1]
type = HitDef
trigger1 = Time = 0
attr = S, HA
damage = 250,25
animtype = DiagUp
guardflag = M
hitflag = M
priority = 4, Hit
pausetime = 14, 14
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10, -40
hitsound = S21, 0
guardsound = s66,0
ground.type = High
ground.hittime = 70
ground.velocity = 3, -12
guard.velocity = -3
forcestand = 1
facing = -1
fall = 1
air.fall = 1
palfx.time = 85
palfx.add = 112,-88,-255
palfx.color = 0
persistent = 0
envshake.time = 12
envshake.ampl = 6; or 7

[State 3100, 1]
type = PlaySnd
trigger1 = MoveHit
value = 15, 15
channel = 3
ignorehitpause = 0
persistent = 0

[State 3100, 1]
type = Explod
trigger1 = P2StateType != A && MoveHit
trigger1 = AnimElem = 1, >= 0
trigger1 = AnimElem = 6, < 0
anim = 3120
pos = 0, 0
facing = 1
postype = P2
bindtime = 1
removetime = 55
sprpriority = -1
removeongethit = 1
ownpal = 1
persistent = 0
ignorehitpause = 1

[State 3100, 3]
type = Explod
trigger1 = P2StateType != A && MoveHit
trigger1 = AnimElem = 1, >= 0
trigger1 = AnimElem = 6, < 0
anim = 3130
pos = -50, -85
postype = P2
bindtime = 1
removetime = 30
sprpriority = 1
removeongethit = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 3100, 3]
type = Explod
trigger1 = P2StateType != A && MoveHit
trigger1 = AnimElem = 1, >= 0
trigger1 = AnimElem = 6, < 0
anim = 3131
pos = 40, -100
postype = P2
bindtime = 1
removetime = 38
sprpriority = 1
removeongethit = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 3100, 3]
type = Explod
trigger1 = P2StateType != A && MoveHit
trigger1 = AnimElem = 1, >= 0
trigger1 = AnimElem = 6, < 0
anim = 3132
pos = -30, -130
postype = P2
bindtime = 1
removetime = 50
sprpriority = 1
removeongethit = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 3100, 3]
type = Explod
trigger1 = P2StateType != A && MoveHit
trigger1 = AnimElem = 1, >= 0
trigger1 = AnimElem = 6, < 0
anim = 3133
pos = 15, -165
postype = P2
bindtime = 1
removetime = 62
sprpriority = 1
removeongethit = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 3100, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Hiougi Soten Muei Kyaku
[Statedef 3200]
type = S
movetype = A
physics = N
anim = 3200
sprpriority = 3
ctrl = 0
poweradd = -2000
velset = 0,0






[State 863, 1]
type = SuperPause
trigger1 = AnimElem = 3
anim = -1
time = 30
movetime = 0
darken = 0

[State 1050, NotHitBy]
type = NotHitBy
trigger1 = time <= 40
value = SCA,NA,SA,HA,NP,SP,HP

[State 863, 4]
type = Explod
trigger1 = AnimElem = 3
anim = 17100
pos = -1,-39
postype = p1
sprpriority = -2
supermove = 1
bindtime = 1
scale = .5,.5

[State 863, 4]
type = Explod
trigger1 = AnimElem = 3
anim = 17110
pos = -1,-39
postype = p1
sprpriority = 9
persistent = 0
supermove = 1
bindtime = 1
scale = .5,.5

[State 1700, 3]
type = PlaySnd
trigger1 = AnimElem = 3
value = 17000,0

[State 4000, BGPalFX]
type = BGPalFX
trigger1 = 1
time = 2
mul = 900,900,900
add = -250,-250,-250
ignorehitpause = 1

[State 3000,ºÚÉ«µ×É«]
type = Envcolor
trigger1 = 1
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 70
under = 1
supermove = 1





[State 3200, 1]
type = PlaySnd
trigger1 = AnimElem = 6
value = 10, 21
channel = 0

[State 3200, 1]
type = PlaySnd
trigger1 = AnimElem = 5
value = 15, 21
channel = 2

[State 3200, 1]
type = PlaySnd
trigger1 = AnimElem = 14
value = 15, 12
channel = 3


[State 3200,2]
type = VelSet
trigger1 = AnimElem = 6
x = 15

[State 3200,2]
type = VelSet
trigger1 = AnimElem = 7
x = 21

[State 3200, 4]
type = StateTypeSet
trigger1 = AnimElem = 12
physics = S

[State 3200, 1]
type = HitDef
trigger1 = time = 0
attr = S, HA
damage = 10
animtype = Light
guardflag = M
hitflag = M
priority = 5, Hit
pausetime = 0, 3
sparkno = -1
guard.sparkno = -1
hitsound = S20, 8
guardsound = s66,0
guard.velocity = -3
ground.type = High
ground.slidetime = 12
ground.hittime = 16
ground.velocity = -5
guard.velocity = -3
forcestand = 1
p2facing = 1
persistent = 0
numhits = 0
mindist = 70, 0
maxdist = 80, 0
p1stateno = 3300
kill = 0
envshake.time = 12
envshake.ampl = 6; or 7

[State 3200, 6]
type = ChangeState
trigger1 = MoveGuarded
value = 3250

[State 3200, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Hiougi Soten Muei Kyaku MoveGuarded
[Statedef 3250]
type = S
movetype= I
physics = S
ctrl = 0
anim = 3250
sprpriority = 1


[State 3250,2]
type = VelSet
trigger1 = AnimElem = 1
x = -3

[State 3250, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Hiougi Soten Muei Kyaku 2
[Statedef 3300]
type = S
movetype = A
physics = S
anim = 3300
sprpriority = 3
ctrl = 0

[State 4000, BGPalFX]
type = BGPalFX
trigger1 = 1
time = 2
mul = 900,900,900
add = -250,-250,-250
ignorehitpause = 1

[State 3000,ºÚÉ«µ×É«]
type = Envcolor
trigger1 = 1
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 70
under = 1
supermove = 1


[State 3300, 1]
type = PlaySnd
trigger1 = AnimElem = 4 || AnimElem = 11 || AnimElem = 19 || AnimElem = 25 || AnimElem = 32 || AnimElem = 35
trigger2 = AnimElem = 38 || AnimElem = 46 || AnimElem = 51
value = 15, 2 + (Random > 499)
channel = 1

[State 3300, 1]
type = AfterImage
trigger1 = time = 0
time = 78
length = 3
paladd = -60, -80, -40
palbright = 0,0,0
palcontrast = 256,256,256
timeGap = 4
frameGap = 1

[State 3300,2]
type = VelSet
trigger1 = AnimElem = 1
x = 0

[State 3300, 2]
type = PalFX
trigger1 = AnimElem = 1
time = 1
add = 0, 0, 0


[State 3300, 1]
type = PosAdd
trigger1 = 1
x = IfElse((AnimElem = 2), 4, IfElse((AnimElem = 15), -25, IfElse((AnimElem = 29), 14, IfElse((AnimElem = 31), 20, 0))))

[State 3300, 1]
type = PosAdd
trigger1 = 1
x = IfElse((AnimElem = 9) || (AnimElem = 49), 24, IfElse((AnimElem = 18) || (AnimElem = 25), 11, IfElse((AnimElem = 42), -19, 0)))

[State 3300, 1]
type = PosAdd
trigger1 = 1
x = IfElse((AnimElem = 43) || (AnimElem = 44) || (AnimElem = 45) || (AnimElem = 46), 7, IfElse((AnimElem = 47), 28, IfElse((AnimElem = 48), 18, 0)))

[State 3300, 1]
type = VelSet
trigger1 = AnimElem = 3
x = 3

[State 3300, 1]
type = VelSet
trigger1 = AnimElem = 25
trigger2 = AnimElem = 30
x = 2

[State 3300, 1]
type = HitDef
trigger1 = AnimElem = 5
trigger2 = AnimElem = 20
trigger3 = AnimElem = 26
attr = S, HA
damage = 10
getpower = 0,0
animtype = Light
hitflag = M
priority = 5, Hit
pausetime = 0, 2
sparkno = S30002
sparkxy = -10, IfElse((AnimElem = 5), -80, Ifelse((AnimElem = 20), -10, -5))
hitsound = S20, var(9)
ground.type = Low
ground.slidetime = 10
ground.hittime  = 14
ground.velocity = IfElse((AnimElem = 20), -2, -3)
kill = 0
envshake.time = 12
envshake.ampl = 6; or 7


[State 3300, 1]
type = HitDef
trigger1 = AnimElem = 12
trigger2 = AnimElem = 33
trigger3 = AnimElem = 46
attr = S, HA
damage = 10
getpower = 0,0
animtype = Light
hitflag = M
priority = 5, Hit
pausetime = 0, 2
sparkno = S30002
sparkxy = -10, IfElse((AnimElem = 12), -75, Ifelse((AnimElem = 46), -85, -90))
hitsound = S20, var(9)
ground.type = High
ground.slidetime = 10
ground.hittime  = 14
ground.velocity = IfElse((AnimElem = 12), -2, Ifelse((AnimElem = 46), -5, 0))
kill = 0
envshake.time = 12
envshake.ampl = 6; or 7


[State 3300, 1]
type = HitDef
trigger1 = AnimElem = 38
trigger2 = AnimElem = 39
trigger3 = AnimElem = 40
attr = S, HA
damage = 10
getpower = 0
animtype = Light
hitflag = M
priority = 5, Hit
pausetime = 0, 2
sparkno = S30002
sparkxy = -10, IfElse((AnimElem = 38), -90, -60)
hitsound = S20, var(9)
ground.type = High
ground.slidetime = 10
ground.hittime  = 14
ground.velocity = IfElse((AnimElem = 40), -2, 0)
kill = 0
envshake.time = 12
envshake.ampl = 6; or 7

[State 3300, 1]
type = VelSet
trigger1 = AnimElem = 51
y = -6

[State 3300, 2]
type = StateTypeSet
trigger1 = AnimElem = 51
type = A
physics = A

[State 3300, 1]
type = HitDef
trigger1 = AnimElem = 51
attr = A, HA
damage = 10
getpower = 0
animtype = Light
hitflag = M
priority = 5, Hit
pausetime = 0, 2
sparkno = S30002
sparkxy = -10, -90
hitsound = S20, var(9)
ground.type = High
ground.hittime  = 14
kill = 0
envshake.time = 12
envshake.ampl = 6; or 7

[State 3300, 1]
type = HitDef
trigger1 = AnimElem = 55
attr = A, HA
damage = 10
getpower = 0
animtype = Light
hitflag = M
priority = 5, Hit
pausetime = 0, 2
sparkno = S30002
sparkxy = -10, -40
hitsound = S20, var(9)
ground.type = High
ground.hittime  = 14
kill = 0
envshake.time = 12
envshake.ampl = 6; or 7

[State 3300, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 3350
ctrl = 0

;---------------------------------------------------------------------------
; Hiougi Soten Muei Kyaku 3
[Statedef 3350]
type = A
movetype = A
physics = N
anim = 3350
velset = .75, .5
sprpriority = 3
ctrl = 0

[State 4000, BGPalFX]
type = BGPalFX
trigger1 = 1
time = 2
mul = 900,900,900
add = -250,-250,-250
ignorehitpause = 1

[State 3000,ºÚÉ«µ×É«]
type = Envcolor
trigger1 = 1
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 70
under = 1
supermove = 1


[State 3350, 1]
type = PlaySnd
trigger1 = AnimElem = 4
value = 10, 30
channel = 0

[State 3350, 1]
type = PlaySnd
trigger1 = AnimElem = 2 || AnimElem = 4 || AnimElem = 6 || AnimElem = 8 || AnimElem = 10 || AnimElem = 12
trigger2 = AnimElem = 15 || AnimElem = 17 || AnimElem = 19
value = 15, 3


[State 3350, 1]
type = HitDef
trigger1 = AnimElem = 1 || AnimElem = 5 || AnimElem = 9 || AnimElem = 13 || AnimElem = 16
attr = A, HA
damage = 10
getpower = 0
givepower = 0
animtype = Light
hitflag = M
priority = 5, Hit
pausetime = 0, 0
sparkno = S30002
sparkxy = -10, -25
hitsound = S20, var(9)
ground.type = High
ground.hittime  = 14
ground.velocity = -6
kill = 0
envshake.time = 12
envshake.ampl = 6; or 7


[State 3350, 1]
type = HitDef
trigger1 = AnimElem = 3 || AnimElem = 7 || AnimElem = 11 || AnimElem = 14 || AnimElem = 18
attr = A, HA
damage = 10
getpower = 0
givepower = 0
animtype = Light
hitflag = M
priority = 5, Hit
pausetime = 0, 0
sparkno = S30002
sparkxy = -10, -35
hitsound = S20, var(9)
ground.type = Low
ground.hittime  = 50
ground.velocity = -6
kill = 0
envshake.time = 12
envshake.ampl = 6; or 7

[State 3350, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 3400
ctrl = 0

;---------------------------------------------------------------------------
; Hiougi Soten Muei Kyaku 4
[Statedef 3400]
type = U
ctrl = 0
anim = 3400

[State 4000, BGPalFX]
type = BGPalFX
trigger1 = 1
time = 2
mul = 900,900,900
add = -250,-250,-250
ignorehitpause = 1

[State 3000,ºÚÉ«µ×É«]
type = Envcolor
trigger1 = 1
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 70
under = 1
supermove = 1

[State 3400, 1]
type = PlaySnd
trigger1 = AnimElem = 13
value = 10, 31
channel = 0

[State 3400, 1]
type = PlaySnd
trigger1 = AnimElem = 5 || AnimElem = 7 || AnimElem = 15 || AnimElem = 17 || AnimElem = 24 || AnimElem = 26
value = 15, 3

[State 3400, 1]
type = PlaySnd
trigger1 = AnimElem = 26
value = 15, 16
channel = 1

[State 3400, 1]
type = PlaySnd
trigger1 = AnimElem = 26
value = 15, 9
channel = 2



[State 3400, 2]
type = StateTypeSet
trigger1 = Time = 0
statetype = S
movetype = A
physics = S

[State 3400, 3]
type = VelSet
trigger1 = AnimElem = 1
y = 0
x = 0

[State 3400, 4]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 3400, 1]
type = PosAdd
trigger1 = AnimElem = 1
x = 30


[State 3400, 4]
type = StateTypeSet
trigger1 = AnimElem = 5
statetype = A
movetype= A
physics = N

[State 3400, 5]
type = VelSet
trigger1 = AnimElem = 5
y = -4

[State 3400, 1]
type = HitDef
trigger1 = AnimElem = 6 || AnimElem = 14
attr = A, HA
damage = 10
getpower = 0
givepower = 0
animtype = Hard
hitflag = MAF
priority = 5, Hit
pausetime = 0, 0
sparkno = S30002
sparkxy = -10, -80
hitsound = S20, var(9)
ground.type = High
ground.hittime  = 14
ground.velocity = 0, -8
air.velocity = 0, -7
air.hittime = 30
fall = 1
air.fall = 1
fall.recover = 0
palfx.time = IfElse((AnimElem = 14), 50, 0)
palfx.add = 112,-88,-255
palfx.color = 0
kill = 0
envshake.time = 12
envshake.ampl = 6; or 7


[State 3400, 1]
type = HitDef
trigger1 = AnimElem = 23
attr = A, HA
damage = 450,45
getpower = 0
givepower = 0
animtype = DiagUp
hitflag = AF
priority = 5, Hit
pausetime = 0, 0
sparkno = S30002
sparkxy = -10, -80
hitsound = S20, var(9)
air.type = High
air.velocity = -2, -9
air.hittime = 65
fall = 1
air.fall = 1
fall.recover = 0
palfx.time = 65
palfx.add = 112,-88,-255
palfx.color = 0
envshake.time = 12
envshake.ampl = 6; or 7

[State 3400, 1]
type = Helper
trigger1 = AnimElem = 4
name = "Snake"
postype = P2
pos = 0, 0
ID = 3450
stateno = 3450
ownpal = 1
persistent = 0
ignorehitpause = 1



[State 3400, 3]
type = Explod
trigger1 = AnimElem = 5 || AnimElem = 23
anim = 371
pos = -31, -173
postype = P1
bindtime = 1
removetime = 16
sprpriority = 3
removeongethit = 1
ownpal = 1
ignorehitpause = 1

[State 3400, 3]
type = Explod
trigger1 = AnimElem = 7 || AnimElem = 25
anim = 372
pos = -44, -34
postype = P1
bindtime = 1
removetime = 16
sprpriority = 3
removeongethit = 1
ownpal = 1
ignorehitpause = 1

[State 3400, 3]
type = Explod
trigger1 = AnimElem = 9 || AnimElem = 27
anim = 373
pos = -71, -120
postype = P1
bindtime = 1
removetime = 16
sprpriority = 3
removeongethit = 1
ownpal = 1
ignorehitpause = 1

[State 3400, 5]
type = VelSet
trigger1 = AnimElem = 24
y = -1.5
x = -1

[State 3400, 5]
type = VelSet
trigger1 = AnimElem = 29
y = .2
x = -2

[State 3400, 5]
type = VelMul
trigger1 = AnimElem = 30, >= 0
trigger1 = AnimElem = 40, <= 0
y = 1.1

[State 3400, 4]
type = StateTypeSet
trigger1 = AnimElem = 40
physics = A


;---------------------------------------------------------------------------
; Fire Snake
[Statedef 3450]
type = S
movetype = I
physics = N
anim = 3450
sprpriority = 2
ctrl = 0

[State 3450, 1]
type = Explod
trigger1 = Time = 0
anim = 3460
pos = 16, -27
postype = P2
bindtime = 1
removetime = 100
sprpriority = 3
removeongethit = 1
ownpal = 1
ignorehitpause = 0

[State 3450, 1]
type = Explod
trigger1 = Time = 0
anim = 3470
pos = -16, -62
postype = P2
bindtime = 1
removetime = 107
sprpriority = 1
removeongethit = 1
ownpal = 1
ignorehitpause = 0

[State 3450, 1]
type = Explod
trigger1 = Time = 0
anim = 3480
pos = 14, -70
postype = P2
bindtime = 1
removetime = 115
sprpriority = 3
removeongethit = 1
ownpal = 1
ignorehitpause = 0

[State 3450, 1]
type = Explod
trigger1 = Time = 0
anim = 3490
pos = -16, -109
postype = P2
bindtime = 1
removetime = 131
sprpriority = 3
removeongethit = 1
ownpal = 1
ignorehitpause = 0

[State 3450, 1]
type = Explod
trigger1 = Time = 0
anim = 3500
pos = 11, -98
postype = P2
bindtime = 1
removetime = 132
sprpriority = 3
removeongethit = 1
ownpal = 1
ignorehitpause = 0

[State 3450, 1]
type = DestroySelf
trigger1 = AnimTime = 0

;---------------------------------------------------------------------------
; P2 Dead
[Statedef 4950]
type = A
movetype = I
physics = N
anim = 4949
sprpriority = -5
ctrl = 0

[State 4950, 1]
type = Explod
triggerall = !NumExplod(4950)
trigger1 = root, HitDefAttr = SCA, NA, NP, NT, SA
trigger2 = root, stateno = 810
anim = 4950
pos = 0, 0
scale = 1.05263, 1.07142
facing = 1
postype = Left
bindtime = -1
removetime = 38
ID = 4950
sprpriority = -5
ignorehitpause = 1
persistent = 0

[State 4950, 2]
type = AssertSpecial
trigger1 = NumExplod(4950)
flag = nobg
flag2 = nofg

[State 4950, 1]
type = DestroySelf
trigger1 = Time = 38

;---------------------------------------------------------------------------
; P2 Dead 2 (Hyper)
[Statedef 4960]
type = A
movetype = I
physics = N
anim = 4949
sprpriority = -5
ctrl = 0

[State 4960, 1]
type = BGPalFX
trigger1 = time = [0,63]
time = 1
add = 255 - time * 4, 255 - time * 4, 255 - time * 4

[State 4960, 2]
type = DestroySelf
trigger1 = Time = 63

;---------------------------------------------------------------------------
; Counter
[Statedef 4990]
type = A
movetype = I
physics = N
anim = 4990
sprpriority = -5
ctrl = 0

[State 4990, 1]
type = Turn
trigger1 = Time = 0
trigger1 = Root, Facing = -1

[State 4990, 2]
type = VelSet
trigger1 = anim
x = IfElse((Time = [0, 9]) && (Root, Facing = 1), 8, IfElse((Time = [0, 9]) && (Root, Facing = -1), -8, 0))

[State 4990, 3]
type = DestroySelf
trigger1 = Time = 40

;---------------------------------------------------------------------------
; Repelled
[Statedef 5185]
type = S
movetype = H
physics = N
velset = 0, 0
ctrl = 0

[State 5185, 1]
type = PosSet
trigger1 = Time = 0 && Pos Y != 0
y = 0

[State 5185, 1]
type = ChangeAnim
trigger1 = Time = 0 && AnimExist(5185)
trigger1 = Name = "Lee Rekka"
trigger1 = anim = 330 || anim = 1000 || anim = 1100 || (anim = [3000, 3400])
value = 5185

[State 5185, 1]
type = ChangeAnim
triggerall = Time = 0 && AnimExist(5187)
trigger1 = Name = "Amano Hyo"
trigger1 = anim = 400 || anim = 410
value = 5187

[State 5185, 1]
type = ChangeAnim
triggerall = Time = 0 && AnimExist(5180)
trigger1 = Name = "Amano Hyo"
trigger1 = anim = 220 || anim = 225
trigger2 = Name = "Lee Rekka" && anim != 5185
value = 5180

[State 5185, 2]
type = ChangeAnim
trigger1 = Time = 0 && anim != 5180 && anim != 5187 && AnimExist(5185)
value = 5185

[State 5185, 4]
type = ChangeAnim2
trigger1 = Time = 0
trigger1 = anim != 5185 && anim != 5180 && anim != 5187
value = 5186

[State 5185, 1]
type = PosAdd
triggerall = TimeMod = 2, 0
trigger1 = anim = 5185
trigger1 = AnimElem = 3, >= 0
trigger1 = AnimElem = 3, <= 20
trigger2 = anim = 5186
trigger2 = AnimElem = 3, >= 0
trigger2 = AnimElem = 3, <= 20
trigger3 = anim = 5187
trigger3 = AnimElem = 3, >= 0
trigger3 = AnimElem = 3, <= 20
x = 1

[State 5185, 1]
type = PosAdd
triggerall = TimeMod = 2, 1
trigger1 = anim = 5185
trigger1 = AnimElem = 3, >= 0
trigger1 = AnimElem = 3, <= 20
trigger2 = anim = 5186
trigger2 = AnimElem = 3, >= 0
trigger2 = AnimElem = 3, <= 20
trigger3 = anim = 5187
trigger3 = AnimElem = 3, >= 0
trigger3 = AnimElem = 3, <= 20
x = -1

[State 5185, 3]
type = ChangeAnim
trigger1 = anim = 5180 && Time = 37
value = anim + 1

[State 5185, 5]
type = ChangeAnim
trigger1 = anim = 5186 && AnimTime = 0
value = 5007

[State 5185, 6]
type = VelSet
trigger1 = Time = 0
x = IfElse((anim = 5180), -1, 0)

[State 5185, 7]
type = SelfState
triggerall = anim != 5187
trigger1 = anim = 5185 && AnimTime = 0
trigger2 = anim = 5181 && AnimTime = 0
trigger3 = Time = 50
value = 0
ctrl = 1

[State 5185, 7]
type = SelfState
trigger1 = anim = 5187 && AnimTime = 0
value = 11
ctrl = 1





















[Statedef 2555]
type     = S
movetype = A
physics  = S
poweradd = -1000
juggle   = 5
velset   = 0,0
anim     = 2050
ctrl     = 0
sprpriority = 2

[State 810, ¨IÈLÌ]
type = Width
trigger1 = 1
edge = 15,0


[State 863, 1]
type = SuperPause
trigger1 = AnimElem = 1
anim = -1
time = 25
movetime = 25
darken = 0

[State 1050, NotHitBy]
type = NotHitBy
trigger1 = time <= 40
value = SCA,NA,SA,HA,NP,SP,HP

[State 863, 4]
type = Explod
trigger1 = AnimElem = 1
anim = 17000
pos = -2,-64
postype = p1
sprpriority = -2
supermove = 1
bindtime = 1
scale = .5,.5

[State 863, 4]
type = Explod
trigger1 = AnimElem = 1
anim = 17010
pos = -2,-64
postype = p1
sprpriority = 9
persistent = 0
supermove = 1
bindtime = 1
scale = .5,.5

[State 1700, 3]
type = PlaySnd
trigger1 = AnimElem = 1
value = 17000,0

[State 4000, BGPalFX]
type = BGPalFX
trigger1 = 1
time = 2
mul = 900,900,900
add = -250,-250,-250
ignorehitpause = 1

[State 3000,ºÚÉ«µ×É«]
type = Envcolor
trigger1 = 1
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 130
under = 1
supermove = 1


[State 1000, ¹ðÂç·]
type = PlaySnd
trigger1 = AnimElemtime(1) = 5
value = s10,1

[State 1000, ¹ðÂç·]
type = PlaySnd
trigger1 = AnimElem = 2
value = s12,10

;[State 1000, ¹ðÂç·]
;type = PlaySnd
;trigger1 = AnimElem = 11
;value = s12,7

[State 1000, ¹ðÂç·]
type = PlaySnd
trigger1 = Movehit = 1
value = s13,0

[State 700, GtFNg\¦]
type = Explod
trigger1 = AnimElem = 11
anim = 20050
postype = P1
pos = 80, 0
sprpriority = 5
ownpal = 1
supermove = 1
vel = -5,0
removeongethit = 1

[State 1000, ]
type = Velset
trigger1 = AnimElemtime(2) > 0 && AnimElemtime(8) <= 0
x = -8

[State 1000, ]
type = Velset
trigger1 = AnimElemtime(11) > 0 && AnimElemtime(18) <= 0
x = 24

[State 1000, ]
type = Velset
trigger1 = AnimElemtime(18) = 10
x = 0

[State 2110, èÆdÈÁ½Ì]
type = PlayerPush
trigger1 = AnimElemTime(11) > 0 && AnimElemtime(18) <= 5
value = 0

[State -3, ¬÷µ½Æ«Ìc]
type = AfterImage
trigger1 = AnimElem = 11
time = 12
trans = add1
timegap = 4
framegap = 1
length = 3
palbright = 50,50,50
palcontrast = 0,0,0

[State 200, qbgè`]
type = HitDef
trigger1 = time = 0
attr = S, HA
damage = 300,30
getpower = 0
animtype = Hard
guardflag = M
hitflag = MAF
priority = 3, Hit
pausetime = 0, 0
guard.pausetime = 0, 15
sparkno = s30002
guard.sparkno = S30040
sparkxy = -10, -70
hitsound = s21,0
guardsound = s66,0
ground.type = High
ground.slidetime = 20
ground.hittime  = 21
ground.velocity = -8,-8
air.type = High
air.velocity = -8,-8
air.hittime = 12
fall = 1
palfx.time = 95
palfx.add = 30,-40,-140
palfx.sinadd = 60,60,50,10
palfx.color = 0
palfx.invertall = 1
p2stateno = 2222
envshake.time = 12
envshake.ampl = 6; or 7



[State 2000, Xe[gÏX]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1



;è®ì(ãûñ]«òÑ)
[Statedef 2222]
type    = A
movetype= H
physics = N
velset = 0,0
facep2 = 1



[State 1500,]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2120]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 52, 1]
type = VelSet
trigger1 = AnimElem = 4
x = -2.4
y = -18

[State 52, 2]
type = Veladd
trigger1 = AnimElemtime(4) >= 0
y = .52

[State 810,]
type = EnvShake
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
ampl = 10
freq = 100
time = 15

[State 1830]
type = ChangeAnim2
Trigger1 = Time = 0
value = 2222

[State 1830]
type = SelfState
triggerall = AnimElemtime(5) >= 0
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 5100


























































;N]X^[[h[­®]
[Statedef 3555]
type     = S
movetype = A
physics  = S
anim     = 3333
velset   = 0
ctrl     = 0
poweradd = -2000






[State 863, 1]
type = SuperPause
trigger1 = AnimElem = 10
anim = -1
time = 30
movetime = 30
darken = 0

[State 1050, NotHitBy]
type = NotHitBy
trigger1 = time <= 40
value = SCA,NA,SA,HA,NP,SP,HP

[State 863, 4]
type = Explod
trigger1 = AnimElem = 10
anim = 17100
pos = 32,-66
postype = p1
sprpriority = -2
supermove = 1
bindtime = 1
scale = .5,.5

[State 863, 4]
type = Explod
trigger1 = AnimElem = 10
anim = 17110
pos = 32,-66
postype = p1
sprpriority = 9
persistent = 0
supermove = 1
bindtime = 1
scale = .5,.5

[State 1700, 3]
type = PlaySnd
trigger1 = AnimElem = 10
value = 17000,0

[State 4000, BGPalFX]
type = BGPalFX
trigger1 = 1
time = 2
mul = 900,900,900
add = -250,-250,-250
ignorehitpause = 1

[State 3000,ºÚÉ«µ×É«]
type = Envcolor
trigger1 = 1
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 70
under = 1
supermove = 1



[State 3000]
type = PlaySnd
Trigger1 = animelem = 1
value = 10,32
volume = 255

[State 3000]
type = posadd
Triggerall = palno != 12
Trigger1 = AnimElem = 11,>= 0 && AnimElem = 15,< 9
x = 9.1

;[State 3000]
;type = posadd
;Triggerall = palno = 12
;Trigger1 = AnimElem = 11,>= 0 && AnimElem = 15,< 9
;x = 9.3

[State 3000]
type = AfterImage
Trigger1 = AnimElem = 12
time = 50
length = 10
framegap = 3
palcontrast = 32,32,32
paladd = 0,0,0
palmul = 1,1,1

[State 3000]
type = HitDef
Trigger1 = animelem= 11
attr = S, HA
givepower = 40
hitflag = MAF
priority = 2, Miss
sparkno =  -1
p2facing = 1
p1stateno = 3666
p2stateno = 3777
guard.dist = 0 

[State 3000]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;N]X^[[h
[Statedef 3666]
type     = S
movetype = A
physics  = S
anim     = 30010
velset   = 0
ctrl     = 0
sprpriority = -1
facep2   = 1




[State 3000]
type = SuperPause
Trigger1 = Time = 2
time = 96
anim = -1
p2defmul = 1
movetime = 96
darken = 0

[State 3000]
Type = AttackDist
Trigger1 = 1
Value = 0
Persistent = 1

[State 3001]
type = AssertSpecial
Trigger1 = Time = [0,135]
flag = timerfreeze
ignorehitpause = 1

[State 3001]
type = Envcolor
trigger1 = time =0
time = 2
value = 255,255,255
under = 0

[State 3001]
type = BgPalFx
Trigger1 = time = 0
time = 135
add = -128,-128,-128

[State 3001]
type = posadd
Trigger1 = animelem = 1
x = P2bodydist X + 150

[State 3001]
type = Width
Trigger1 = 1
edge = 30,0

[State 3001]
type = PlaySnd
Trigger1 = animelem = 1
value = 1100,1
volume = 255

[State 3001]
type = PlaySnd
Trigger1 = animelem = 20
value = 10,15
volume = 255

[State 3001]
type = HitAdd
Trigger1 = animelem = 28
Trigger2 = animelem = 30
Trigger3 = animelem = 32
Trigger4 = animelem = 34
Trigger5 = animelem = 36
Trigger6 = animelem = 38
Trigger7 = animelem = 40
Trigger8 = animelem = 42
Trigger9 = animelem = 44
Trigger10 = animelem = 46
Trigger11 = animelem = 48
value = 1

[State 3001]
type = PlaySnd
Trigger1 = animelem = 28
Trigger2 = animelem = 30
Trigger3 = animelem = 32
Trigger4 = animelem = 34
Trigger5 = animelem = 36
Trigger6 = animelem = 38
Trigger7 = animelem = 40
Trigger8 = animelem = 42
Trigger9 = animelem = 44
Trigger10 = animelem = 46
Trigger11 = animelem = 48
value = S20, var(9)
volume = 255

[State 0, EnvShake]
type = EnvShake
Trigger1 = animelem = 28
Trigger2 = animelem = 30
Trigger3 = animelem = 32
Trigger4 = animelem = 34
Trigger5 = animelem = 36
Trigger6 = animelem = 38
Trigger7 = animelem = 40
Trigger8 = animelem = 42
Trigger9 = animelem = 44
Trigger10 = animelem = 46
Trigger11 = animelem = 48
time = 12
ampl = 6

[State 3001]
type = Explod
Trigger1 = animelem = 28
Trigger2 = animelem = 30
Trigger3 = animelem = 32
Trigger4 = animelem = 34
Trigger5 = animelem = 36
Trigger6 = animelem = 38
Trigger7 = animelem = 40
Trigger8 = animelem = 42
Trigger9 = animelem = 44
Trigger10 = animelem = 46
Trigger11 = animelem = 48
anim = 30002
sprpriority = 3
postype = p2
pos = 0,-80
bindtime = 1
random = 10, 10
supermove = 1
under = 0
ownpal = 1


[State 3001]
type = PlaySnd
Trigger1 = AnimElem = 46
value = 0,11
volume = 255

[State 3001]
type = EnvColor
Trigger1 = Animelem = 46
value = 255, 255, 255
time = 1
under = 0

[State 3001]
type = envshake
Trigger1 = Animelem = 46
ampl = -10
time = 30


[State 3001]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;N]X^[[hp2
[Statedef 3777]
type    = S
movetype= H
physics = S
velset  = 0,0

[State 3002]
type = ChangeAnim2
Trigger1 = Time = 0
value = 30020

[State 3002]
type = Width
Trigger1 = Time = 0
value = 0,120

[State 3002]
type = PosSet
Trigger1 = Animelem = 1
y = 0

[State 3002]
type = screenbound
Trigger1 = 1
value = 1
movecamera = 1

[State 3002]
type = statetypeset
Trigger1 = Animelem = 23
value = A

[State 3002]
type = Velset
Trigger1 = Animelem = 23
y = -21

[State 3002]
type = VelAdd
Trigger1 = Animelem = 23,>= 0
y = .46

[State 3002]
type = LifeAdd
Trigger1 = AnimElem = 4
Trigger2 = AnimElem = 5
Trigger3 = AnimElem = 6
Trigger4 = AnimElem = 7
Trigger5 = AnimElem = 8
Trigger6 = AnimElem = 9
Trigger7 = AnimElem = 10
Trigger8 = AnimElem = 11
Trigger9 = AnimElem = 12
Trigger10 = AnimElem = 13
Trigger11 = AnimElem = 14
Trigger12 = AnimElem = 15
Trigger13 = AnimElem = 16
Trigger14 = AnimElem = 17
Trigger15 = AnimElem = 18
Trigger16 = AnimElem = 19
Trigger17 = AnimElem = 20
Trigger18 = AnimElem = 21
Trigger19 = AnimElem = 22
value = -16
kill = 0
absolute = 1

[State 3002]
type = LifeAdd
Trigger1 = AnimElem = 23
value = -150
kill = 1
absolute = 1

[State 3002]
type = palfx
Trigger1 = Animelem = 23
time = 86
add = -200,-200,-200
sinadd = 92,92,92,12
color = 0
invertall = 1

[State 3002]
type = SelfState
TriggerAll = Time >= 100
Trigger1 = Vel Y > 0 && Pos Y >= 0
value = 5100






























;-----------------------------------------------------------------------
[Statedef 700]
type = S
movetype = I
physics = N
anim = 700
velset = 0
ctrl = 0
Sprpriority = -1
facep2 = 1


[State 250,3]
type = PlaySnd
trigger1 = Time = 0
value = 0+var(15)*10,5

[State 47 2]
type = Afterimagetime
trigger1 = time%2 = 0 && Time < 9
time = 2

[State 800,1]
type = HitBy
trigger1 = Time >= 0
trigger1 = animtime <= 0 - 9
value = SCA,NT,ST
time = 1

[State 800,6]
type = PlayerPush
trigger1 = 1
value = 0

[State 250,4]
type = VelSet
trigger1 = AnimElem = 2&&prevstateno = 100
x = 7.5

[State 250,4]
type = VelSet
trigger1 = AnimElem = 2&&prevstateno != 100
x = 6.5

[State 250,5]
type = VelAdd
trigger1 = AnimElem = 2,>= 0
trigger1 = AnimElem = 6,< 0
x = -.1

[State 250,6]
type = VelSet
trigger1 = AnimElem = 6
x = 0

[State 250,7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;--------------------------------------------------
[Statedef 710]
type = S
movetype = I
physics = N
anim = 710
velset = 0
ctrl = 0


[State 250,3]
type = PlaySnd
trigger1 = Time = 0
value =0,5

[State 47 2]
type = Afterimagetime
trigger1 = time%2 = 0 && Time < 9
time = 2

[State 800,1]
type = HitBy
trigger1 = Time >= 0
trigger1 = animtime <= 0 - 9
value = SCA,NT,ST
time = 1

[State 800,6]
type = PlayerPush
trigger1 = 1
value = 0

[State 250,4]
type = VelSet
trigger1 = AnimElem = 2&&prevstateno = 105
x = -7.5

[State 250,4]
type = VelSet
trigger1 = AnimElem = 2&&prevstateno != 105
x = -6.5

[State 260,5]
type = VelAdd
trigger1 = AnimElem = 2,>= 0
trigger1 = AnimElem = 6,< 0
x = .1

[State 260,6]
type = VelSet
trigger1 = AnimElem = 6
x = 0

[State 260,7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1







;====================================================
[Statedef 1510]
type = S
movetype = A
physics = S
anim = 15010
velset = 0
poweradd = 100
ctrl = 0
facep2 = 1

[State 1000,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 5
value = 7,20
channel = 0

[State 1000,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 8
value = 8,8


[State 0, ]
type = Projectile
trigger1 = AnimELem = 8
projID = 1500
projanim = 15050
projhits = 1
projpriority = 3
projsprpriority = 3
projremovetime = -1
offset = 35,-65
velocity = 5.2,0
postype = p1
attr = S, SP
damage = 120,12
animtype = hard
guardflag = M
hitflag = MA
pausetime = 0, 13
sparkno = S30002
sparkxy = 30, 0
guard.sparkno = s30040
hitsound = s55,1
guardsound = s66,0
ground.type = High
ground.slidetime = 20
ground.hittime = 20
ground.velocity = -10
air.velocity = -2,-4
envshake.time = 12
envshake.ampl = 6; or 7


[State 1000,Helper]
type = Helper
trigger1 = AnimElem = 8
helpertype = normal
name = "Sensu"
pos = 35,-65
postype = P1
stateno = 1515
keyctrl = 0
ownpal = 1

[State 2000,5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------ 
[Statedef 1515]
type = A
movetype = I
physics = N
anim = 15051
velset = 5.2,0
ctrl = 0

[State 1010,ChangeState]
type = ChangeState
trigger1 = FrontEdgeDist > -25 && Parent,NumProjID(1500) = 0
value = 1506

[State 1000,AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 1010,DestroySelf]
type = DestroySelf
trigger1 = FrontEdgeDist <= -25
;=======================================================================



;------------------------ 
[Statedef 1506]
type = A
movetype = I
physics = N
anim = 15055
velset = -1.0,-5.4
ctrl = 0
sprpriority = 2

[State 1020,VelAdd]
type = VelAdd
trigger1 = 1
y = .4

[State 1000,AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 1020,DestroySelf]
type = DestroySelf
trigger1 = time = 38
















;-----------------------------------------------------------------------
;ÍÆÕÆ³åÈ­
;-----------------------------------------------------------------------
[Statedef 3700]
type = S
movetype = A
physics = N
anim = 1510
velset = 0,0
ctrl = 0
poweradd = -1000



[State 863, 1]
type = SuperPause
trigger1 = AnimElem = 3
anim = -1
time = 33
movetime = 33
darken = 0

[State 1050, NotHitBy]
type = NotHitBy
trigger1 = time <= 40
value = SCA,NA,SA,HA,NP,SP,HP

[State 863, 4]
type = Explod
trigger1 = AnimElem = 3
anim = 17000
pos = -8,-63
postype = p1
sprpriority = -2
supermove = 1
bindtime = 1
scale = .5,.5

[State 863, 4]
type = Explod
trigger1 = AnimElem = 3
anim = 17010
pos = -8,-63
postype = p1
sprpriority = 9
persistent = 0
supermove = 1
bindtime = 1
scale = .5,.5

[State 1700, 3]
type = PlaySnd
trigger1 = AnimElem = 3
value = 17000,0

[State 4000, BGPalFX]
type = BGPalFX
trigger1 = 1
time = 2
mul = 900,900,900
add = -250,-250,-250
ignorehitpause = 1

[State 3000,ºÚÉ«µ×É«]
type = Envcolor
trigger1 = 1
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 70
under = 1
supermove = 1

[State 200, 1]
type = PlaySnd
trigger1 = animelem = 4
value = S1,4


[State 500,1]
type = PlaySnd
trigger1 = animelem = 5
value =10,5

[State 3000,1]
type = Varset
trigger1 = time = 0
var(10) = 0

[State 1100,1]
type = PosAdd
trigger1 = AnimElem = 4|animelem = 5
x = 8+(AnimElem = 6)*5

[state 1000,vel]
type = velset
trigger1 = animelem = 5
x = 10

[state 1000,vel]
type = velset
trigger1 = animelem = 6
x = 0


[State 3500,4]
type = StateTypeSet
trigger1 = AnimElem = 7
physics = S


[State 280,5]
type = HitDef
trigger1 = AnimElem = 6
attr = S,SA
damage = 150,15
givepower = 0,0
hitflag = MAF
guardflag = M
animtype = Hard
ground.type = low
pausetime = 24,55
sparkno = s30002
guard.sparkno = s30040
sparkxy = -15,-65
hitsound = s55,4
guardsound = s66,0
ground.slidetime = 30
ground.hittime = 30
ground.velocity = -10
guard.hittime = 14
guard.velocity = -3
ground.cornerpush.veloff = -3
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
;p2stateno = 2220
envshake.time = 12
envshake.ampl = 6; or 7


[State 183,3]
type = EnvShake
trigger1 = animelem = 6
ignorehitpause = 1
ampl = 4
freq = 150
time = 10

[State 2600,2]
type = ChangeState
trigger1 = movecontact
value = 3701

[State 3500,2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[Statedef 3701]
type = S
movetype = A
physics = S
anim = 1517
velset = 0
ctrl = 0
facep2 = 1

[State 200, 1]
type = PlaySnd
trigger1 = animelem = 10
value = S1,4

[State 4000, BGPalFX]
type = BGPalFX
trigger1 = 1
time = 2
mul = 900,900,900
add = -250,-250,-250
ignorehitpause = 1

[State 3000,ºÚÉ«µ×É«]
type = Envcolor
trigger1 = 1
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 70
under = 1
supermove = 1

[State 810,1]
type = Width
trigger1 = time=0
edge = 60,0
player = 60


[State 183,3]
type = EnvShake
trigger1 = AnimElem = 11
ignorehitpause = 1
ampl = 4
freq = 200
time = 15



[State 500,1]
type = PlaySnd
trigger1 = animelem = 10
value =7,0


[State 5040,4]
type = StateTypeSet
trigger1 = AnimElem = 12
movetype = I

[State 1100,1]
type = PosAdd
trigger1 = AnimElem = 10|AnimElem = 11,0
x = 8+(AnimElem = 11)*5

[State 280,5]
type = HitDef
trigger1 = AnimElem = 11,1
attr = S,SA
animtype = Hard
damage = 150,15
getpower = 0,0
hitflag = MAF
guardflag = M
pausetime = 11,12
sparkno = s30002
guard.sparkno = s30040
sparkxy = -15,-65
hitsound = s55,4
guardsound = s66,0
ground.slidetime = 30
ground.hittime = 27
ground.velocity = -20
air.velocity = -5,-8
air.fall = 1
guard.hittime = 14
guard.velocity = -18
envshake.time = 12
envshake.ampl = 6; or 7
fall = 1

[State 2000,5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;=======================================================================










;====================================================================
;²ù½ÅÂÒÎè
;====================================================================
[Statedef 3750]
type = S
movetype = A
physics = N
anim = 3600 
velset = 0,0
ctrl = 0
poweradd = -1000


[State 863, 1]
type = SuperPause
trigger1 = AnimElem = 4
anim = -1
time = 30
movetime = 30
darken = 0

[State 1050, NotHitBy]
type = NotHitBy
trigger1 = time <= 40
value = SCA,NA,SA,HA,NP,SP,HP

[State 863, 4]
type = Explod
trigger1 = AnimElem = 4
anim = 17000
pos = 1,-38
postype = p1
sprpriority = -2
supermove = 1
bindtime = 1
scale = .5,.5

[State 863, 4]
type = Explod
trigger1 = AnimElem = 4
anim = 17010
pos = 1,-38
postype = p1
sprpriority = 9
persistent = 0
supermove = 1
bindtime = 1
scale = .5,.5

[State 1700, 3]
type = PlaySnd
trigger1 = AnimElem = 4
value = 17000,0

[State 4000, BGPalFX]
type = BGPalFX
trigger1 = 1
time = 2
mul = 900,900,900
add = -250,-250,-250
ignorehitpause = 1

[State 3000,ºÚÉ«µ×É«]
type = Envcolor
trigger1 = 1
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 70
under = 1
supermove = 1


[State 3500,1]
type = PlaySnd
trigger1 = AnimElem = 14
value = 8,12
channel = 3


[State 3500,2]
type = VelSet
trigger1 = AnimElem = 6
x = 7

[State 3500,4]
type = StateTypeSet
trigger1 = AnimElem = 12
physics = S

[State 1001,7]
type = HitDef
trigger1 = 1
attr = S,HA
animtype = Hard
damage = 23,2
getpower  = 0
sparkno = s30002
guard.sparkno = s30040
sparkxy = -5,-10
hitflag = MAF
guardflag = L
pausetime = 11,12
guard.pausetime = 4,4
hitsound = s55,3
guardsound = s66,0
p2facing = 1
ground.type = Low
ground.slidetime = 30
ground.hittime = 17
ground.velocity = 0
guard.hittime = 14
guard.velocity = -13
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p1stateno = 3751
envshake.time = 12
envshake.ampl = 6; or 7

;[State 3500,6]
;type = ChangeState
;trigger1 = MoveGuarded
;value = 3550

[State 3500,2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-----------------------------------------------------------------------
[Statedef 3751]
type = S
movetype = A
physics = S
anim = 3260
ctrl = 0
velset = 0

[State 3000,2]
type = targetstate
trigger1 = time = 0
value = 2220

[State 500,2]
type = PlaySnd
trigger1 = AnimElem = 1
value = 30,1
channel = 100
volume = 99

[State 3560,1]
type = VelSet
trigger1 = AnimElem = 24,<0
x = 2

[State 3560,1]
type = VelSet
trigger1 = AnimElem = 24
x = 0

[State 200,3]
type = HitDef
trigger1 = AnimElem = 1
trigger2 = AnimElem = 3
attr = S,NA
animtype = Light
damage = 23,2
hitflag = MAF
guardflag = M
pausetime = 3,4
sparkno = s30002
sparkxy = -15,-75
guard.sparkno = s30040
hitsound = s55,1
guardsound = s66,0
ground.type = high
ground.slidetime = 30
ground.hittime = 17
ground.velocity = -2
guard.hittime = 14
guard.velocity = 0
;p2stateno = 2250
;snap = 75,0
;kill = 0
envshake.time = 12
envshake.ampl = 6; or 7

[State 200,3]
type = HitDef
trigger1 = AnimElem = 4
trigger2 = AnimElem = 6
attr = S,NA
animtype = Light
damage = 23,2
hitflag = MAF
guardflag = M
pausetime = 3,4
sparkno = s30002
guard.sparkno = s30040
sparkxy = -15,IfElse((AnimElem = 4),-60,-10)
hitsound = s55,3
guardsound = s66,0
ground.type = low
ground.slidetime = 30
ground.hittime = 17
ground.velocity = -2
guard.hittime = 14
guard.velocity = 0
;p2stateno = 2220
;snap = 75,0
;kill = 0
envshake.time = 12
envshake.ampl = 6; or 7

[State 1505,6]
type = HitDef
trigger1 = AnimElem = 8||AnimElem = 20
attr = S,NA
animtype = Light
damage = 23,2
sparkno = s30002
guard.sparkno = s30040
sparkxy = -25,-60
guardflag = M
hitflag = M
pausetime = 7,8+(AnimElem = 20)*5
hitsound = s55,3
guardsound = s66,0
ground.type = low
ground.slidetime = 30
ground.hittime = 20
ground.velocity = -2
guard.hittime = 16
guard.velocity = 0
;p2stateno = 2220
;snap = 75,0
;kill = 0
envshake.time = 12
envshake.ampl = 6; or 7

[State 1436,1]
type = HitDef
trigger1 = AnimElem = 12
attr = S,NA
animtype = Light
damage = 23,2
hitflag = MA
pausetime = 3,4
sparkno = s30002
guard.sparkno = s30040
sparkxy = -15,-60
hitsound = s55,3
guardsound = s66,0
ground.type = low
ground.slidetime = 20
ground.hittime = 24
ground.velocity = -4
guard.hittime = 6
guard.velocity = -7
;p2stateno = 2250
;snap = 75,0
;kill = 0
envshake.time = 12
envshake.ampl = 6; or 7

[State 1436,1]
type = HitDef
trigger1 = AnimElem = 10|AnimElem = 14
trigger2 = AnimElem = 18|AnimElem = 15
attr = S,NA
animtype = Light
damage = 23,2
hitflag = MA
pausetime = 4,5
sparkno = s30002
guard.sparkno = s30040
sparkxy = -15,-60
hitsound = s55,3
guardsound = s66,0
ground.type = high
ground.slidetime = 20
ground.hittime = 24
ground.velocity = -4
guard.hittime = 6
guard.velocity = -7
;p2stateno = 2220
;snap = 75,0
;kill = 0
envshake.time = 12
envshake.ampl = 6; or 7

[State 1436,1]
type = HitDef
trigger1 = AnimElem = 24
attr = S,NA
animtype = Diagup;Hard
damage = 23,2
getpower = 0,0
givepower = 20,0
hitflag = MA
pausetime = 15,15
sparkno = s30002
guard.sparkno = s30040
sparkxy = -15,-70
hitsound = s55,4
guardsound = s66,0
ground.type = low
ground.slidetime = 30
ground.hittime = 30
ground.velocity = -15
air.velocity = -4,-8
fall = 1
guard.hittime = 16
guard.velocity = -27
ground.cornerpush.veloff = 30
guard.cornerpush.veloff = 30
air.cornerpush.veloff = 30
envshake.time = 12
envshake.ampl = 6; or 7

[State 4000, BGPalFX]
type = BGPalFX
trigger1 = 1
time = 2
mul = 900,900,900
add = -250,-250,-250
ignorehitpause = 1

[State 3000,ºÚÉ«µ×É«]
type = Envcolor
trigger1 = 1
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 70
under = 1
supermove = 1


[State 3560,2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1











;=======================================================================
;±¦Ö¥ÁÖ
;=======================================================================
[Statedef 3900]
type = S
movetype = A
physics = S
anim = 3900
sprpriority = 3
velset = 0,0
ctrl = 0
poweradd = -3000




[State 2000, 2]
type = SuperPause
trigger1 = AnimElem = 2
time = 40
movetime = 40
anim = -1

[State 1700, 3]
type = PlaySnd
trigger1 = time = 1
value = 17000,1

[State 1700, 3]
type = PlaySnd
trigger1 = AnimElem = 2
value = 17000,0

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay
flag2 = nobg
flag3 = nofg

[State 210, Hyper bg Explod]
type = Explod
trigger1 = !time
removetime = 109
id =6090
anim = 16090
pos = 0,0
postype = Left
sprpriority = -4
facing = 1
vfacing = 1
ownpal = 1
bindtime = -1
ontop = 0
ownpal = 1
supermove = 1
pausemove = 1
removeongethit = 1
ignorehitpause = 1
persistent = 1
supermovetime = 9999
pausemovetime =  9999
scale = .5,.5

[State 1050, NotHitBy]
type = NotHitBy
trigger1 = time <= 40
value = SCA,NA,SA,HA,NP,SP,HP

[State 863, 4]
type = Explod
trigger1 = AnimElem = 2
anim = 17200
pos = 3,-35
postype = p1
sprpriority = -2
supermove = 1
bindtime = 1
scale = .5,.5

[State 863, 4]
type = Explod
trigger1 = AnimElem = 2
anim = 17210
pos = 3,-35
postype = p1
sprpriority = 9
persistent = 0
supermove = 1
bindtime = 1
scale = .5,.5

[State 4000, BGPalFX]
type = BGPalFX
trigger1 = 1
time = 2
mul = 900,900,900
add = -250,-250,-250
ignorehitpause = 1

[State 3000,ºÚÉ«µ×É«]
type = Envcolor
trigger1 = 1
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 109
under = 1
supermove = 1






[State 1450,snd]
type = PlaySnd
trigger1 = animelem = 3
value = 7,29
Volume = 255


[State 500,2]
type = PlaySnd
trigger1 = AnimElem = 1
value = 30,2
channel = 100
volume = 100



[State 10074,7]
type = AssertSpecial
trigger1 = 1
flag = nomusic

[State 3500,2]
type = VelSet
trigger1 = AnimElem = 9
x = 10

[State 3500,2]
type = VelSet
trigger1 = AnimElem = 20
x = 0

[State 1001,7]
type = HitDef
trigger1 = time = 0
attr = S,HA
animtype = Hard
damage = 50,5
getpower  = 0
givepower = 20,20
sparkno = s30002
guard.sparkno = s30040
sparkxy = -15,-60
hitflag = MAF
guardflag = M
pausetime = 11,12
guard.pausetime = 4,4
hitsound = s55,1
guardsound = s66,0
p2facing = 1
ground.type = Low
ground.slidetime = 30
ground.hittime = 17
ground.velocity = 0
guard.hittime = 14
guard.velocity = -13
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = 2220
snap = 75,0
;p1stateno = 3920
kill = 0
id=3920
envshake.time = 12
envshake.ampl = 6; or 7

[State 2600,2]
type = ChangeState
trigger1 = P2movetype =H&&numtarget(3920)
trigger1 = MoveHit
value = 3920;+Random%2


[State 3500,6]
type = ChangeState
trigger1 = MoveGuarded
value = 3910

[State 1100,1];Ê¨×ÓµÀ¾ß
type = Helper
trigger1 = AnimElem = 20
id = 3911
sprpriority = 10
postype = P1
pos = 0,0
stateno = 3911
helpertype = normal
keyctrl = 0 
ownpal = 1

[State 3500,2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;-----------------------------------------------------------------------
[Statedef 2220]
type    = A
movetype= H
physics = N
velset = 0,0


[State 0,AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay


[State 52,1]
type = Hitfallset
trigger1 = 1
value = 0

[State 52,1]
type = VelSet
trigger1 = 1
x = 0
y = 0

[State 52,2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1830]
type = ChangeAnim2
Trigger1 = Time = 0
value = 2251

[State 1830]
type = SelfState
trigger1 = time > 54
value = 5000

[State 1830]
type = SelfState
trigger1 = Animtime = 0
value = 0
ctrl = 1

;-----------------------------------------------------------------------
[Statedef 3910];¹¥»÷±»·ÀÓùºóµÄÊÕÕÐ¶¯×÷
type = S
movetype= I
physics = S
ctrl = 0
anim = 3910
sprpriority = 1


[State 4000, BGPalFX]
type = BGPalFX
trigger1 = 1
time = 2
mul = 900,900,900
add = -250,-250,-250
ignorehitpause = 1

[State 3000,ºÚÉ«µ×É«]
type = Envcolor
trigger1 = 1
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 70
under = 1
supermove = 1

[State 0,AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nomusic

[State 3550,2]
type = VelSet
trigger1 = AnimElem = 1
x = 1

[State 1100,1];Ê¨×ÓµÀ¾ß
type = Helper
trigger1 = AnimElem = 3
id = 3911
sprpriority = 10
postype = P1
pos = 0,0
stateno = 3911
helpertype = normal
keyctrl = 0 
ownpal = 1

[State 3550,1]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;-----------------------------------------------------------------------
[Statedef 3911]
type = A
movetype = I
physics = N
anim = 3911
sprpriority = 4
ctrl = 0


[State 4000, BGPalFX]
type = BGPalFX
trigger1 = 1
time = 2
mul = 900,900,900
add = -250,-250,-250
ignorehitpause = 1

[State 3000,ºÚÉ«µ×É«]
type = Envcolor
trigger1 = 1
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 70
under = 1
supermove = 1


[State 193,6]
type = VelSet
trigger1 = Time = 0
x = -3
y = -.53

[State 193,1]
type = PlaySnd
trigger1 = AnimElem = 1,4
value = 7,4
channel = 0

[State 193,1]
type = PlaySnd
trigger1 = AnimElem = 1,4
value = 8,10
channel = 1

[state 1027,1]
type =Trans
trigger1 = Time >= 8
trans = addalpha
alpha = 250-(time-8)*2,250

[State 193,6]
type = DestroySelf
trigger1 = Time = 60

;=======================================================================
[Statedef 3920];¹¥»÷µÃ³ÑºóµÄÂÒÎè
type = S
movetype = A
physics = S
anim = 3920
sprpriority = 3
ctrl = 0
velset = 0


[State 4000, BGPalFX]
type = BGPalFX
trigger1 = 1
time = 2
mul = 900,900,900
add = -250,-250,-250
ignorehitpause = 1

[State 3000,ºÚÉ«µ×É«]
type = Envcolor
trigger1 = 1
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 70
under = 1
supermove = 1


[State 0,AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay



[State 10074,7]
type = AssertSpecial
trigger1 = 1
flag = nomusic

[State 700,NotHitBy];ÎÞµÐ
type = NotHitBy
trigger1 = 1
value = SCA

[State 3000,2]
type = targetstate
trigger1 = time = 0
value = 2220

[State 1100,1];Ê¨×ÓµÀ¾ß
type = Helper
trigger1 = AnimElem = 1
id = 3911
sprpriority = 10
postype = P1
pos = 0,0
stateno = 3911
helpertype = normal
keyctrl = 0 
ownpal = 1

[State 3560,1]
type = VelSet
trigger1 = AnimElem = 1,>=0&&AnimElem = 13,<0
x = 2

[State 3560,1]
type = VelSet
trigger1 = AnimElem = 13,>=0
trigger1 = BackEdgeBodyDist > 50
x = -4

[State 500,2]
type = PlaySnd
trigger1 = AnimElem = 1
value = 35,0
channel = 105
volume = -100

[State 200,3]
type = HitDef
trigger1 = AnimElem = 2
trigger2 = AnimElem = 4
attr = S,NA
animtype = Light
damage = ifelse(enemy,var(0) = 1,20,10),0
getpower = 0,0
givepower = 20,0
hitflag = MAFD
pausetime = 2,3
sparkno = s30002
sparkxy = -15,IfElse((AnimElem = 2),-80,-60)
guard.sparkno = s30040
hitsound = s55,1
guardsound = s66,0
ground.type = low
ground.slidetime = 30
ground.hittime = 17
ground.velocity = -2
guard.hittime = 14
guard.velocity = 0
p2stateno = 2250
kill = 0
envshake.time = 12
envshake.ampl = 6; or 7

[State 1505,6]
type = HitDef
trigger1 = AnimElem = 7
attr = S,NA
animtype = Light
damage = ifelse(enemy,var(0) = 1,20,10),0
getpower = 0,0
givepower = 20,0
sparkno = s30002
guard.sparkno = s30040
sparkxy = -25,-85
hitflag = MAFD
pausetime = 3,4
hitsound = s55,3
guardsound = s66,0
ground.type = high
ground.slidetime = 30
ground.hittime = 20
ground.velocity = -2
guard.hittime = 16
guard.velocity = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
p2stateno = 2220
kill = 0
envshake.time = 12
envshake.ampl = 6; or 7

[State 1436,1]
type = HitDef
trigger1 = AnimElem = 11
attr = S,NA
animtype = Light
damage = ifelse(enemy,var(0) = 1,20,10),0
getpower = 0,0
givepower = 20,0
hitflag = MAFD
pausetime = 7,8
sparkno = s30002
sparkxy = -15,-65
guard.sparkno = s30040
hitsound = s55,1
guardsound = s66,0
ground.type = low
ground.slidetime = 20
ground.hittime = 24
ground.velocity = -4
guard.hittime = 6
guard.velocity = -7
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
p2stateno = 2220
kill=0
envshake.time = 12
envshake.ampl = 6; or 7

[State 1436,1]
type = HitDef
trigger1 = AnimElem = 13
attr = S,NA
animtype = Light
damage = ifelse(enemy,var(0) = 1,20,10),0
getpower = 0,0
givepower = 20,0
hitflag = MA
pausetime = 11,12
sparkno = s30002
sparkxy = -15,-70
guard.sparkno = s30040
hitsound = s55,3
guardsound = s66,0
ground.type = low
ground.slidetime = 35
ground.hittime = 24
ground.velocity = -4
guard.hittime = 6
guard.velocity = -7
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
p2stateno = 3915
kill=0
envshake.time = 12
envshake.ampl = 6; or 7

[State 3560,2]
type = ChangeState
trigger1 = AnimTime = 0
value = 3925
ctrl = 0


;=======================================================================
[Statedef 3921];¹¥»÷µÃ³ÑºóµÄÂÒÎè
type = S
movetype = A
physics = S
anim = 3920
sprpriority = 3
ctrl = 0
velset = 0


[State 4000, BGPalFX]
type = BGPalFX
trigger1 = 1
time = 2
mul = 900,900,900
add = -250,-250,-250
ignorehitpause = 1

[State 3000,ºÚÉ«µ×É«]
type = Envcolor
trigger1 = 1
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 70
under = 1
supermove = 1

[State 10074,7]
type = AssertSpecial
trigger1 = 1
flag = nomusic

[State 700,NotHitBy];ÎÞµÐ
type = NotHitBy
trigger1 = 1
value = SCA

[State 3000,2]
type = targetstate
trigger1 = time = 0
value = 2220

[State 1100,1];Ê¨×ÓµÀ¾ß
type = Helper
trigger1 = AnimElem = 1
id = 3911
sprpriority = 10
postype = P1
pos = 0,0
stateno = 3911
helpertype = normal
keyctrl = 0 
ownpal = 1

[State 3560,1]
type = VelSet
trigger1 = AnimElem = 1,>=0&&AnimElem = 13,<0
x = 2

[State 3560,1]
type = VelSet
trigger1 = AnimElem = 13,>=0
trigger1 = BackEdgeBodyDist > 50
x = -4

[State 500,2]
type = PlaySnd
trigger1 = AnimElem = 1
value = 35,0
channel = 105
volume = -100

[State 200,3]
type = HitDef
trigger1 = AnimElem = 2
trigger2 = AnimElem = 4
attr = S,NA
animtype = Light
damage = ifelse(enemy,var(0) = 1,20,10),0
getpower = 0,0
givepower = 20,0
hitflag = MAFD
pausetime = 2,3
sparkno = s30002
sparkxy = -15,IfElse((AnimElem = 2),-80,-60)
guard.sparkno = s30040
hitsound = s55,1
guardsound = s66,0
ground.type = low
ground.slidetime = 30
ground.hittime = 17
ground.velocity = -2
guard.hittime = 14
guard.velocity = 0
p2stateno = 2250
kill = 0
envshake.time = 12
envshake.ampl = 6; or 7

[State 1505,6]
type = HitDef
trigger1 = AnimElem = 7
attr = S,NA
animtype = Light
damage = ifelse(enemy,var(0) = 1,20,10),0
getpower = 0,0
givepower = 20,0
sparkno = s30002
guard.sparkno = s30040
sparkxy = -25,-85
hitflag = MAFD
pausetime = 3,4
hitsound = s55,3
guardsound = s66,0
ground.type = high
ground.slidetime = 30
ground.hittime = 20
ground.velocity = -2
guard.hittime = 16
guard.velocity = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
p2stateno = 2220
kill = 0
envshake.time = 12
envshake.ampl = 6; or 7

[State 1436,1]
type = HitDef
trigger1 = AnimElem = 11
attr = S,NA
animtype = Light
damage = ifelse(enemy,var(0) = 1,20,10),0
getpower = 0,0
givepower = 20,0
hitflag = MAFD
pausetime = 7,8
sparkno = s30002
sparkxy = -15,-65
guard.sparkno = s30040
hitsound = s55,1
guardsound = s66,0
ground.type = low
ground.slidetime = 20
ground.hittime = 24
ground.velocity = -4
guard.hittime = 6
guard.velocity = -7
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
p2stateno = 2220
kill=0
envshake.time = 12
envshake.ampl = 6; or 7

[State 1436,1]
type = HitDef
trigger1 = AnimElem = 13
attr = S,NA
animtype = Light
damage = ifelse(enemy,var(0) = 1,20,10),0
getpower = 0,0
givepower = 20,0
hitflag = MA
pausetime = 11,12
sparkno = s30002
sparkxy = -15,-70
guard.sparkno = s30040
hitsound = s55,3
guardsound = s66,0
ground.type = low
ground.slidetime = 35
ground.hittime = 24
ground.velocity = -4
guard.hittime = 6
guard.velocity = -7
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
p2stateno = 3915
kill=0
envshake.time = 12
envshake.ampl = 6; or 7

[State 3560,2]
type = ChangeState
trigger1 = AnimTime = 0
value = 3925
ctrl = 0

;--------------------------------------------------------------------
;--------------------------------------------------------------------
[Statedef 3915];P2ÊÜ»÷×´Ì¬
type = S
movetype = H
physics = N
velset = 0,0
ctrl = 0


[State 4000, BGPalFX]
type = BGPalFX
trigger1 = 1
time = 2
mul = 900,900,900
add = -250,-250,-250
ignorehitpause = 1

[State 3000,ºÚÉ«µ×É«]
type = Envcolor
trigger1 = 1
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 70
under = 1
supermove = 1


[State 0,AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay

[State 3050,1]
type = ChangeAnim
trigger1 = Time = 0
value = 5012 ;3915

[State 3560,1]
type = VelSet
trigger1 = BackEdgeBodyDist > 10
x = -4

[State 1025,State]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 3916

;--------------------------------------------------------------------
[Statedef 3916]
type = S
movetype = H
physics = N
velset = 0,0
ctrl = 0


[State 4000, BGPalFX]
type = BGPalFX
trigger1 = 1
time = 2
mul = 900,900,900
add = -250,-250,-250
ignorehitpause = 1

[State 3000,ºÚÉ«µ×É«]
type = Envcolor
trigger1 = 1
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 70
under = 1
supermove = 1


[State 0,AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay

[State 9001,3]
type = ChangeAnim
trigger1 = animtime = 0
value = 5017

[State 3050,1]
type = ChangeAnim
trigger1 = HitOver = 1
value = 5300

[State 3560,1]
type = VelSet
trigger1 = BackEdgeBodyDist > 10
x = -4

[State 3050,4]
type = SelfState
trigger1 = Time = 100
value = 0
ctrl = 1

;--------------------------------------------------------------------
[Statedef 3925];ÀîÁÒ»ð´©ÉÏÍâÌ×
type = S
movetype= I
physics = S
ctrl = 0
anim = 3925


[State 4000, BGPalFX]
type = BGPalFX
trigger1 = 1
time = 2
mul = 900,900,900
add = -250,-250,-250
ignorehitpause = 1

[State 3000,ºÚÉ«µ×É«]
type = Envcolor
trigger1 = 1
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 70
under = 1
supermove = 1

[State 0,AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay


[State 500,1]
type = PlaySnd
trigger1 = AnimElem = 13
value = 180,0
persistent = 0
channel = 100
volume = 100

[State 3550,2]
type = VelSet
trigger1 = AnimElem = 1,>=0&&AnimElem = 3,<0
trigger1 = BackEdgeBodyDist > 50
x = -4

[State 1100,1];ÓÐÁ±²¼µÄ°å³µ
type = Helper
trigger1 = AnimElem = 2
id = 3935
sprpriority = 10
postype = p2
pos = -50,0
stateno = 3935
helpertype = normal
keyctrl = 0 
ownpal = 1

[State 1100,1];¹í½ÅÆß
type = Helper
trigger1 = AnimElem = 2
id = 3960
sprpriority = 10
postype = p1
pos = -50,-180
stateno = 3960
helpertype = normal
keyctrl = 0 
ownpal = 1

[State 1100,1];ÕÕÏàÊ¦¸µ
type = Helper
trigger1 = AnimElem = 4,5
id = 3936
sprpriority = 10
postype = p1
pos = 350,0
stateno = 3936
helpertype = normal
keyctrl = 0 
ownpal = 1
facing = -1

[State 2090,1];ÀîÁÒ»ðµÄÍâÌ×
type = Explod
trigger1 = animelem = 2
anim = 3914
id = 3914
pos = 0,0
postype = p1
bindtime = -1
ignorepausetime = 1
ignorehitpause = 1
sprpriority = 8
ownpal = 1
supermove = 1
ontop = 1

[State 2090,1];Ê®ÈýÒÌ£¬ÎªÊ²Ã´ÀîÁÒ»ðºÍÊ®ÈýÒÌÔÚÒ»Æð£¿£¿£¿£¿
type = Explod
trigger1 = helper(3935),stateno = 3939
anim = 3950
id = 3950
pos = 40,0
postype = p1
bindtime = -1
removetime = -1
ignorepausetime = 1
ignorehitpause = 1
sprpriority = -5
ownpal = 1
supermove = 1
persistent = 0




[State 500,1]
type = PlaySnd
trigger1 = helper(3935),stateno = 3939
value = 25,1
persistent = 0
channel = 100
volume = 100

[State -2,0]
type = RemoveExplod
trigger1 =!NumHelper(3935)
ignorehitpause = 1
ID = 3931

[State -1,Combo1]
type = Varset
trigger1 = time=0
var(1) = 0

[State -1,Combo1]
type = Varadd
trigger1 = time>100
trigger1 =!NumHelper(3935)
var(1) = 1

[State 1100,1];ÓÖÊÇ°å³µ
type = Helper
trigger1 = time>100
trigger1 = var(1) = 65
id = 3991
sprpriority = 10
postype = p1
pos = -30,0
stateno = 3991
helpertype = normal
keyctrl = 0 
ownpal = 1

[State 1105,3]
type = EnvColor
trigger1 =(var(1)=[31,70])&&time%2
value = 255,255,255
under = 1
time = 1

[State 500,1]
type = PlaySnd
trigger1 = var(1) = 29
value = 8,13

[State 820,1]
type = TargetLifeAdd
trigger1 = var(1) = 31
value = -30

[State 820,1]
type = LifeAdd
trigger1 = var(1) = 31
value = 20

[State 3550,1]
type = ChangeState
trigger1 =var(1) > 70
value = 3926


[Statedef 6993]
type = A
physics = N
ctrl = 0
anim = 3950
sprpriority = 2


[State 191,4] 
type = destroyself
trigger1 = animtime = 0
;--------------------------------------------------------------------
[Statedef 3926];¹¥»÷Íê±ÏÀîÁÒ»ðÓÖ°ÑÍâÌ×ÍÑµôÁË
type = S
movetype= I
physics = S
ctrl = 0
anim = 3926
sprpriority = 1


[State 4000, BGPalFX]
type = BGPalFX
trigger1 = 1
time = 2
mul = 900,900,900
add = -250,-250,-250
ignorehitpause = 1

[State 3000,ºÚÉ«µ×É«]
type = Envcolor
trigger1 = 1
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 70
under = 1
supermove = 1


[State 0,AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay

[State 500,1]
type = null;PlaySnd
trigger1 =time=0
value = 25,0
persistent = 0
channel = 100

[State -2,0]
type = RemoveExplod
trigger1 =time=0
ignorehitpause = 1
ID = 3950

[State 192,3]
type = helper
trigger1 = AnimElem = 19
name = "intro2"
ID = 193
postype = P1
pos = 0,0
facing = 1
keyctrl = 0
ownpal = 0
stateno = 193
persistent = 0

[State -2,1]
type = StopSnd
trigger1 = AnimElem = 22
channel = 100

[State -2,0]
type = RemoveExplod
trigger1 = AnimElem = 22
ignorehitpause = 1
ID = 3931


[State 3550,1]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;======================================================================
[Statedef 3991];°å³µ¹¥»÷
type = S
movetype = A
physics = N
anim = 3935
sprpriority = 4
ctrl = 0


[State 4000, BGPalFX]
type = BGPalFX
trigger1 = 1
time = 2
mul = 900,900,900
add = -250,-250,-250
ignorehitpause = 1

[State 3000,ºÚÉ«µ×É«]
type = Envcolor
trigger1 = 1
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 70
under = 1
supermove = 1


[State 0,AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay

[State 700,NotHitBy];ÎÞµÐ
type = NotHitBy
trigger1 = 1
value = SCA

[State 193,6]
type = VelSet
trigger1 = Time >= 0
x = 4

[State 240,4]
type = HitDef
trigger1 = time = 0
attr = S,NA
animtype = Hard
damage = ifelse(enemy,var(0) = 1,110,100),10
hitflag = MAFD
pausetime = 11,12
sparkno = s30002
sparkxy = -15,-70
guard.sparkno = s30040
hitsound = s55,4
guardsound = 6,2
ground.type = High 
ground.slidetime = 30
ground.hittime = 20
ground.velocity = -15.5
guard.hittime = 17
guard.velocity = -13
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
p2stateno = 2250
envshake.time = 12
envshake.ampl = 6; or 7
kill=0

[State 2090,1]
type = Explod
trigger1 = animelem = 1
anim = 3930
id = 3939
pos = 108,2
postype = p1
bindtime = -1
removetime = -1
ignorepausetime = 1
ignorehitpause = 1
sprpriority = 8
ownpal = 1
supermove = 1
ontop = 1
facing = -1

[State 2090,1]
type = Explod
trigger1 = animelem = 1
anim = 3931
id = 3939
pos = 54,2
postype = p1
bindtime = -1
removetime = -1
ignorepausetime = 1
ignorehitpause = 1
sprpriority = 8
ownpal = 1
supermove = 1
ontop = 1
facing = -1

[State -2,0]
type = RemoveExplod
trigger1 = Time =199
trigger2 = FrontEdgeDist <- 99
ignorehitpause = 1
ID = 3939

[State 3550,1]
type = ChangeState
trigger1 = ParentDist x <80
value = 3995

[State 193,6]
type = DestroySelf
trigger1 = Time =200
trigger2 = FrontEdgeDist <- 100

;=======================================================================
[Statedef 3995];ÈËºÍ°å³µÒÆ¶¯£¬°å³µ×îºóÒ»»÷
type = S
movetype = i
physics = N
anim = 3939
sprpriority = 4
ctrl = 0


[State 4000, BGPalFX]
type = BGPalFX
trigger1 = 1
time = 2
mul = 900,900,900
add = -250,-250,-250
ignorehitpause = 1

[State 3000,ºÚÉ«µ×É«]
type = Envcolor
trigger1 = 1
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 70
under = 1
supermove = 1

[State 0,AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay

[State 700,NotHitBy];ÎÞµÐ
type = NotHitBy
trigger1 = 1
value = SCA

[State -2,0]
type = RemoveExplod
trigger1 = time = 0
ignorehitpause = 1
ID = 3939

[State 193,6]
type = VelSet
trigger1 = Time = 0
x = 0

[State 193,6]
type = VelSet
trigger1 = Time >= 15
x = 4

[State 1060,5]
type = Projectile
trigger1 = time=0 
projpriority = 10
projanim = 3922
projID = 3922
projhitanim = -1
projremovetime = 120
projhits =1
projmisstime = 10
projremove = 0 
postype = p1
offset = -10,0
velocity = 3,0
attr = S,NA
animtype = Hard
damage = ifelse(enemy,var(0) = 1,110,100),10
hitflag = MAFD
pausetime = 11,12
sparkno = s30002
sparkxy = 70,-110
guard.sparkno = s30040
hitsound = s55,4
guardsound = 6,2
ground.type = High 
ground.slidetime = 30
ground.hittime = 20
ground.velocity = -15.5
guard.hittime = 17
guard.velocity = -13
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
p2stateno = 3101
envshake.time = 12
envshake.ampl = 6; or 7

[State 2000,15]
type = EnvColor
triggerall = p2movetype = H
trigger1 = root,ProjHittime(3922) = 1
time = 1
value = 255,255,255
under = 1
ignorehitpause = 1
persistent = 1

[State 2355,10]
type = AssertSpecial
triggerall = p2movetype = H
trigger1 = root,ProjHittime(3922) = 1
flag = NoFG
ignorehitpause = 1
persistent = 1

[State -2,5]
type = Pause
triggerall = p2movetype = H
triggerall = timemod = 2,0 && winko = 0
trigger1 = root,ProjHit3922 = 1,< 10
time = 1
movetime = 0

[State 3550,1]
type = ChangeState
trigger1 = animelem = 5
value = 3996

;=======================================================================
[Statedef 3996]
type = S
movetype = i
physics = N
anim = 3935
sprpriority = 4
ctrl = 0


[State 4000, BGPalFX]
type = BGPalFX
trigger1 = 1
time = 2
mul = 900,900,900
add = -250,-250,-250
ignorehitpause = 1

[State 3000,ºÚÉ«µ×É«]
type = Envcolor
trigger1 = 1
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 70
under = 1
supermove = 1


[State 0,AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay

[State 700,NotHitBy];ÎÞµÐ
type = NotHitBy
trigger1 = 1
value = SCA

[State 193,6]
type = VelSet
trigger1 = Time >= 0
x = 4

[State 2090,1]
type = Explod
trigger1 = animelem = 1
anim = 3970
id = 3931
pos = 108,2
postype = p1
bindtime = -1
removetime = -1
ignorepausetime = 1
ignorehitpause = 1
sprpriority = 8
ownpal = 1
supermove = 1
ontop = 1
facing = -1

[State 2090,1]
type = Explod
trigger1 = animelem = 1
anim = 3971
id = 3931
pos = 108,2
postype = p1
bindtime = -1
removetime = -1
ignorepausetime = 1
ignorehitpause = 1
sprpriority = 8
ownpal = 1
supermove = 1
ontop = 1
facing = -1

[State 240,4]
type = HitDef
trigger1 = time = 0
attr = S,NA
animtype = Hard
damage = ifelse(enemy,var(0) = 1,110,100),10
hitflag = MAFD
pausetime = 11,12
sparkno = s30002
sparkxy = -15,-70
guard.sparkno = s30040
hitsound = s55,4
guardsound = 6,2
ground.type = High 
ground.slidetime = 30
ground.hittime = 20
ground.velocity = -15.5
guard.hittime = 17
guard.velocity = -13
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
p2stateno = 3101
envshake.time = 12
envshake.ampl = 6; or 7

[State -2,0]
type = RemoveExplod
trigger1 = time >= 88
trigger2 = FrontEdgeDist <- 100
ignorehitpause = 1
ID = 3931

[State 193,6]
type = DestroySelf
trigger1 = Time >= 100
trigger2 = FrontEdgeDist <- 130


;-----------------------------------------------------------------------
[Statedef 3101]
type = A
movetype = H
physics = N

[State 1500,2]
type = Posset
trigger1 = Time = 0 && Pos Y >= 1
y = 0

[State 800,1]
type = HitBy
trigger1 = 1
value = SCA,HT
time = 1

[state screenbound]
type = screenbound
trigger1 = 1
value = 1     
movecamera = 0,0

[State 9280,1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

[State 1280,2]
type = ChangeAnim2
Trigger1 = Time >= 0
value = 4888

[State 9280,3]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 3102

;-----------------------------------------------------------------------
[Statedef 3102]
type = A
movetype = H
physics = N
velset = -3.8,-5.6

[State 800,1]
type = HitBy
trigger1 = 1
value = SCA,HT
time = 1

[state screenbound]
type = screenbound
trigger1 = 1
value = 1     
movecamera = 0,0

[State 8[State 0,0]
type = VelSet
trigger1 = Time = 0
trigger1 = enemy,facing=1
x = ifelse(facing=1,-1.6,1.6)
y = -14

[State 0,1]
type = VelSet
trigger1 = Time = 0
trigger1 = enemy,facing=-1
x = ifelse(facing=1,1.6,-1.6)
y = -14

[State 1281,1]
type = VelAdd
trigger1 = Time < 1
y = .9

[State 1281,1]
type = VelAdd
trigger1 = Time > 5
y = .7

[State 952,2]
type = EnvShake
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
time = 20

[State 952,3]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100

;=======================================================================
[Statedef 3935];°å³µ
type = S
movetype = A
physics = N
anim = 3935
sprpriority = 4
ctrl = 0


[State 4000, BGPalFX]
type = BGPalFX
trigger1 = 1
time = 2
mul = 900,900,900
add = -250,-250,-250
ignorehitpause = 1

[State 3000,ºÚÉ«µ×É«]
type = Envcolor
trigger1 = 1
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 70
under = 1
supermove = 1

[State 0,AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay

[State 700,NotHitBy];ÎÞµÐ
type = NotHitBy
trigger1 = 1
value = SCA

[State 193,6]
type = VelSet
trigger1 = Time >= 0
x = 4

[State 1000,5]
type = HitDef
trigger1 = time%4 = 0
attr = S,HA
animtype = Hard
damage = 10,10
hitflag = MAF
sparkno = s30002
guard.sparkno = s30040
sparkxy = -15,-60
pausetime = 0,1
hitsound = s55,1
guardsound = s66,0
ground.type = high
ground.slidetime = 40
ground.hittime = 30
ground.velocity = -4
guard.hittime = 24
guard.velocity = -13
guard.cornerpush.veloff = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
p2stateno = 3051
kill=0
envshake.time = 12
envshake.ampl = 6; or 7

[State 2090,1]
type = Explod
trigger1 = animelem = 1
anim = 3930
id = 3930
pos = 108,2
postype = p1
bindtime = -1
removetime = -1
ignorepausetime = 1
ignorehitpause = 1
sprpriority = 8
ownpal = 1
supermove = 1
ontop = 1
facing = -1

[State 2090,1]
type = Explod
trigger1 = animelem = 1
anim = 3931
id = 3930
pos = 0,2
postype = p1
bindtime = -1
removetime = -1
ignorepausetime = 1
ignorehitpause = 1
sprpriority = 8
ownpal = 1
supermove = 1
ontop = 1
facing = -1

[State 3550,1]
type = ChangeState
trigger1 = ParentDist x <=70
value = 3939


;-----------------------------------------------------------------------
[Statedef 3051]
type    = S
movetype= H
physics = S
velset = 0,0

[State 1500,2]
type = Posset
trigger1 = Time = 0
y = 0

[State 9001,2]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 9001,4]
type = VelMul
trigger1 = Pos Y = 0
trigger1 = Time >= 0
x = .8

[State 1028,Anim 5050]
type = ChangeAnim
trigger1 = Time = 0
value = 5000

[State 1025,State]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 3052

;-----------------------------------------------------------------------
[Statedef 3052]
type    = S
movetype= H
physics = S
velset = 0,0

[State 1500,2]
type = Posset
trigger1 = Time = 0
y = 0

[State 9001,2]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 9001,4]
type = VelMul
trigger1 = Pos Y = 0
trigger1 = Time >= 0
x = .8

[State 9001,3]
type = ChangeAnim
trigger1 = animtime = 0
value = 5005 + GetHitVar(animtype) + (GetHitVar(groundtype)=2)*10

[State 3050,1]
type = ChangeAnim
trigger1 = HitOver = 1
value = IfElse(SelfAnimExist(5180),5180,5300)

[State 3050,4]
type = SelfState
trigger1 = Time = 90
value = 0
ctrl = 1


;=======================================================================
[Statedef 3936];ÅÄÕÕÊ¦¸µ
type = S
movetype = i
physics = N
anim = 3936
sprpriority = 4
ctrl = 0


[State 4000, BGPalFX]
type = BGPalFX
trigger1 = 1
time = 2
mul = 900,900,900
add = -250,-250,-250
ignorehitpause = 1

[State 3000,ºÚÉ«µ×É«]
type = Envcolor
trigger1 = 1
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 70
under = 1
supermove = 1

[State 0,AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay

[State 193,6]
type = VelSet
trigger1 = Time >= 0
x = 4

[State 3550,1]
type = ChangeState
trigger1 = ParentDist x < 180
value = 3937


[Statedef 3937]
type = S
movetype = i
physics = N
anim = 3937
sprpriority = 4
ctrl = 0


[State 4000, BGPalFX]
type = BGPalFX
trigger1 = 1
time = 2
mul = 900,900,900
add = -250,-250,-250
ignorehitpause = 1

[State 3000,ºÚÉ«µ×É«]
type = Envcolor
trigger1 = 1
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 70
under = 1
supermove = 1

[State 0,AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay

[State 193,6]
type = VelSet
trigger1 = Time = 0
x = 0


[State -2,5]
type = Pause
trigger1 = root,var(1) = 30
time = 30
movetime = 0

[State 3550,1]
type = ChangeState
trigger1 = root,stateno = 3926
value = 3958

[Statedef 3958]
type = S
movetype = i
physics = N
anim = 3936
sprpriority = 4
ctrl = 0


[State 4000, BGPalFX]
type = BGPalFX
trigger1 = 1
time = 2
mul = 900,900,900
add = -250,-250,-250
ignorehitpause = 1

[State 3000,ºÚÉ«µ×É«]
type = Envcolor
trigger1 = 1
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 70
under = 1
supermove = 1


[State 0,AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay

[State 193,6]
type = VelSet
trigger1 = Time >= 0
x = 4

[State 193,6]
type = DestroySelf
trigger1 = Time = 70
trigger2 = FrontEdgeDist <- 30

;-----------------------------------------------------------------------
[Statedef 3939];ÈËºÍ°å³µ¶¯×÷
type = S
movetype = i
physics = N
anim = 3939
sprpriority = 4
ctrl = 0


[State 4000, BGPalFX]
type = BGPalFX
trigger1 = 1
time = 2
mul = 900,900,900
add = -250,-250,-250
ignorehitpause = 1

[State 3000,ºÚÉ«µ×É«]
type = Envcolor
trigger1 = 1
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 70
under = 1
supermove = 1

[State 0,AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay

[State -2,0]
type = RemoveExplod
trigger1 = time = 0
ignorehitpause = 1
ID = 3930

[State 193,6]
type = VelSet
trigger1 = Time = 0
x = 0

[State 193,6]
type = VelSet
trigger1 = Time >= 15
x = 4

[State 3550,1]
type = ChangeState
trigger1 = animelem = 5
value = 3933

[Statedef 3933]
type = S
movetype = i
physics = N
anim = 3935
sprpriority = 4
ctrl = 0


[State 4000, BGPalFX]
type = BGPalFX
trigger1 = 1
time = 2
mul = 900,900,900
add = -250,-250,-250
ignorehitpause = 1

[State 3000,ºÚÉ«µ×É«]
type = Envcolor
trigger1 = 1
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 70
under = 1
supermove = 1

[State 0,AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay

[State 193,6]
type = VelSet
trigger1 = Time >= 0
x = 4

[State 2090,1];³¤±è×ÓµÄÈË
type = Explod
trigger1 = animelem = 1
anim = 3970
id = 3931
pos = 108,0
postype = p1
bindtime = -1
removetime = -1
ignorepausetime = 1
ignorehitpause = 1
sprpriority = 8
ownpal = 1
supermove = 1
ontop = 1
facing = -1

[State 2090,1];ÅÖ×Ó
type = Explod
trigger1 = animelem = 1
anim = 3971
id = 3931
pos = 108,0
postype = p1
bindtime = -1
removetime = -1
ignorepausetime = 1
ignorehitpause = 1
sprpriority = 8
ownpal = 1
supermove = 1
ontop = 1
facing = -1

[State -2,0]
type = RemoveExplod
trigger1 = time >= 88
trigger2 = FrontEdgeDist <- 88
ignorehitpause = 1
ID = 3931

[State 193,6]
type = DestroySelf
trigger1 = Time = 100
trigger2 = FrontEdgeDist <- 100

;=======================================================================
[Statedef 3960];¹í½ÅÆßÌøÈëÆÁÄ»
type = S
movetype = A
physics = N
anim = 3960
sprpriority = 4
ctrl = 0


[State 4000, BGPalFX]
type = BGPalFX
trigger1 = 1
time = 2
mul = 900,900,900
add = -250,-250,-250
ignorehitpause = 1

[State 3000,ºÚÉ«µ×É«]
type = Envcolor
trigger1 = 1
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 70
under = 1
supermove = 1

[State 0,AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay

[State 193,6]
type = VelSet
trigger1 = Time >= 0
x = 4

[State 193,6]
type = VelSet
trigger1 = Time = 0
y = 3

[State 193,6]
type = Veladd
trigger1 = Time > 0
y = .515

[State 1000,21]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 3961

;=======================================================================
[Statedef 3961];¹í½ÅÆßÂäµØ²¢ÅÜ¶¯
type = S
movetype = I
physics = S
anim = 3961
velset = 0,0


[State 4000, BGPalFX]
type = BGPalFX
trigger1 = 1
time = 2
mul = 900,900,900
add = -250,-250,-250
ignorehitpause = 1

[State 3000,ºÚÉ«µ×É«]
type = Envcolor
trigger1 = 1
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 70
under = 1
supermove = 1


[State 0,AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay

[State 193,6]
type = VelSet
trigger1 = animelem = 4,>=0
x = 4

[State 1002,1]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52,1]
type = Playsnd
trigger1 = Time = 0
value = S1,2

[State 52,1]
type = Playsnd
trigger1 = Time = 0 
value = S1,5

[State 500,2]
type = PlaySnd
trigger1 = AnimElem = 1
value = 21,2

[State 1002,4]
type = ChangeState
trigger1 = p2bodydist X < 15
value = 3965

[State 193,6]
type = DestroySelf
trigger1 = FrontEdgeDist <- 30

;=======================================================================
[Statedef 3965];¹í½ÅÆßµ¹Á¢ÐÐ×ßÁ¬Ìß
type = S
movetype = A
physics = S
anim = 3965
sprpriority = 3
ctrl = 0
velset = 0,0


[State 4000, BGPalFX]
type = BGPalFX
trigger1 = 1
time = 2
mul = 900,900,900
add = -250,-250,-250
ignorehitpause = 1

[State 3000,ºÚÉ«µ×É«]
type = Envcolor
trigger1 = 1
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 70
under = 1
supermove = 1

[State 0,AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay

[State 700,NotHitBy];ÎÞµÐ
type = NotHitBy
trigger1 = 1
value = SCA

[State 3580,5]
type = VelSet
trigger1 = 1
x = 3

[State 500,2]
type = PlaySnd
trigger1 = AnimElem = 1
value = 20,0

[State 1505,6]
type = HitDef
trigger1 = AnimElem = 3|AnimElem = 6|AnimElem = 10|AnimElem = 14|AnimElem = 18|AnimElem = 22
trigger2 = AnimElem = 26|AnimElem = 30|AnimElem = 34
attr = S,HA
animtype = Light
damage = ifelse(enemy,var(0) = 1,20,10),0
getpower = 0,0
givepower = 20,0
sparkno = s30002
guard.sparkno = s30040
sparkxy = -25,-55
guardflag = M
hitflag = MAFD
pausetime = 3,3
hitsound = s55,3
guardsound = s66,0
ground.type = high
ground.slidetime = 30
ground.hittime = 26
ground.velocity = -5
guard.hittime = 16
guard.velocity = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
p2stateno = ifelse(random<500,2250,2220)
kill = 0
envshake.time = 12
envshake.ampl = 6; or 7

[state push]
type = playerpush
trigger1 = 1
value = 1

[State 1200,2]
type = Width
trigger1 = 1
value = 35,0

[State 1100,1]
type = ChangeState
trigger1 = AnimTime = 0
value = 3966

;=======================================================================
[Statedef 3966];¹í½ÅÆßÂÝÐýÉÏÌß£¨µØÃæ£©
type = S
movetype = A
physics = S
anim = 3966
sprpriority = 3
ctrl = 0
velset = 0,0


[State 4000, BGPalFX]
type = BGPalFX
trigger1 = 1
time = 2
mul = 900,900,900
add = -250,-250,-250
ignorehitpause = 1

[State 3000,ºÚÉ«µ×É«]
type = Envcolor
trigger1 = 1
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 70
under = 1
supermove = 1

[State 0,AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay

[State 700,NotHitBy];ÎÞµÐ
type = NotHitBy
trigger1 = 1
value = SCA

[State 500,2]
type = PlaySnd
trigger1 = AnimElem = 1
value = 7,31

[State 1505,6]
type = HitDef
trigger1 = AnimElem = 3|AnimElem = 5
attr = S,HA
animtype = Hard
damage = 130,10
hitflag = MAF
guardflag = M
pausetime = 3,4
hitsound = s55,3
sparkno = s30002
guard.sparkno = s30040
sparkxy = -15,-60
guardsound = s66,0
ground.type = High
ground.slidetime = 30
ground.hittime = 17
ground.velocity = 0
guard.hittime = 14
guard.velocity = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = 2220
kill = 0
envshake.time = 12
envshake.ampl = 6; or 7

[State 1200,2]
type = Width
trigger1 = 1
value = 35,0

[State 1100,17]
type = ChangeState
trigger1 = AnimElem = 6
value = 3968

;-----------------------------------------------------------------------
[Statedef 3968];¹í½ÅÆßÂÝÐýÉÏÌß£¨¸¡¿Õ£©
type = A
movetype = A
physics = S
poweradd = 0
velset = 0
ctrl = 0


[State 4000, BGPalFX]
type = BGPalFX
trigger1 = 1
time = 2
mul = 900,900,900
add = -250,-250,-250
ignorehitpause = 1

[State 3000,ºÚÉ«µ×É«]
type = Envcolor
trigger1 = 1
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 70
under = 1
supermove = 1

[State 0,AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay

[State 700,NotHitBy];ÎÞµÐ
type = NotHitBy
trigger1 = 1
value = SCA

[State 1000,3]
type = PosAdd
trigger1 = AnimElem = 7
x = 13

[State 1000,5]
type = HitDef
trigger1 = AnimElem = 8
attr = A,SA
animtype = Hard
damage = ifelse(enemy,var(0) = 1,40,Ceil(40 / (2 ** HitCount)+(var(1) = 0)*20)),10
getpower = ifelse(Var(10) != 0,0,65),ifelse(Var(10) != 0,0,65)
givepower = 20,20
hitflag = MAF
guardflag = M
sparkno = s30002
guard.sparkno = s30040
sparkxy = -15,-80
pausetime = 11,12
hitsound = s55,1
guardsound = s66,0
guard.slidetime = 17
guard.hittime = 14
guard.velocity = 0
ground.type = High
ground.slidetime = 30
ground.hittime = 17
ground.velocity = 0,-10
air.velocity = 0,-10
fall = 1
guard.hittime = 14
guard.velocity = -13
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
kill=0
envshake.time = 12
envshake.ampl = 6; or 7

[State 1000,5]
type = HitDef
trigger1 = AnimElem = 10|AnimElem = 14
attr = A,NA
animtype = Hard
damage = ifelse(enemy,var(0) = 1,40,Ceil(40 / (2 ** HitCount))),10
getpower = ifelse(Var(10) != 0,0,65),ifelse(Var(10) != 0,0,65)
givepower = 20,20
hitflag = MAF
guardflag = M
sparkno = s30002
guard.sparkno = s30040
sparkxy = -15,-80
pausetime = 11,12
hitsound = s55,3
guardsound = s66,0
guard.slidetime = 17
guard.hittime = 14
guard.velocity = 0
ground.type = High
ground.slidetime = 30
ground.hittime = 15
ground.velocity = 0,-5
air.velocity = 0,-5
fall = 1
guard.hittime = 14
guard.velocity = -13
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
kill=0
envshake.time = 12
envshake.ampl = 6; or 7

[State 1001,3]
type = VelSet
trigger1 = AnimElem = 7
x = 0
y = -11

[State 1101,5]
type = VelAdd
trigger1 = AnimElem = 7,> 0
y = .55

[State 1101,7]
type = HitDef
trigger1 = AnimElem = 16
attr = A,SA
animtype = Hard
sparkno = s30002
guard.sparkno = s30040
sparkxy = -15,-100
damage = 50,10
hitflag = MAF
guardflag = M
pausetime = 11,12
hitsound = s55,4
guardsound = s66,0
ground.slidetime = 30
ground.hittime = 17
ground.velocity = 0,-10
air.velocity = 0,-10
fall = 1
guard.hittime = 14
guard.velocity = -13
ground.type = High
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
envshake.time = 12
envshake.ampl = 6; or 7

[State 1101,23]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 3967

;-----------------------------------------------------------------------
[Statedef 3967];¹í½ÅÆßÂäµØÀë³¡
type = S
movetype = I
physics = S
anim = 3961
velset = 0,0


[State 4000, BGPalFX]
type = BGPalFX
trigger1 = 1
time = 2
mul = 900,900,900
add = -250,-250,-250
ignorehitpause = 1

[State 3000,ºÚÉ«µ×É«]
type = Envcolor
trigger1 = 1
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 70
under = 1
supermove = 1


[State 0,AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay

[State 193,6]
type = VelSet
trigger1 = AnimElem = 4,>= 0
x = 4

[State 500,2]
type = PlaySnd
trigger1 = AnimElem = 1
value = 7,32

[State 1002,1]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52,1]
type = Playsnd
trigger1 = Time = 0
value = S1,2

[State 52,1]
type = Playsnd
trigger1 = Time = 0 
value = S1,5

[State 193,6]
type = DestroySelf
trigger1 = FrontEdgeDist <- 30


;-----------------------------------------------------------------------
[Statedef 2250]
type    = A
movetype= H
physics = N
velset = 0,0

[State 0,AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay

[State 52,1]
type = Hitfallset
trigger1 = 1
value = 0

[State 52,1]
type = VelSet
trigger1 = 1
x = 0
y = 0

[State 52,2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1830]
type = ChangeAnim2
Trigger1 = Time = 0
value = 2255

[State 1830]
type = SelfState
trigger1 = time > 54
value = 5000

[State 1830]
type = SelfState
trigger1 = Animtime = 0
value = 0
ctrl = 1

















[Statedef 3850]
type    = S
movetype= A
physics = N
juggle  = -1
velset = 0,0
ctrl = 0
Poweradd = -3000
anim = 4500
sprpriority = 2




[State 2000, 2]
type = SuperPause
trigger1 = AnimElem = 4
time = 40
movetime = 40
anim = -1

[State 1700, 3]
type = PlaySnd
trigger1 = time = 1
value = 17000,1

[State 1700, 3]
type = PlaySnd
trigger1 = AnimElem = 4
value = 17000,0

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay
flag2 = nobg
flag3 = nofg

[State 210, Hyper bg Explod]
type = Explod
trigger1 = !time
removetime = 109
id =6090
anim = 16090
pos = 0,0
postype = Left
sprpriority = -4
facing = 1
vfacing = 1
ownpal = 1
bindtime = -1
ontop = 0
ownpal = 1
supermove = 1
pausemove = 1
removeongethit = 1
ignorehitpause = 1
persistent = 1
supermovetime = 9999
pausemovetime =  9999
scale = .5,.5

[State 1050, NotHitBy]
type = NotHitBy
trigger1 = time <= 40
value = SCA,NA,SA,HA,NP,SP,HP

[State 863, 4]
type = Explod
trigger1 = AnimElem = 4
anim = 17200
pos = 23,-51
postype = p1
sprpriority = -2
supermove = 1
bindtime = 1
scale = .5,.5

[State 863, 4]
type = Explod
trigger1 = AnimElem = 4
anim = 17210
pos = 23,-51
postype = p1
sprpriority = 9
persistent = 0
supermove = 1
bindtime = 1
scale = .5,.5

[State 4000, BGPalFX]
type = BGPalFX
trigger1 = 1
time = 2
mul = 900,900,900
add = -250,-250,-250
ignorehitpause = 1

[State 3000,ºÚÉ«µ×É«]
type = Envcolor
trigger1 = 1
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 109
under = 1
supermove = 1




[State 1450,snd]
type = PlaySnd
trigger1 = animelem = 5
value = 7,32
Volume = 255


[State 0,Width]
type = Width
trigger1 = 1
value = 50,0
ignorehitpause = 1

[State 0,VarAdd]
type = VarAdd
trigger1 = time = 0
v = 50    ;fv = 
value = -1
ignorehitpause = 1


[State 0,VelSet]
type = VelSet
trigger1 = animelem = 14
x = 50
y = 0
ignorehitpause = 1

[State 0,VelSet]
type = VelSet
trigger1 = animelem = 15
x = 0.2
y = 0
ignorehitpause = 1

[State 0,VelSet]
type = VelSet
trigger1 = animelem = 17
x = 0
y = 0
ignorehitpause = 1

[State 0,Helper]
type = Helper
trigger1 = animelem = 8
helpertype = normal ;player
name = "3854"
ID = 3854
stateno = 3854
pos = 20,-125
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
ignorehitpause = 1

[State 200,1]
type = HitDef
trigger1 = animelem = 14
attr = ,ST
damage = 200,60
animtype = HEAVY
guardflag = LA
hitflag = MAFD
priority = 3,Hit
pausetime = 0,0
sparkno = 0
sparkxy = -20,-75
guard.sparkno = 4
hitsound = s80,0
guardsound = s66,0
ground.type = High
ground.slidetime = 15
ground.hittime  = 100
ground.velocity = 0
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -1.4,-3
air.hittime = 15
palfx.add = 250,50,0
palfx.time = 40 
p2stateno = 3851
p1stateno = 3855
Kill = 0

[State 200,3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[Statedef 3851]
type    = U
movetype= H
physics = N
velset = 0,0
sprpriority = -1



[State 0,Pause]
type = Pause
trigger1 = time = 0
time = 0
movetime = 999999
ignorehitpause = 1

[State 0,PosSet]
type = PosSet
trigger1 = 1
X = 0
y = 0
ignorehitpause = 1


[State 0,DestroySelf]
type = DestroySelf
trigger1 = 1
ignorehitpause = 1

[State 820,1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 4501 

[State 0,SelfState]
type = SelfState
trigger1 = animtime = 0
value = 5100

[Statedef 3853]
type    = U
movetype= H
physics = N
velset = 0,0
sprpriority = -1

[State 0,PosSet]
type = PosSet
trigger1 = 1
X = 0
y = 0
ignorehitpause = 1


[State 821,LifeAdd]
type = LifeAdd
trigger1 = 1
value = -50
kill = 1


;[State 0,LifeSet]
;type = LifeSet
;trigger1 = 1
;value = 600
;ignorehitpause = 1

[State 0,DestroySelf]
type = DestroySelf
trigger1 = 1
ignorehitpause = 1

[State 820,1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 4503 

[State 0,SelfState]
type = SelfState
trigger1 = animtime = 0
value = 5100

[Statedef 3852]
type    = U
movetype= H
physics = N
velset = 0,0
sprpriority = -1

[State 0,PosSet]
type = PosSet
trigger1 = 1
X = 0
y = -40
ignorehitpause = 1

[State 0,PalFX]
type = PalFX
trigger1 = 1
time = 1
add = 256,100,0
mul = 256,125,0
invertall = 0
color = 256
ignorehitpause = 1

[State 0,DestroySelf]
type = DestroySelf
trigger1 = 1
ignorehitpause = 1

[State 820,1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 4502 

[State 0,SelfState]
type = SelfState
trigger1 = animtime = 0
value = 5100

[Statedef 3854]
type = U
ctrl = 0
anim = 761
velset = 0,-5
movetype = I
physics = N
sprpriority = 2

[State 0,VelAdd]
type = VelAdd
trigger1 = 1
y = 0.5
ignorehitpause = 1

[State 0,BindToRoot]
type = BindToRoot
trigger1 = root,stateno = 3850 && root,animelem = 13
time = 1
pos = 5,-65
ignorehitpause = 1

[State 0,DestroySelf]
type = DestroySelf
trigger1 = root,stateno = 3850 && root,animelem = 13


[Statedef 3855]
type    = S
movetype= I
physics = N
juggle  = -1
velset = 0,0
ctrl = 0
anim = 4505
poweradd = 10
sprpriority = 2

[State 200, 1]
type = PlaySnd
trigger1 = animelem = 32
value = S7,12

[State 0,EnvColor]
type = EnvColor
trigger1 = animelem = 9 <= 0
value = 0,0,0
time = 5
under = 1
ignorehitpause = 1

[State 0,EnvColor]
type = EnvColor
trigger1 = animelem = 9 > 0 && animelem = 21 <= 0
value = 0,0,0
time = 1
under = 1
ignorehitpause = 1

[State 0,Turn]
type = Turn
trigger1 = animelem = 21
ignorehitpause = 1

[State 0,Width]
type = Width
trigger1 = 1
value = 30,0
ignorehitpause = 1

[State 1450,snd]
type = PlaySnd
trigger1 = animelem = 38
value = 12,3
ignorehitpause = 1

[State 0,VarAdd]
type = VarAdd
trigger1 = time = 0
v = 50    ;fv = 
value = -20
ignorehitpause = 1

[State 0,PalFX]
type = BGPalFX
trigger1 = animelem = 9 <= 0
time = 5
add = 256,100,0
mul = 256,256,256
invertall = 0
color = 256
ignorehitpause = 1

[State 0,PalFX]
type = BGPalFX
trigger1 = animelem = 9 > 0 && animelem = 21 <= 0
time = 1
add = 256,100,0
mul = 256,256,256
invertall = 0
color = 256
ignorehitpause = 1

[State 0,TargetState]
type = TargetState
triggerall = NumTarget;()
trigger1 = animelem = 1
trigger2 = animelem = 3
trigger3 = animelem = 5
trigger4 = animelem = 7
trigger5 = animelem = 9
value = 3856
ID = -1
ignorehitpause = 1

[State 0,TargetState]
type = TargetState
triggerall = NumTarget;()
trigger1 = animelem = 2
trigger2 = animelem = 4
trigger3 = animelem = 6
trigger4 = animelem = 8
trigger5 = animelem = 10
value = 3857
ID = -1
ignorehitpause = 1

[State 0,TargetState]
type = TargetState
triggerall = NumTarget;()
trigger1 = animelem = 11
value = 3852
ID = -1
ignorehitpause = 1

[State 0,TargetState]
type = TargetState
triggerall = NumTarget;()
trigger1 = animelem = 21
value = 3853
ID = -1
ignorehitpause = 1

[State 0,NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1
ignorehitpause = 1

[State 0,PosAdd]
type = PosAdd
trigger1 = time = 0
x = p2dist x + 200
ignorehitpause = 1

[State 0,PosSet]
type = PosSet
trigger1 = 1
y = 0
ignorehitpause = 1

[State 1450,snd]
type = PlaySnd
trigger1 = animelem = 1
trigger2 = animelem = 2
trigger3 = animelem = 3
trigger4 = animelem = 4
trigger5 = animelem = 5
value = 24,0
ignorehitpause = 1

[State 1450,snd]
type = PlaySnd
trigger1 = animelem = 6
trigger2 = animelem = 7
trigger3 = animelem = 8
trigger4 = animelem = 9
trigger5 = animelem = 10
value = 4,10
ignorehitpause = 1

[State 0,Explod]
type = Explod
trigger1 = animelem = 1
trigger2 = animelem = 2
trigger3 = animelem = 3
trigger4 = animelem = 4
trigger5 = animelem = 5
trigger6 = animelem = 6
trigger7 = animelem = 7
trigger8 = animelem = 8
trigger9 = animelem = 9
trigger10 = animelem = 10
anim = 6150
ID = 6150
pos = 0,-60
postype = p2  ;p2,front,back,left,right
random = 80,80
facing = 1
ontop = 1
ownpal = 1
scale = 1,1
pausemovetime = 999
ignorehitpause = 1

[State 0,EnvShake]
type = EnvShake
trigger1 = animelem = 1
trigger2 = animelem = 2
trigger3 = animelem = 3
trigger4 = animelem = 4
trigger5 = animelem = 5
trigger6 = animelem = 6
trigger7 = animelem = 7
trigger8 = animelem = 8
trigger9 = animelem = 9
trigger10 = animelem = 10 
time = 5
freq = 100
ampl = -5
ignorehitpause = 1

[State 1450,snd]
type = PlaySnd
trigger1 = animelem = 11
trigger2 = animelem = 12
trigger3 = animelem = 13
trigger4 = animelem = 14
trigger5 = animelem = 15
trigger6 = animelem = 16
trigger7 = animelem = 17
trigger8 = animelem = 18
trigger9 = animelem = 19
value = 4,16
ignorehitpause = 1

[State 1450,snd]
type = PlaySnd
trigger1 = animelem = 20
value = 4,83
ignorehitpause = 1

[State 0,EnvShake]
type = EnvShake
trigger1 = animelem = 11
trigger2 = animelem = 12
trigger3 = animelem = 13
trigger4 = animelem = 14
trigger5 = animelem = 15
trigger6 = animelem = 16
trigger7 = animelem = 17
trigger8 = animelem = 18
trigger9 = animelem = 19 
time = 5
freq = 125
ampl = -10
ignorehitpause = 1

[State 0,EnvShake]
type = EnvShake
trigger1 = animelem = 20 
time = 15
freq = 175
ampl = -25
ignorehitpause = 1

[State 0,Explod]
type = Explod
trigger1 = animelem = 6
trigger2 = animelem = 7
trigger3 = animelem = 8
trigger4 = animelem = 9
trigger5 = animelem = 10
anim = 6150
ID = 6150
pos = 0,-60
postype = p2  ;p2,front,back,left,right
random = 100,100
facing = 1
ontop = 1
ownpal = 1
scale = 1,1
pausemovetime = 999
ignorehitpause = 1

[State 0,Explod]
type = Explod
trigger1 = animelem = 3
trigger2 = animelem = 7 
anim = 4511
ID = 1
pos = -60,0
postype = p2  ;p2,front,back,left,right
facing = 1
ontop = 1
ownpal = 1
scale = 1,1
pausemovetime = 99999
ignorehitpause = 1

[State 0,Explod]
type = Explod
trigger1 = animelem = 4
trigger2 = animelem = 8 
anim = 4512
ID = 1
pos = 60,0
postype = p2  ;p2,front,back,left,right
facing = 1
ontop = 1
ownpal = 1
scale = 1,1
pausemovetime = 99999
ignorehitpause = 1

[State 0,Explod]
type = Explod
trigger1 = animelem = 1
trigger2 = animelem = 5 
anim = 4511
ID = 1
pos = -60,0
postype = p2  ;p2,front,back,left,right
facing = 1
ontop = 1
ownpal = 1
scale = 1,1
pausemovetime = 99999
ignorehitpause = 1

[State 0,Explod]
type = Explod
trigger1 = animelem = 2
trigger2 = animelem = 6 
anim = 4512
ID = 1
pos = 60,0
postype = p2  ;p2,front,back,left,right
facing = 1
ontop = 1
ownpal = 1
scale = 1,1
pausemovetime = 99999
ignorehitpause = 1

[State 0,Explod]
type = Explod
trigger1 = animelem = 3 
trigger2 = animelem = 7 
anim = 4514
ID = 1
pos = 0,40
postype = p2  ;p2,front,back,left,right
facing = 1
ontop = 1
ownpal = 1
Scale = 0.5,0.5
pausemovetime = 9999
ignorehitpause = 1

[State 0,Explod]
type = Explod
triggerall = teamside = 1
trigger1 = animelem = 21
anim = 4506
ID = 1
pos = -60,0
postype = p2  ;p2,front,back,left,right
facing = 1
ontop = 1
ownpal = 1
scale = 1,1
pausemovetime = 0
ignorehitpause = 1

[State 0,Explod]
type = Explod
triggerall = teamside = 1
trigger1 = animelem = 21
anim = 4507
ID = 1
pos = 60,0
postype = p2  ;p2,front,back,left,right
facing = 1
ontop = 1
ownpal = 1
scale = 1,1
pausemovetime = 0
ignorehitpause = 1

[State 0,Explod]
type = Explod
triggerall = teamside = 1
trigger1 = animelem =  22
anim = 4514
ID = 1
pos = 0,0
postype = p2  ;p2,front,back,left,right
facing = 1
ontop = 1
ownpal = 1
Scale = 0.5,0.5
pausemovetime = 0
ignorehitpause = 1

[State 0,Explod]
type = Explod
triggerall = teamside = 1
trigger1 = animelem = 11 
anim = 4513
ID = 1
pos = 0,40
postype = p2  ;p2,front,back,left,right
facing = 1
ontop = 1
ownpal = 1
Scale = 0.5,0.5
pausemovetime = 0
ignorehitpause = 1

[State 0,Explod]
type = Explod
triggerall = teamside = 2
trigger1 = animelem = 21
anim = 4506
ID = 1
pos = -60,40
postype = p2  ;p2,front,back,left,right
facing = 1
ontop = 1
ownpal = 1
scale = 1,1
pausemovetime = 0
ignorehitpause = 1

[State 0,Explod]
type = Explod
triggerall = teamside = 2
trigger1 = animelem = 21
anim = 4507
ID = 1
pos = 60,40
postype = p2  ;p2,front,back,left,right
facing = 1
ontop = 1
ownpal = 1
scale = 1,1
pausemovetime = 0
ignorehitpause = 1

[State 0,Explod]
type = Explod
triggerall = teamside = 2
trigger1 = animelem =  22
anim = 4514
ID = 1
pos = 0,0
postype = p2  ;p2,front,back,left,right
facing = 1
ontop = 1
ownpal = 1
scale = 1,1
pausemovetime = 0
ignorehitpause = 1

[State 0,Explod]
type = Explod
triggerall = teamside = 2
trigger1 = animelem = 11 
anim = 4513
ID = 1
pos = 0,0
postype = p2  ;p2,front,back,left,right
facing = 1
ontop = 1
ownpal = 1
scale = 1,1
pausemovetime = 0
ignorehitpause = 1

[State 200,3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[Statedef 3856]
type    = U
movetype= H
physics = N
velset = 0,0
sprpriority = -1

[State 0,Pause]
type = Pause
trigger1 = time = 0
time = 0
movetime = 999999
ignorehitpause = 1

[State 0,PosSet]
type = PosSet
trigger1 = 1
X = 0
y = 0
ignorehitpause = 1

[State 0,PalFX]
type = PalFX
trigger1 = 1
time = 1
add = 256,100,0
mul = 256,200,125
invertall = 0
color = 256
ignorehitpause = 1

[State 0,DestroySelf]
type = DestroySelf
trigger1 = 1
ignorehitpause = 1

[State 820,1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 4508 

[State 0,SelfState]
type = SelfState
trigger1 = animtime = 0
value = 5100

[Statedef 3857]
type    = U
movetype= H
physics = N
velset = 0,0
sprpriority = -1

[State 0,Pause]
type = Pause
trigger1 = time = 0
time = 0
movetime = 999999
ignorehitpause = 1

[State 0,PosSet]
type = PosSet
trigger1 = 1
X = 0
y = 0
ignorehitpause = 1

[State 0,PalFX]
type = PalFX
trigger1 = 1
time = 1
add = 256,100,0
mul = 256,200,125
invertall = 0
color = 256
ignorehitpause = 1

[State 0,DestroySelf]
type = DestroySelf
trigger1 = 1
ignorehitpause = 1

[State 820,1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 4509

[State 0,SelfState]
type = SelfState
trigger1 = animtime = 0
value = 5100






;---------------------------------------------------------------------------
; States that are always executed (use statedef -2)
;---------------------------------------------------------------------------

[Statedef -2]

[State -3, Jumping Sound]
type = PlaySnd
triggerall = Time = 1
trigger1 = stateno = 40 ;Jump
value = S41,41

[State -3, Landing Sound]
type = PlaySnd
triggerall = Time = 1
trigger1 = stateno = 52 ;Land
trigger2 = stateno = 106 ;Land
value = S51,51

[State -2, touchpendant un AfterImage]
type = AfterImageTime
trigger1 = Movetype = H
time = 0

[State -2, se relève]
type = PosAdd
triggerall = Anim = 5121
trigger1 = AnimElem = 3
x = -31

[State -2, Turn]
type = PosAdd
trigger1 = Anim = 5
trigger1 = AnimElem = 3
trigger2 = Anim = 6
trigger2 = AnimElem = 3
x = -20

[State -2, Var]
type = VarSet
trigger1 = var(11)
trigger1 = stateno != 315
var(11) = 0

[State -2, Modes]
type = VarSet
trigger1 = NumHelper(194)
var(58) = 190 - Helper(194), anim





[State -2, PlayerPush Liedown]
type = PlayerPush
trigger1 =stateno = 5110
value = 0

;---------------------------------------------------------------------------
; States that are executed when in self's state file (use statedef -3)
;---------------------------------------------------------------------------

[Statedef -3]

[State -3, IA ChangeStates]
type = VarRandom
trigger1 = 1
v = 6
range = 0, 499



[State -3, Hit Snd]
type = VarRandom
trigger1 = 1
v = 9
range = 0, 5

[State -3, Voice Hit]
type = VarRandom
trigger1 = 1
v = 2
range = 0, 3

[State -3, Voice GetHit]
type = VarRandom
trigger1 = 1
v = 3
range = 0, 3

[State -3, Snd GetHit]
type = PlaySnd
trigger1 = (stateno != [120,155])
trigger1 = MoveType = H && Time = 0
value = 5, var(3)
channel = 0
ignorehitpause = 1
persistent = 0

[State -3, Draw & LoseTime Snd]
type = PlaySnd
trigger1 = stateno = 170 && Time = 0
trigger2 = stateno = 175 && AnimElem = 10
value = 10, 17
channel = 0



[State -3, Run StopSnd]
type = StopSnd
trigger1 = stateno != 100
trigger1 = stateno != 2000
trigger1 = stateno != 2050
channel = 6


[State -3, Dizzy]
type = ChangeState
trigger1 = var(4) >= 600
trigger1 = alive
trigger1 = StateType = S
trigger1 = GetHitVar(HitTime) = 0
value = 5300
