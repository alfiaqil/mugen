;---------------------------------------------------------------------------
[Data]
life              = 1400;jambu;1500
power             = 7000;jambu;3000
attack            = 100
defence           = 110;jambu;115
fall.defence_up   = 50
liedown.time      = 60
airjuggle         = 15
sparkno           = 1
guard.sparkno     = 41
KO.echo           = 0
volume            = 0
IntPersistIndex   = 52
FloatPersistIndex = 40

;---------------------------------------------------------------------------
[Size]
xscale           = 1
yscale           = 1.1;jambu;1
ground.back      = 26
ground.front     = 22
air.back         = 12
air.front        = 12
height           = 60
attack.dist      = 160
proj.attack.dist = 90
proj.doscale     = 0
head.pos         = 7,-103
mid.pos          = 0,-67
shadowoffset     = 0
draw.offset      = 0,0

;---------------------------------------------------------------------------
[Velocity]
walk.fwd     = 2.4
walk.back    = -2.0
run.fwd      = 7,0
run.back     = -8,-3
jump.neu     = 0,-9.0
jump.back    = -3.0
jump.fwd     = 3.5
runjump.back = -2.55,-8.1
runjump.fwd  = 4,-8.1
airjump.neu  = 0,-8.1
airjump.back = -2.55
airjump.fwd  = 2.5

;---------------------------------------------------------------------------
[Movement]
airjump.num     = 1
airjump.height  = 35
yaccel          = .56
stand.friction  = .85
crouch.friction = .83


;---------------------------------------------------------------------------
; Stand
[Statedef 0]
type = S
physics = S
sprpriority = 0

[State 0, 1]
type = ChangeAnim
trigger1 = Anim != 0 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0 ;Turn anim over
value = 0

[State 0, 2]
type = VelSet
trigger1 = Time = 0
y = 0

[State 0, 3] ;Stop moving if low velocity or 4 ticks pass
type = VelSet
trigger1 = time = 0
;trigger1 = abs(vel x) < 2
;trigger2 = Time = 4
x = 0

[State 0, PosSet];���V�o�O�΍�
type = PosSet
trigger1 = alive && Life>0
trigger1 = abs(Pos Y) > 5
y = 0

[State 0, 4] ;Are you dead?
type = ChangeState
trigger1 = !alive
value = 5050

;---------------------------------------------------------------------------
; Stand to Crouch
[Statedef 10]
type    = C
physics = C
anim = 10

[State 10, 1]
type = VelSet
trigger1 = Time = 0
x = 0

[State 10, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 11

;---------------------------------------------------------------------------
; Crouching
[Statedef 11]
type    = C
physics = C
anim = 11
sprpriority = 0

[State 11, 0]
type = VelSet
trigger1 = Time = 0
x = 0

[State 11, 1] ;Change from turning animation
type = ChangeAnim
trigger1 = Anim = 6 && AnimTime = 0
value = 11

;---------------------------------------------------------------------------
; Crouch to Stand
[Statedef 12]
type    = S
physics = S
anim = 12

[State 11, 0]
type = VelSet
trigger1 = Time = 0
x = 0

[State 12, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
; Walk
[Statedef 20]
type    = S
physics = S
sprpriority = 0

[State -1, AI]
Type = ChangeState
TriggerAll = var(59) >0
Trigger1 = !Time
Value = 19
IgnoreHitPause = 1

[State 20, 1]
type = VelSet
trigger1 = var(59)=0
trigger1 = command = "holdfwd"
x = const(velocity.walk.fwd.x)

[State 20, 2]
type = VelSet
trigger1 = var(59)=0
trigger1 = command = "holdback"
x = const(velocity.walk.back.x)

[State 20, 3]
type = ChangeAnim
triggerall = vel x > 0
trigger1 = Anim != 20 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0
value = 20

[State 20, 4]
type = ChangeAnim
triggerall = vel x < 0
trigger1 = Anim != 21 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0
value = 21

;---------------------------------------------------------------------------
; Walk(FWD) AI
[Statedef 19]
type    = S
physics = S
sprpriority = 0
ctrl = 0

[State 19, 1]
type = VelSet
trigger1 = 1
x = const(velocity.walk.fwd.x)

[State 19, 3]
type = ChangeAnim
trigger1 = Anim != 20
value = 20

[State 20, 1]
type = Turn
trigger1 = P2dist X < 0

[State 19, Ctrl]
type = ChangeState
trigger1 = roundstate!=2
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Walk(BACK) AI
[Statedef 21]
type    = S
physics = S
sprpriority = 0
ctrl = 0

[State 21, 2]
type = VelSet
trigger1 = 1
x = const(velocity.walk.back.x)

[State 21, 4]
type = ChangeAnim
trigger1 = Anim != 21
value = 21

[State 20, 1]
type = Turn
trigger1 = P2dist X < 0

[State 21, Ctrl]
type = ChangeState
trigger1 = roundstate!=2
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Walk Stop AI
[State -1, AI]
Type = ChangeState
triggerall = (stateno=19||stateno=21)
trigger1 = var(59)<0
trigger2 = roundstate!=2
Value = 0
Ctrl = 1

[State -1, AI]
Type = ChangeState
triggerall = (stateno=19||stateno=21)&&(var(59)>0)
trigger1 = time > 12 || (time > 3 && var(59)>8)
trigger1 = P2bodydist x < 30
Trigger1 = anim = 20
trigger1 = fvar(38)!=1
trigger2 = time > 24 || (time > 3 && var(59)>8)
trigger2 = P2bodydist x >= 90
Trigger2 = anim = 21
trigger3 = inguarddist
Trigger3 = Anim = 21 || Random < 60*(var(59)-1)||var(59) >8
trigger4 = roundstate != 2
Value = 0
Ctrl = 1

;---------------------------------------------------------------------------
; RUN_FWD
[Statedef 100]
type    = S
physics = S
anim = 100
sprpriority = -1
;ctrl = 0

[State 191, Spray Anim P1]
type = Explod
trigger1 = time >= 3 && timemod = 10,0
trigger1 = StageVar(info.author) = "water"
ID = 20
anim = F21
postype = p1
pos = -20,0
ownpal = 1
ontop = 1
bindtime = 1
removetime = -2

[State 191, Spray Anim P1]
type = Explod
trigger1 = time >= 3 && timemod = 10,0
trigger1 = StageVar(info.author) = "water"
ID = 20
anim = F21
postype = p1
pos = 3,-2
sprpriority = -3
ownpal = 1
ontop = 0
bindtime = 1
removetime = -2

[State 100, S]
type = PlaySnd
trigger1 = StageVar(info.author) = "water"
trigger1 = Time = 3
value = F100,1
channel = 4
loop =1

[State 100, 0]
type = PlaySnd
trigger1 = Time = 3
value = 100, 0

[State 801, Explod]
type = Explod
trigger1 = animelem = 5
anim = 1550
ID = 1550
pos = -20, 3
postype = p1
facing = 1
sprpriority = -2
ownpal = 1
removeongethit = 1
bindtime = -1
persistent = 1

[State 801, Explod]
type = Explod
trigger1 = animelem = 5
anim = 1550
ID = 1550
pos = 3, -3
postype = p1
facing = 1
sprpriority = -3
ownpal = 1
removeongethit = 1
bindtime = -1
persistent = 1

[State 100, 1]
type = Veladd
trigger1 = AnimElemtime(2) >= 0
trigger1 = vel x < const(velocity.run.fwd.x)
x = 2

[State 100, 1]
type = Velset
trigger1 = vel x > const(velocity.run.fwd.x)
x = const(velocity.run.fwd.x)

[State 100, 2] ;Prevent run from canceling into walk
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 100, 3] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 100, 4]
type = ChangeState
trigger1 = command != "holdfwd"
value = 101

;---------------------------------------------------------------------------
; RUN_Stop
[Statedef 101]
type    = S
physics = S
anim = 101
ctrl = 1
velset = 0
sprpriority = 1

[State 220,2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; RUN_FWD (AI)
[Statedef 99]
type    = S
physics = S
anim = 100
ctrl = 0
sprpriority = 1

[State 100, 0]
type = PlaySnd
trigger1 = Time = 3
value = 100, 0
loop = 1
channel = 1

[State 100, 1]
type = VelSet
trigger1 = AnimElemtime(2) >= 0
x = const(velocity.run.fwd.x)

[State 100, 2] ;Prevent run from canceling into walk
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 100, 3] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State -1, AI]
type = ChangeState
triggerall = var(59)>=1
triggerall = stateno = 99 && time>=10
triggerall = fvar(38)=0
Trigger1 = inguarddist
Trigger2 = EnemyNear(var(58)),MoveType!=H
Trigger2 = P2BodyDist X<=30
Trigger2 = P2BodyDist Y>=-120
trigger2 = random<=var(59)*15
Trigger3 = P2BodyDist X=[10,30]
trigger3 = random<=var(59)*15
trigger4 = RoundState != 2 
trigger5 = p2bodydist x <= 5
trigger6 = p2bodydist x = [31,60]
trigger6 = random<=var(59)*20
trigger7 = P2BodyDist X = [61,90]
trigger7 = random <= var(59)*5
trigger8 = time = 60
trigger9 = P2BodyDist X = [71,150]
trigger9 = EnemyNear(var(58)),stateno=5120
trigger9 = enemynear(var(58)),animtime>-9
trigger9 = random <= var(59)*3
value = 0
ctrl = 1

[State -1, AI]
type = ChangeState
triggerall = stateno = 99
trigger1 = RoundState = 4
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; RUN_BACK
[Statedef 105]
type    = A
physics = A
ctrl = 0
anim = 105
sprpriority = 1

[State 191, Spray Anim P1]
type = Explod
trigger1 = animelem = 2
trigger1 = StageVar(info.author) = "water"
anim = F21
postype = p1
pos = 0,0
ownpal = 1
ontop = 1
bindtime = 1
removetime = -2

[State 100, 3]
type = PlaySnd
trigger1 = StageVar(info.author) = "water"
trigger1 = animelem = 2
value = f47,1

[State 100, 3]
type = PlaySnd
trigger1 = animelem = 2
value = F105, 0

[State 105, 1]
type = VelSet
trigger1 = animelemtime(2) <0
y = 0

[State 105, 1]
type = VelSet
trigger1 = animelem = 2
x = const(velocity.run.back.x)
y = const(velocity.run.back.y)

[State 105, 3]
type = ChangeState
trigger1 = animelemtime(2)>=0
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 106

;---------------------------------------------------------------------------
; RUN_BACK2 (land)
[Statedef 106]
type    = S
physics = S
ctrl = 0
anim = 106

[State 191,]
type = PlaySnd
trigger1 = Time = 0
value = f47,0+(StageVar(info.author) = "water")

[State 106, 3];С�ҳ�
type = GameMakeAnim
triggerall = StageVar(info.author) != "water"
trigger1 = Time = 2
value = 125
pos = -5,-2
under = 0
spacing = 1

[State 0];Сˮ��
type = GameMakeAnim
triggerall = StageVar(info.author) = "water"
trigger1 = Time = 1
value = 21
pos = 0, 0
under = 0

[State 106, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0

[State 106, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 106, 4]
type = ChangeState
trigger1 = animtime=0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; GUARD (start)
[Statedef 120]
type = U    ;Leave state type unchanged
physics = U ;Leave physics unchanged

[State 120, 1]
type = ChangeAnim
trigger1 = Time = 0
value = 120 + (statetype = C) + (statetype = A)*2

[State 120, 2]
type = StateTypeSet
trigger1 = Time = 0 && statetype = S
physics = S

[State 120, 3]
type = StateTypeSet
trigger1 = Time = 0 && statetype = C
physics = C

[State 120, 4]
type = StateTypeSet
trigger1 = Time = 0 && statetype = A
physics = A

[State 120, Hi to Lo]
type = StateTypeSet
TriggerAll=Statetype = S
Trigger1 = var(59) = 0
Trigger1 = command = "holddown"
Trigger2 = var(59) >= 1
Trigger2 = EnemyNear,StateType!=A
Trigger2 = Random <= var(59)*20||var(59)>9
trigger2 = statetype != A
trigger2 = enemynear(var(58)),stateno!=var(55) && enemynear(var(58)),stateno!=var(54)
statetype = C
physics = C

[State 120, Lo to Hi]
type = StateTypeSet
TriggerAll=Statetype = C
Trigger1 = var(59)=0
Trigger1 = command != "holddown"
Trigger2 = var(59)>=1
Trigger2 = EnemyNear,StateType=A || enemynear(var(58)),stateno=var(55) || enemynear(var(58)),stateno=var(54)
Trigger2 = Random <= var(59)*20||var(59)>9
trigger2 = statetype != A
statetype = S
physics = S

[State 120, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 130 + (statetype = C) + (statetype = A)*2

[State 120, Stop Guarding]
type = ChangeState
Trigger1 = var(59) = 0
trigger1 = command != "holdback"
trigger2 = !inguarddist
Trigger3 = var(59)=[1,9]
Trigger3 = P2BodyDist X<0
Trigger3 = Random <= (10-var(59))*40
value = 140

;---------------------------------------------------------------------------
; STAND GUARD (guarding)
[Statedef 130]
type    = S
physics = S

[State 130, 1]
type = ChangeAnim
trigger1 = Anim != 130
value = 130

[State 130, Hi to Lo]
type = ChangeState
Trigger1 = var(59)=0
Trigger1 = command = "holddown"
Trigger2 = var(59)>=1
Trigger2 = EnemyNear,StateType!=A
Trigger2 = Random <= var(59)*20||var(59)>9
trigger2 = enemynear(var(58)),stateno!=var(55) && enemynear(var(58)),stateno!=var(54)
value = 131

[State 130, Stop Guarding]
type = ChangeState
Trigger1 = var(59) = 0
trigger1 = command != "holdback"
trigger2 = !inguarddist
Trigger3 = var(59)=[1,9]
Trigger3 = P2BodyDist X<0
Trigger3 = Random <= (10-var(59))*40
value = 140

;---------------------------------------------------------------------------
; CROUCH GUARD (guarding)
[Statedef 131]
type    = C
physics = C

[State 131, 1]
type = ChangeAnim
trigger1 = Anim != 131
value = 131

[State 131, Lo to Hi]
type = ChangeState
Trigger1 = var(59)=0
Trigger1 = command != "holddown"
Trigger2 = var(59)>=1
Trigger2 = EnemyNear,StateType=A || enemynear(var(58)),stateno=var(55) || enemynear(var(58)),stateno=var(54)
Trigger2 = Random <= var(59)*20||var(59)>9
value = 130

[State 131, Stop Guarding]
type = ChangeState
Trigger1 = var(59) = 0
trigger1 = command != "holdback"
trigger2 = !inguarddist
Trigger3 = var(59)=[1,9]
Trigger3 = P2BodyDist X<0
Trigger3 = Random <= (10-var(59))*40
value = 140

;---------------------------------------------------------------------------
; AIR GUARD (guarding)
[Statedef 132]
type    = A
physics = N

[State 132, 1]
type = ChangeAnim
trigger1 = Anim != 132
value = 132

[State 132, 2]
type = VelAdd
trigger1 = 1
y = Const(movement.yaccel)

[State 132, 3]
type = VarSet
trigger1 = 1
sysvar(0) = (pos y >= 0) && (vel y > 0)

[State 132, 4]
type = VelSet
trigger1 = sysvar(0)
y = 0

[State 132, 5]
type = PosSet
trigger1 = sysvar(0)
y = 0

[State 132, 6]
type = ChangeState
trigger1 = sysvar(0)
trigger1 = command = "holdback"
trigger1 = inguarddist
value = 130

[State 132, 7]
type = ChangeState
trigger1 = sysvar(0)
value = 52

[State 132, Stop Guarding]
type = ChangeState
trigger1 = command != "holdback"
Trigger1 = var(59) = 0
trigger2 = !inguarddist
Trigger3 = var(59)=[1,9]
Trigger3 = P2BodyDist X<0
Trigger3 = Random <= (10-var(59))*40
value = 140

;---------------------------------------------------------------------------
; GUARD (end)
[Statedef 140]
type = U    ;Leave state type unchanged
physics = U ;Leave physics unchanged
ctrl = 1

[State 140, 1]
type = ChangeAnim
trigger1 = Time = 0
value = 140 + (statetype = C) + (statetype = A)*2

[State 140, 2]
type = StateTypeSet
trigger1 = Time = 0 && statetype = S
physics = S

[State 140, 3]
type = StateTypeSet
trigger1 = Time = 0 && statetype = C
physics = C

[State 140, 4]
type = StateTypeSet
trigger1 = Time = 0 && statetype = A
physics = A

[State 120, Hi to Lo]
type = StateTypeSet
TriggerAll=Statetype = S
Trigger1 = var(59) = 0
Trigger1 = command = "holddown"
Trigger2 = var(59) >= 1
Trigger2 = EnemyNear,StateType!=A
Trigger2 = Random <= var(59)*20||var(59)>9
trigger2 = statetype != A
trigger2 = enemynear(var(58)),stateno!=var(55) && enemynear(var(58)),stateno!=var(54)
statetype = C
physics = C

[State 120, Lo to Hi]
type = StateTypeSet
TriggerAll=Statetype = C
Trigger1 = var(59)=0
Trigger1 = command != "holddown"
Trigger2 = var(59)>=1
Trigger2 = EnemyNear,StateType=A || enemynear(var(58)),stateno=var(55) || enemynear(var(58)),stateno=var(54)
Trigger2 = Random <= var(59)*20||var(59)>9
trigger2 = statetype != A
statetype = S
physics = S

;[State 140, 5] ;Implemented within engine
;type = ChangeState
;trigger1 = AnimTime = 0
;value = (statetype = C)*11 + (statetype = A)*51

;---------------------------------------------------------------------------
; SGUARDHIT (shaking)
[Statedef 150]
type    = S
movetype= H
physics = N
velset = 0,0

;---------------------------------------(GUARD CRUSH)
[State 0]
type = PalFx
triggerall = GameTime%10 = 1
trigger1 = NumHelper(90900)
trigger1 = Helper(90900),var(36) >= 40
trigger2 = NumHelper(90901)
trigger2 = Helper(90901),var(36) >= 40
trigger3 = NumHelper(90902)
trigger3 = Helper(90902),var(36) >= 40
time = 2
add = 200, 0, 0

[State 0]
type = ChangeState
triggerall = Alive
trigger1 = NumHelper(90900)
trigger1 = Helper(90900), var(36) >= 50
trigger2 = NumHelper(90901)
trigger2 = Helper(90901), var(36) >= 50
trigger3 = NumHelper(90902)
trigger3 = Helper(90902), var(36) >= 50
IgnoreHitPause = 1
value = 190010
;-------------------------------------

[State 150, 1]
type = ChangeAnim
trigger1 = 1
value = 150

[State 150, 2]
type = ChangeState
trigger1 = HitShakeOver
value = 151 + 2*ifelse(var(59)=0,(command = "holddown"),(enemynear,statetype=C))

[State 120, Hi to Lo]
type = StateTypeSet
TriggerAll=Statetype = S
Trigger1 = var(59) = 0
Trigger1 = command = "holddown"
Trigger2 = var(59) >= 1
Trigger2 = EnemyNear,StateType!=A
Trigger2 = Random <= var(59)*20||var(59)>9
trigger2 = statetype != A
trigger2 = enemynear(var(58)),stateno!=var(55) && enemynear(var(58)),stateno!=var(54)
statetype = C
physics = C

[State 120, Lo to Hi]
type = StateTypeSet
TriggerAll=Statetype = C
Trigger1 = var(59)=0
Trigger1 = command != "holddown"
Trigger2 = var(59)>=1
Trigger2 = EnemyNear,StateType=A || enemynear(var(58)),stateno=var(55) || enemynear(var(58)),stateno=var(54)
Trigger2 = Random <= var(59)*20||var(59)>9
trigger2 = statetype != A
statetype = S
physics = S

[State 150, 3]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 3

;---------------------------------------------------------------------------
; SGUARDHIT2 (knocked back)
[Statedef 151]
type    = S
movetype= H
physics = S
anim = 150

[State 151, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 151, 2]
type = VelSet
trigger1 = Time = GetHitVar(slidetime)
trigger2 = HitOver
x = 0

[State 151, 3]
type = CtrlSet
trigger1 = Time = GetHitVar(ctrltime)
value = 1

[State 120, Hi to Lo]
type = StateTypeSet
TriggerAll=Statetype = S
Trigger1 = var(59) = 0
Trigger1 = command = "holddown"
Trigger2 = var(59) >= 1
Trigger2 = EnemyNear,StateType!=A
Trigger2 = Random <= var(59)*20||var(59)>9
trigger2 = statetype != A
trigger2 = enemynear(var(58)),stateno!=var(55) && enemynear(var(58)),stateno!=var(54)
statetype = C
physics = C

[State 120, Lo to Hi]
type = StateTypeSet
TriggerAll=Statetype = C
Trigger1 = var(59)=0
Trigger1 = command != "holddown"
Trigger2 = var(59)>=1
Trigger2 = EnemyNear,StateType=A || enemynear(var(58)),stateno=var(55) || enemynear(var(58)),stateno=var(54)
Trigger2 = Random <= var(59)*20||var(59)>9
trigger2 = statetype != A
statetype = S
physics = S

[State 151, 4]
type = ChangeState
trigger1 = HitOver
value = 130
ctrl = 1

;---------------------------------------------------------------------------
; CGUARDHIT (shaking)
[Statedef 152]
type    = C
movetype= H
physics = N
velset = 0,0

;---------------------------------------(GUARD CRUSH)
[State 0]
type = PalFx
triggerall = GameTime%10 = 1
trigger1 = NumHelper(90900)
trigger1 = Helper(90900),var(36) >= 40
trigger2 = NumHelper(90901)
trigger2 = Helper(90901),var(36) >= 40
trigger3 = NumHelper(90902)
trigger3 = Helper(90902),var(36) >= 40
time = 2
add = 200, 0, 0

[State 0]
type = ChangeState
triggerall = Alive
trigger1 = NumHelper(90900)
trigger1 = Helper(90900), var(36) >= 50
trigger2 = NumHelper(90901)
trigger2 = Helper(90901), var(36) >= 50
trigger3 = NumHelper(90902)
trigger3 = Helper(90902), var(36) >= 50
IgnoreHitPause = 1
value = 190010
;-------------------------------------

[State 152, 1]
type = ChangeAnim
trigger1 = 1
value = 151

[State 152, 3]
type = ChangeState
trigger1 = HitShakeOver
value = 151 + 2*ifelse(var(59)=0,(command = "holddown"),(enemynear,statetype=C))

[State 120, Hi to Lo]
type = StateTypeSet
TriggerAll=Statetype = S
Trigger1 = var(59) = 0
Trigger1 = command = "holddown"
Trigger2 = var(59) >= 1
Trigger2 = EnemyNear,StateType!=A
Trigger2 = Random <= var(59)*20||var(59)>9
trigger2 = statetype != A
trigger2 = enemynear(var(58)),stateno!=var(55) && enemynear(var(58)),stateno!=var(54)
statetype = C
physics = C

[State 120, Lo to Hi]
type = StateTypeSet
TriggerAll=Statetype = C
Trigger1 = var(59)=0
Trigger1 = command != "holddown"
Trigger2 = var(59)>=1
Trigger2 = EnemyNear,StateType=A || enemynear(var(58)),stateno=var(55) || enemynear(var(58)),stateno=var(54)
Trigger2 = Random <= var(59)*20||var(59)>9
trigger2 = statetype != A
statetype = S
physics = S

[State 152, 4]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 4

;---------------------------------------------------------------------------
; CGUARDHIT2 (knocked back)
[Statedef 153]
type    = C
movetype= H
physics = C
anim = 151

[State 153, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 153, 2]
type = VelSet
trigger1 = Time = GetHitVar(slidetime)
trigger2 = HitOver
x = 0

[State 153, 3]
type = CtrlSet
trigger1 = Time = GetHitVar(ctrltime)
value = 1

[State 120, Hi to Lo]
type = StateTypeSet
TriggerAll=Statetype = S
Trigger1 = var(59) = 0
Trigger1 = command = "holddown"
Trigger2 = var(59) >= 1
Trigger2 = EnemyNear,StateType!=A
Trigger2 = Random <= var(59)*20||var(59)>9
trigger2 = statetype != A
trigger2 = enemynear(var(58)),stateno!=var(55) && enemynear(var(58)),stateno!=var(54)
statetype = C
physics = C

[State 120, Lo to Hi]
type = StateTypeSet
TriggerAll=Statetype = C
Trigger1 = var(59)=0
Trigger1 = command != "holddown"
Trigger2 = var(59)>=1
Trigger2 = EnemyNear,StateType=A || enemynear(var(58)),stateno=var(55) || enemynear(var(58)),stateno=var(54)
Trigger2 = Random <= var(59)*20||var(59)>9
trigger2 = statetype != A
statetype = S
physics = S

[State 153, 4]
type = ChangeState
trigger1 = HitOver
value = 131
ctrl = 1

;---------------------------------------------------------------------------
; AGUARDHIT (shaking)
[Statedef 154]
type    = A
movetype= H
physics = N
velset = 0,0

[State 154, 1]
type = ChangeAnim
trigger1 = 1
value = 152

[State 154, 2]
type = ChangeState
trigger1 = HitShakeOver
value = 155 ;AGUARDHIT2

[State 154, 3]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 4

;---------------------------------------------------------------------------
; AGUARDHIT2 (knocked away)
[Statedef 155]
type    = A
movetype= H
physics = N
anim = 152

[State 155, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 155, 2]
type = VelAdd
trigger1 = 1
y = Const(movement.yaccel)

[State 155, 3]
type = CtrlSet
trigger1 = Time = GetHitVar(ctrltime)
value = 1

[State 155, 4]
type = VarSet
trigger1 = 1
sysvar(0) = (pos y >= 0) && (vel y > 0)

[State 155, 5]
type = VelSet
trigger1 = sysvar(0)
y = 0

[State 155, 6]
type = PosSet
trigger1 = sysvar(0)
y = 0

[State 155, 6]
type = ChangeState
trigger1 = sysvar(0)
trigger1 = command = "holdback"
trigger1 = inguarddist
value = 130

[State 155, 7]
type = ChangeState
trigger1 = sysvar(0)
value = 52

;---------------------------------------------------------------------------
[Statedef 170]
type = S
ctrl = 0
anim = 170
velset = 0,0

[State 170, ���G]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
[Statedef 180]
type = S

[State 180]
type = VarRandom
trigger1 = 1
v = 2
range = 1,3

[State 180]
type = ChangeState
trigger1 = var(2)!=0
value = 180 + var(2)

;---------------------------------------------------------------------------
[Statedef 181]
type = S
ctrl = 0
anim = 180
velset = 0,0

 [State 181, 1]
 type = PlaySnd
 trigger1 = animelemtime(7)=0
 value = 800, 1
 persistent = 0

[State 1]
type = screenbound
trigger1 = 1
value = 1
movecamera = 1

[State 181, 2]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 181, 3]
type = AssertSpecial
trigger1 = time = [0,100]
flag = roundnotover

;---------------------------------------------------------------------------
[Statedef 182]
type = S
ctrl = 0
anim = 181
velset = 0,0

[State 180, 1]
type = PlaySnd
trigger1 = animelem = 5
value = 180, 2
persistent = 0

[State 1]
type = screenbound
trigger1 = 1
value = 1
movecamera = 1

[State 181, 2]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 801, Explod]
type = Explod
trigger1 = NumExplod(10181) = 0
trigger1 = animelem = 5
anim = 10181
ID = 10181
pos = 0, 0
postype = p1
facing = 1
sprpriority = 10
ownpal = 1
removeongethit = 1

[State 181, 4]
type = AssertSpecial
trigger1 = time = [0,120]
flag = roundnotover

;---------------------------------------------------------------------------
[Statedef 183]
type = S
ctrl = 0
anim = 0
velset = 0,0

[State 0, 1]
type = ChangeAnim
trigger1 = BackEdgeDist >= 100
value = 5
persistent = 0

[State 20, 1]
type = Turn
trigger1 = BackEdgeDist >= 100
persistent = 0

[State 0, 1]
type = ChangeAnim
triggerall = Anim != 182
trigger1 = Anim != 5
trigger2 = Anim = 5
trigger2 = Animtime = 0
value = 182

[State 191, 6]
type = Helper
trigger1 = Anim != 5
helpertype = normal
name = "maxima"
ID = 184
pos = 66,-300
postype = p1
facing = -1
stateno = 184
keyctrl = 0
ownpal = 1
persistent = 0

[State 1]
type = screenbound
trigger1 = 1
value = 1
movecamera = 1

[State 181, 1]
type = PlaySnd
triggerall = Anim = 182
trigger1 = animelemtime(7)=0
value = 800, 1
persistent = 0

[State 181, 2]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 181, 4]
type = AssertSpecial
trigger1 = time = [0,150]
flag = roundnotover


;---------------------------------------------------------------------------
;Maxima
[Statedef 184]
type    = A
movetype= H
physics = N
velset = 0,0
anim = 183

[State 823] ;Gravity
type = VelAdd
trigger1 = Pos y < 0
y = .4

[State 841]
type = EnvShake
trigger1 = Vel y > 0
trigger1 = Pos y >= 0
time = 30
ampl = -10
phase = 10
freq = 100
persistent = 0

[State -3, ���ˮ��]
type = Explod
triggerall = StageVar(info.author) = "water"
trigger1 = Vel y > 0
trigger1 = Pos y >= 0
trigger1 = !gethitvar(isbound)
persistent = 0
ID = 22
anim = F22
postype = p1
pos = 10,0
ownpal = 1
ontop = 1
bindtime = 1
removetime = -2
pausemovetime = 999999
supermovetime = 999999

[State -3 , �����Ч]
type = PlaySnd
trigger1 = Vel y > 0
trigger1 = Pos y >= 0
trigger1 = !gethitvar(isbound)
persistent = 0
value = F47,(0+(StageVar(info.author) = "water"))

[State 823] ;Hit ground
type = Changeanim
trigger1 = Vel Y >= 0
trigger1 = Pos Y >= 0
value = 183
elem = 2
persistent = 0

[State 823] ;Gravity
type = Posset
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
y = 0

[State 823] ;Gravity
type = Velset
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
y = 0
persistent = 0

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
[Statedef 190]
type = S
ctrl = 0
anim = 194
velset = 0,0

[State 190, ChangeState]
type = ChangeState
triggerall = time = 0

trigger1 = p2name = "Krizalid"      || p4name = "Krizalid"
trigger2 = p2name = "ORIGINAL ZERO" || p4name = "ORIGINAL ZERO"
trigger3 = p2name = "goenitz"       || p4name = "goenitz"
trigger4 = p2name = "IGNIZ"         || p4name = "IGNIZ"
trigger5 = p2name = "OROCHI"        || p4name = "OROCHI"
trigger6 = p2name = "rugal"    || p4name = "rugal"
trigger7 = p2name = "Magaki"   || p4name = "Magaki"
trigger8 = p2name = "Shion"    || p4name = "Shion"
trigger9 = p2name = "Rugal2k2" || p4name = "Rugal2k2"
value = 192

[State 190, ChangeState]
type = ChangeState
triggerall = time = 0
trigger1 = p2name = "K'"   || p4name = "K'"
trigger2 = p2name = "k'XI" || p4name = "k'XI"
trigger3 = p2name = "Kula"         || p4name = "Kula"
trigger4 = p2name = "Kula Diamond" || p4name = "Kula Diamond"
trigger5 = p2name = "KulaXI"       || p4name = "KulaXI"
trigger6 = p2name = "kula_new"     || p4name = "kula_new"
trigger7 = p2name = "Maxima"       || p4name = "Maxima"
value = 196

[State 190, ChangeState]
type = ChangeState
triggerall = time = 0
trigger1 = p2name = "Iori"   || p4name = "Iori"
trigger2 = p2name = "Vice" || p4name = "Vice"
trigger3 = p2name = "Mature"         || p4name = "Mature"
trigger4 = p2name = "Rugal" || p4name = "Rugal"
;trigger5 = p2name = "KulaXI"       || p4name = "KulaXI"
;trigger6 = p2name = "kula_new"     || p4name = "kula_new"
;trigger7 = p2name = "Maxima"       || p4name = "Maxima"
value = 193

[State 190, VarRandom]
type = VarRandom
trigger1 = 1
v = 2
range = 0,1

[State 190, ChangeState]
type = ChangeState
trigger1 = time = 0
trigger1 = var(2) = 1
value = 191

[State 191, 1]
type = ChangeAnim
trigger1 = RoundState = 0
value = 194

[State 191, 2]
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 191, 3]
type = AssertSpecial
trigger1 = time <= 59
flag = noshadow
flag2 = invisible

[State 191, 5]
type = playsnd
trigger1 = animelem = 9
value = s180,2

[State 191, 6]
type = Helper
trigger1 = time = 0
helpertype = normal
name = "car"
ID = 194
pos = 0,0
postype = p1
facing = 1
stateno = 194
keyctrl = 0
ownpal = 1

[State 191, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
[Statedef 191]
type = S
ctrl = 0
anim = 191
velset = 0,0

[State 191, 1]
type = PlaySnd
trigger1 = animelemtime(10)=1
value = 190,0
;volume = 100

[State 191, 2]
type = Explod
trigger1 = NumExplod(10191) = 0
trigger1 = animelem = 10
anim = 10191
ID = 10191
pos = 25, -85
postype = p2
facing = -1
sprpriority = 10
ownpal = 1
removeongethit = 1

[State 191, 3]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 191, 4]
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 191, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
[Statedef 192]
type = S
ctrl = 0
anim = 191
velset = 0,0

[State 190, 2]
type = PlaySnd
trigger1 = animelemtime(10)=1
value = 190,0
;volume = 100

[State 801, Explod]
type = Explod
trigger1 = NumExplod(10192) = 0
trigger1 = animelem = 10
anim = 10192
ID = 10192
pos = 25, -85
postype = p2
facing = -1
sprpriority = 3
ownpal = 1
removeongethit = 1

[State 181, 2]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 191, 3]
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 191, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
[Statedef 193]
type = S
ctrl = 0
anim = 192
velset = 0,0

[State 192, 1]
type = playsnd
trigger1 = animelem = 4
value = s190,1

[State 181, 2]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 191]
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 191, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
[Statedef 194]
type = S
ctrl = 0
anim = 190
velset = 0,0
movetype = I
physics = S
sprpriority = 4

[State 192, 1]
type = playsnd
trigger1 = time = 1
value = s180,0

[State 191, 4]
type = playsnd
trigger1 = time = 59
value = s180,1

[State 192, 2]
type = Explod
trigger1 = time = 59
anim = 193
ID =193
pos = 0,0
postype = p1
facing = 1
bindtime = 1
;removetime = 8
sprpriority = 7
ownpal = 1
removeongethit = 1

[State 192, 3]
type = destroyself
trigger1 = animtime = 0



;---------------------------------------------------------------------------
[Statedef 195]
type = S
movetype = I
physics = S
ctrl = 0
anim = 195
velset = 0,0
sprpriority = 2
poweradd = 100
facep2 = 1

[State 192, 1]
type = playsnd
trigger1 = animelem = 3
value = s190,1

[State 195]
type = CtrlSet
trigger1 = Time = 45
value = 1

[State 195]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
[Statedef 196]
type    = A
movetype= H
physics = N
ctrl = 0
anim = 196
velset = 0,0
sprpriority = 4

[State 1000, 0]
Type = ScreenBound
Trigger1 = 1
Value = 0
MoveCamera = 1,0

[State 841]
type = Posset
trigger1 = time = 0
y = -300

[State 191, 6]
type = Helper
trigger1 = time = 10
helpertype = normal
name = "rope"
ID = 197
pos = -9,300
postype = p1
;facing = -1
stateno = 197
keyctrl = 0
ownpal = 1
persistent = 0

[State 841]
type = Velset
trigger1 = time = 50
y = 6

[State 841]
type = EnvShake
trigger1 = Vel y > 0
trigger1 = Pos y >= 0
time = 30
ampl = -6
phase = 6
freq = 100
persistent = 0

[State -3, ���ˮ��]
type = Explod
triggerall = StageVar(info.author) = "water"
trigger1 = Vel y > 0
trigger1 = Pos y >= 0
trigger1 = !gethitvar(isbound)
persistent = 0
ID = 22
anim = F22
postype = p1
pos = 10,0
ownpal = 1
ontop = 1
bindtime = 1
removetime = -2
pausemovetime = 999999
supermovetime = 999999

[State -3 , �����Ч]
type = PlaySnd
trigger1 = Vel y > 0
trigger1 = Pos y >= 0
trigger1 = !gethitvar(isbound)
persistent = 0
value = F47,(0+(StageVar(info.author) = "water"))

[State 823] ;Hit ground
type = Changeanim
trigger1 = Vel Y >= 0
trigger1 = Pos Y >= 0
value = 196
elem = 2
persistent = 0

[State 823] ;Gravity
type = Posset
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
y = 0

[State 823] ;Gravity
type = Velset
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
y = 0
persistent = 0

[State 195]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Rope
[Statedef 197]
type    = A
movetype= H
physics = N
velset = 0,0
anim = 197

[State 823] ;Gravity
type = VelAdd
trigger1 = Parent,Anim != 196
y = -.2
;persistent = 0

[state destroyselef]
type = destroyself
trigger1 = pos y < -240

;---------------------------------------------------------------------------
; HIT_FALLRECOVER (still falling)
[Statedef 5200]
type    = A
movetype= H
physics = N

[State 5200, 1] ;Change anim if done with transition
type = ChangeAnim
trigger1 = Anim = 5035
trigger1 = AnimTime = 0
value = 5050

[State 5200, 2]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5200, 3]
type = SelfState 
trigger1 = var(59)=0
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 10
value = 5201

[State 5200, 3]
type = SelfState 
trigger1 = var(59)>0
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 10
value = 5201

;---------------------------------------------------------------------------
; HIT_FALLRECOVER (on the ground)
[Statedef 5201]
type    = S
movetype= H
physics = S
anim = 5200

[State 5201, 1] ;Turn if not facing opponent
type = Turn
trigger1 = Time = 0
trigger1 = p2dist X < -5

[State 5201, 2]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5201, 2.1]
type = VelSet
trigger1 = Time >= 0
trigger1 = Time <= 18
x = -2

[State 5201, 3]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5201, 4]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 5201, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;===========================================================================
;---------------------------------------------------------------------------
[Statedef -2]


[State 0, DefenceMulSet]
type=DefenceMulSet
trigger1=1
value=IfElse(life<300,.6,life*.001)
ignorehitpause=1

[State -2, Spray Anim P1];����ˮ��
type = Explod
triggerall = StageVar(info.author) = "water"
triggerall = pos Y = 0
trigger1 = time >= 0 && timemod = 16,0
persistent = 0
ID = 20
anim = F20
postype = p1
pos = 0,-5
ownpal = 1
ontop = 1
bindtime = ifelse(pos Y != 0,0,-1)
removetime = 16
pausemovetime = 999999
supermovetime = 999999

[State -2, 1];����ˮ���Ƴ�
type = removeexplod
trigger1 = pos Y != 0
ID = 20

[State -3, ���ˮ��]
type = Explod
triggerall = StageVar(info.author) = "water"
triggerall = Time = 1
trigger1 = stateno = 1803 || stateno = 5201
ID = 22
anim = F22
postype = p1
pos = 10,0
ownpal = 1
ontop = 1
bindtime = 1
removetime = -2
pausemovetime = 999999
supermovetime = 999999

[State -3 , �����Ч]
type = PlaySnd
triggerall = Time = 1
trigger1 = stateno = 1803 || stateno = 5201
value = F47,(0+(StageVar(info.author) = "water"))
;======================================

;=======================================================================
;-----------------------------------
[State -2, 2�l�ڂ̃C���g��]
type = ChangeState
value = 190
triggerall = RoundsExisted = 0
triggerall = TeamMode = Turns
trigger1 = stateno = 5900

;-----------------------------------
;�X���[����
;-----------------------------------
[state -2, VarAdd]
type = VarAdd
trigger1 = 1
persistent = 0
ignorehitpause = 1
var(10) = -1

[state -2, Pause]
type = Pause
trigger1 = var(10) >= 1
trigger1 = gametime % 2
persistent = 0
ignorehitpause = 1
time = 1
;-----------------------------------
;�_���[�W�{�C�X
;-----------------------------------
[State -2, �_���[�W�{�C�X]
type = PlaySnd
triggerall = Time = 1
triggerall = Alive
triggerall = Random < 500
trigger1 = stateno = 5000 || stateno = 5010 || stateno = 5020
trigger2 = stateno = 5070 || stateno = 5080
;trigger3 = stateno = 5210 || stateno = 5220 || stateno = 5221 || stateno = 5222
value = 4218,21 + (random%4)
channel = 0
volume = 100
 
[State -2, �@�������{�C�X]
type = PlaySnd
triggerall = Time = 1
triggerall = Alive
triggerall = Random < 500
trigger1 = stateno = 5100
value = 4218,25 + (random%4)
channel = 0
volume = 100

;-----------------------------------
;-----------------------------------
[state -2]
type = varset
trigger1 = enemynear,movetype != A
var(1) = 0

[state -2]
type = varset
trigger1 = enemynear,movetype = A
var(1) = 1

;-----------------------------------
[State -2, StopSnd]
type = StopSnd
trigger1 = stateno != 100 && stateno != 99
channel = 1

[State -2, StopSnd]
type = StopSnd
trigger1 = stateno != 100 && stateno != 99
channel = 4

[State -2, VarAdd]
type = varadd
trigger1 = 1
trigger1 = var(3)>-100
v = 3
value = -1

[State 801, RemoveExplod];�r
type = RemoveExplod
trigger1 = stateno != 803
id = 803

[State -2, AfterImageTime]
type = AfterImageTime
trigger1 = stateno = 52
trigger1 = Time = 1
trigger2 = movetype = H
time = 0

[State -2, NotHitBy]
type = NotHitBy
trigger1 = roundstate = 0
trigger2 = roundstate = 1
trigger3 = stateno = 5900
value = SCA


[State -2, 4];��Ծϵͳ���
type = varadd
trigger1 = 1
v = 15
value = -1

;---------------------------------------------------------------------------
;===========================================================================
[Statedef -3]
;===========================================================================
;---------------------------------------------------------------------------

[State -3, 2];��Ծϵͳ���(��ͨ��)
type = PlaySnd
triggerall = time = 1
trigger1 = stateno = 40 
trigger1 = var(15) <= 0
value = F40, 0
channel = 13

[State -3, 2];��Ծϵͳ��أ�����/С����
type = PlaySnd
triggerall = time = 1
trigger1 = stateno = 40 
trigger1 = var(15) > 1
value = F40, 1
channel = 13

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
; AH����Ĵ���ϵͳ
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
[State -3, 5]
type = varset
trigger1 = stateno = 10
trigger1 = time = 0
trigger2 = stateno = 100
v = 15
value = 20

[State -3, 5]
type = varset
trigger1 = stateno = 52
trigger1 = time = 0
v = 15
value = 0

[State -3, 5]
type = varset
trigger1 = stateno = 40
trigger1 = command != "holdup"
v = 16
value = 1

[State -3, 5]
type = varset
trigger1 = stateno = 40
trigger1 = command = "holdup"
v = 16
value = 0

[State -3, 5]
type = VelAdd
trigger1 = stateno = 50
trigger1 = anim = 41
trigger1 = time = 1
trigger1 = var(15) >= 1
y = -0.6

[State -3, 5]
type = velset
trigger1 = stateno = 50
trigger1 = anim = 42
trigger1 = time = 1
trigger1 = var(15) >= 1
x = 4.5
;y = -9

[State -3, 5]
type = velset
trigger1 = stateno = 50
trigger1 = anim = 43
trigger1 = time = 1
trigger1 = var(15) >= 1
x = -4.5
;y = -9

[State -3, 5]
type = veladd
trigger1 = stateno = 50
trigger1 = time = 1
trigger1 = var(16) = 1
y = 3

[State -3, 5]
type = AfterImage
trigger1 = stateno = 50
trigger1 = time = 1
trigger1 = var(15) >= 1
time = 10
trans = add1
timegap = 1
framegap = 2
length = 8
palbright = 12,12,12
palcontrast = 225,225,225
palpostbright = 0,0,0
paladd = 0,0,0
palmul = 1,1,1
;--------------------------------------------

;-----------------------------------
;���̑�
;-----------------------------------
[State -3, ��щz���h�~]
type = Width
triggerall = stateno != 801 && stateno != 804
trigger1 = FrontEdgeDist < 8 && MoveType != H
edge = 3,

;--------------------------------------------------------------
;��Ч���뿪ʼ
;--------------------------------------------------------------
[State -2]
type = Helper
triggerall = !NumHelper(23680)
trigger1 = StageVar(info.author) = "light"
pos = 0,0
stateno = 23680
id = 23680
ownpal = 1
persistent = 0
ignorehitpause = 1
postype = p1

[State -2]
type = Helper
triggerall = !NumHelper(23681)
trigger1 = StageVar(info.author) = "light"
pos = 134,0
stateno = 23681
id = 23681
ownpal = 1
persistent = 0
ignorehitpause = 1
postype = left

[State -2]
type = Helper
triggerall = !NumHelper(23682)
trigger1 = StageVar(info.author) = "light"
pos = -134,0
stateno = 23682
id = 23682
ownpal = 1
persistent = 0
ignorehitpause = 1
postype = right
;--------------------------------------------------------------
;��Ч��ʼλ��
;--------------------------------------------------------------
[Statedef 23680]
type    = S
movetype= H
physics = N
velset = 0,0
sprpriority = -10

[State 3680, 4]
type = changeanim
trigger1 = time%2 = 0
value = 99999

[State 3680, 4]
type = ChangeAnim
triggerall = time%2 = 1
trigger1 = ((root,anim = [0,99999]) && root,movetype != H)
trigger2 = (root,anim = [5000,9999])
value = root,anim
elem = root,animelemno(0)
ignorehitpause = 1
persistent = 1

[State 3680, 0]
type = PalFX
trigger1 = time = 0
time = -1
add = 224,88,0
sinadd = 48,50,32,16
;add = 248,232,192

[State 3680,0]
type = NotHitBy
trigger1 = 1
value = SCA

[State 3680, 4]
type=BindToParent
trigger1 = 1
time = -1
facing = 1
pos = (1+ifelse(Parent,fvar(36) = 1,-1,0)+ifelse(Parent,fvar(36) = 2,-2,0))*ifelse(Facing = -1,-1,1),0
;--------------------------------------------------------------
;��Ч��
;--------------------------------------------------------------
[Statedef 23681]
type    = S
movetype= H
physics = N
velset = 0,0
anim = 99999
sprpriority = -10

[State 3680,1]
type = ParentVarSet
trigger1 = RootDist X > 0 && RootDist X < 52
fvar(36) = 1

[State 3680,1]
type = ParentVarSet
trigger1 = RootDist X < 0
fvar(36) = 0

[State 3680,1]
type = NotHitBy
trigger1 = 1
value = SCA
;--------------------------------------------------------------
;��Ч��
;--------------------------------------------------------------
[Statedef 23682]
type    = S
movetype= H
physics = N
velset = 0,0
anim = 99999
sprpriority = -10

[State 3680,1]
type = ParentVarSet
trigger1 = RootDist X < 0 && RootDist X > 52
fvar(36) = 1

[State 3680,1]
type = ParentVarSet
trigger1 = RootDist X > 0
fvar(36) = 2

[State 3680,1]
type = NotHitBy
trigger1 = 1
value = SCA
;--------------------------------------------------------------
;��Ч�������
;--------------------------------------------------------------

;---------------------------------------------------------------------------
;AI�w���p�[
;---------------------------------------------------------------------------
[Statedef 20000]
anim=20000;�Ȃɂ��\�����Ȃ���҂ł��������Ǔ���Ȃ��Ă��S�R���Ȃ�
ctrl=0

[State 20000]
type = assertspecial
trigger1 = 1
flag = invisible

[State 20000]
type = NotHitBy
value = SCA
trigger1 = 1

[State 20000,�ԈႢ�Ŗ{�̂������痧���ֈڍs]
type=selfstate
trigger1=!ishelper
value=0

[State 20000,�v���C���[����]
type=varset
trigger1=command="up"&&root,command="up"
trigger2=command="down"&&root,command="down"
trigger3=command="back"&&root,command="back"
trigger4=command="fwd"&&root,command="fwd"
trigger5=command="a"&&root,command="a"
trigger6=command="b"&&root,command="b"
trigger7=command="c"&&root,command="c"
trigger8=command="x"&&root,command="x"
trigger9=command="y"&&root,command="y"
trigger10=command="z"&&root,command="z"
trigger11=command="start"&&root,command="start"
var(59)=-1

[State 20000,�����������]
Type = DestroySelf
triggerAll = isHelper
Trigger1 = root,var(59)||var(59)=-1
trigger2=command="up"&&root,command="up"
trigger3=command="down"&&root,command="down"
trigger4=command="back"&&root,command="back"
trigger5=command="fwd"&&root,command="fwd"
trigger6=command="a"&&root,command="a"
trigger7=command="b"&&root,command="b"
trigger8=command="c"&&root,command="c"
trigger9=command="x"&&root,command="x"
trigger10=command="y"&&root,command="y"
trigger11=command="z"&&root,command="z"
trigger12=command="start"&&root,command="start"

[State 20000,�׸�ON]
type=varset
triggerall=var(59)!=-1
trigger1=root,command="up"
trigger2=root,command="down"
trigger3=root,command="back"
trigger4=root,command="fwd"
trigger5=root,command="a"
trigger6=root,command="b"
trigger7=root,command="c"
trigger8=root,command="x"
trigger9=root,command="y"
trigger10=root,command="z"
trigger11=root,command="start"
var(59)=1
