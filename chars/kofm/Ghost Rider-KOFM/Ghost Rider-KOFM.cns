[Data]
life              = 1600;jambu;2500    ;‘Ì—ÍƒQ[ƒW‚ÌÅ‘å’l‚ðŒˆ‚ß‚Ü‚·
power             = 7000;jambu;5000    ;ƒpƒ[ƒQ[ƒWÅ‘å’liƒfƒtƒHƒ‹ƒg‚Í 3000 = Lv.3 ‚É‚È‚è‚Ü‚·EƒIƒvƒVƒ‡ƒ“j
attack            = 100;jambu;120     ;UŒ‚—Íƒp[ƒZƒ“ƒe[ƒWiƒfƒtƒHƒ‹ƒg‚Í 100% ‚É‚È‚è‚Ü‚·j
defence           = 100     ;–hŒä—Íƒp[ƒZƒ“ƒe[ƒWiƒfƒtƒHƒ‹ƒg‚Í 100% ‚É‚È‚è‚Ü‚·j
fall.defence_up   = 50      ;ˆêŽž“I‚Éã¸‚·‚éƒ_ƒEƒ“Žž‚Ì–hŒä—Íƒp[ƒZƒ“ƒe[ƒW
liedown.time      = 50      ;“|‚ê‚Ä‚©‚ç‹N‚«ã‚ª‚é‚Ü‚Å‚ÌŽžŠÔ
airjuggle         = 15      ;ƒWƒƒƒOƒ‹ƒ|ƒCƒ“ƒgŒÀŠE’l@š‚P
sparkno           = 1       ;ƒfƒtƒHƒ‹ƒg‚ÌƒqƒbƒgƒXƒp[ƒN”Ô†ifightfx.air‚©AƒLƒƒƒ‰‚Ìair‚©‚çŒÄ‚Ño‚·j
guard.sparkno     = 40      ;ƒfƒtƒHƒ‹ƒg‚ÌƒK[ƒhƒXƒp[ƒN”Ô†ifightfx.air‚©AƒLƒƒƒ‰‚Ìair‚©‚çŒÄ‚Ño‚·j
KO.echo           = 0       ;‚j‚nŽž‚Ìº‚ÉƒGƒR[‚ðŠ|‚¯‚é‚©‚Ç‚¤‚©i0=‚µ‚È‚¢E1=‚·‚éj
volumescale       = 155     ;ƒLƒƒƒ‰‚Ì‰¹—Ê@255‚ªÅ‚
intpersistindex   = 5,20    ;Var‚ðŽŸ‚Ìƒ‰ƒEƒ“ƒh‚ÖŽ‚¿‰z‚µ‚ª‰Â”\ (Å¬=0, Å‘å=59)  š‚Q
floatpersistindex = 40      ;FVar‚ðŽŸ‚Ìƒ‰ƒEƒ“ƒh‚ÖŽ‚¿‰z‚µ‚ª‰Â”\ (Å¬=0, Å‘å=39) š‚Q

;---------------------------------------------------------------------------
;ƒTƒCƒYÝ’è
[Size]
xscale           = 1        ;ƒLƒƒƒ‰‰æ‘œ‚Ì‰¡‚ÌƒXƒP[ƒ‹
yscale           = 1        ;ƒLƒƒƒ‰‰æ‘œ‚Ìc‚ÌƒXƒP[ƒ‹
ground.back      = 15       ;ƒLƒƒƒ‰‚Ì•i’nãŒã•ûj
ground.front     = 16       ;ƒLƒƒƒ‰‚Ì•i’nã‘O•ûj
air.back         = 12       ;ƒLƒƒƒ‰‚Ì•i‹ó’†Œã•ûj
air.front        = 12       ;ƒLƒƒƒ‰‚Ì•i‹ó’†‘O•ûj
height           = 60       ;’µ‚Ñ‰z‚·‘ŠŽè‚Ì‚½‚ß‚ÌƒLƒƒƒ‰‚Ì‚‚³
attack.dist      = 160      ;UŒ‚‚ðo‚µ‚½Žž‚É‘ŠŽè‚ªƒK[ƒh‘Ì¨‚É“ü‚éÅ’á‚Ì‹——£
proj.attack.dist = 90       ;‘ŠŽè‚ªƒK[ƒh‘Ì¨‚É“ü‚é”­ŽË•¨‚Æ‚ÌÅ’á‚Ì‹——£
proj.doscale     = 0        ;xscale‚Æyscale‚ª”­ŽË•¨‚ÌƒXƒP[ƒ‹‚É‚à‰e‹¿‚·‚é‚©‚Ç‚¤‚©i0=‚µ‚È‚¢E1=‚·‚éj
head.pos         = 0, -90  ;BindToTarget‚ÌŽž‚É•K—v‚È“ª‚ÌÀ•W
mid.pos          = 0, -60  ;BindToTarget‚ÌŽž‚É•K—v‚È‘Ì’†S‚ÌÀ•W
shadowoffset     = 0        ;‰e‚Ì‚’¼•ûŒü‚ÌˆÊ’u
draw.offset      = 0,0      ;ƒLƒƒƒ‰•`‰æ•\Ž¦ˆÊ’ui‚wŽ²,‚xŽ²j

;---------------------------------------------------------------------------
;ˆÚ“®‘¬“xÝ’è
[Velocity]
walk.fwd     = 3.3          ;‘Oi•às‘¬“x
walk.back    = -3.1         ;Œã‘Þ•às‘¬“x
run.fwd      = 7.2, 0       ;‘O‚É‘–‚éŽž‚Ì‘¬“xi‚wŽ²,‚xŽ²j
run.back     = -6,-4      ;Œã‚ë‚É‘–‚éŽž‚Ì‘¬“xi‚wŽ²,‚xŽ²j
jump.neu     = 0,-10       ;‚’¼ƒWƒƒƒ“ƒv‘¬“xi‚wŽ²,‚xŽ²j
jump.back    = -4           ;ŒãƒWƒƒƒ“ƒv‘¬“x
jump.fwd     = 4.2          ;‘OƒWƒƒƒ“ƒv‘¬“x
runjump.back = -2.55,-8.1   ;Œã‚ë‚É‘–‚è‚È‚ª‚ç‚ÌƒWƒƒƒ“ƒv‘¬“xiƒIƒvƒVƒ‡ƒ“j
runjump.fwd  = 4.8,-9.5     ;‘O‚É‘–‚è‚È‚ª‚ç‚ÌƒWƒƒƒ“ƒv‘¬“xiƒIƒvƒVƒ‡ƒ“j
airjump.neu  = 0,-8.1       ;‹ó’†‚’¼ƒWƒƒƒ“ƒv‘¬“xiƒIƒvƒVƒ‡ƒ“j
airjump.back = -2.5         ;‹ó’†ŒãƒWƒƒƒ“ƒv‘¬“xiƒIƒvƒVƒ‡ƒ“j
airjump.fwd  = 2.55         ;‹ó’†‘OƒWƒƒƒ“ƒv‘¬“xiƒIƒvƒVƒ‡ƒ“j

;---------------------------------------------------------------------------
;“®ìÝ’è
[Movement]
airjump.num     = 1      ;‹ó’†ƒWƒƒƒ“ƒv‚ªo—ˆ‚é‰ñ”iƒIƒvƒVƒ‡ƒ“j
airjump.height  = 35     ;‹ó’†ƒWƒƒƒ“ƒv‚·‚é‚½‚ß‚É•K—v‚ÈÅ’áŒÀ‚Ì‚‚³iƒIƒvƒVƒ‡ƒ“j
yaccel          = .54    ;d—Íi‚’¼‰º~‰Á‘¬“xj
stand.friction  = .85    ;—§‚¿ó‘Ô‚Ì–€ŽCŒW”
crouch.friction = .82    ;‚µ‚á‚ª‚Ýó‘Ô‚Ì–€ŽCŒW”

;---------------------------------------------------------------------------
; Variable usage:
; This is a record of the variables that KFM uses. Keeping a record of your
; variable usage helps you avoid careless mistakes later.
; var(1)  - Used in kfm.cmd for combo condition (updated every tick)
; var(2)  - Used in Kung Fu Throw (state 800) to remember if fwd was being
;           held (remembered from state 800 through state 810).


; Stand
[Statedef 0]
type = S
physics = S
sprpriority = 0


[State ,StopSnd]
Type = StopSnd
Trigger1 = 1
Channel = 8
Persistent = 1
IgnoreHitPause = 0


[State 0, 1]
type = ChangeAnim
trigger1 = Anim != 0 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0 ;Turn anim over
value = 0

[State 0, 2]
type = VelSet
trigger1 = Time = 0
y = 0

[State 0, 3] ;Stop moving if low velocity or 4 ticks pass
type = VelSet
trigger1 = abs(vel x) < Const(movement.stand.friction.threshold)
trigger2 = Time = 4
x = 0

[State 0, 4] ;Are you dead?
type = ChangeState
trigger1 = !alive
value = 5050
ctrl = 0

;---------------------------------------------------------------------------
; Lose by Time Over
; CNS difficulty: basic
[Statedef 170]
type = S
ctrl = 0
anim = 170
velset = 0,0

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; Win state decider
; CNS difficulty: basic
[Statedef 180]
type = S

[State 180, 1]
type = ChangeState
trigger1 = Time = 0
value = 181

;---------------------------------------------------------------------------
; Win pose 1 - Johnny Blaze
; CNS difficulty: basic
[Statedef 181]
type = S
ctrl = 0
anim = 181
velset = 0,0

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; Introduction
; CNS difficulty: basic
[Statedef 191]
type = S
ctrl = 0
anim = 191
sprpriority = 1
velset = 0,0

;[State 191, 1] ;Freeze animation until PreIntro is over
;type = ChangeAnim
;trigger1 = RoundState = 0
;value = 190

[State 191, 2] ;Assert this until you want "round 1, fight" to begin
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 191, 3] ;Change to stand state when done
type = ChangeState
trigger1 = Time = 674
value = 0

; You can delete the following two controllers if you're building your own
; character using KFM. These are the wood pieces that KFM kicks.
;[State 191, Wood 1]
;type = Explod
;trigger1 = RoundState != 0
;persistent = 0
;anim = 191
;postype = p1
;pos = 260, -90
;velocity = -4.2, -7
;accel = 0, .32
;removetime = 48

[State 191, Cycle Exit]
type = Explod
trigger1 = AnimElem = 53
anim = 192
postype = p1
;pos = 60, -70
sprpriority = 2
velocity = 8, 0
accel = 0, 0
removetime = 100

[State 191, Fire Floor 1]
type = Explod
trigger1 = time = 349
anim = 193
postype = p1
pos = -20, 8
sprpriority = 2
;velocity = 8, 0
;accel = 0, 0
removetime = 56

[State 191, Fire Floor 3]
type = Explod
trigger1 = time = 370
anim = 193
postype = p1
pos = 190, 8
sprpriority = 2
;velocity = 8, 0
;accel = 0, 0
removetime = 56

; You can delete the following two controllers if you're building your own
; character using KFM. These play back the sounds of the wood block being
; broken.
[State 191, Snd 1]
type = PlaySnd
trigger1 = time = 1
value = 57,0
volume = -80
channel = 8

[State 191, Snd 2]
type = PlaySnd
trigger1 = animelem = 53
value = 57,1
volume = -80
channel = 8

[State 191, Snd 2]
type = PlaySnd
trigger1 = animelem = 46
value = 57,2
volume = -80
channel = 8

[State 191, Snd 2]
type = PlaySnd
trigger1 = animelem = 103
value = 50,1
volume = -80
channel = 8

[State 191, Snd 2]
type = PlaySnd
trigger1 = animelem = 68
value = 57,3
volume = -80
channel = 8

;---------------------------------------------------------------------------
; Taunt
; CNS difficulty: easy
[Statedef 195]
type = S
ctrl = 0
anim = 195
velset = 0,0
movetype = I
physics = S
sprpriority = 2

[State 195, Voice]
type = PlaySnd
trigger1 = animelem = 10
value = 62, 0

[State 195, 1]
type = CtrlSet
trigger1 = Time = 144
value = 1

[State 195, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Dash Forward
[Statedef 100]
type    = S
physics = S
anim = 100
sprpriority = 1
ctrl = 0

[State 100, 1]
type = VelSet
trigger1 = time > 3
trigger1 = time < 25
x = const(velocity.run.fwd.x)

[State 106, 3]
type = MakeDust
trigger1 = Time = 16
pos = 50,-2
spacing = 1


[State 220, 4]
type = PlaySnd
trigger1 = Time = 1
value = 15, 7

[State 220, 4]
type = ctrlset
trigger1 = Time = 20
value = 1

[State 100, changestate]
type     = Changestate
trigger1 = animtime = 0
value = 11
ctrl=1

;---------------------------------------------------------------------------
; Backdash Start
[Statedef 105]
type    = S
physics = S
ctrl = 0
anim = 103
sprpriority = 1

[State 100, 2] ;Prevent run from canceling into walk
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 220, 2]
type = PlaySnd
trigger1 = Time = 1
value = 15, 7

[State 100, 3] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 105, 3]
type = ChangeState
trigger1 = animtime = 0
value = 106

;---------------------------------------------------------------------------
; Backdash 
[Statedef 106]
type    = A
physics = A
ctrl = 1
anim = 101
sprpriority = 1

[State 105, 1]
type = VelSet
trigger1 = Time = 0
x = const(velocity.run.back.x)
y = const(velocity.run.back.y)

[State 105, 3]
type = ChangeState
trigger1 = Vel Y >= -1
trigger1 = Pos Y >= -1
value = 107

;---------------------------------------------------------------------------
; Backdash End
[Statedef 107]
type    = S
physics = S
anim = 102

[State 100, 2] ;Prevent run from canceling into walk
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 100, 3] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 106, 1]
type = VelSet
trigger1 = Time = 0
y = 0

[State 106, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 106, 3]
type = MakeDust
trigger1 = Time = 2
pos = -5,-2
spacing = 1

[State 106, 4]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1



;---------------------------------------------------------------------------
; Stand Light Punch
; CNS difficulty: easy
[Statedef 200]
type    = S                      ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = S                      ;Physics: S-stand, C-crouch, A-air
juggle  = 1                      ;Number of air juggle points move takes
;Commonly-used controllers:
velset = 0,0                     ;Set velocity (x,y) (Def: no change)
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 200                       ;Change animation (Def: no change)
poweradd = 20                    ;Power to add (Def: 0)
sprpriority = 2                  ;Set layering priority to 2 (in front)

[State 200, 1]
type = HitDef
;trigger1 = AnimElem = 2
trigger1 = AnimElem = 3
attr = S, NA                     ;Attribute: Standing, Normal Attack
damage = 30, 0                   ;Damage that move inflicts, guard damage
animtype = Light                 ;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA                   ;Flags on how move is to be guarded against
hitflag = MAF                    ;Flags of conditions that move can hit
priority = 3, Hit                ;Attack priority: 0 (least) to 7 (most), 4 default
;Hit/Miss/Dodge type (Def: Hit)
pausetime = 8, 8                 ;Time attacker pauses, time opponent shakes
sparkno = 1 
guard.sparkno = S30040              ;Spark anim no (Def: set above)
sparkxy = -10, -90              ;X-offset for the "hit spark" rel. to p2,
;Y-offset for the spark rel. to p1
hitsound = S0, 0                  ;Sound to play on hit
guardsound = 6, 0                ;Sound to play on guard
ground.type = High               ;Type: High, Low, Trip (def: Normal)
ground.slidetime = 5             ;Time that the opponent slides back
ground.hittime  = 12             ;Time opponent is in hit state
ground.velocity = -4             ;Velocity at which opponent is pushed
airguard.velocity = -1.9,-.8     ;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = High                  ;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -1.4,-3           ;X-velocity at which opponent is pushed,
;Y-velocity at which opponent is pushed
air.hittime = 12                 ;Time before opponent regains control in air

[State 200, 1]
type = PlaySnd
trigger1 = Time = 1
value = 12, 0

[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing Medium punch
[Statedef 210]
type    = S                      
movetype= A                      
physics = S                      
juggle  = 1                      
velset = 0,0                     
ctrl = 0                         
anim = 210                       
poweradd = 20                    
sprpriority = 2                  

[State 210, 1]
type = HitDef
trigger1 = AnimElem = 4
;trigger2 = AnimElem = 3
attr = S, NA                     
damage = 60, 0                   
animtype = Medium                 
guardflag = MA                   
hitflag = MAF                    
priority = 3, Hit                
pausetime = 8, 8                 
sparkno = 2        
guard.sparkno = S30040        
sparkxy = -17, -85               
hitsound = S0,1                 
guardsound = 6, 0                
ground.type = Low               
ground.slidetime = 5             
ground.hittime  = 12             
ground.velocity = -4             
airguard.velocity = -1.9,-.8     
air.type = High                  
air.velocity = -1.4,-3           
air.hittime = 12    

[State 210, 1]
type = PlaySnd
trigger1 = Time = 2
value = 48, 0  


[State 210, 1]
type = PlaySnd
trigger1 = Time = 1
value = 12, 1  

[State 210, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing Hard punch
[Statedef 520]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 80
ctrl = 0
velset = 0,0
anim = 220
sprpriority = -1

[State 220, Width]
type = Width
trigger1 = (AnimElemTime (2) >= 0) && (AnimElemTime (7) < 0)
value = 15,0

[State 220, 1]
type = PlaySnd
trigger1 = Time = 2
value = 49, 0 

 [State 220, 2]
type = PlaySnd
trigger1 = Time = 1
value = 12, 2  

[State 220, 2A]; 
type = PlaySnd
trigger1 = time = 1
value = 12, 3

[State 220, 3]
type = HitDef
trigger1 = AnimElem = 5
attr = S, NA
animtype  = hard
damage    = 100,10
guardflag = H
pausetime = 15,15
sparkno = 2;S2010
guard.sparkno = S30040
sparkxy = -20,-90
guardsound = 6,0
hitsound = S0,4
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -16,-7
guard.velocity = -7
air.velocity = -8,-7
airguard.velocity = -5, -4
fall = 1
p2stateno = 1025    ;Make p2 go to state 1025 on hit
p2facing = 1        ;Force to face p1
palfx.time = 32
palfx.add = 100,-30,-120
palfx.sinadd = 40,30,0,10
palfx.color = 0
palfx.invertall = 1


[State 220, Fire]
type = Explod
triggerall = movehit
trigger1 = 7
anim = 2011
pos = -10,-50
ontop = 1
postype = p2
bindtime = -1
persistent = 0
;removetime = 84
ignorehitpause = 1
ownpal = 1
trans = addalpha
alpha = 192,256

;[State 220, Fire]
;type = Explod
;triggerall = MoveContact
;trigger1 = 7
;anim = 265
;pos = -10,-50
;ontop = 1
;postype = p2
;bindtime = -1
;persistent = 0
;removetime = 84
;ignorehitpause = 1
;ownpal = 1
;trans = addalpha
;alpha = 192,256

[State 220, 4]
type = SprPriority
trigger1 = AnimElem = 1
value = 2

[State 220, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing Hard Chain Attack
; CNS difficulty: easy
; Note the width controller. It makes KFM's push box larger, so he doesn't
; stand so close to the opponent. Hit Ctrl-C and look at the red bar at his
; feet.
; The sprpriority for this state is at -1, instead of the usual 2 for
; attacks. This makes KFM appear behind the opponent initially.
; The SprPriority controller in [State 210, 4] brings KFM to the front when
; his arm has swung over.
; To stop KFM from pausing in his swing frame, there is a ChangeAnim in
; [State 210, 3] that detects if the hit has come in contact with the
; opponent during that frame, and switches to the next animation element
; (notice the elem=6 parameter). If you don't see what I mean, try commenting
; out that controller, then hit someone with this attack.
[Statedef 521]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 65
ctrl = 0
velset = 0,0
anim = 221
sprpriority = -1

[State 221, Width]
type = Width
trigger1 = (AnimElemTime (2) >= 0) && (AnimElemTime (7) < 0)
value = 15,0

[State 221, 1]
type = PlaySnd
trigger1 = Time = 2
value = 50, 1

;[State 221, 2]; 
;type = PlaySnd
;trigger1 = time = 0 
;value = 52,2

[State 1100, A4]
type = PlaySnd
trigger1 = !time
value = 52,ifelse(random<500,0,1)  
channel = 0


[State 221, 3]; 
type = PlaySnd
trigger1 = time = 0 
value = 50,0

;[State 210, 1]
;type = PlaySnd
;trigger1 = random = 2 
;value = 50,0

;[State 210, 1]
;type = PlaySnd
;trigger1 = Time = 4
;value = 13, 0

;[State 210, 1]; 
;type = PlaySnd
;trigger1 = time = 2
;value = 15,6

;[State 210, 2]
;type = HitDef
;trigger1 = AnimElem = 4
;attr = S, NA
;animtype  = Medium
;damage    = 50
;guardflag = MA
;pausetime = 2,2
;sparkno = S7002
;sparkxy = -10,-70
;hitsound   = 5,2
;guardsound = 6,0
;ground.type = Low

;[State 210, 2]
;type = HitDef
;trigger1 = AnimElem = 3
;trigger2 = AnimElem = 4
;trigger3 = AnimElem = 5
;trigger4 = AnimElem = 6
;trigger4 = AnimElem = 9
;attr = S, NA
;animtype  = Medium
;damage    = 25
;guardflag = MA
;pausetime = 2,2
;sparkno = S7002
;sparkxy = -10,-70
;hitsound   = 5,2
;guardsound = 6,0
;ground.type = Low
;ground.slidetime = 20
;ground.hittime  = 20
;ground.velocity = -8,-7
;guard.velocity = -7
;air.velocity = -8,-7
;airguard.velocity = -5, -4

[State 221, 1]
type = HitDef
trigger1 = AnimElem = 4
;trigger4 = AnimElem = 9
attr = S, NA
animtype  = Medium
damage    = 85
guardflag = MA
pausetime = 2,2
sparkno = 2;S2010
guard.sparkno = S30040
sparkxy = -20,-100
hitsound   = S0,2
guardsound = 6,0
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -8,-7
guard.velocity = -7
air.velocity = -8,-7
airguard.velocity = -5, -4
fall = 1
p2stateno = 1025    ;Make p2 go to state 1025 on hit
p2facing = 1        ;Force to face p1
palfx.time = 32
palfx.add = 100,-30,-120
palfx.sinadd = 40,30,0,10
palfx.color = 0
palfx.invertall = 1


;[State 221, Env]
;type = EnvColor
;value = 255,255,255
;trigger1 = movehit
;ignorehitpause = 1
;persistent = 0
;time = 2
;under = 1

;[State 221, Quake]
;type = EnvShake
;trigger1 = movehit
;ignorehitpause = 1
;persistent = 0
;time = 20
;ampl = -10
;freq = 100
;phase = 90

;[State 210, 2]
;type = HitDef
;trigger1 = AnimElem = 14
;attr = S, NA, ST
;animtype  = Medium
;damage    = 50
;guardflag = MA
;pausetime = 2,2
;sparkno = S7002
;sparkxy = -10,-70
;hitsound   = 5,2
;guardsound = 6,0
;ground.type = Low
;ground.slidetime = 20
;ground.hittime  = 20
;ground.velocity = -8,-7
;guard.velocity = -7
;air.velocity = -8,-7
;airguard.velocity = -5, -4
;envshake.time = 10
;envshake.freq = 127
;envshake.ampl = -4
;fall = 1
;p2stateno = 1025    ;Make p2 go to state 1025 on hit
;p2facing = 1        ;Force to face p1

;[State 210, Dust Effect]
;type = Explod
;trigger1 = AnimElem = 12
;Anim = 217
;Pos = 30,-10
;sprpriority = 10
;removeongethit = 1
;removetime = 40
;bindtime = 30
;Pos= 0,0
;Bindtime = 1
;SuperMove = 1
;scale = 1
;trans=addalpha
;alpha=200,75

[State 221, Dust Effect]
type = Explod
trigger1 = AnimElem = 3
Anim = 222
Pos = 40,5
sprpriority = 10
removeongethit = 1
removetime = 20
bindtime = 30
Pos= 0,0
Bindtime = 1
SuperMove = 1
scale = 1
trans=addalpha
alpha=200,75

;[State 220, Effects2]
;type = Explod
;trigger1 = animelem = 3
;Anim = 4020
;sprpriority = 10
;removetime = 30
;bindtime = 30
;Pos= 0,0
;scale = 1
;trans=addalpha
;alpha=200,75

[State 210, Fire]
type = Explod
triggerall = movehit
trigger1 = 7
anim = 2011
pos = -10,-50
ontop = 1
postype = p2
bindtime = -1
persistent = 0
;removetime = 84
ignorehitpause = 1
ownpal = 1
trans = addalpha
alpha = 192,256

[State 221, 2]
type = SprPriority
trigger1 = AnimElem = 1
value = 2

[State 221, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing light kick
; CNS difficulty: easy
[Statedef 230]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 11
ctrl = 0
velset = 0,0
anim = 230
sprpriority = 2

[State 230, 1]
type = PlaySnd
trigger1 = Time = 1
value = 12, 0


[State 230, 2]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA
animtype  = light
damage    = 30
guardflag = L
pausetime = 12,12
sparkno = 1
guard.sparkno = S30040
sparkxy = -10,-22
hitsound   = S0,0
guardsound = 6,0
ground.type = Low
ground.slidetime = 10
ground.hittime  = 12
ground.velocity = -5
air.velocity = -2.5,-3.5

[State 230, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing Medium Kick
; CNS difficulty: easy
[Statedef 246]
type    = S
movetype= A
physics = S
juggle  = 5
poweradd= 30
ctrl = 0
velset = 0,0
anim = 240
sprpriority = 2

[State 240, 1]
type = PlaySnd
trigger1 = Time = 1
value = 12, 1  

[State 240, 1A]
type = PlaySnd
trigger1 = Time = 2
value = 47, 0  

[State 240, 2]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA
animtype  = Medium
damage    = 60
guardflag = MA
pausetime = 12,12
sparkno = 2
guard.sparkno = S30040
sparkxy = -10,-74
hitsound   = S0,1
guardsound = 6,0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -6
air.velocity = -2.2,-3.2

[state 240, posadd]
type = posadd
trigger1 = animelem = 3
x = 10

[State 240, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing Strong Kick
; CNS difficulty: easy
[Statedef 240]
type    = S
movetype= A
physics = S
juggle  = 5
poweradd= 65
ctrl = 0
velset = 0,0
anim = 245
sprpriority = 2

[State 210, 1]
type = PlaySnd
trigger1 = Time = 1
value = 12, 3  

;[State 245, 1A]; 
;type = PlaySnd
;trigger1 = time = 2
;value = 15,7

;[State 245, 1B]
;type = PlaySnd
;trigger1 = Time = 2
;value = 13, 3

;[State 245, czacha]
;type = Explod
;trigger1 = AnimElem = 4
;Anim = 245
;Pos = 20,-10
;sprpriority = 10
;removeongethit = 1
;removetime = 40
;bindtime = 28
;Postype = p1
;Bindtime = 1
;SuperMove = 1
;scale = 1
;trans=addalpha
;alpha=192,256

[State 245, 1C]
type = PlaySnd
trigger1 = Time = 2
value = 47, 1  


[State 245, 2]
type = HitDef
trigger1 = AnimElem = 5
attr = S, NA
animtype  = hard
damage    = 80
guardflag = MA
pausetime = 12,12
sparkno = 2
guard.sparkno = S30040
sparkxy = -10,-60
hitsound   = S0,2
guardsound = 6,0
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -10
guard.velocity = -7
air.velocity = -10



[State 245, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Crouching light punch
; CNS difficulty: easy
; Description: Simple crouching attack. The HitDef's guardflag parameter
;     is set to "L", meaning that the move can only be guarded low
;     (crouching), and not by standing or jumping opponents.
;     Like for all light attacks, it's a good idea to keep the slidetime
;     and hittime parameters at a smaller number, so the opponent isn't
;     stunned for too long. For all crouching attacks you have to
;     remember to set the attr parameter to indicate that it is crouching
;     attack. In this case, "C, NA" stands for "crouching, normal attack".
;     The HitDef's priority is set at 3, instead of the default of 4,
;     so this attack has a lower priority than most others, meaning
;     KFM will get hit instead of trading hits with his opponent if
;     their attack collision boxes (Clsn1) intersect each other's Clsn2
;     boxes at the same time.
[Statedef 400]
type    = C
movetype= A
physics = C
juggle  = 5
poweradd= 15
ctrl = 0
anim = 400
sprpriority = 2

[State 400, 1]
type = PlaySnd
trigger1 = Time = 1
value = 12, 0

[State 400, 2]
type = HitDef
trigger1 = AnimElem = 3
attr = C, NA
damage    = 30
priority  = 3
animtype  = Light
hitflag = MAF
guardflag = L
pausetime = 10,11
sparkno = 1
guard.sparkno = S30040
sparkxy = -10,-55
hitsound   = S0,0
guardsound = 6,0
ground.type = Low
ground.slidetime = 4
ground.hittime  = 12
ground.velocity = -4
air.velocity = -1.5,-3

[State 400, 3]
type = CtrlSet
trigger1 = Time = 5
value = 1

[State 400, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11

;---------------------------------------------------------------------------
;Crouching Medium punch
; CNS difficulty: easy
; Description: This is a 2-hit move. It is done by having two HitDefs
;     triggered, one for each frame of animation that hits.
;     Notice how the first hit cannot be guarded by an opponent in the
;     air, because of the "M" in the guardflag, meaning it can only
;     be guarded "middle". The second hit has an "MA" guardflag, so
;     it can be guarded both on the ground and in the air.
[Statedef 410]
type    = C
movetype= A
physics = C
juggle  = 6
poweradd= 50
ctrl = 0
anim = 410
sprpriority = 2

[State 410, 1]
type = PlaySnd
trigger1 = Time = 1
value = 12, 1

[State 410, 1A]
type = PlaySnd
trigger1 = Time = 2
value = 48, 0  

;This is the first hit, triggered on the 3rd element of animation.
[State 410, 2]
type = HitDef
trigger1 = AnimElem = 3
attr = C, NA
damage    = 60
animtype  = Medium
hitflag = MAF
guardflag = M
pausetime = 12,12
sparkno = 2
guard.sparkno = S30040
sparkxy = 0,-50
hitsound   = S0,1
guardsound = 6,0
ground.type = Low
ground.slidetime = 10
ground.hittime  = 15
ground.velocity = -1.5,0
air.velocity = -1.2,-3
guard.velocity = -5


[State 410, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;Crouching hard punch
; CNS difficulty: easy
; Description: This is a 2-hit move. It is done by having two HitDefs
;     triggered, one for each frame of animation that hits.
;     Notice how the first hit cannot be guarded by an opponent in the
;     air, because of the "M" in the guardflag, meaning it can only
;     be guarded "middle". The second hit has an "MA" guardflag, so
;     it can be guarded both on the ground and in the air.
[Statedef 415]
type    = C
movetype= A
physics = C
juggle  = 2
poweradd= 50
ctrl = 0
anim = 420
sprpriority = 2

[State 420, 1]
type = PlaySnd
trigger1 = Time = 1
value = 49, 0

[State 420, 2]
type = PlaySnd
trigger1 = Time = 2
value = 12, 2

[State 420, 3]; 
type = PlaySnd
trigger1 = time = 1
value = 12, 3

[State 420, 2]
type = HitDef
trigger1 = AnimElem = 3
attr = C, NA
damage    = 80
animtype  = Medium
hitflag = MAFD
guardflag = HA
pausetime = 12,12
sparkno = 2;S2010
guard.sparkno = S30040
sparkxy = -10,-76
hitsound   = S0,2
guardsound = S6,0
animtype = hard
air.animtype = hard
fall.animtype = up
ground.type = High
air.type = High
ground.slidetime = 15
ground.hittime  = 15
ground.velocity = 0,-10
guard.velocity = -3
air.velocity = 0,-9
airguard.velocity = -2,-1
ground.cornerpush.veloff = -6
air.cornerpush.veloff = -4
getpower = 35,5
givepower = 5,5
;fall = 1
;air.fall = 1
palfx.time = 32
palfx.add = 100,-30,-120
palfx.sinadd = 40,30,0,10
palfx.color = 0
palfx.invertall = 1

[State 420, Fire]
type = Explod
triggerall = movehit
trigger1 = 7
anim = 2011
pos = -10,-50
ontop = 1
postype = p2
bindtime = -1
persistent = 0
;removetime = 84
ignorehitpause = 1
ownpal = 1
trans = addalpha
alpha = 192,256

;[State 420, Fire]
;type = Explod
;triggerall = MoveContact
;trigger1 = 7
;anim = 265
;pos = -10,-50
;ontop = 1
;postype = p2
;bindtime = -1
;persistent = 0
;removetime = 84
;ignorehitpause = 1
;ownpal = 1
;trans = addalpha
;alpha = 192,256

[State 420, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Crouching light kick
; CNS difficulty: easy
[Statedef 430]
type    = C
movetype= A
physics = C
juggle  = 5
poweradd= 22
ctrl = 0
anim = 430
sprpriority = 2

[State 430, 1]
type = PlaySnd
trigger1 = Time = 1
value = 12, 0

[State 430, 2]
type = HitDef
trigger1 = animelem = 2
attr = C, NA
damage    = 30
animtype  = Light
hitflag = MAFD
guardflag = L
pausetime = 12,12
sparkno = 1
guard.sparkno = S30040
sparkxy = -10,-18
hitsound   = S0,0
guardsound = 6,0
ground.type = Low
ground.slidetime = 6
ground.hittime  = 12
ground.velocity = -5
air.velocity = -2,-3
down.velocity = -5,0
down.hittime = 20

[State 430, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;Crouch Medium Kick
; CNS difficulty: easy
; Description: This move uses "Trip" for the "ground.type" parameter in
;     its HitDef. It's a special type that puts the opponent in a tripped
;     animation as he falls. Also, the hitflag parameter in the HitDef
;     is set to "MAFD". The "D" indicates that a downed opponent can be
;     hit by the attack.
[Statedef 435]
type    = C
movetype= A
physics = C
juggle  = 7
poweradd= 70
ctrl = 0
anim = 440
sprpriority = 2

[State 440, 1]
type = PlaySnd
trigger1 = Time = 1
value = 12, 1  

[State 440, 1A]
type = PlaySnd
trigger1 = Time = 2
value = 47, 0  

[State 440, 3]
type = HitDef
trigger1 = AnimElem = 4
attr = C, NA
damage    = 60
animtype = light
hitflag = MAFD
guardflag = L
pausetime = 12,12
sparkno = 1
guard.sparkno = S30040
sparkxy = -5,-28
hitsound   = S0,1
guardsound = 6,0
ground.type = Low
ground.slidetime = 10
ground.hittime  = 15
ground.velocity = -1.5,0
air.velocity = -1.2,-3
guard.velocity = -5

[State 440, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;Crouching Strong Kick
; CNS difficulty: easy
; Description: This move uses "Trip" for the "ground.type" parameter in
;     its HitDef. It's a special type that puts the opponent in a tripped
;     animation as he falls. Also, the hitflag parameter in the HitDef
;     is set to "MAFD". The "D" indicates that a downed opponent can be
;     hit by the attack.
; CNS ƒŒƒxƒ‹: ˆÕ
; Ú×:
[Statedef 440]
type    = C
movetype= A
physics = C
juggle  = 7
poweradd= 70
ctrl = 0
anim = 450
sprpriority = 2

[State 450, 1]
type = PlaySnd
trigger1 = Time = 1
value = 12, 3  

[State 450, 1A]; 
type = PlaySnd
trigger1 = time = 2
value = 15,7

[State 450, 1B]
type = PlaySnd
trigger1 = Time = 2
value = 13, 3

[State 450, 1C]
type = PlaySnd
trigger1 = Time = 2
value = 47, 1  

[State 450, 3]
type = HitDef
trigger1 = AnimElem = 4
attr = C, NA
damage    = 80
hitflag = MAFD
guardflag = L
pausetime = 12,12
sparkno = 2
guard.sparkno = S30040
sparkxy = -5,-13
hitsound   = S0,2
guardsound = 6,0
ground.type = Trip
ground.slidetime = 10
ground.hittime  = 15
ground.velocity = -2,-4
air.velocity = -2,-4
guard.velocity = -5


[State 450, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;Jump Light Punch
; CNS difficulty: easy
[Statedef 600]
type    = A
movetype= A
physics = A
juggle  = 2
poweradd= 11
ctrl = 0
anim = 600
sprpriority = 2

[State 400, 1]
type = PlaySnd
trigger1 = Time = 1
value = 12, 0

[State 600, 1]
type = HitDef
trigger1 = AnimElem = 3
attr = A, NA
damage    = 30
guardflag = HA
priority = 3
pausetime = 7,8
sparkno = 1
guard.sparkno = S30040
sparkxy = -10,-41
hitsound   = S0,0
guardsound = 6,0
ground.type = High
ground.slidetime = 5
ground.hittime  = 5
ground.velocity = -4
air.velocity = -1.3,-3

[State 600, 3]
type = CtrlSet
trigger1 = Time = 17
value = 1

;---------------------------------------------------------------------------
;Jump Medium Punch
; CNS difficulty: easy
[Statedef 610]
type    = A
movetype= A
physics = A
juggle  = 4
poweradd= 65
ctrl = 0
anim = 610
sprpriority = 2

[State 610, 1]
type = PlaySnd
trigger1 = Time = 1
value = 12, 1

[State 610, 1A]
type = PlaySnd
trigger1 = Time = 2
value = 48, 0  

[State 610, 3]
type = HitDef
trigger1 = animelem = 3
attr = A, NA
damage = 60
guardflag = HA
priority = 4
pausetime = 12,12
sparkno = 2
guard.sparkno = S30040
sparkxy = -20,-45
hitsound   = S0,1
guardsound = 6,0
animtype = Med
ground.type = High
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -5
air.velocity = -3,3

;---------------------------------------------------------------------------
;Jump Strong Punch
; CNS difficulty: easy
[Statedef 620]
type    = A
movetype= A
physics = A
juggle  = 4
poweradd= 65
ctrl = 0
anim = 620
sprpriority = 2

[State 620, 1]
type = PlaySnd
trigger1 = Time = 1
value = 49, 0

[State 620, 2]
type = PlaySnd
trigger1 = Time = 2
value = 12, 2

[State 620, 3]; 
type = PlaySnd
trigger1 = time = 1
value = 12, 3

[State 620, 3]
type = HitDef
trigger1 = animelem = 4
attr = A, NA
damage = 80
guardflag = HA
priority = 4
pausetime = 12,12
sparkno = 2;S2010
guard.sparkno = S30040
sparkxy = -10,-15
hitsound = S0,4
guardsound = 6,0
animtype = Med
ground.type = High
ground.slidetime = 5
ground.hittime  = 5
ground.velocity = -5
air.velocity = -5
palfx.time = 32
palfx.add = 100,-30,-120
palfx.sinadd = 40,30,0,10
palfx.color = 0
palfx.invertall = 1 
fall = 1  


[State 620, Fire]
type = Explod
triggerall = movehit
trigger1 = 7
anim = 2011
pos = -10,-50
ontop = 1
postype = p2
bindtime = -1
persistent = 0
;removetime = 84
ignorehitpause = 1
ownpal = 1
trans = addalpha
alpha = 192,256

;[State 620, ogien]
;type = Explod
;triggerall = MoveContact
;trigger1 = 7
;anim = 265
;pos = -10,-50
;ontop = 1
;postype = p2
;bindtime = -1
;persistent = 0
;removetime = 84
;ignorehitpause = 1
;ownpal = 1
;trans = addalpha
;alpha = 192,256

;---------------------------------------------------------------------------
;Jump Light Kick
; CNS difficulty: easy
[Statedef 630]
type    = A
movetype= A
physics = A
juggle  = 3
poweradd= 20
ctrl = 0
anim = 630
sprpriority = 2

[State 630, 1]
type = PlaySnd
trigger1 = Time = 1
value = 12, 0

[State 630, 2]
type = HitDef
trigger1 = AnimElem = 3
attr = A, NA
damage = 30
guardflag = HA
priority = 3
pausetime = 8,8
sparkno = 1
guard.sparkno = S30040
sparkxy = -5,-65
hitsound   = S0,0
guardsound = 6,0
ground.type = High
ground.slidetime = 6
ground.hittime  = 6
ground.velocity = -4
air.velocity = -2,-3

;---------------------------------------------------------------------------
;Jump Medium Kick
; CNS difficulty: easy
[Statedef 640]
type    = A
movetype= A
physics = A
juggle  = 4
poweradd= 65
ctrl = 0
anim = 640
sprpriority = 2

[State 640, 1]
type = PlaySnd
trigger1 = Time = 1
value = 12, 1  

[State 640, 1A]
type = PlaySnd
trigger1 = Time = 2
value = 47, 0  

[State 640, 3]
type = HitDef
trigger1 = Time = 2
attr = A, NA
damage    = 60
guardflag = HA
priority = 4
pausetime = 12,12
sparkno = 1
guard.sparkno = S30040
sparkxy = -10,-15
hitsound   = S0,1
guardsound = 6,0
animtype = Med
ground.type = High
ground.slidetime = 15
ground.hittime  = 15
ground.velocity = -5
air.velocity = -3,6

;---------------------------------------------------------------------------
;Jump Strong Kick
; CNS difficulty: easy
[Statedef 650]
type    = A
movetype= A
physics = A
juggle  = 4
poweradd= 80
ctrl = 0
anim = 650
sprpriority = 2


[State 650, 1C]
type = PlaySnd
trigger1 = Time = 2
value = 47,1

[State 650, 1]
type = PlaySnd
trigger1 = Time = 1
value = 12, 3  

[State 650, 3]
type = HitDef
trigger1 = AnimElem = 4
attr = A, NA
damage    = 80
guardflag = HA
priority = 5
pausetime = 12,12
removetime = 10
sparkno = 2
guard.sparkno = S30040
sparkxy = -10,-35
hitsound   = S0,2
guardsound = 6,0
animtype = high
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -6
air.velocity = -10



;---------------------------------------------------------------------------
; Jump Down (For Arial Chain Attack)
[Statedef 54]
type    = A
physics = A

[State 54, 1]
type = Null
trigger1 = 1

;---------------------------------------------------------------------------
;Fireball Medium
[Statedef 2012]
type    = S
movetype= A
physics = S
juggle  = 1
poweradd= 120
ctrl = 0
velset = 0,0
anim = 2007
sprpriority = 0

[State 2012, 1]
type = playsnd
trigger1 = time = 21
value = 53,0

[State 2012, 1A]
type = PlaySnd
trigger1 = !time
value = 53,ifelse(random<500,2,3)  
channel = 0


[State 2012, 2]
type = Projectile
trigger1 = AnimElem = 5
ProjID = 2008
projanim = 2008
projhitanim = 2010
projremanim = 1002
projcancelanim = 1002
velocity = 8,0
offset = 0,-110
attr = S,HP
hitflag = MAF        ;HLAFD+-
guardflag = MA         ;HLA
animtype = hard
priority = 4,Hit   ;Hit,Miss,Dodge
damage = 40
pausetime = 4,4
sparkno = -1
guard.sparkno = -1;s9993
hitsound = S53,1
guardsound = 6,0
ground.type = Low
ground.slidetime = 8
ground.hittime  = 8
ground.velocity = -2,-0.1
air.velocity = -2,-0.8
fall = 1
air.fall = 1
getpower = 1
palfx.time = 32
palfx.add = 100,-30,-120
palfx.sinadd = 40,30,0,10
palfx.color = 0
palfx.invertall = 1

[State 210, 2]
type = explod
trigger1 = projcontact(2008) = 1
anim = f2
postype = p2
pos = 0,-75
sprpriority = 6

;[State 2010, 1]
;type = Helper
;helpertype = normal
;name = "flame"
;pos = 15, -75
;postype = p1
;stateno = 2013
;trigger1 = time = 13
;value = 5110

[State 2012, 3]
type = Explod
trigger1 = animelem = 5
anim = 2009
pos = 45,-100
ontop = 1
postype = p1
;bindtime = -1
persistent = 0
;removetime = 84
ignorehitpause = 1
ownpal = 1
trans=addalpha
alpha=192,256

[State 2012, 2]
type = ctrlset
trigger1 = time = 30
value = 1



[State 2012, 3]
type = ChangeState
;trigger1 = time = 72
trigger1 = time = 36
value = 0

;---------------------------------------------------------------------------
;Fireball Weak
[Statedef 2022]
type    = S
movetype= A
physics = S
juggle  = 1
poweradd= 120
ctrl = 0
velset = 0,0
anim = 2007
sprpriority = 0

[State 2022, 1]
type = playsnd
trigger1 = time = 21
value = 53,0

[State 2022, 1A]
type = PlaySnd
trigger1 = !time
value = 53,ifelse(random<500,2,3)  
channel = 0


[State 2022, 2]
type = Projectile
trigger1 = AnimElem = 5
ProjID = 2022
projanim = 2022
projhitanim = 2010
projremanim = 1002
projcancelanim = 1002
velocity = 11,0
offset = 0,-110
attr = S,HP
hitflag = MAF        ;HLAFD+-
guardflag = MA         ;HLA
animtype = hard
priority = 4,Hit   ;Hit,Miss,Dodge
damage = 30
pausetime = 4,4
sparkno = -1
guard.sparkno = -1;s9993
hitsound = S53,1
guardsound = 6,0
ground.type = Low
ground.slidetime = 8
ground.hittime  = 8
ground.velocity = -2,-0.1
air.velocity = -2,-0.8
;fall = 1
air.fall = 1
getpower = 1
palfx.time = 32
palfx.add = 100,-30,-120
palfx.sinadd = 40,30,0,10
palfx.color = 0
palfx.invertall = 1

;[State 2010, 1]
;type = Helper
;helpertype = normal
;name = "flame"
;pos = 15, -75
;postype = p1
;stateno = 2013
;trigger1 = time = 13
;value = 5110

[State 2022, 3]
type = Explod
trigger1 = animelem = 5
anim = 2009
pos = 45,-100
ontop = 1
postype = p1
;bindtime = -1
persistent = 0
;removetime = 84
ignorehitpause = 1
ownpal = 1
trans=addalpha
alpha=192,256

[State 2022, 2]
type = ctrlset
trigger1 = time = 30
value = 1



[State 2022, 3]
type = ChangeState
;trigger1 = time = 72
trigger1 = time = 36
value = 0

;---------------------------------------------------------------------------
;Fireball Strong
[Statedef 2032]
type    = S
movetype= A
physics = S
juggle  = 1
poweradd= 120
ctrl = 0
velset = 0,0
anim = 2007
sprpriority = 0

[State 2032, 1]
type = playsnd
trigger1 = time = 21
value = 53,0

[State 2032, 1A]
type = PlaySnd
trigger1 = !time
value = 53,ifelse(random<500,2,3)
channel = 0


[State 2032, 2]
type = Projectile
trigger1 = AnimElem = 5
ProjID = 2008
projanim = 2008
projscale = 1.25,1.25
projhitanim = 2010
projremanim = 1002
projcancelanim = 1002
velocity = 4,0
offset = 0,-110
attr = S,HP
hitflag = MAF        ;HLAFD+-
guardflag = MA         ;HLA
animtype = hard
priority = 4,Hit   ;Hit,Miss,Dodge
damage = 50
pausetime = 4,4
sparkno = -1
guard.sparkno = -1;s9993
hitsound = S53,1
guardsound = 6,0
ground.type = Low
ground.slidetime = 8
ground.hittime  = 8
ground.velocity = -2,-0.1
air.velocity = -2,-0.8
fall = 1
air.fall = 1
getpower = 1
palfx.time = 15
palfx.add = ifelse (palno <=5,255,0),125,ifelse (palno <=5,0,255)
palfx.sinadd = 40,40,40,0
palfx.color = 0

[State 210, 2]
type = explod
trigger1 = projcontact(2008) = 1
anim = f2
postype = p2
pos = 0,-75
sprpriority = 6

;[State 2010, 1]
;type = Helper
;helpertype = normal
;name = "flame"
;pos = 15, -75
;postype = p1
;stateno = 2013
;trigger1 = time = 13
;value = 5110

[State 2032, 3]
type = Explod
trigger1 = animelem = 5
anim = 2009
pos = 45,-100
ontop = 1
postype = p1
;bindtime = -1
persistent = 0
;removetime = 84
ignorehitpause = 1
ownpal = 1
trans=addalpha
alpha=192,256

[State 2032, 2]
type = ctrlset
trigger1 = time = 30
value = 1



[State 2032, 3]
type = ChangeState
;trigger1 = time = 72
trigger1 = time = 36
value = 0

;---------------------------------------------------------------------------

;---------------------------------------------------------------------------
;Flamebreath
[Statedef 2013]
type    = S
movetype= A
physics = S
juggle  = 1
poweradd= 120
ctrl = 0
velset = 0,0
anim = 2013
sprpriority = 0

[State 2010, 1]
type = playsnd
trigger1 = time = 13
value = 51,0

[State 2010, 1A]
type = PlaySnd
trigger1 = !time
value = 51,ifelse(random<500,2,3)  
channel = 0

[State 2010, 1C]
type = Helper
helpertype = normal
name = "flame"
pos = 15, -75
postype = p1
stateno = 2014
trigger1 = time = 13
value = 5110

[State 2010, 2]
type = ctrlset
trigger1 = time = 69 ;88
value = 1

[State 2010, 3]
type = ChangeState
trigger1 = time = 69
value = 0

;---------------------------------------------------------------------------
;Flamebreath flame
[Statedef 2014]
type    = S
movetype= A
physics = S
juggle  = 1
ctrl = 0
velset = 0,0
anim = 2014
sprpriority = 1


[State 2013, 2]
type = BindToParent
trigger1 = time = 1
time = 64
pos =14, -73

[State 2013, 2]
type = HitDef
trigger1 = AnimElem >= 1
;attr = S, NA
animtype  = Hard
damage    = 40
pausetime = 12,12
hitsound   = 15,0
guardflag = MA                    ;Flags on how move is to be guarded against
hitflag = MAF
attr = S,HP
sparkno = -1
guard.sparkno = S30040
guardsound = 15,0
ground.type = Low
ground.slidetime = 60
ground.hittime  = 20
ground.velocity = -3,-7
guard.velocity = -7
air.velocity = -8,-7
airguard.velocity = -5, -4
palfx.time = 32
palfx.add = 100,-30,-120
palfx.sinadd = 40,30,0,10
palfx.color = 0
palfx.invertall = 1
p2stateno = 1025    ;Make p2 go to state 1025 on hit
p2facing = 1        ;Force to face p1

[State 2013, Fire]
type = Explod
triggerall = movehit
trigger1 = 7
anim = 2011
pos = -10,-50
ontop = 1
postype = p2
bindtime = -1
persistent = 0
;removetime = 84
ignorehitpause = 1
ownpal = 1
trans = addalpha
alpha = 192,256

[State 2013, 2]
type = playsnd
trigger1 = time = 1
value = 51,1

[State 2013, 4]
type = DestroySelf
trigger1 = time = 56
Trigger2 = parent, movetype=H ; removed if GR is hit using the move
value = 1215

;-----------------------------------------------------------------------
; Flamebreath Low
[Statedef 2015]
type    = S
movetype= A
physics = S
juggle  = 1
poweradd= 120
ctrl = 0
velset = 0,0
anim = 2015
sprpriority = 0

[State 2015, 1]
type = playsnd
trigger1 = time = 13
value = 51,0

[State 2015, 1A]
type = PlaySnd
trigger1 = !time
value = 51,ifelse(random<500,2,3)  
channel = 0

[State 2015, 2]
type = Helper
helpertype = normal
name = "flame"
pos = 15, -75
postype = p1
stateno = 2016
trigger1 = animelem = 2
value = 5110

[State 2015, 3]
type = ctrlset
trigger1 = time = 68
value = 1

[State 2015, 4]
type = ChangeState
trigger1 = time = 68
value = 0

;-----------------------------------------------------------------------
;Flamebreath Low flame
[Statedef 2016]
type    = S
movetype= A
physics = S
juggle  = 1
ctrl = 0
velset = 0,0
anim = 2016
sprpriority = 1


[State 2016, 2]
type = BindToParent
trigger1 = time = 1
time = 64
pos =21, -70

[State 2016, 2]
type = HitDef
trigger1 = AnimElem >= 1
attr = S, NA
animtype  = light
damage    = 40
pausetime = 12,12
hitsound   = 15,0
guardflag = L                   ;Flags on how move is to be guarded against
hitflag = HMLFD
sparkno = -1
guard.sparkno = S30040
guardsound = 15,0
ground.type = Low
ground.slidetime = 60
ground.hittime  = 20
guard.velocity = -7
ground.velocity = -5,-3
air.velocity =  -5,-3
down.velocity = -30
palfx.time = 32
palfx.add = 100,-30,-120
palfx.sinadd = 40,30,0,10
palfx.color = 0
palfx.invertall = 1
p2stateno = 1025    ;Make p2 go to state 1025 on hit
p2facing = 1        ;Force to face p1

[State 2016, Fire]
type = Explod
triggerall = movehit
trigger1 = 7
anim = 2011
pos = -10,-50
ontop = 1
postype = p2
bindtime = -1
persistent = 0
;removetime = 84
ignorehitpause = 1
ownpal = 1
trans = addalpha
alpha = 192,256

[State 2013, 2]
type = playsnd
trigger1 = time = 1
value = 51,1

[State 2016, 2]
type = Explod
trigger1 = time = 13
anim = 2017
pos = 50,75
ontop = 1
postype = p1
removetime = 60
ignorehitpause = 1
ownpal = 1
sprpriority = 5


[State 2016, 2]
type = Explod
trigger1 = time = 30
anim = 2017
pos = 80,75
ontop = 1
postype = p1
removetime = 60
ignorehitpause = 1
ownpal = 1
sprpriority = 4

[State 2016, 4]
type = DestroySelf
trigger1 = time = 60
Trigger2 = parent, movetype=H ; removed if GR is hit using the move
value = 1215


;---------------------------------------------------------------------------
;Flamebreath High
[Statedef 2020]
type    = S
movetype= A
physics = S
juggle  = 1
poweradd= 120
ctrl = 0
velset = 0,0
anim = 2020
sprpriority = 0

[State 2020, 1]
type = playsnd
trigger1 = time = 13
value = 51,0

[State 2020, 1A]
type = PlaySnd
trigger1 = !time
value = 51,ifelse(random<500,2,3)  
channel = 0

[State 2020, 1C]
type = Helper
helpertype = normal
name = "flame"
pos = 31, -89
postype = p1
stateno = 2021
trigger1 = time = 12
value = 5110

[State 2020, 2]
type = ctrlset
trigger1 = time = 69 ;88
value = 1

[State 2020, 3]
type = ChangeState
trigger1 = time = 69
value = 0

;---------------------------------------------------------------------------
;Flamebreath High flame
[Statedef 2021]
type    = S
movetype= A
physics = S
juggle  = 1
ctrl = 0
velset = 0,0
anim = 2021
sprpriority = 1


[State 2013, 2]
type = BindToParent
trigger1 = time = 1
time = 64
pos =31, -89

[State 2013, 2]
type = HitDef
trigger1 = AnimElem >= 1
;attr = S, NA
animtype  = Hard
damage    = 40
pausetime = 12,12
hitsound   = 15,0
guardflag = MA                    ;Flags on how move is to be guarded against
hitflag = MAF
attr = S,HP
sparkno = -1
guard.sparkno = S30040
guardsound = 15,0
ground.type = Low
ground.slidetime = 60
ground.hittime  = 20
ground.velocity = -3,-7
guard.velocity = -7
air.velocity = -8,-7
airguard.velocity = -5, -4
palfx.time = 32
palfx.add = 100,-30,-120
palfx.sinadd = 40,30,0,10
palfx.color = 0
palfx.invertall = 1
p2stateno = 1025    ;Make p2 go to state 1025 on hit
p2facing = 1        ;Force to face p1

[State 2013, Fire]
type = Explod
triggerall = movehit
trigger1 = 7
anim = 2011
pos = -10,-50
ontop = 1
postype = p2
bindtime = -1
persistent = 0
;removetime = 84
ignorehitpause = 1
ownpal = 1
trans = addalpha
alpha = 192,256

[State 2013, 2]
type = playsnd
trigger1 = time = 1
value = 51,1

[State 2013, 4]
type = DestroySelf
trigger1 = time = 60
Trigger2 = parent, movetype=H ; removed if GR is hit using the move
value = 1215

;---------------------------------------------------------------------------
;Flaming Uppercut
[Statedef 3000]
Type = A
MoveType = A
Physics = N
anim = 3000
sprpriority = -2
velset = 0,0
ctrl = 0
juggle = 7


[State 3000, Flame Sound]; 
type = PlaySnd
trigger1 = time = 0 
value = 50,0

[State 3000, 1A]
type = PlaySnd
trigger1 = !time
value = 47,3 
channel = 0

[State 1100, Vel]
type = velset
trigger1 = anim = 3000 && animelem = 6
x = ifelse(var(10) = 3, 13, ifelse(var(10) = 2, 9, 6))
y = ifelse(var(10) = 3, -11, ifelse(var(10) = 2, -8.5, -6))
[State 1100, Vel]
type = velmul
trigger1 = 1
x = 0.88
[State 1100, Vel]
type = velmul
trigger1 = vel y > 0
x = 0

[State 1150, hit def]
type = HitDef
triggerall = var(7) < 3
trigger1 = AnimElem = 4
trigger2 = AnimElem = 5
trigger3 = AnimElem = 6
attr = A, SA
hitflag = MAF
guardflag = M
animtype = Hard
ground.type = High
air.type = low
priority = 4, hit
damage = 58,0
getpower = ifelse(var(12) = 1, 0, 45), ifelse(var(12) = 1, 0, 45)
givepower = 15,15
sparkno = 2;S2010
guard.sparkno = s30040
sparkxy = 0, -64 
hitsound = s0,2
guardsound = s1000,3	
pausetime = 11,11
ground.slidetime = 9
ground.hittime = 9
ground.velocity = -1.8,-7.8
guard.pausetime = 11,11
guard.slidetime = 10
guard.hittime = 20
guard.ctrltime = 20
guard.velocity = -6.0
air.velocity = -1.8,-7.8
airguard.velocity = -5.0,-5.0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = -1.0
airguard.cornerpush.veloff = -1.0
fall.recover = 0
recover = 0
fall = 2
palfx.time = 32
palfx.add = 100,-30,-120
palfx.sinadd = 40,30,0,10
palfx.color = 0
palfx.invertall = 1

[State 210, Fire]
type = Explod
triggerall = movehit
trigger1 = 7
anim = 2011
pos = -10,-50
ontop = 1
postype = p2
bindtime = -1
persistent = 0
;removetime = 84
ignorehitpause = 1
ownpal = 1
trans = addalpha
alpha = 192,256

[State 1150, end state]
type = ChangeState
trigger1 = AnimTime = 0
value = 3001
ctrl = 1

;---------------------------------------------------------------------------
;Flaming Uppercut End
[Statedef 3001]
type    = A
movetype= A
physics = A
velset = 1,0
anim = 3001
juggle = 4

;[State 1000, 1]
;type = VelMul
;trigger1 = 1
;x = .9

;[State 1000, 2]
;type = VelSet
;trigger1 = Vel Y > 0
;x = 0

;[State 1000, 3]
;type = HitDef
;trigger1 = AnimElem = 3
;attr = A, SA
;damage = 50, 10
;animtype = Heavy
;guardflag = MA
;hitflag = MAF
;priority = 3, Hit
;pausetime = 10, 10
;sparkno = 3
;sparkxy = 0, -80
;hitsound = S2,3
;guardsound = S2,0
;ground.type = High
;ground.slidetime = 5
;ground.hittime  = 12
;ground.velocity = -3,-6
;air.type = High
;air.velocity = -3,-6
;air.hittime = 12
;fall = 1
;air.fall = 1

[State 3001, 5]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= -5
value = 3002

;------------------------------------------------------------------------
;Uppercut Land
[Statedef 3002]
type    = S
movetype= I
physics = S
ctrl = 0
velset = 0,0
anim = 3002

[State 3002, 0]
type = PosSet
trigger1 = Time = 0
y = 0

[State 3002, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Fire Pillar
[Statedef 2018]
type    = S
movetype= A
physics = S
juggle  = 1
poweradd= 120
ctrl = 0
velset = 0,0
anim = 2018
sprpriority = 0

[State 2018, 1]
type = playsnd
trigger1 = animelem = 2
value = 54,0

[State 2018, 1A]
type = PlaySnd
trigger1 = !time
value = 54,ifelse(random<500,3,2)  
channel = 0

[State 2018, 2]
type = Helper
helpertype = normal
name = "flame"
pos = 70, 0
postype = p1
stateno = 2019
trigger1 = time = 5
;value = 5110

[State 2018, 3]
type = ctrlset
trigger1 = time = 38
value = 1

[State 2018, 4]
type = ChangeState
trigger1 = time = 38
value = 0


;---------------------------------------------------------------------------
;Hellfire Pillar Flame
[Statedef 2019]
type    = S
movetype= A
physics = S
juggle  = 1
ctrl = 0
velset = 0,0
anim = 2019
sprpriority = 1


[State 2019, 1]
type = playsnd
trigger1 = animelem = 1
value = 54,1

[State 2019, Envshake]
type = EnvShake
trigger1 = AnimElem = 1
freq = 120
time = 20

;[State 2010, 2]
;type = BindToParent
;trigger1 = time = 0
;;time = 64
;pos =90, -29

[State 2019, 2]
type = HitDef
trigger1 = AnimElem = 6
;trigger2 = AnimElem = 7
;trigger3 = AnimElem = 8
attr = S, HP
animtype  = Hard
damage    = 50
pausetime = 15,15
;hitsound   = 15,0
sparkno = -1
guard.sparkno = S30040
guardflag = MA                    ;Flags on how move is to be guarded against
hitflag = MAF
guardsound = 15,0
ground.type = Low
ground.slidetime = 60
ground.hittime  = 20
ground.velocity = 0,-10
;guard.velocity = -7
air.velocity = 0,-7
;airguard.velocity = -5, -4
fall = 1
air.fall = 1
getpower = 1
envshake.time = 5
envshake.freq = 60
envshake.ampl = 1
palfx.time = 32
palfx.add = 100,-30,-120
palfx.sinadd = 40,30,0,10
palfx.color = 0
palfx.invertall = 1

[State 2019, Fire]
type = Explod
triggerall = movehit
trigger1 = 7
anim = 2011
pos = -10,-50
ontop = 1
postype = p2
bindtime = -1
persistent = 0
;removetime = 84
ignorehitpause = 1
ownpal = 1
trans = addalpha
alpha = 192,256

;[State 2010, 2]
;type = playsnd
;trigger1 = time = 1
;value = 15,1


;[State 2010, 3]
;type = Explod
;triggerall = MoveContact
;trigger1 = 11
;anim = 265
;pos = 18,-70
;ontop = 1
;postype = p2
;bindtime = -1
;persistent = 0
;removetime = 84
;ignorehitpause = 1
;ownpal = 1
;trans=addalpha
;alpha=192,256

;[State 210, ogien]
;type = Explod
;triggerall = MoveContact
;trigger1 = 7
;anim = 265
;pos = -10,-50
;ontop = 1
;postype = p2
;bindtime = -1
;persistent = 0
;removetime = 84
;ignorehitpause = 1
;ownpal = 1
;trans = addalpha
;alpha = 192,256

[State 2019, 4]
type = DestroySelf
trigger1 = time = 57
Trigger2 = parent, movetype=H ; removed if GR is hit using the move
value = 1215

;---------------------------------------------------------------------------
;Fire Pillar Distant
[Statedef 2050]
type    = S
movetype= A
physics = S
juggle  = 1
poweradd= 120
ctrl = 0
velset = 0,0
anim = 2018
sprpriority = 0

[State 2020, 1]
type = playsnd
trigger1 = animelem = 2
value = 54,0

[State 2020, 1A]
type = PlaySnd
trigger1 = !time
value = 54,ifelse(random<500,3,2)  
channel = 0

[State 2020, 2]
type = Helper
helpertype = normal
name = "flame"
pos = 180, 0
postype = p1
stateno = 2051
trigger1 = time = 5
;value = 5110

[State 2020, 3]
type = ctrlset
trigger1 = time = 38
value = 1

[State 2020, 4]
type = ChangeState
trigger1 = time = 38
value = 0


;---------------------------------------------------------------------------
;Hellfire Pillar Flame
[Statedef 2051]
type    = S
movetype= A
physics = S
juggle  = 1
ctrl = 0
velset = 0,0
anim = 2019
sprpriority = 1


[State 2021, 1]
type = playsnd
trigger1 = animelem = 1
value = 54,1

[State 2021, Envshake]
type = EnvShake
trigger1 = AnimElem = 1
freq = 120
time = 20

;[State 2010, 2]
;type = BindToParent
;trigger1 = time = 0
;;time = 64
;pos =90, -29

[State 2021, 2]
type = HitDef
trigger1 = AnimElem = 6
;trigger2 = AnimElem = 7
;trigger3 = AnimElem = 8
attr = S, HP
animtype  = Hard
damage    = 50
pausetime = 15,15
;hitsound   = 15,0
sparkno = -1
guard.sparkno = S30040
guardflag = MA                    ;Flags on how move is to be guarded against
hitflag = MAF
guardsound = 15,0
ground.type = Low
ground.slidetime = 60
ground.hittime  = 20
ground.velocity = 0,-10
;guard.velocity = -7
air.velocity = 0,-7
;airguard.velocity = -5, -4
fall = 1
air.fall = 1
getpower = 1
envshake.time = 5
envshake.freq = 60
envshake.ampl = 1
palfx.time = 32
palfx.add = 100,-30,-120
palfx.sinadd = 40,30,0,10
palfx.color = 0
palfx.invertall = 1

[State 2021, Fire]
type = Explod
triggerall = movehit
trigger1 = 7
anim = 2011
pos = -10,-50
ontop = 1
postype = p2
bindtime = -1
persistent = 0
;removetime = 84
ignorehitpause = 1
ownpal = 1
trans = addalpha
alpha = 192,256

;[State 2010, 2]
;type = playsnd
;trigger1 = time = 1
;value = 15,1


;[State 2010, 3]
;type = Explod
;triggerall = MoveContact
;trigger1 = 11
;anim = 265
;pos = 18,-70
;ontop = 1
;postype = p2
;bindtime = -1
;persistent = 0
;removetime = 84
;ignorehitpause = 1
;ownpal = 1
;trans=addalpha
;alpha=192,256

;[State 210, ogien]
;type = Explod
;triggerall = MoveContact
;trigger1 = 7
;anim = 265
;pos = -10,-50
;ontop = 1
;postype = p2
;bindtime = -1
;persistent = 0
;removetime = 84
;ignorehitpause = 1
;ownpal = 1
;trans = addalpha
;alpha = 192,256

[State 2021, 4]
type = DestroySelf
trigger1 = time = 57
Trigger2 = parent, movetype=H ; removed if GR is hit using the move
value = 1215

;---------------------------------------------------------------------------
;Flaming Charge
[Statedef 3050]
type    = S
movetype= A
physics = S
juggle  = 1
poweradd= 120
ctrl = 0
velset = 0,0
anim = 3050
sprpriority = 0

[State 3050, 1A]
type = PlaySnd
trigger1 = !time
value = 55,ifelse(random<500,0,1)  
channel = 0

[State 3050, 2]; sound 0f energy
type = PlaySnd
trigger1 = time = 1
value = 51,1

[State 3050, 1]
type = velset
trigger1 = time = 12
;trigger2 = time = 18
;trigger3 = time = 21
;trigger4 = time = 24
;trigger5 = time = 27
trigger2 = time = 15
trigger3 = time = 18
trigger4 = time = 21
trigger5 = time = 24
trigger6 = time = 27
trigger7 = time = 30
trigger8 = time = 33
x = 10
y = 0

[State 3050, 2]
type = velset
trigger1 = time = 36
trigger2 = time = 39
trigger3 = time = 42
x = 5 
y = 0

[State 3050, 3]
type = velset
trigger1 = time = 45
trigger2 = time = 48
trigger3 = time = 51
x = 2.5
y = 0

[State 3050, 2]
type = HitDef
trigger1 = AnimElem >= 6
attr = S, NA
animtype  = Hard
damage    = 100
pausetime = 10,10
guardflag = H,M,A,L                   ;Flags on how move is to be guarded against
hitflag = HMAFL
sparkno = 2;S2010
guard.sparkno = S30040
sparkxy = -20,-70
hitsound   = S0,2
guardsound = 15,0
ground.type = Low
ground.slidetime = 60
ground.hittime  = 6
ground.velocity = -3,-10
guard.velocity = -7
air.velocity = -8,-10
airguard.velocity = -5, -4
palfx.time = 32
palfx.add = 100,-30,-120
palfx.sinadd = 40,30,0,10
palfx.color = 0
palfx.invertall = 1
fall=1
envshake.time = 12
envshake.ampl = 4
envshake.freq = 90
;p2stateno = 2501 

[State 3050, 3]
type = Explod
triggerall = MoveContact
trigger1 = 11
anim = 2030
pos = 0,0
ontop = 1
postype = p2
bindtime = -1
persistent = 0
removetime = 60
ignorehitpause = 1
ownpal = 1
trans=addalpha
alpha=192,256

[State 3050, Fire]
type = Explod
triggerall = movehit
trigger1 = 7
anim = 2011
pos = -10,-50
ontop = 1
postype = p2
bindtime = -1
persistent = 0
;removetime = 84
ignorehitpause = 1
ownpal = 1
trans = addalpha
alpha = 192,256

[State 3050, 3]
type = ctrlset
trigger1 = time = 51
value=1

[State 3050, 3]
type = ChangeState
trigger1 = time = 51
value = 0

;---------------------------------------------------------------------------
;Arial Chain Attack
[Statedef 3060]
type    = A
movetype= A
physics = S
juggle  = 1
poweradd= 120
ctrl = 0
velset = 0,0
anim = 3060
sprpriority = -1

[State 3060, 1]
type = PlaySnd
trigger1 = Time = 2
value = 50, 1

;[State 221, 2]; 
;type = PlaySnd
;trigger1 = time = 0 
;value = 52,2

[State 3060, A4]
type = PlaySnd
trigger1 = !time
value = 52,ifelse(random<500,0,1)  
channel = 0


[State 3060, 3]; 
type = PlaySnd
trigger1 = time = 0 
value = 50,0

[State 3060, 2]
type = HitDef
trigger1 = AnimElem >= 2
attr = A, SA
animtype  = medium
damage    = 85
hitflag = HMAFD
guardflag = HA
pausetime = 0,0
sparkno = 2;S2010
guard.sparkno = S30040
sparkxy = -20,0
hitsound   = S0,2
guardsound = S3,0
ground.type = Low
ground.slidetime = 0
ground.hittime  = 10
ground.velocity = -8,-3
guard.velocity = -7
air.velocity = -8,-3
airguard.velocity = -5, -4
fall = 1
envshake.time = 12
envshake.ampl = 4
envshake.freq = 90
palfx.time = 32
palfx.add = 100,-30,-120
palfx.sinadd = 40,30,0,10
palfx.color = 0
palfx.invertall = 1

[State 3060, Fire]
type = Explod
triggerall = movehit
trigger1 = 7
anim = 2011
pos = -10,-50
ontop = 1
postype = p2
bindtime = -1
persistent = 0
;removetime = 84
ignorehitpause = 1
ownpal = 1
trans = addalpha
alpha = 192,256

;[State 3060, Env]
;type = EnvColor
;value = 255,255,255
;trigger1 = movehit
;ignorehitpause = 1
;persistent = 0
;time = 2
;under = 1

;[State 3060, Quake]
;type = EnvShake
;trigger1 = movehit
;ignorehitpause = 1
;persistent = 0
;time = 20
;ampl = -10
;freq = 100
;phase = 90

[State 3060, 3]
type = velset
trigger1 = time = [0,30]
x = -0.5
y = 0.5

[State 3060, 3]
type = ChangeState
trigger1 = time = 30
value = 54

;-------------------------------------------------------------------------------
;Flame Whip
[Statedef 3070]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 65
ctrl = 0
velset = 0,0
anim = 3070
sprpriority = -1

[State 3070, Width]
type = Width
trigger1 = (AnimElemTime (2) >= 0) && (AnimElemTime (7) < 0)
value = 15,0

[State 3070, 1]
type = PlaySnd
trigger1 = Time = 2
value = 50, 1

[State 3070, A4]
type = PlaySnd
trigger1 = !time
value = 52,ifelse(random<500,0,1)
channel = 0

[State 3070, 3];
type = PlaySnd
trigger1 = time = 0
value = 50,0

[State 3070, 1]
type = HitDef
trigger1 = AnimElem = 4
;trigger4 = AnimElem = 9
attr = S, NA
animtype  = Medium
damage    = 85
guardflag = MA
pausetime = 2,2
sparkno = 2;S2010
guard.sparkno = S30040
sparkxy = -20,-100
hitsound   = S0,2
guardsound = 6,0
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -18,-7
guard.velocity = -7
air.velocity = -18,-7
airguard.velocity = -5, -4
fall = 1
p2stateno = 1025    ;Make p2 go to state 1025 on hit
p2facing = 1        ;Force to face p1
palfx.time = 32
palfx.add = 100,-30,-120
palfx.sinadd = 40,30,0,10
palfx.color = 0
palfx.invertall = 1
envshake.time = 12
envshake.ampl = -8
envshake.freq = 90

[State 3070, Quake]
type = EnvShake
trigger1 = movehit
ignorehitpause = 1
persistent = 0
time = 20
ampl = -10
freq = 100
phase = 90

[State 3070, Dust Effect]
type = Explod
trigger1 = AnimElem = 3
Anim = 222
Pos = 40,5
sprpriority = 10
removeongethit = 1
removetime = 20
bindtime = 30
Pos= 0,0
Bindtime = 1
SuperMove = 1
scale = 1
trans=addalpha
alpha=200,75

[State 3070, Fire]
type = Explod
triggerall = movehit
trigger1 = 7
anim = 2011
pos = -10,-50
ontop = 1
postype = p2
bindtime = -1
persistent = 0
;removetime = 84
ignorehitpause = 1
ownpal = 1
trans = addalpha
alpha = 192,256

[State 3070, 2]
type = SprPriority
trigger1 = AnimElem = 1
value = 2

[State 3070, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
;Hellcycle
; CNS difficulty: medium
; Notes: Notice that the HitDefs in supers have "getpower = 0". This makes
;        sure KFM doesn't recharge his super guage as he hits.
;        Also, the attributes for the HitDefs is "HA" for "hyper attack",
;        ie. "attr = S, HA".
;        Notice how the first HitDef is reused twice by allowing it to
;        trigger on two animation elements.

[Statedef 4000]
type    = S
movetype= A
physics = S
poweradd = -2000
juggle  = 5
velset = 0,0
anim = 4004 ;Backward Jump
ctrl = 0
sprpriority = 2

[State 863, 1]
type = SuperPause
trigger1 = AnimElem = 1
anim = -1
time = 30
movetime = 0
darken = 0

[State 1050, NotHitBy]
type = NotHitBy
trigger1 = time <= 40
value = SCA,NA,SA,HA,NP,SP,HP

;Super Cancel Effect
[State 1000, Explod]
type = Explod
triggerall = time = 0
trigger1 = prevstateno = [1000,1999]
anim = f7500
pos = 0,75
postype = left
removetime = -2
bindtime = 1
pausemove = 1
supermove = 1
sprpriority = 9
ownpal = 1

[State 1000, Explod]
type = Explod
triggerall = time = 0
trigger1 = prevstateno = [1000,1999]
anim = f7510
pos = 0,73
postype = left
removetime = -2
bindtime = 1
pausemove = 1
supermove = 1
sprpriority = 9
ownpal = 1

[State 1000, Explod]
type = Explod
triggerall = time = 0
trigger1 = prevstateno = [1000,1999]
anim = f7510
pos = 0,150
postype = left
removetime = -2
bindtime = 1
pausemove = 1
supermove = 1
sprpriority = 9
ownpal = 1
vel = 0.7,0

[State 1000, Explod]
type = Explod
triggerall = time = 0
trigger1 = prevstateno = [1000,1999]
anim = f7510
pos = 80,190
postype = left
removetime = -2
bindtime = 1
pausemove = 1
supermove = 1
sprpriority = 9
ownpal = 1
vel = 0.7,0

[State 1000, Explod]
type = Explod
triggerall = time = 0
trigger1 = prevstateno = [1000,1999]
anim = f7510
pos = 120,70
postype = left
removetime = -2
bindtime = 1
pausemove = 1
supermove = 1
sprpriority = 9
ownpal = 1
vel = 2.2,0

[State 1000, Explod]
type = Explod
triggerall = time = 0
trigger1 = prevstateno = [1000,1999]
anim = f7510
pos = 150,160
postype = left
removetime = -2
bindtime = 1
pausemove = 1
supermove = 1
sprpriority = 9
ownpal = 1
vel = 2.2,0

;Dream Cancel Effect
[State 1000, Explod]
type = Explod
triggerall = time = 0
trigger1 = prevstateno = 2050
anim = f7530
pos = 0,75
postype = left
removetime = -2
bindtime = 1
pausemove = 1
supermove = 1
sprpriority = 9
ownpal = 1

[State 1000, Explod]
type = Explod
triggerall = time = 0
trigger1 = prevstateno = 2050
anim = f7535
pos = 0,73
postype = left
removetime = -2
bindtime = 1
pausemove = 1
supermove = 1
sprpriority = 9
ownpal = 1

[State 1000, Explod]
type = Explod
triggerall = time = 0
trigger1 = prevstateno = 2050
anim = f7535
pos = 0,150
postype = left
removetime = -2
bindtime = 1
pausemove = 1
supermove = 1
sprpriority = 9
ownpal = 1
vel = 0.7,0

[State 1000, Explod]
type = Explod
triggerall = time = 0
trigger1 = prevstateno = 2050
anim = f7535
pos = 80,190
postype = left
removetime = -2
bindtime = 1
pausemove = 1
supermove = 1
sprpriority = 9
ownpal = 1
vel = 0.7,0

[State 1000, Explod]
type = Explod
triggerall = time = 0
trigger1 = prevstateno = 2050
anim = f7535
pos = 120,70
postype = left
removetime = -2
bindtime = 1
pausemove = 1
supermove = 1
sprpriority = 9
ownpal = 1
vel = 2.2,0

[State 1000, Explod]
type = Explod
triggerall = time = 0
trigger1 = prevstateno = 2050
anim = f7535
pos = 150,160
postype = left
removetime = -2
bindtime = 1
pausemove = 1
supermove = 1
sprpriority = 9
ownpal = 1
vel = 2.2,0

[State 2000]
type = Explod
trigger1 = time = 0
anim = f102
pos = -3,-72
sprpriority = -3
ownpal = 1
bindtime = 1
supermove = 1

[State 2000]
type = Explod
trigger1 = time = 0
anim = f103
pos = -3,-72
sprpriority = 20
ownpal = 1
bindtime = 1
supermove = 1

[State 1700, 3]
type = PlaySnd
trigger1 = AnimElem = 1
value = 17000,1

[State 4000, BGPalFX]
type = BGPalFX
trigger1 = 1
time = 2
mul = 900,900,900
add = -250,-250,-250
ignorehitpause = 1

[State 3000,ºÚÉ«µ×É«]
type = Envcolor
trigger1 = 1
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 40
under = 1
supermove = 1

[State 4000, 0]
type = StateTypeSet
trigger1 = time = 0
statetype = A

[State 4000, ]
type = VelSet
trigger1 = time <= 20
x = -15
y = -5

[State 4000, ]
type = ScreenBound
trigger1 = 1
value = 0

;[State 2020, 1]
;type = playsnd
;trigger1 = time = 20
;value = 18,6
;channel = 3

[State 2020, 1]
type = playsnd
trigger1 = time = 20
value = 56,0
channel = 4
volume = 0



[State 4000, 1]
type = playsnd
trigger1 = P2Life = 0
triggerall = MoveHit = 1
value = 56,1
channel = 8





[State 4000, 3]
type = velset
trigger1 = time =  30
trigger2 = time =  35
trigger3 = time =  40
trigger4 = time =  45
trigger5 = time =  50
trigger6 = time =  55
trigger7 = time =  60
trigger8 = time =  65
x = 20
y = 0

[State 4000, 3] 
type = changeanim
trigger1 = time = 30
value = 4001     ;GR Bike Ram

[State 4000, 1]
type = Helper
helpertype = normal
name = "shield2"
pos = 0, 0
postype = p1
stateno = 4002
trigger1 = time = 30
value = 4002

[State 4000, 3]
type = Explod
trigger1 = time = 30 ;Fire Trail
anim = 4006
pos = 20,8
postype = p1
bindtime = 44
removetime = 44
sprpriority = 3

[State 4000, 3]
type = Explod
trigger1 = time = 30
anim = 4006 ;Fire Trail
pos = -100,10
postype = p1
bindtime = 44
removetime = 44
sprpriority = 2

[State 4000, 3]
type = posset
trigger1 = time = 30
triggerall = facing = 1
x = -270
y = 2

[State 4000, 3]
type = posset
triggerall = facing = -1
trigger1 = time = 30
x = 270
y = 2

[State 4000, 3]
type = playsnd
trigger1 = time = 25
value = 56,3
channel = 2

[State 4000, 3A]
type = playsnd
trigger1 = time = 25
value = 56,8
channel = 3


[State 4000, ]
type = RemoveExplod
trigger1 = movetype = H
trigger2 = time = 126
ID = 8962
ignorehitpause = 1

[State 4000, ]
type = RemoveExplod
trigger1 = movetype = H
trigger2 = time = 111
ID = 8000
ignorehitpause = 1


[State 4000, 18]
type = HitDef
trigger1 = Animelem >= 1
attr = S, HA                     
damage = 200, 0                                    
guardflag = L                  
hitflag = MAFD                    
priority = 4, Hit                
pausetime = 8, 8                 
sparkno = 2;S2010
guard.sparkno = S30040
sparkxy = -10,-60               
hitsound = s56,4                  
guardsound = S6, 0       
p2stateno = 4007 ;Custom Get Hit 

[State 4000, Quake]
type = EnvShake
trigger1 = movehit
ignorehitpause = 1
persistent = 0
time = 20
ampl = -10
freq = 100
phase = 90

[State 4000, 20]
type = ChangeAnim
trigger1 = time = 74
value = 4005             ;Jump End


[State 4000, 20]
type = PlaySnd
trigger1 = time = 74
value = 56,5

[State 4000, 21] ;
type = Posset
trigger1 = time = 74
trigger1 = facing = 1
x = 160
y = 0

[State 4000, 21] ;
type = Posset
trigger1 = facing = -1
trigger1 = time = 74
x = -160
y = 0

[State 4000, 22]
type = Velset
trigger1 = time = 74
x = -3
y = -7

[State 4000, 23]
type = Velset
trigger1 = time = 79
x = -3
y = -3

[State 4000, 24]
type = Velset
trigger1 = time = 89
x = -3
y = 0

[State 4000, 25]
type = Velset
trigger1 = time = 99
x = -3
y = 3

[State 4000, 26]
type = Velset
trigger1 = time = 104
x = -3
y = 7



;[State 4000, 27]
;type = Velset
;triggerall = time >= 108
;trigger1 = pos y >= 1
;trigger1 = animelem = 15
;x = 0
;y = 0


[State 4000, 28]
type = turn
trigger1 = time = 110

;[State 4000, 28]
;type = ChangeAnim
;trigger1 = time = 110
;value = 4007 ;Land

[State 4000, 0]
type = StateTypeSet
trigger1 = time = 110
statetype = S

[State 4000, 28]
type = PlaySnd
trigger1 = time = 105
value = 56,6


[State 4000, ]
type = RemoveExplod
trigger1 = time >= 10
ID = 9999
ignorehitpause = 1


[State 4000, 31]
type = ChangeState
trigger1 = time = 111
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Hellcycle Shield
[Statedef 4002]
type    = S
movetype= A
physics = S
juggle  = 1
ctrl = 0
velset = 0,0
anim = 4002
sprpriority = -5

[State 4002, 2]
type = BindToParent
trigger1 = time = 1
time = 74
pos =0, 0

[State -2, NotHitBy]
trigger1 = 1
type = NotHitBy
value =  ,AT


[State 4002, 0]
type = HitOverride
attr = SCA, AA, AT, AP
stateno = 3012
time = -1
Trigger1 = 1

[State 4002,0]
type = AssertSpecial
trigger1 = Time = [0,74]
flag = noshadow

[State 4002, 3]
type = destroyself
trigger1 = time = 74
trigger2 = parent, stateno != 4000

;--------------------------------------
;deamonic stalion bike hit
[StateDef 3012]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 4008

[State 3101, 1]
type = BindToParent
trigger1 = time = [0,1]
time = -1
pos =0, 0

[State 2011, ]
type = playsnd
Trigger1 = time = 0 
value = 56,7
volume = 255
channel = 17

[State 2011, ]
type = changestate
Trigger1 = time = 1
value = 4002 ;Back to Shield Bike

;---------------------------------------------------------------------------
; Hellcycle Custom Get Hit
; CNS difficulty: medium
; Notes: Notice that the HitDefs in supers have "getpower = 0". This makes
;        sure KFM doesn't recharge his super guage as he hits.
;        Also, the attributes for the HitDefs is "HA" for "hyper attack",
;        ie. "attr = S, HA".
;        Notice how the first HitDef is reused twice by allowing it to
;        trigger on two animation elements.
[Statedef 4007]
type    = S
movetype= A
physics = S
juggle  = 5
velset = 0,0
anim = 4008
ctrl = 0
sprpriority = 2


[State 4007, 1]
type = LifeAdd
trigger1 = time = 2
value = -400

[State 4007, 6]
type = ChangeAnim2
trigger1 = time = 1
value = 4007

[State 4007,6]
type = velset
trigger1 = time = 1
x=5
y=-10

[State 4007,6]
type = velset
trigger1 = time = 11
x=5
y=-7


[State 4007,6]
type = velset
trigger1 = time = 25
x=5
y=-3

[State 4007,6]
type = velset
trigger1 = time = 40
x=5
y=0

[State 4007,6]
type = velset
trigger1 = time = 55
x=5
y=3

[State 4007,6]
type = velset
trigger1 = time = 70
x=5
y=7

[State 4007,6]
type = velset
trigger1 = time = 80
x=5
y=10

[State 4007, 7]
type = SelfState
trigger1 = time = 100
value = 5100 ;Hit ground

[State 4007, 7]
type = SelfState
trigger1 = time = 100
value = 5100 ;Hit ground


;---------------------------------------------------------------------------
;Hyper Chain
[Statedef 4008]
type    = S
movetype= A
physics = S
poweradd = -1000
juggle  = 5
velset = 0,0
anim = 4009 ;Backward Jump
ctrl = 0
sprpriority = 2

[State 1050, NotHitBy]
type = NotHitBy
trigger1 = time <= 40
value = SCA,NA,SA,HA,NP,SP,HP

;Super Cancel Effect
[State 1000, Explod]
type = Explod
triggerall = time = 0
trigger1 = prevstateno = [1000,1999]
anim = f7500
pos = 0,75
postype = left
removetime = -2
bindtime = 1
pausemove = 1
supermove = 1
sprpriority = 9
ownpal = 1

[State 1000, Explod]
type = Explod
triggerall = time = 0
trigger1 = prevstateno = [1000,1999]
anim = f7510
pos = 0,73
postype = left
removetime = -2
bindtime = 1
pausemove = 1
supermove = 1
sprpriority = 9
ownpal = 1

[State 1000, Explod]
type = Explod
triggerall = time = 0
trigger1 = prevstateno = [1000,1999]
anim = f7510
pos = 0,150
postype = left
removetime = -2
bindtime = 1
pausemove = 1
supermove = 1
sprpriority = 9
ownpal = 1
vel = 0.7,0

[State 1000, Explod]
type = Explod
triggerall = time = 0
trigger1 = prevstateno = [1000,1999]
anim = f7510
pos = 80,190
postype = left
removetime = -2
bindtime = 1
pausemove = 1
supermove = 1
sprpriority = 9
ownpal = 1
vel = 0.7,0

[State 1000, Explod]
type = Explod
triggerall = time = 0
trigger1 = prevstateno = [1000,1999]
anim = f7510
pos = 120,70
postype = left
removetime = -2
bindtime = 1
pausemove = 1
supermove = 1
sprpriority = 9
ownpal = 1
vel = 2.2,0

[State 1000, Explod]
type = Explod
triggerall = time = 0
trigger1 = prevstateno = [1000,1999]
anim = f7510
pos = 150,160
postype = left
removetime = -2
bindtime = 1
pausemove = 1
supermove = 1
sprpriority = 9
ownpal = 1
vel = 2.2,0

[State 2100]
type = Explod
trigger1 = time = 0
anim = f100
pos = 22,-85
Postype = p1
sprpriority = -3
ownpal = 1
bindtime = 1
supermove = 1

[State 2100]
type = Explod
trigger1 = time = 0
anim = f101
pos = 22,-85
Postype = p1
sprpriority = 20
ownpal = 1
bindtime = 1
supermove = 1

[State 1700, 3]
type = PlaySnd
trigger1 = AnimElem = 1
value = 17000,0

[State 4000, BGPalFX]
type = BGPalFX
trigger1 = 1
time = 2
mul = 900,900,900
add = -250,-250,-250
ignorehitpause = 1

[State 3000,ºÚÉ«µ×É«]
type = Envcolor
trigger1 = 1
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 40
under = 1
supermove = 1


[State 4008, 1A]
type = PlaySnd
trigger1 = animelem = 9
value = 58, 0

[State 4008, 1A]
type = PlaySnd
trigger1 = Time = 0
value = 56, 2

[State 4008, 1A]
type = PlaySnd
trigger1 = Time = 66
value = 51, 1

[State 4008, 1B]; 
type = PlaySnd
trigger1 = time = 66
value = 50,0


[State 4008, 1A]
type = PlaySnd
trigger1 = Time = 98
value = 51, 1

[State 4008, 1B]; 
type = PlaySnd
trigger1 = time = 98
value = 50,0

[State 4008, 1A]
type = PlaySnd
trigger1 = Time = 116
value = 51, 1

[State 4008, 1B]; 
type = PlaySnd
trigger1 = time = 116
value = 50,0

[State 4008, 1A]
type = PlaySnd
trigger1 = Time = 132
value = 51, 1

[State 4008, 1B]; 
type = PlaySnd
trigger1 = time = 132
value = 50,0


[State 220, Effects2]
type = Explod
trigger1 = animelem = 13
Anim = 4020
sprpriority = 10
removetime = 30
bindtime = 30
Pos= -50,-10
scale = 1
trans=addalpha
alpha=200,75

[State 220, Effects2]
type = Explod
trigger1 = animelem = 16
Anim = 4021
sprpriority = 10
removetime = 30
bindtime = 30
Pos= 60,-10
scale = 1
trans=addalpha
alpha=200,75

[State 220, Effects2]
type = Explod
trigger1 = animelem = 18
Anim = 4020
sprpriority = 10
removetime = 30
bindtime = 30
Pos= -50,-10
scale = 1
trans=addalpha
alpha=200,75

[State 220, Effects2]
type = Explod
trigger1 = animelem = 20
Anim = 4021
sprpriority = 10
removetime = 30
bindtime = 30
Pos= 60,-10
scale = 1
trans=addalpha
alpha=200,75

[State 220, Effects2]
type = Explod
trigger1 = animelem = 22
Anim = 4020
sprpriority = 10
removetime = 30
bindtime = 30
Pos= -50,-10
scale = 1
trans=addalpha
alpha=200,75

[State 220, Effects2]
type = Explod
trigger1 = animelem = 25
Anim = 4021
sprpriority = 10
removetime = 30
bindtime = 30
Pos= 60,-10
scale = 1
trans=addalpha
alpha=200,75

[State 220, Effects2]
type = Explod
trigger1 = animelem = 25
Anim = 4020
sprpriority = 10
removetime = 30
bindtime = 30
Pos= -50,-10
scale = 1
trans=addalpha
alpha=200,75


[State 4008, 2]
type = HitDef
trigger1 = AnimElem >= 12
attr = A, SA
animtype  = medium
damage    = 20
hitflag = HMAFD
guardflag = HA
pausetime = 0,0
sparkno = 2;S2010
guard.sparkno = S30040
sparkxy = -20,-50
hitsound   = S0,2
guardsound = S3,0
ground.type = Low
ground.slidetime = 0
ground.hittime  = 10
ground.velocity = -8,-3
guard.velocity = -7
air.velocity = -8,-3
airguard.velocity = -5, -4
;fall = 1
envshake.time = 12
envshake.ampl = 4
envshake.freq = 90
palfx.time = 32
palfx.add = 100,-30,-120
palfx.sinadd = 40,30,0,10
palfx.color = 0
palfx.invertall = 1

[State 4008, 2]
type = HitDef
trigger1 = AnimElem >= 13
attr = A, SA
animtype  = medium
damage    = 20
hitflag = HMAFD
guardflag = HA
pausetime = 0,0
sparkno = 2;S2010
guard.sparkno = S30040
sparkxy = -20,-50
hitsound   = S0,2
guardsound = S3,0
ground.type = Low
ground.slidetime = 0
ground.hittime  = 10
ground.velocity = -8,-3
guard.velocity = -7
air.velocity = -8,-3
airguard.velocity = -5, -4
;fall = 1
envshake.time = 12
envshake.ampl = 4
envshake.freq = 90
palfx.time = 32
palfx.add = 100,-30,-120
palfx.sinadd = 40,30,0,10
palfx.color = 0
palfx.invertall = 1

[State 4008, 2]
type = HitDef
trigger1 = AnimElem >= 14
attr = A, SA
animtype  = medium
damage    = 20
hitflag = HMAFD
guardflag = HA
pausetime = 0,0
sparkno = 2;S2010
guard.sparkno = S30040
sparkxy = -20,-50
hitsound   = S0,2
guardsound = S3,0
ground.type = Low
ground.slidetime = 0
ground.hittime  = 10
ground.velocity = -8,-3
guard.velocity = -7
air.velocity = -8,-3
airguard.velocity = -5, -4
;fall = 1
envshake.time = 12
envshake.ampl = 4
envshake.freq = 90
palfx.time = 32
palfx.add = 100,-30,-120
palfx.sinadd = 40,30,0,10
palfx.color = 0
palfx.invertall = 1

[State 4008, 2]
type = HitDef
trigger1 = AnimElem >= 15
attr = A, SA
animtype  = medium
damage    = 20
hitflag = HMAFD
guardflag = HA
pausetime = 0,0
sparkno = 2;S2010
guard.sparkno = S30040
sparkxy = -20,-50
hitsound   = S0,2
guardsound = S3,0
ground.type = Low
ground.slidetime = 0
ground.hittime  = 10
ground.velocity = -8,-3
guard.velocity = -7
air.velocity = -8,-3
airguard.velocity = -5, -4
;fall = 1
envshake.time = 12
envshake.ampl = 4
envshake.freq = 90
palfx.time = 32
palfx.add = 100,-30,-120
palfx.sinadd = 40,30,0,10
palfx.color = 0
palfx.invertall = 1

[State 4008, 2]
type = HitDef
trigger1 = AnimElem >= 16
attr = A, SA
animtype  = medium
damage    = 20
hitflag = HMAFD
guardflag = HA
pausetime = 0,0
sparkno = 2;S2010
guard.sparkno = S30040
sparkxy = -20,-50
hitsound   = S0,2
guardsound = S3,0
ground.type = Low
ground.slidetime = 0
ground.hittime  = 10
ground.velocity = -8,-3
guard.velocity = -7
air.velocity = -8,-3
airguard.velocity = -5, -4
;fall = 1
envshake.time = 12
envshake.ampl = 4
envshake.freq = 90
palfx.time = 32
palfx.add = 100,-30,-120
palfx.sinadd = 40,30,0,10
palfx.color = 0
palfx.invertall = 1

[State 4008, 2]
type = HitDef
trigger1 = AnimElem >= 17
attr = A, SA
animtype  = medium
damage    = 20
hitflag = HMAFD
guardflag = HA
pausetime = 0,0
sparkno = 2;S2010
guard.sparkno = S30040
sparkxy = -20,-50
hitsound   = S0,2
guardsound = S3,0
ground.type = Low
ground.slidetime = 0
ground.hittime  = 10
ground.velocity = -8,-3
guard.velocity = -7
air.velocity = -8,-3
airguard.velocity = -5, -4
;fall = 1
envshake.time = 12
envshake.ampl = 4
envshake.freq = 90
palfx.time = 32
palfx.add = 100,-30,-120
palfx.sinadd = 40,30,0,10
palfx.color = 0
palfx.invertall = 1

[State 4008, 2]
type = HitDef
trigger1 = AnimElem >= 18
attr = A, SA
animtype  = medium
damage    = 20
hitflag = HMAFD
guardflag = HA
pausetime = 0,0
sparkno = 2;S2010
guard.sparkno = S30040
sparkxy = -20,-50
hitsound   = S0,2
guardsound = S3,0
ground.type = Low
ground.slidetime = 0
ground.hittime  = 10
ground.velocity = -8,-3
guard.velocity = -7
air.velocity = -8,-3
airguard.velocity = -5, -4
;fall = 1
envshake.time = 12
envshake.ampl = 4
envshake.freq = 90
palfx.time = 32
palfx.add = 100,-30,-120
palfx.sinadd = 40,30,0,10
palfx.color = 0
palfx.invertall = 1

[State 4008, 2]
type = HitDef
trigger1 = AnimElem >= 19
attr = A, SA
animtype  = medium
damage    = 20
hitflag = HMAFD
guardflag = HA
pausetime = 0,0
sparkno = 2;S2010
guard.sparkno = S30040
sparkxy = -20,-50
hitsound   = S0,2
guardsound = S3,0
ground.type = Low
ground.slidetime = 0
ground.hittime  = 10
ground.velocity = -8,-3
guard.velocity = -7
air.velocity = -8,-3
airguard.velocity = -5, -4
;fall = 1
envshake.time = 12
envshake.ampl = 4
envshake.freq = 90
palfx.time = 32
palfx.add = 100,-30,-120
palfx.sinadd = 40,30,0,10
palfx.color = 0
palfx.invertall = 1

[State 4008, 2]
type = HitDef
trigger1 = AnimElem >= 20
attr = A, SA
animtype  = medium
damage    = 20
hitflag = HMAFD
guardflag = HA
pausetime = 0,0
sparkno = 2;S2010
guard.sparkno = S30040
sparkxy = -20,-50
hitsound   = S0,2
guardsound = S3,0
ground.type = Low
ground.slidetime = 0
ground.hittime  = 10
ground.velocity = -8,-3
guard.velocity = -7
air.velocity = -8,-3
airguard.velocity = -5, -4
;fall = 1
envshake.time = 12
envshake.ampl = 4
envshake.freq = 90
palfx.time = 32
palfx.add = 100,-30,-120
palfx.sinadd = 40,30,0,10
palfx.color = 0
palfx.invertall = 1

[State 4008, 2]
type = HitDef
trigger1 = AnimElem >= 21
attr = A, SA
animtype  = medium
damage    = 20
hitflag = HMAFD
guardflag = HA
pausetime = 0,0
sparkno = 2;S2010
guard.sparkno = S30040
sparkxy = -20,-50
hitsound   = S0,2
guardsound = S3,0
ground.type = Low
ground.slidetime = 0
ground.hittime  = 10
ground.velocity = -8,-3
guard.velocity = -7
air.velocity = -8,-3
airguard.velocity = -5, -4
;fall = 1
envshake.time = 12
envshake.ampl = 4
envshake.freq = 90
palfx.time = 32
palfx.add = 100,-30,-120
palfx.sinadd = 40,30,0,10
palfx.color = 0
palfx.invertall = 1


[State 4008, 2]
type = HitDef
trigger1 = AnimElem = 22
attr = A, SA
animtype  = medium
damage    = 20
hitflag = HMAFD
guardflag = HA
pausetime = 0,0
sparkno = 2;S2010
guard.sparkno = S30040
sparkxy = -20,-50
hitsound   = S0,2
guardsound = S3,0
ground.type = Low
ground.slidetime = 0
ground.hittime  = 10
ground.velocity = -8,-3
guard.velocity = -7
air.velocity = -8,-3
airguard.velocity = -5, -4
;fall = 1
envshake.time = 12
envshake.ampl = 4
envshake.freq = 90
palfx.time = 32
palfx.add = 100,-30,-120
palfx.sinadd = 40,30,0,10
palfx.color = 0
palfx.invertall = 1

[State 4008, 2]
type = HitDef
trigger1 = AnimElem = 23
attr = A, SA
animtype  = medium
damage    = 120,12
hitflag = HMAFD
guardflag = HA
pausetime = 0,0
sparkno = 2;S2010
guard.sparkno = S30040
sparkxy = -20,-50
hitsound   = S0,2
guardsound = S3,0
ground.type = Low
ground.slidetime = 0
ground.hittime  = 10
ground.velocity = -8,-3
guard.velocity = -7
air.velocity = -8,-3
airguard.velocity = -5, -4
fall = 1
envshake.time = 12
envshake.ampl = 4
envshake.freq = 90
palfx.time = 32
palfx.add = 100,-30,-120
palfx.sinadd = 40,30,0,10
palfx.color = 0
palfx.invertall = 1

[State 4008, Fire]
type = Explod
triggerall = movehit
trigger1 = 7
anim = 2011
pos = -10,-50
ontop = 1
postype = p2
bindtime = -1
persistent = 0
;removetime = 84
ignorehitpause = 1
ownpal = 1
trans = addalpha
alpha = 192,256

[State 4008, 31]
type = ChangeState
trigger1 = time = 164
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Hyper Fireball
[Statedef 4009]
type    = S
movetype= A
physics = S
poweradd = -1000
juggle  = 5
velset = 0,0
anim = 4012 ;Startup
ctrl = 0
sprpriority = 2

[State 1050, NotHitBy]
type = NotHitBy
trigger1 = time <= 40
value = SCA,NA,SA,HA,NP,SP,HP

;Super Cancel Effect
[State 1000, Explod]
type = Explod
triggerall = time = 0
trigger1 = prevstateno = [1000,1999]
anim = f7500
pos = 0,75
postype = left
removetime = -2
bindtime = 1
pausemove = 1
supermove = 1
sprpriority = 9
ownpal = 1

[State 1000, Explod]
type = Explod
triggerall = time = 0
trigger1 = prevstateno = [1000,1999]
anim = f7510
pos = 0,73
postype = left
removetime = -2
bindtime = 1
pausemove = 1
supermove = 1
sprpriority = 9
ownpal = 1

[State 1000, Explod]
type = Explod
triggerall = time = 0
trigger1 = prevstateno = [1000,1999]
anim = f7510
pos = 0,150
postype = left
removetime = -2
bindtime = 1
pausemove = 1
supermove = 1
sprpriority = 9
ownpal = 1
vel = 0.7,0

[State 1000, Explod]
type = Explod
triggerall = time = 0
trigger1 = prevstateno = [1000,1999]
anim = f7510
pos = 80,190
postype = left
removetime = -2
bindtime = 1
pausemove = 1
supermove = 1
sprpriority = 9
ownpal = 1
vel = 0.7,0

[State 1000, Explod]
type = Explod
triggerall = time = 0
trigger1 = prevstateno = [1000,1999]
anim = f7510
pos = 120,70
postype = left
removetime = -2
bindtime = 1
pausemove = 1
supermove = 1
sprpriority = 9
ownpal = 1
vel = 2.2,0

[State 1000, Explod]
type = Explod
triggerall = time = 0
trigger1 = prevstateno = [1000,1999]
anim = f7510
pos = 150,160
postype = left
removetime = -2
bindtime = 1
pausemove = 1
supermove = 1
sprpriority = 9
ownpal = 1
vel = 2.2,0

[State 2100]
type = Explod
trigger1 = time = 0
anim = f100
pos = 21,-83
Postype = p1
sprpriority = -3
ownpal = 1
bindtime = 1
supermove = 1

[State 2100]
type = Explod
trigger1 = time = 0
anim = f101
pos = 21,-83
Postype = p1
sprpriority = 20
ownpal = 1
bindtime = 1
supermove = 1

[State 1700, 3]
type = PlaySnd
trigger1 = AnimElem = 1
value = 17000,0

[State 4000, BGPalFX]
type = BGPalFX
trigger1 = 1
time = 2
mul = 900,900,900
add = -250,-250,-250
ignorehitpause = 1

[State 3000,ºÚÉ«µ×É«]
type = Envcolor
trigger1 = 1
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 40
under = 1
supermove = 1


[State 4009, 1]
type = playsnd
trigger1 = time = 75
value = 59,0

[State 4009, 1A]
type = PlaySnd
trigger1 = Time = 0
value = 56, 2

[State 4009, 1A]
type = PlaySnd
trigger1 = Time = 55
value = 60, 0



[State 2012, 2]
type = Projectile
trigger1 = AnimElem = 15
ProjID = 4013
projanim = 4013
projhitanim = 4014
projremanim = 1002
projcancelanim = 1002
projhits = 4
velocity = 8,0
offset = 95,-106
attr = S,HP
hitflag = MAF        ;HLAFD+-
guardflag = MA         ;HLA
animtype = hard
priority = 4,Hit   ;Hit,Miss,Dodge
damage = 75,7
pausetime = 4,24
sparkno = 2
guard.sparkno = S30040
sparkxy = 50,15
hitsound = S53,1
guardsound = 6,0
ground.type = Low
ground.slidetime = 8
ground.hittime  = 8
ground.velocity = -2,-0.1
air.velocity = -2,-0.8
fall = 1
air.fall = 1
getpower = 1
envshake.time = 5
envshake.freq = 60
envshake.ampl = 1
palfx.time = 32
palfx.add = 100,-30,-120
palfx.sinadd = 40,30,0,10
palfx.color = 0
palfx.invertall = 1

[State 2012, 3]
type = Explod
trigger1 = animelem = 12
anim = 2009
pos = 70,-85
ontop = 1
postype = p1
;bindtime = -1
persistent = 0
;removetime = 84
ignorehitpause = 1
ownpal = 1
trans=addalpha
alpha=192,256

[State 2012, Fire]
type = Explod
triggerall = movehit
trigger1 = 7
anim = 2011
pos = -10,-50
ontop = 1
postype = p2
bindtime = -1
persistent = 0
;removetime = 84
ignorehitpause = 1
ownpal = 1
trans = addalpha
alpha = 192,256

[State 2012, 2]
type = ctrlset
trigger1 = time = 108
value = 1

[State 2012, 3]
type = ChangeState
;trigger1 = time = 72
trigger1 = time = 108
value = 0





;---------------------------------------------------------------------------
;Throw - Attempt
; CNS difficulty: medium-advanced
; Description: Throws are not difficult to make, although then can be
;     tedious at times. Throw attempt states have a HitDef of a
;     special format. The key parameters in a throw are p1stateno
;     and p2stateno. If the HitDef successfully connects, then
;     the attacker will change to the state number specified by
;     p1stateno, and the opponent will be change to the state
;     number assigned to p2stateno. The special thing about p2stateno
;     is that the opponent will be temporarily brought into the
;     attacker's state file. In this case, no matter who the
;     opponent is, he will be taken to state 820 of this file (kfm.cns)
;     and remain here until the end of the throw (look at his debug
;     information when he is being thrown; the text changes to yellow
;     to mean that he is in another player's state file).
[Statedef 800]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = 800
sprpriority = 2

; Notes: The '-' symbol in the hitflag field means that it only affects
;   players who are not in a hit state. This prevents KFM from combo-ing
;   into the throw. The priority should be set to a low number, such as
;   1 or 2, so that the throw does not take precedence over normal attacks.
;   The type of priority must always be set to "Miss" or "Dodge" for throws,
;   otherwise strange behavior can result.
[State 800, 1]
type = HitDef
Trigger1 = Time = 0
attr = S, NT          ;Attributes: Standing, Normal Throw
hitflag = M-          ;Affect only ground people who are not being hit
priority = 1, Miss    ;Throw has low priority, must be miss or dodge type.
sparkno = -1          ;No spark
p1sprpriority = 1     ;Draw p1's sprite in front of p2
                      ;p2's sprite priority is set to 0 by default
p1facing = 1
p2facing = 1          ;Force p2 to face KFM
p1stateno = 810       ;On success, KFM changes to state 810
p2stateno = 820       ;If hit, p2 changes to state 820 in KFM's cns
guard.dist = 0        ;This prevents p2 from going into a guard state if close
fall = 1              ;Force p2 into falling down

[State 800, 2]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Throw - Throwing the opponent
; Description: In this state, KFM throws the opponent by binding him to
;     various offsets based on his current frame of animation. For
;     example, [State 810, Bind 1] binds the opponent to an offset of
;     28 pixels in front of KFM. That puts him around where KFM's hand
;     is at. Is is important to keep the opponent bound using a
;     TargetBind controller at all times, until you let him go. This
;     is especially important if your player has a Clsn2 box that
;     allows him to get hit while throwing someone. Each time a player
;     gets hit, all his bound targets will be set to a fall state. If
;     the opponent is not bound, then he may get stuck in his thrown
;     state when his attacker is knocked out of the throw halfway.
; Notes: There is a TargetLifeAdd controller to decrease the opponent's
;     life, and a TargetState controller to change his state to a
;     falling state when KFM lets go of him.
[Statedef 810]
type    = S
movetype= A
physics = N
anim = 810
poweradd = 0

; Here a variable, var(2), is used to remember whether or not the
; player was holding forward at the start of the state. This variable
; is checked later on to turn KFM around if necessary.
[State 810, Holding fwd?]
type = VarSet
trigger1 = Time = 0
var(2) = command = "holdfwd"

[State 810, Grab Sound]
type = PlaySnd
trigger1 = AnimElem = 4
value = 61, 0

[State 810, Throw Sound]
type = PlaySnd
trigger1 = AnimElem = 11
value = 54, 0

[State 810, Bind 1]
type = TargetBind
trigger1 = AnimElemTime(2) < 0
pos = 36.333, 0

[State 810, Width 2-11]
type = Width
trigger1 = AnimElemTime(2) >= 0 && AnimElemTime(12) < 0
edge = 60,0

[State 810, Bind 2-4]
type = TargetBind
trigger1 = AnimElemTime(2) >= 0 && AnimElemTime(5) < 0
pos = 33.000, 0

[State 810, Bind 5]
type = TargetBind
trigger1 = AnimElemTime(5) >= 0 && AnimElemTime(6) < 0
pos = 41.667, 0

;[State 810, holdfwd - Turn 6] ;If was holding fwd before, turn now
;type = Turn
;trigger1 = var(2)
;trigger1 = AnimElem = 6

;[State 810, holdfwd - Pos 6] ;If was holding fwd before, move a little
;type = PosAdd
;trigger1 = var(2)
;trigger1 = AnimElem = 6
;x = -37

[State 810, holdfwd - Turn Target 6] ;If was holding fwd before, turn target too
type = TargetFacing
trigger1 = var(2)
trigger1 = AnimElem = 6
value = -1

[State 810, Bind 6]
type = TargetBind
trigger1 = AnimElemTime(6) >= 0 && AnimElemTime(7) < 0
pos = 51.667, 0

[State 810, Bind 7]
type = TargetBind
trigger1 = AnimElemTime(7) >= 0 && AnimElemTime(8) < 0
pos = 52, 0.667

[State 810, Bind 8]
type = TargetBind
trigger1 = AnimElemTime(8) >= 0 && AnimElemTime(9) < 0
pos = 49, 0

[State 810, Bind 9]
type = TargetBind
trigger1 = AnimElemTime(9) >= 0 && AnimElemTime(10) < 0
pos = -1.667, -116.667

[State 810, Bind 10]
type = TargetBind
trigger1 = AnimElemTime(10) >= 0 && AnimElemTime(11) < 0
pos = -2.333, -100.000

[State 810, Bind 11]
type = TargetBind
trigger1 = AnimElemTime(11) >= 0 && AnimElemTime(12) < 0
pos = -85.000, -98.000

[State 810, Hurt 11]
type = TargetLifeAdd
trigger1 = AnimElem = 12
value = -78

[State 810, Throw 11]
type = TargetState
trigger1 = AnimElem = 12
value = 5110

[State 810, Bind 12]
type = TargetBind
trigger1 = AnimElem = 12
pos = -71.667, -2.000

[State 810, Envshake]
type = EnvShake
trigger1 = AnimElem = 11
freq = 120
time = 20


;[State 810, Turn 12]
;type = Turn
;trigger1 = AnimElem = 12

[State 810, Pos 15]
type = PosAdd
trigger1 = AnimElem = 15
x = -10

[State 810, State End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Thrown by Kung Fu Throw
; (a custom gethit state)
; Description: This is the state that the opponent changes to after being
;     hit by KFM's throw HitDef. The important thing here is to use a
;     ChangeAnim2 controller. The difference between ChangeAnim2 and
;     ChangeAnim is that ChangeAnim2 changes the player's animation to
;     an action in the AIR file of the attacker (in this case, kfm.air),
;     whereas ChangeAnim always changes the player to an action in his
;     own AIR file. Look at Action 820 in kfm.air for some extra
;     comments.
[Statedef 820]
type    = A
movetype= H
physics = N
velset = 0,0

[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 820

;In case attacker loses binding on player for any reason, this controller
;guarantees that the player will never get stuck in this thrown state.
[State 820, 2]
type = SelfState
trigger1 = !gethitvar(isbound)
value = 5050

;---------------------------------------------------------------------------
;Penance Stare Attempt
; (a custom gethit state)
; Description: This state has the opponent flying through the air and
;     falling down onto the ground. The SelfState controller sets the
;     opponent back using to his own state file when he his the ground.
;     Controllers 821,2 and 821,3 allow the opponent to recover by
;     hitting his recovery command when he is falling.
[Statedef 4018]
type    = S
movetype= A
physics = S
poweradd = -3000
velset = 0,0
anim = 4018
ctrl = 0
sprpriority = 2



[State 2000, 2]
type = SuperPause
trigger1 = AnimElem = 1
time = 40
;movetime = 20
anim = -1

[State 1700, 3]
type = PlaySnd
trigger1 = animelem = 1
value = 17000,2

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay
flag2 = nobg
flag3 = nofg

[State 210, Hyper bg Explod]
type = Explod
trigger1 = !time
removetime = 109
id =6090
anim = 16090
pos = 0,0
postype = Left
sprpriority = -4
facing = 1
vfacing = 1
ownpal = 1
bindtime = -1
ontop = 0
ownpal = 1
supermove = 1
pausemove = 1
removeongethit = 1
ignorehitpause = 1
persistent = 1
supermovetime = 9999
pausemovetime =  9999
scale = .5,.5

[State 1050, NotHitBy]
type = NotHitBy
trigger1 = time <= 40
value = SCA,NA,SA,HA,NP,SP,HP

;Super Cancel Effect
[State 1000, Explod]
type = Explod
triggerall = time = 0
trigger1 = prevstateno = [1000,1999]
anim = f7500
pos = 0,75
postype = left
removetime = -2
bindtime = 1
pausemove = 1
supermove = 1
sprpriority = 9
ownpal = 1

[State 1000, Explod]
type = Explod
triggerall = time = 0
trigger1 = prevstateno = [1000,1999]
anim = f7510
pos = 0,73
postype = left
removetime = -2
bindtime = 1
pausemove = 1
supermove = 1
sprpriority = 9
ownpal = 1

[State 1000, Explod]
type = Explod
triggerall = time = 0
trigger1 = prevstateno = [1000,1999]
anim = f7510
pos = 0,150
postype = left
removetime = -2
bindtime = 1
pausemove = 1
supermove = 1
sprpriority = 9
ownpal = 1
vel = 0.7,0

[State 1000, Explod]
type = Explod
triggerall = time = 0
trigger1 = prevstateno = [1000,1999]
anim = f7510
pos = 80,190
postype = left
removetime = -2
bindtime = 1
pausemove = 1
supermove = 1
sprpriority = 9
ownpal = 1
vel = 0.7,0

[State 1000, Explod]
type = Explod
triggerall = time = 0
trigger1 = prevstateno = [1000,1999]
anim = f7510
pos = 120,70
postype = left
removetime = -2
bindtime = 1
pausemove = 1
supermove = 1
sprpriority = 9
ownpal = 1
vel = 2.2,0

[State 1000, Explod]
type = Explod
triggerall = time = 0
trigger1 = prevstateno = [1000,1999]
anim = f7510
pos = 150,160
postype = left
removetime = -2
bindtime = 1
pausemove = 1
supermove = 1
sprpriority = 9
ownpal = 1
vel = 2.2,0

;Dream Cancel Effect
[State 1000, Explod]
type = Explod
triggerall = time = 0
trigger1 = prevstateno = 2050
anim = f7530
pos = 0,75
postype = left
removetime = -2
bindtime = 1
pausemove = 1
supermove = 1
sprpriority = 9
ownpal = 1

[State 1000, Explod]
type = Explod
triggerall = time = 0
trigger1 = prevstateno = 2050
anim = f7535
pos = 0,73
postype = left
removetime = -2
bindtime = 1
pausemove = 1
supermove = 1
sprpriority = 9
ownpal = 1

[State 1000, Explod]
type = Explod
triggerall = time = 0
trigger1 = prevstateno = 2050
anim = f7535
pos = 0,150
postype = left
removetime = -2
bindtime = 1
pausemove = 1
supermove = 1
sprpriority = 9
ownpal = 1
vel = 0.7,0

[State 1000, Explod]
type = Explod
triggerall = time = 0
trigger1 = prevstateno = 2050
anim = f7535
pos = 80,190
postype = left
removetime = -2
bindtime = 1
pausemove = 1
supermove = 1
sprpriority = 9
ownpal = 1
vel = 0.7,0

[State 1000, Explod]
type = Explod
triggerall = time = 0
trigger1 = prevstateno = 2050
anim = f7535
pos = 120,70
postype = left
removetime = -2
bindtime = 1
pausemove = 1
supermove = 1
sprpriority = 9
ownpal = 1
vel = 2.2,0

[State 1000, Explod]
type = Explod
triggerall = time = 0
trigger1 = prevstateno = 2050
anim = f7535
pos = 150,160
postype = left
removetime = -2
bindtime = 1
pausemove = 1
supermove = 1
sprpriority = 9
ownpal = 1
vel = 2.2,0

[State 2100]
type = Explod
trigger1 = time = 0
anim = f104
pos = -2,-76
Postype = p1
sprpriority = -3
ownpal = 1
bindtime = 1
supermove = 1

[State 2100]
type = Explod
trigger1 = time = 0
anim = f105
pos = -2,-76
Postype = p1
sprpriority = 20
ownpal = 1
bindtime = 1
supermove = 1

[State 4000, BGPalFX]
type = BGPalFX
trigger1 = 1
time = 2
mul = 900,900,900
add = -250,-250,-250
ignorehitpause = 1

[State 3000,ºÚÉ«µ×É«]
type = Envcolor
trigger1 = 1
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 40
under = 1
supermove = 1


[State 4018, 1]
type = HitDef
trigger1 = time = 0
attr = S, NT                     ;Attribute: Standing, Normal Attack
hitflag = M-                    ;Flags of conditions that move can hit
priority = 1, miss                ;Attack priority: 0 (least) to 7 (most), 4 default
sparkno = -1
p1sprpriority = 1
p1facing = 1
p2facing = 1
p1stateno = 4015
p2stateno = 4019
guard.dist = 0
fall = 1

[State 4018, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1
 
;------------------------------------------------------------------------
; Penance Stare Success
[Statedef 4015]
type = S
movetype = A
physics = N
velset = 0,0
anim = 4015
ctrl = 0
sprpriority = 2

;[State 4015, Pause]
;type = Pause
;trigger1 = (gametime%2)
;time = 20

[State 4000, BGPalFX]
type = BGPalFX
trigger1 = 1
time = 2
mul = 900,900,900
add = -250,-250,-250
ignorehitpause = 1

[State 3000,ºÚÉ«µ×É«]
type = Envcolor
trigger1 = 1
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 40
under = 1
supermove = 1

[State 4000, a9] ;bgscreen 1 (Back Ground)
type = Explod
trigger1 = animelem = 23
anim = 4016
id= 4016
ownpal = 1
pos = 0,0
postype = back
;facing = 1
supermovetime = 999999
pausemovetime = 999999
sprpriority = -19
bindtime = -1
scale = 1,1.1
removeongethit = 1
removetime =  240

[State 4000, a9] ;bgscreen 1 (Back Ground)
type = Explod
trigger1 = animelem = 23
anim = 4017
id= 4017
ownpal = 1
;pos = -143,150
pos = 23, -75
postype = P1
;facing = 1
supermovetime = 999999
pausemovetime = 999999
sprpriority = 19
bindtime = -1
scale = 1,1.1
removeongethit = 1
removetime =  240



;[State 4015, SuperPause]
;type = SuperPause
;triggerall = !Var(29)
;trigger1 = AnimElem = 1
;Time = 60
;anim =-1;s3012
;pos = 25,-65
;;sound = S8889,0
;;poweradd = -1000
;;movetime = 60

[State 220, Quake]
type = EnvShake
trigger1 = time = 121
ignorehitpause = 1
persistent = 0
time = 200
ampl = 1
freq = 200
phase = 90

[State 4015, Look into my Eyes]
type = PlaySnd
trigger1 = Time = 1
value = 64, 0 

[State 4015, Not so Amusing]
type = PlaySnd
trigger1 = Time = 448
value = 65, 0  


[State 4015, Hyper Sound]
type = PlaySnd
trigger1 = Time = 0
value = 56, 2

[State 4015, Burn]
type = PlaySnd
trigger1 = Time = 110
value = 68, 0
volumescale = 150
;channel = 1  

[State 4015, Souls]
type = PlaySnd
trigger1 = Time = 150
value = 66, 0
;channel = 2 

[State 4015, Souls]
type = PlaySnd
trigger1 = Time = 90
value = 69, 0
;volumescale = 20
;channel = 0

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 1
time = 5
pos = 46.000,-0.667

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 2
time = 5
pos = 46.000,-0.667

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 3
time = 6
pos = 47.333,-12.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 4
time = 6
pos = 47.333,-12.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 5
time = 6
pos = 47.333,-12.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 6
time = 6
pos = 47.333,-12.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 7
time = 6
pos = 47.333,-12.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 8
time = 6
pos = 47.333,-12.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 9
time = 5
pos = 56.667,-9.333

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 10
time = 5
pos = 60.000,-6.666

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 11
time = 5
pos = 48.000,-6.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 12
time = 5
pos = 48.000,-6.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 13
time = 5
pos = 48.000,-6.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 14
time = 5
pos = 48.000,-6.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 15
time = 5
pos = 48.000,-6.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 16
time = 5
pos = 48.000,-6.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 17
time = 5
pos = 48.000,-6.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 18
time = 5
pos = 48.000,-6.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 19
time = 5
pos = 48.000,-6.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 20
time = 5
pos = 48.000,-6.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 21
time = 5
pos = 48.000,-6.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 22
time = 5
pos = 48.000,-6.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 23
time = 5
pos = 46.000,-4.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 24
time = 5
pos = 48.000,-6.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 25
time = 5
pos = 46.000,-4.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 26
time = 5
pos = 48.000,-6.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 27
time = 5
pos = 46.000,-4.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 28
time = 5
pos = 48.000,-6.000


[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 29
time = 5
pos = 46.000,-4.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 30
time = 5
pos = 48.000,-6.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 31
time = 5
pos = 46.000,-4.000


[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 32
time = 5
pos = 48.000,-6.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 33
time = 5
pos = 46.000,-4.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 34
time = 5
pos = 48.000,-6.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 35
time = 5
pos = 46.000,-4.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 36
time = 5
pos = 48.000,-6.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 37
time = 5
pos = 46.000,-4.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 38
time = 5
pos = 48.000,-6.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 39
time = 5
pos = 46.000,-4.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 40
time = 5
pos = 48.000,-6.000


[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 41
time = 5
pos = 46.000,-4.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 42
time = 5
pos = 48.000,-6.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 43
time = 5
pos = 46.000,-4.000


[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 44
time = 5
pos = 48.000,-6.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 45
time = 5
pos = 46.000,-4.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 46
time = 5
pos = 48.000,-6.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 47
time = 5
pos = 46.000,-4.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 48
time = 5
pos = 48.000,-6.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 49
time = 5
pos = 46.000,-4.000


[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 50
time = 5
pos = 48.000,-6.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 51
time = 5
pos = 46.000,-4.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 52
time = 5
pos = 48.000,-6.000


[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 53
time = 5
pos = 46.000,-4.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 54
time = 5
pos = 48.000,-6.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 55
time = 5
pos = 46.000,-4.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 56
time = 5
pos = 48.000,-6.000


[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 57
time = 5
pos = 46.000,-4.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 58
time = 5
pos = 48.000,-6.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 59
time = 5
pos = 46.000,-4.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 60
time = 5
pos = 48.000,-6.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 61
time = 5
pos = 46.000,-4.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 62
time = 5
pos = 48.000,-6.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 63
time = 5
pos = 46.000,-4.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 64
time = 5
pos = 48.000,-6.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 65
time = 5
pos = 46.000,-4.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 66
time = 5
pos = 48.000,-6.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 67
time = 5
pos = 46.000,-4.000


[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 68
time = 5
pos = 48.000,-6.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 69
time = 5
pos = 46.000,-4.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 70
time = 5
pos = 48.000,-6.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 71
time = 5
pos = 60.000,-6.666

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 72
time = 5
pos = 56.667,-9.333

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 73
time = 7
pos = 30.333,-14.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 74
time = 7
pos = 30.333,-14.000


[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 75
time = 7
pos = 30.333,-14.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 76
time = 7
pos = 30.333,-14.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 77
time = 7
pos = 30.333,-14.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 78
time = 7
pos = 30.333,-14.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 79
time = 7
pos = 30.333,-14.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 80
time = 7
pos = 30.333,-14.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 81
time = 7
pos = 30.333,-14.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 82
time = 7
pos = 30.333,-14.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 83
time = 7
pos = 30.333,-14.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 84
time = 7
pos = 30.333,-14.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 85
time = 6
pos = 30.333,-14.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 86
time = 6
pos = 30.333,-14.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 87
time = 6
pos = 30.333,-14.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 88
time = 6
pos = 30.333,-14.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 89
time = 6
pos = 30.333,-14.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 90
time = 6
pos = 30.333,-14.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 91
time = 6
pos = 30.333,-14.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 92
time = 6
pos = 30.333,-14.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 93
time = 6
pos = 30.333,-14.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 94
time = 6
pos = 30.333,-14.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 95
time = 6
pos = 30.333,-14.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 96
time = 6
pos = 30.333,-14.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 97
time = 6
pos = 30.333,-14.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 98
time = 6
pos = 30.333,-14.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 99
time = 6
pos = 30.333,-14.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 100
time = 6
pos = 30.333,-14.000


[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 101
time = 6
pos = 30.333,-14.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 102
time = 6
pos = 30.333,-14.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 103
time = 6
pos = 30.333,-14.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 104
time = 6
pos = 30.333,-14.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 105
time = 6
pos = 30.333,-14.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 106
time = 6
pos = 30.333,-14.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 107
time = 6
pos = 30.333,-14.000


[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 108
time = 6
pos = 30.333,-14.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 109
time = 6
pos = 30.333,-14.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 110
time = 6
pos = 30.333,-14.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 111
time = 6
pos = 30.333,-14.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 112
time = 6
pos = 30.333,-14.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 113
time = 6
pos = 30.333,-14.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 114
time = 6
pos = 30.333,-14.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 115
time = 6
pos = 30.333,-14.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 116
time = 6
pos = 30.333,-14.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 117
time = 4
pos = 32.000,-10.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 118
time = 5
pos = 33.333,-4.000

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 119
time = 3
pos = 60.666,-6.667

[State 4015, TargetBind]
type = TargetBind
trigger1 = animelem = 120
time = 4
pos = 68.666,-21.334

;[State 4015, TargetBind]
;type = TargetBind
;trigger1 = animelem = 121
;time = 4
;pos = 87.999,-22.000

;[State 4015, TargetBind]
;type = TargetBind
;trigger1 = animelem = 122
;time = 4
;pos = 109.333,-22.000

;[State 4015, TargetBind]
;type = TargetBind
;trigger1 = animelem = 123
;time = 4
;pos = 127.333,-22.000

;[State 4015, TargetBind]
;type = TargetBind
;trigger1 = animelem = 124
;time = 4
;pos = 141.333,-22.000

[State 4015, Hurt]
type = TargetLifeAdd
trigger1 = AnimElem = 69
value = -500

[State 4015, Punch End]
type = PlaySnd
trigger1 = animelem = 120
value = 0, 1


[State 4015, 3]
type = HitDef
trigger1 = AnimElem = 121
attr = S, NA
animtype  = hard
damage    = 170
guardflag = H
pausetime = 0,0
sparkno = 2;S2010
guard.sparkno = S30040
sparkxy = -20,-90
guardsound = 6,0
hitsound = S0,2
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -16,-7
guard.velocity = -7
air.velocity = -8,-7
airguard.velocity = -5, -4
fall.envshake.time = 7
fall.envshake.ampl = -4
envshake.time = 10
envshake.freq = 127
envshake.ampl = -4
fall = 1
p2stateno = 1025    ;Make p2 go to state 1025 on hit
p2facing = 1        ;Force to face p1
palfx.time = 15
palfx.add = 255,125,0
palfx.sinadd = 40,40,0,0
palfx.color = 0
envshake.time = 12
envshake.ampl = 4
envshake.freq = 90


[State 4015, TargetState]
type = TargetState
trigger1 = animelem = 120
value = 0

[State 4008, 31]
type = ChangeState
trigger1 = animelem = 124
value = 0
ctrl = 1




;------------------------------------------------------------------------
; Penance Stare Player 2
[statedef 4019]
type = A
movetype = H
physics = N
velset = 0,0
ctrl = 0
sprpriority = -1

[State 4019, changeanim2]
type = changeanim2
trigger1 = time = 0
value = 4019  






;---------------------------------------------------------------------------
; Kung Fu Palm
; CNS difficulty: medium
; Description: This is like a standard attack, but with some differences.
;   There are two HitDefs in this attack. One is triggered when the
;   opponent is near (using a p2bodydist trigger), and the other
;   when the opponent is farther away. The main differences between
;   the near and far versions of the HitDefs is that the near version
;   has a "fall" parameter set to 1, causing the opponent to be knocked
;   down. Other minor differences are the damage, and the velocity to
;   give the opponent.
;   The line "attr = S, SA" line means this is a Standing, Special Attack.
;   It is important you have the attr parameter set correctly for all
;   you HitDefs.
[Statedef 1000]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 55
velset = 0,0
anim = 1000
ctrl = 0
sprpriority = 2

[State 1000, 1]
type = PlaySnd
trigger1 = Time = 8
value = 0, 3

[State 1000, 2]
type = PosAdd
trigger1 = AnimElem = 2
x = 20

[State 1000, 3]
type = PosAdd
trigger1 = AnimElem = 3
trigger2 = AnimElem = 13
x = 10

[State 1000, 4]
type = PosAdd
trigger1 = AnimElem = 5
x = 5

[State 1000, 5] ;Opponent near
type = HitDef
trigger1 = AnimElem = 5
trigger1 = p2bodydist X < 40
attr = S, SA
animtype  = Hard
damage    = 90, 4
priority  = 5
guardflag = MA
pausetime = 15,15
sparkxy = -10,-60
hitsound   = 5,4
guardsound = 6,0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 17
ground.velocity = -4,-3.5
air.velocity = -4,-3
fall = 1

[State 1000, 6] ;Opponent not near
type = HitDef
trigger1 = AnimElem = 5
trigger1 = p2bodydist X >= 40
attr = S, SA
animtype  = Hard
damage    = 85, 4
priority  = 4
guardflag = MA
pausetime = 15,15
sparkxy = -10,-60
hitsound   = 5,4
guardsound = 6,0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 17
ground.velocity = -7
air.velocity = -4,-2.5

[State 1000, 6]
type = PosAdd
trigger1 = AnimElem = 9
x = -5

[State 1000, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Strong Kung Fu Palm
; CNS difficulty: medium
[Statedef 1010]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 60
velset = 0,0
anim = 1010
ctrl = 0
sprpriority = 2

[State 1010, 1]
type = PlaySnd
trigger1 = Time = 9
value = 0, 3

[State 1010, 2]
type = PosAdd
trigger1 = AnimElem = 2
x = 20

[State 1010, 3]
type = PosAdd
trigger1 = AnimElem = 3
trigger2 = AnimElem = 13
x = 10

[State 1010, 4]
type = PosAdd
trigger1 = AnimElem = 5
x = 5

[State 1010, 5]
type = VelSet
trigger1 = AnimElem = 5
x = 4

[State 1010, 6] ;Opponent near
type = HitDef
trigger1 = AnimElem = 5
trigger1 = p2bodydist X < 40
attr = S, SA
animtype  = Hard
damage    = 90, 4
priority  = 5
guardflag = MA
pausetime = 15,15
sparkxy = -10,-60
hitsound   = 5,4
guardsound = 6,0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 17
ground.velocity = -4,-3.5
air.velocity = -4,-3
fall = 1

[State 1010, 7] ;Opponent not near
type = HitDef
trigger1 = AnimElem = 5
trigger1 = p2bodydist X >= 40
attr = S, SA
animtype  = Hard
damage    = 85, 4
priority  = 4
guardflag = MA
pausetime = 15,15
sparkxy = -10,-60
hitsound   = 5,4
guardsound = 6,0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 17
ground.velocity = -7
air.velocity = -4,-2.5

[State 1010, 8]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Fast Kung Fu Palm
; CNS difficulty: advanced
; Description: This is a complicated attack move. If you're a beginner,
;     you should skip looking at this for now and check it later when
;     you are more comfortable with the cns.
;     This move puts the other player in a custom get-hit state.
;     The line "p2stateno = 1025" in the HitDef does this. KFM has some
;     palette effects as well as after-image effects.
[Statedef 1020]
type    = S
movetype= A
physics = N
juggle  = 6
poweradd= -330
velset = 0,0
anim = 1020
ctrl = 0
sprpriority = 2

[State 1020, Friction]
type = VelMul
trigger1 = 1
x = .85 * ifelse (AnimElemTime(6) < 0, 1, .8)

[State 1020, Afterimage]
type = AfterImage
trigger1 = Time = 0
length = 13
PalBright   =  30, 30,  0
PalContrast =  70, 70, 20
PalAdd      = -10,-10,-10
PalMul      = .85,.85,.50
TimeGap  = 1
FrameGap = 2
Trans = Add
time = 2

[State 1020, Afterimage]
type = AfterImageTime
trigger1 = AnimElemTime(8) < 0
time = 2

[State 1020, Blink Yellow]
type = PalFX
trigger1 = Time = 0
time = 20
add = 32,16,0
sinadd = 64,32,5,3

[State 1020, 1]
type = PlaySnd
trigger1 = Time = 2
value = 0, 3

[State 1020, 2]
type = PosAdd
trigger1 = AnimElem = 2
x = 20

[State 1020, 3]
type = PosAdd
trigger1 = AnimElem = 3
trigger2 = AnimElem = 12
x = 10

[State 1020, 4]
type = PosAdd
trigger1 = AnimElem = 4
x = 5

[State 1020, 5]
type = VelSet
trigger1 = AnimElem = 4
x = 13

[State 1020, 6]
type = HitDef
trigger1 = AnimElem = 4
attr = S, SA
animtype  = Hard
damage    = 95, 5
getpower  = 0
priority  = 4
guardflag = MA
pausetime = 8,7
sparkxy = -10,-60
hitsound   = 5,4
guardsound = 6,0
ground.type = Low
ground.slidetime = 20
ground.hittime  = 22
ground.velocity = -8,-7
guard.velocity = -7
air.velocity = -8,-7
airguard.velocity = -5, -4
fall = 1
p2stateno = 1025    ;Make p2 go to state 1025 on hit
p2facing = 1        ;Force to face p1

[State 1020, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------
; Hit by Fast Kung Fu Palm - shaking from the hit
; (a custom gethit state)
; See State 1020 for details
[Statedef 1025]
type    = A
movetype= H
physics = N
velset = 0,0

[State 1025, Anim] ;Custom animation
type = ChangeAnim2
trigger1 = 1
value = 1025

[State 1025, State]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 1026

;------------------
; Hit by Fast Kung Fu Palm - flying through the air
; (a custom gethit state)
[Statedef 1026]
type    = A
movetype= H
physics = N

[State 1026, Velocity]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 1026, Gravity]
type = VelAdd
trigger1 = 1
y = .45

[State 1026, No scroll]
type = ScreenBound
triggerall = Pos y < -15
trigger1 = BackEdgeBodyDist < 65
trigger2 = FrontEdgeBodyDist < 65
value = 1
movecamera = 0,1

[State 1026, Hit wall]
type = ChangeState
triggerall = Pos y < -15
trigger1 = BackEdgeBodyDist <= 20
trigger2 = FrontEdgeBodyDist <= 20
value = 1027

[State 1026, Hit ground]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100

;------------------
; Hit by Fast Kung Fu Palm - hit wall
; (a custom gethit state)
[Statedef 1027]
type    = A
movetype= H
physics = N

[State 1027, Turn]
type = Turn
trigger1 = (Time = 0) && (FrontEdgeBodyDist <= 30)

[State 1027, Pos]
type = PosAdd
trigger1 = Time = 0
x = 15 - BackEdgeBodyDist

[State 1027, Stop moving]
type = PosFreeze
trigger1 = 1
x = 1
y = 1

[State 1027, No scroll]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,1

[State 1027, Spark]
type = Explod
trigger1 = Time = 0
anim = F72
pos = 0, floor (screenpos y) - 50
postype = back
sprpriority = 3

[State 1027, Anim]
type = ChangeAnim2
trigger1 = Time = 0
value = 1027

[State 1027, Sound]
type = PlaySnd
trigger1 = Time = 0
value = F7,0

[State 1027, State]
type = ChangeState
trigger1 = AnimTime = 0
value = 1028

;------------------
; Hit by Fast Kung Fu Palm - bounce off wall
; (a custom gethit state)
[Statedef 1028]
type    = A
movetype= H
physics = N

[State 1028, 1]
type = NotHitBy
trigger1 = 1
value = , NA, NP

[State 1028, Vel Y]
type = VelSet
trigger1 = Time = 0
y = -6

[State 1028, Vel X]
type = VelSet
trigger1 = Time = 0
x = 1.6

[State 1028, Turn]
type = Turn
trigger1 = (Time = 0) && (BackEdgeDist < 30)

[State 1028, Gravity]
type = VelAdd
trigger1 = 1
y = .35

[State 1028, Anim 5050] ;Self falling animation
type = ChangeAnim
trigger1 = Time = 0
trigger1 = !SelfAnimExist(5052)
value = 5050

[State 1028, Anim 5052] ;Self falling animation (diagup type)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5052)
value = 5052

[State 1028, Anim 5060] ;Coming down - normal
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5050
trigger1 = SelfAnimExist(5060)
persistent = 0
value = 5060

[State 1028, Anim 5062] ;Coming down - diagup type
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5052
trigger1 = SelfAnimExist(5062)
persistent = 0
value = 5062

[State 1028, Hit ground]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100

;---------------------------------------------------------------------------
; Kung Fu Knee
; CNS difficulty: medium
; Description: Like the Kung Fu Palm, this is a special attack. This attack
;     begins on the ground, launches KFM into the air, then ends when KFM
;     lands on the ground. To achieve this, we use three states. The first
;     has KFM starting on the ground (note that type = S in the Statedef).
;     The ChangeState controller brings KFM into the second state (state
;     1051) when his ground animation ends. The second state controls KFM's
;     movement into the air and back towards the ground. The last state
;     (state 1052) stops KFM from moving when he touches the ground, and
;     brings him back to his stand state (state 0) when the animation is
;     over. More details are given in comments before each of the following
;     states.
[Statedef 1050]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 55
velset = 0,0
anim = 1050
ctrl = 0
sprpriority = 2

[State 1050, 1]
type = PlaySnd
trigger1 = Time = 1
value = 0, 2

[State 1050, 2]
type = null;PosAdd
trigger1 = AnimElem = 2
x = 15

[State 1050, 3]
type = PosAdd
trigger1 = AnimElem = 4
x = 20

[State 1050, 4]
type = HitDef
trigger1 = Time = 0
attr = A, SA
animtype  = Medium
damage    = 80, 4
priority  = 5
guardflag = MA
pausetime = 12,12
sparkxy = -10,-70
hitsound   = 5,3
guardsound = 6,0
ground.type = Low
ground.slidetime = 20
ground.hittime  = 22
ground.velocity = -3.5,-7
guard.velocity = -7
air.velocity = -3.5,-7
fall = 1

[State 1050, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 1051

;------------------
; Light Kung Fu Knee - jump
; Description: This state uses a velset parameter in the Statedef to make
;     KFM move upwards. A value of 2,-6 means 2 pixels/tick forwards, and
;     6 pixels/tick upwards. Since this is an aerial state, the type is set
;     to A in the Statedef.
;     Notice that physics = N (N for None) here. This means we are not using
;     the built-in aerial physics model (physics = A), so we have complete
;     control over what KFM does in this state. Since we do not have
;     physics = A to take care of gravity for us, we need to put in our own
;     controller for that. Controller 1051,1 does the work of pulling KFM
;     down towards the ground. Controller 1051,2 checks if KFM has reached
;     the ground, and changes to state 1052 if so.
;     In this state's Statedef, we will use the hitdefpersist parameter to
;     retain the HitDef information from the last state. If we did not have
;     hitdefpersist, the HitDef will be turned off between state changes.
[Statedef 1051]
type    = A
movetype= A
physics = N
velset = 2,-6
anim = 1051
hitdefpersist = 1 ;Keep the HitDef from previous state active

[State 1051, 1] ;Gravity
type = VelAdd
trigger1 = 1
y = .45

[State 1051, 2]
type = ChangeState
trigger1 = Command = "a" || Command = "b"
trigger1 = Vel y < -1
value = 1055

[State 1051, 3] ;Change state when KFM is close to ground
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= -10
value = 1052

;------------------
; Light Kung Fu Knee - land
; Description: This is KFM's landing state. There is a velset in the
;     Statedef to stop KFM from moving. Since KFM's y-position can be any
;     number greater than -10 upon entering this state (see the ChangeState
;     controller in State 1051), we need to reset it to 0, the ground
;     level. That is what controller 1052,1 is for.
[Statedef 1052]
type    = S
movetype= I
physics = S
anim = 1052
sprpriority = 1
velset = 0,0

[State 1052, 1] ;Reset y-position to ground level
type = PosSet
trigger1 = Time = 0
y = 0

[State 1052, 2] ;Play a sound for landing
type = PlaySnd
trigger1 = Time = 0
value = 40, 0

[State 1052, 3] ;Give KFM back control early
type = CtrlSet
trigger1 = AnimElem = 3, -1
value = 1

[State 1052, 4] ;Move KFM back a little
type = PosAdd
trigger1 = AnimElem = 4
x = -15

[State 1052, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------
; Kung Fu Knee - kick
[Statedef 1055]
type    = A
movetype= A
physics = N
anim = 1055

[State 1055, 1]
type = PlaySnd
trigger1 = Time = 0
value = 100,0
channel = 0

[State 1055, 2]
type = PlaySnd
trigger1 = Time = 0
value = 0, 1

[State 1055, 3]
type = PosAdd
trigger1 = Time = 0
x = 10
y = -10

[State 1055, 4] ;Gravity
type = VelAdd
trigger1 = 1
y = .45

[State 1055, 5]
type = HitDef
trigger1 = Time = 0
attr = A, SA
animtype  = Med
damage    = 35 + (prevstateno = 1061)*5, 2
priority  = 4
guardflag = MA
pausetime = 12,12
sparkxy = 0,-90
hitsound   = 5,2
guardsound = 6,0
ground.type = High
ground.slidetime = 15
ground.hittime  = 18
ground.velocity = -6
guard.velocity = -8
guard.ctrltime = 12
air.velocity = -4,-5
airguard.velocity = -4,-4.5
air.fall = 1

[State 1055, 6] ;Change state when KFM is close to ground
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= -5
value = 1056

;------------------
; Kung Fu Knee - land from kick
[Statedef 1056]
type    = S
movetype= I
physics = S
anim = 1056
sprpriority = 1
velset = 0,0

[State 1056, 1] ;Reset y-position to ground level
type = PosSet
trigger1 = Time = 0
y = 0

[State 1056, 2] ;Play a sound for landing
type = PlaySnd
trigger1 = Time = 0
value = 40, 0

[State 1056, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Strong Kung Fu Knee
[Statedef 1060]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 60
velset = 0,0
anim = 1060
ctrl = 0
sprpriority = 2

[State 1060, 1]
type = PlaySnd
trigger1 = Time = 1
value = 0, 2

[State 1060, 2]
type = PosAdd
trigger1 = AnimElem = 2
x = 6

[State 1060, 3]
type = PosAdd
trigger1 = AnimElem = 4
x = 21

[State 1060, 4]
type = HitDef
trigger1 = Time = 0
attr = A, SA
animtype  = Medium
damage    = 90, 4
priority  = 5
guardflag = MA
pausetime = 12,12
sparkxy = -10,-70
hitsound   = 5,3
guardsound = 6,0
ground.type = Low
ground.slidetime = 20
ground.hittime  = 22
ground.velocity = -3.5,-7.5
guard.velocity = -7
air.velocity = -3.5,-7.5
fall = 1

[State 1060, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 1061

;------------------
; Strong Kung Fu Knee - jump
[Statedef 1061]
type    = A
movetype= A
physics = N
velset = 2.5,-7.5
anim = 1061
hitdefpersist = 1 ;Keep the HitDef from previous state active

[State 1061, 1]
type = VelAdd
trigger1 = 1
y = .45

[State 1061, 2]
type = ChangeState
trigger1 = Command = "a" || Command = "b"
trigger1 = Vel y < -1
value = 1055

[State 1061, 3]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= -10
value = 1052

;---------------------------------------------------------------------------
; Fast Kung Fu Knee
; Description: This version of the Kung Fu Knee hits up to 3 times (including
;     the kick).
[Statedef 1070]
type    = S
movetype= A
physics = S
juggle  = 6
poweradd= -330
velset = 0,0
anim = 1070
ctrl = 0
sprpriority = 2

[State 1070, Afterimage]
type = AfterImage
trigger1 = Time = 0
length = 13
PalBright   =  30, 30,  0
PalContrast =  70, 70, 20
PalAdd      = -10,-10,-10
PalMul      = .85,.85,.50
TimeGap  = 1
FrameGap = 2
Trans = Add
time = 2

[State 1070, Afterimage]
type = AfterImageTime
trigger1 = 1
time = 2

[State 1070, Blink Yellow]
type = PalFX
trigger1 = Time = 0
time = 20
add = 32,16,0
sinadd = 64,32,5,3

[State 1070, 1]
type = PlaySnd
trigger1 = Time = 1
value = 0, 2

[State 1070, 2]
type = PosAdd
trigger1 = AnimElem = 2
x = 6

[State 1070, 3]
type = PosAdd
trigger1 = AnimElem = 4
x = 21

[State 1070, 4]
type = HitDef
trigger1 = Time = 0
attr = S, SA
animtype  = Medium
getpower  = 0
damage    = 35, 3
priority  = 5
hitflag   = MA
guardflag = MA
pausetime = 8,7
sparkxy = -10,-70
hitsound   = 5,2
guardsound = 6,0
ground.type = Low
ground.slidetime = 18
ground.hittime  = 20
ground.velocity = -2,-6
guard.velocity = -7
air.velocity = -2,-6
fall = 1
fall.animtype = Med
fall.recovertime = 30

[State 1070, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 1071

;------------------
; Fast Kung Fu Knee - jump
[Statedef 1071]
type    = A
movetype= A
physics = N
velset = 2.5,-9
anim = 1071

[State 1071, Blink Yellow]
type = PalFX
trigger1 = Time = 0
time = 18
add = 32,16,0
sinadd = 64,32,5,3

[State 1071, Afterimage]
type = AfterImageTime
trigger1 = Vel Y < 0
time = 2

[State 1071, 1]
type = VelAdd
trigger1 = 1
y = .5

[State 1071, 2]
type = VelAdd
trigger1 = Vel Y >= -1
y = .2

[State 1071, 3]
type = HitDef
trigger1 = Time = 0
attr = A, SA
animtype  = Medium
getpower  = 0
damage    = 68, 4
priority  = 5
guardflag = MA
pausetime = 12,12
sparkxy = -10,-70
hitsound   = 5,3
guardsound = 6,0
ground.type = Low
ground.slidetime = 18
ground.hittime  = 20
ground.velocity = -3,-9.5
guard.velocity = -7
air.velocity = -3,-9.5
fall = 1
fall.recovertime = 30

[State 1071, 4]
type = ChangeState
trigger1 = Command = "a" || Command = "b"
trigger1 = Vel y < -1
trigger1 = Time > 0
value = 1075

[State 1071, 5]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= -10
value = 1052

;------------------
; Fast Kung Fu Knee - kick
[Statedef 1075]
type    = A
movetype= A
physics = N
anim = 1055

[State 1075, Afterimage]
type = AfterImageTime
trigger1 = 1
time = 2

[State 1075, Blink Yellow]
type = PalFX
trigger1 = Time = 0
time = 20
add = 32,16,0
sinadd = 64,32,5,3

[State 1075, 1]
type = PlaySnd
trigger1 = Time = 0
value = 100,0
channel = 0

[State 1075, 2]
type = PlaySnd
trigger1 = Time = 0
value = 0, 1

[State 1075, 3]
type = PosAdd
trigger1 = Time = 0
x = 10
y = -10

[State 1075, 4] ;Gravity
type = VelAdd
trigger1 = 1
y = .45

[State 1075, 5]
type = VelAdd
trigger1 = Vel Y >= -1
y = .2

[State 1075, 6]
type = HitDef
trigger1 = Time = 0
attr = A, SA
animtype  = Med
damage    = 42, 2
getpower  = 0
priority  = 4
guardflag = MA
pausetime = 12,12
sparkxy = 0,-90
hitsound   = 5,2
guardsound = 6,0
ground.type = High
ground.slidetime = 15
ground.hittime  = 20
ground.velocity = -6
guard.velocity = -6
air.velocity = -4,-6
airguard.velocity = -4,-4.5
air.fall = 1

[State 1075, 7] ;Change state when KFM is close to ground
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= -5
value = 1056


;---------------------------------------------------------------------------
; Light Kung Fu Upper
; CNS difficulty: easy
; Description: This is a simple special attack that can hit twice. Notice
;     the use of the Width controller to keep opponents from getting too
;     close to KFM during his uppercut (press Ctrl-C, and look at the
;     yellow bar at KFM's feet during the move).
;     The second HitDef has some interesting parameters. fall.recovertime
;     is used to prevent the opponent (p2) from recovering immediately
;     after being hit (eg. press x+y with KFM to recover). This gives the
;     attacking KFM a chance to follow up with an extra attack, such as
;     a Kung Fu Knee. The yaccel parameter, set at 0.4, makes p2 fall at a
;     greater value of acceleration than the default, which is 0.35.
[Statedef 1100]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 55
velset = 0,0
anim = 1100
ctrl = 0
sprpriority = 2

[State 1100, Width]
type = Width
trigger1 = AnimElemTime(4) >= 0 && AnimElemTime(13) < 0
value = 5,0

[State 1100, 1]
type = PlaySnd
trigger1 = AnimElem = 4
value = 0, 2

[State 1100, 2]
type = HitDef
trigger1 = Time = 0
attr = S, SA
animtype  = Med
damage    = 52, 4
priority  = 5
guardflag = MA
pausetime = 4,8
sparkxy = 0,-48
hitsound   = 5,2
guardsound = 6,0
ground.type = Low
ground.slidetime = 15
ground.hittime  = 20
ground.velocity = -3
guard.velocity = -6
air.velocity = -2,-2
airguard.velocity = -4,-4.5
p2facing = 1
forcestand = 1         ;Force p2 into a standing state if hit

[State 1100, 3]
type = HitDef
trigger1 = AnimElem = 7
attr = S, SA
animtype  = Up
damage    = 55, 4
priority  = 5
guardflag = MA
pausetime = 12,12
sparkxy = 0,-110
hitsound   = 5,2
guardsound = 6,0
ground.type = Low
ground.slidetime = 15
ground.hittime  = 20
ground.velocity = -1,-9.5
guard.velocity = -6
air.velocity = -1,-7.5
airguard.velocity = -4,-4.5
p2facing = 1
fall = 1                   ;Make p2 fall down
fall.recovertime = 40      ;40 ticks before p2 can recover from fall
yaccel = .4                ;p2 will accelerate down at .4 pixels/sec^2 when falling

[State 1100, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Strong Kung Fu Upper
[Statedef 1110]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 60
velset = 0,0
anim = 1110
ctrl = 0
sprpriority = 2

[State 1110, Width]
type = Width
trigger1 = AnimElemTime(4) >= 0 && AnimElemTime(14) < 0
value = 5,0

[State 1110, 1]
type = PlaySnd
trigger1 = AnimElem = 4
value = 0, 2

[State 1110, 2]
type = HitDef
trigger1 = Time = 0
attr = S, SA
animtype  = Med
damage    = 57, 4
priority  = 5
guardflag = MA
pausetime = 4,8
sparkxy = 0,-48
hitsound   = 5,2
guardsound = 6,0
ground.type = Low
ground.slidetime = 15
ground.hittime  = 20
ground.velocity = -3
guard.velocity = -6
air.velocity = -2,-2
airguard.velocity = -4,-4.5
p2facing = 1
forcestand = 1

[State 1110, 3]
type = HitDef
trigger1 = AnimElem = 7
attr = S, SA
animtype  = Up
damage    = 60, 4
priority  = 5
guardflag = MA
pausetime = 12,12
sparkxy = 0,-110
hitsound   = 5,2
guardsound = 6,0
ground.type = Low
ground.slidetime = 15
ground.hittime  = 20
ground.velocity = -1,-10.5
guard.velocity = -6
air.velocity = -1,-8.5
airguard.velocity = -4,-4.5
p2facing = 1
fall = 1
fall.recovertime = 50
yaccel = .4

[State 1110, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Fast Kung Fu Upper
[Statedef 1120]
type    = S
movetype= A
physics = S
juggle  = 6
poweradd= -330
velset = 0,0
anim = 1120
ctrl = 0
sprpriority = 2

[State 1120, Width]
type = Width
trigger1 = AnimElemTime(4) >= 0 && AnimElemTime(14) < 0
value = 5,0

[State 1120, Afterimage]
type = AfterImage
trigger1 = Time = 0
length = 13
PalBright   =  30, 30,  0
PalContrast =  70, 70, 20
PalAdd      = -10,-10,-10
PalMul      = .85,.85,.50
TimeGap  = 1
FrameGap = 2
Trans = Add
time = 2

[State 1120, Afterimage]
type = AfterImageTime
trigger1 = AnimTime < -2
time = 2

[State 1120, Blink Yellow]
type = PalFX
trigger1 = Time = 0
time = 20
add = 32,16,0
sinadd = 64,32,5,3

[State 1120, 1]
type = PlaySnd
trigger1 = AnimElem = 4
value = 0, 2

[State 1120, 2]
type = HitDef
trigger1 = Time = 0
trigger2 = AnimElem = 4
attr = S, SA
animtype  = Med
damage    = 30, 4
getpower  = 0
priority  = 5
guardflag = MA
pausetime = 6,10
sparkxy = 0, ifelse(Time = 0, -48, -55)
hitsound   = 5,2
guardsound = 6,0
ground.type = Low
ground.slidetime = 18
ground.hittime  = 23
ground.velocity = -3
guard.velocity = -6
air.velocity = -2,-2
airguard.velocity = -4,-4.5
p2facing = 1
forcestand = 1

[State 1120, 3]
type = HitDef
trigger1 = AnimElem = 7
attr = S, SA
animtype  = Up
damage    = 68, 4
getpower  = 0
priority  = 5
guardflag = MA
pausetime = 12,12
sparkxy = 0,-110
hitsound   = 5,2
guardsound = 6,0
ground.type = Low
ground.slidetime = 18
ground.hittime  = 23
ground.velocity = -1.2,-11
guard.velocity = -6
air.velocity = -1.2,-9
airguard.velocity = -4,-4.5
p2facing = 1
fall = 1
fall.recovertime = 60
yaccel = .4

[State 1120, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Light Kung Fu Blow
; CNS difficulty: easy
; Notes: This uses the EnvShake controller to shake the screen. It makes the
;        move look stronger.
[Statedef 1200]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 50
velset = 0,0
anim = 1200
ctrl = 0
sprpriority = 2

[State 1200, 1]
type = PlaySnd
trigger1 = AnimElem = 4
value = 0, 3

[State 1200, Width 1]
type = Width
trigger1 = AnimElemTime(5) >= 0 && AnimElemTime(6) < 0
value = 10,0

[State 1200, Width 2]
type = Width
trigger1 = AnimElemTime(6) >= 0 && AnimElemTime(9) < 0
value = 20,0

[State 1200, Shake Screen]
type = EnvShake
trigger1 = AnimElem = 6
time = 4     ;Time to shake screen
ampl = 2     ;Amount to shake
freq = 180   ;A frequency of 180 shakes the screen rapidly

[State 1200, 2]
type = HitDef
trigger1 = Time = 0
attr = S, SA
animtype  = Hard
damage    = 100, 6
priority  = 5
guardflag = MA
pausetime = 12,12
sparkxy = 0,-65
hitsound   = 5,3
guardsound = 6,0
ground.type = Low
ground.slidetime = 16
ground.hittime  = 20
ground.velocity = -10
ground.cornerpush.veloff = -12 ;To push far away when p2 is in corner
guard.velocity = -7
air.velocity = -3.5,-4.5
airguard.velocity = -3.5,-4.5

[State 1200, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Strong Kung Fu Blow
; CNS difficulty: easy
[Statedef 1210]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 60
velset = 0,0
anim = 1210
ctrl = 0
sprpriority = 2

[State 1210, 1]
type = PlaySnd
trigger1 = AnimElem = 4
value = 0, 3

[State 1210, Width 1]
type = Width
trigger1 = AnimElemTime(5) >= 0 && AnimElemTime(6) < 0
value = 10,0

[State 1210, Width 2]
type = Width
trigger1 = AnimElemTime(6) >= 0 && AnimElemTime(9) < 0
value = 20,0

[State 1210, Shake Screen]
type = EnvShake
trigger1 = AnimElem = 6
time = 8
ampl = 2
freq = 170   ;A frequency of less than 180 causes a dampening effect

[State 1210, 2]
type = HitDef
trigger1 = Time = 0
attr = S, SA
animtype  = Hard
damage    = 125, 9
priority  = 5
guardflag = MA
pausetime = 12,12
sparkxy = 0,-65
hitsound   = 5,3
guardsound = 6,0
ground.type = Low
ground.slidetime = 18
ground.hittime  = 22
ground.velocity = -10
ground.cornerpush.veloff = -15 ;To push far away when p2 is in corner
guard.velocity = -8
air.velocity = -4,-4.5
airguard.velocity = -4,-4.5

[State 1210, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Fast Kung Fu Blow
; CNS difficulty: easy
[Statedef 1220]
type    = S
movetype= A
physics = S
juggle  = 6
poweradd= -330
velset = 0,0
anim = 1220
ctrl = 0
sprpriority = 2

[State 1220, Afterimage]
type = AfterImage
trigger1 = Time = 0
length = 13
PalBright   =  30, 30,  0
PalContrast =  70, 70, 20
PalAdd      = -10,-10,-10
PalMul      = .85,.85,.50
TimeGap  = 1
FrameGap = 2
Trans = Add
time = 2

[State 1220, Afterimage]
type = AfterImageTime
trigger1 = AnimTime < -2
time = 2

[State 1220, Blink Yellow]
type = PalFX
trigger1 = Time = 0
time = 20
add = 32,16,0
sinadd = 64,32,5,3

[State 1220, 1]
type = PlaySnd
trigger1 = AnimElem = 4
value = 0, 3

[State 1220, Width 1]
type = Width
trigger1 = AnimElemTime(5) >= 0 && AnimElemTime(6) < 0
value = 10,0

[State 1220, Width 2]
type = Width
trigger1 = AnimElemTime(6) >= 0 && AnimElemTime(9) < 0
value = 20,0

[State 1220, Shake Screen]
type = EnvShake
trigger1 = AnimElem = 6
time = 8
ampl = 3
freq = 170

[State 1220, 2]
type = HitDef
trigger1 = Time = 0
attr = S, SA
animtype  = Hard
damage    = 125, 9
getpower  = 0
priority  = 5
guardflag = MA
pausetime = 15,15
sparkxy = 0,-65
hitsound   = 5,4
guardsound = 6,0
ground.type = Low
ground.slidetime = 20
ground.hittime  = 32
ground.velocity = -15
ground.cornerpush.veloff = -20 ;To push far away when p2 is in corner
guard.velocity = -9
air.velocity = -5,-5
airguard.velocity = -5,-5
air.fall = 1
fall.animtype = Hard           ;Show "hard" animtype when hit for a fall
yaccel = .4                    ;Fall faster

[State 1220, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
; Kung Fu Blocking High
; CNS difficulty: medium
; Notes: This move uses a ReversalDef controller to counter attacks. Any
;        attacks not caught by the ReversalDef are handled by the HitOverride.
;        The movetype is Idle because this is not an attack.
[Statedef 1300]
type    = S
movetype= I
physics = S
velset = 0,0
anim = 1300
ctrl = 0
sprpriority = 1

[State 1300, Width]
type = Width
trigger1 = AnimElemTime(3) < 0
value = 15,0

[State 1300, 1]
type = PlaySnd
trigger1 = Time = 0
value = 0, 1

[State 1300, 2]
type = ReversalDef
trigger1 = Time = 0
reversal.attr = SA, AA
pausetime = 0,0
sparkno = -1
sparkxy = 40,0
hitsound = 6,0
p1stateno = 1310
p1sprpriority = 2 ;Set P1's sprite in front of P2's
p2sprpriority = 1

[State 1300, 3] ;Stop ReversalDef
type = ReversalDef
trigger1 = Time = 4
trigger1 = Time = command = "holdfwd"
trigger2 = Time = 8
reversal.attr =

[State 1300, 4]
type = HitOverride
trigger1 = Time = 0
attr = SA, AP
stateno = 1310
time = 8

[State 1300, 5]
type = HitOverride
trigger1 = Time = 4
trigger1 = Time = command = "holdfwd"
attr =
time = 0

[State 1300, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Kung Fu Blocking High (blocked)
; Notes: This state uses a Pause controller to freeze the action dramatically.
[Statedef 1310]
type    = S
movetype= I
physics = S
velset = 0,0
anim = 1310
ctrl = 0
sprpriority = 2

[State 1310, 1]
type = Pause
trigger1 = Time = 0
time = 20
endcmdbuftime = 20 ;Buffer commands input during the pause
pausebg = 0        ;Don't pause backgrounds

[State 1310, 2]    ;Go to guarding
type = ChangeState
trigger1 = Time = 1
trigger1 = command = "holdback"
value = 130
ctrl = 1

[State 1310, 3]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 1

[State 1310, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Kung Fu Blocking Low
[Statedef 1320]
type    = C
movetype= I
physics = C
velset = 0,0
anim = 1320
ctrl = 0
sprpriority = 1

[State 1320, Width]
type = Width
trigger1 = AnimElemTime(3) < 0
value = 10,0

[State 1320, 1]
type = PlaySnd
trigger1 = Time = 0
value = 0, 1

[State 1320, 2]
type = ReversalDef
trigger1 = Time = 0
reversal.attr = C, AA
pausetime = 0,0
sparkno = -1
sparkxy = 40,0
hitsound = 6,0
p1stateno = 1330
p1sprpriority = 2
p2sprpriority = 1

[State 1320, 3] ;Stop
type = ReversalDef
trigger1 = Time = 5
reversal.attr =

[State 1320, 4]
type = HitOverride
trigger1 = Time < 5
attr = C, AP
stateno = 1330

[State 1320, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; Kung Fu Blocking Low (blocked)
[Statedef 1330]
type    = C
movetype= I
physics = C
velset = 0,0
anim = 1330
ctrl = 0
sprpriority = 2

[State 1330, 1]
type = Pause
trigger1 = Time = 0
time = 20
endcmdbuftime = 20 ;Buffer commands input during the pause
pausebg = 0        ;Don't pause backgrounds

[State 1330, 2]
type = ChangeState
trigger1 = Time = 1
trigger1 = command = "holdback"
value = 131
ctrl = 1

[State 1330, 3]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 1

[State 1330, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; Kung Fu Blocking Air
[Statedef 1340]
type    = A
movetype= I
physics = N
anim = 1340
ctrl = 0
sprpriority = 1

[State 1340, Width]
type = Width
trigger1 = AnimElemTime(3) < 0
value = 10,0

[State 1340, 1]
type = PlaySnd
trigger1 = Time = 0
value = 0, 1

[State 1340, 2]
type = ReversalDef
trigger1 = Time = 0
reversal.attr = A, AA
pausetime = 0,0
sparkno = -1
sparkxy = 40,0
hitsound = 6,0
p1stateno = 1350
p1sprpriority = 2
p2sprpriority = 1

[State 1340, 3] ;Stop
type = ReversalDef
trigger1 = Time = 5
reversal.attr =

[State 1340, 4]
type = HitOverride
trigger1 = Time < 5
attr = SA, AP
stateno = 1350

[State 1340, 5]
type = CtrlSet
trigger1 = AnimElem = 4
value = 1

[State 1340, 6] ;Gravity
type = VelAdd
trigger1 = 1
y = Const(movement.yaccel)

[State 1340, 6] ;Land from jump
type = ChangeState
trigger1 = (Pos Y >= 0) && (Vel Y > 0)
value = 1351

;---------------------------------------------------------------------------
; Kung Fu Blocking Air (blocked)
[Statedef 1350]
type    = A
movetype= I
physics = N
anim = 1350
ctrl = 0
sprpriority = 2

[State 1350, 1]
type = Pause
trigger1 = Time = 0
time = 20
endcmdbuftime = 20 ;Buffer commands input during the pause
pausebg = 0        ;Don't pause backgrounds

[State 1350, 2]
type = ChangeState
trigger1 = Time = 1
trigger1 = command = "holdback"
value = 132
ctrl = 1

[State 1350, 3]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 1

[State 1350, 4] ;Stop KFM in the air
type = PosFreeze
trigger1 = AnimElemTime(3) < 0

[State 1350, 5]
type = CtrlSet
trigger1 = AnimElem = 3
value = 1

[State 1350, 6] ;Gravity
type = VelAdd
trigger1 = AnimElemTime(3) > 0
y = Const(movement.yaccel)

[State 1350, 7] ;Land from jump
type = ChangeState
trigger1 = (Pos Y >= 0) && (Vel Y > 0)
value = 1351

;---------------------------------------------------------------------------
; Kung Fu Blocking Air (land)
[Statedef 1351]
type    = S
physics = S
ctrl = 0
anim = 47

[State 1351, 1]
type = VelSet
trigger1 = Time = 0
y = 0

[State 1351, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1351, 3]
type = CtrlSet
trigger1 = Time = 3
value = 1

[State 1351, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[State 1351, 5] ;Go to high block
type = ChangeState
trigger1 = command = "blocking"
trigger1 = command != "holddown"
value = 1300

[State 1351, 6] ;Go to low block
type = ChangeState
trigger1 = command = "blocking"
value = 1320

;---------------------------------------------------------------------------
; Light Kung Fu Zankou
; CNS difficulty: easy
[Statedef 1400]
type    = S
movetype= A
physics = N
juggle  = 4
poweradd= 50
velset = 0,0
anim = 1400
ctrl = 0
sprpriority = 2

[State 1400, 1]
type = PlaySnd
trigger1 = AnimElem = 3
value = 0, 3

[State 1400, Friction]
type = VelMul
trigger1 = 1
x = 0.5

[State 1400, 2]
type = HitDef
trigger1 = Time = 0
attr = S, SA
animtype  = Hard
damage    = 100, 6
priority  = 4
guardflag = MA
pausetime = 12,12
sparkxy = 0,-65
hitsound   = 5,3
guardsound = 6,0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 17
ground.velocity = -9
ground.cornerpush.veloff = -15 ;To push far away when p2 is in corner
guard.velocity = -9
air.velocity = -2,-5
airguard.velocity = -3.5,-4.5
air.fall = 1

[State 1400, 3]
type = PosAdd
trigger1 = AnimElem = 2
trigger2 = AnimElem = 3
trigger3 = AnimElem = 4
x = 10

[State 1400, 4]
type = VelSet
trigger1 = AnimElem = 4
x = 2

[State 1400, 5]
type = PosAdd
trigger1 = AnimElem = 8
x = 10

[State 1400, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Strong Kung Fu Zankou
; CNS difficulty: easy
[Statedef 1410]
type    = S
movetype= A
physics = N
juggle  = 4
poweradd= 50
velset = 0,0
anim = 1410
ctrl = 0
sprpriority = 2

[State 1410, 1]
type = PlaySnd
trigger1 = AnimElem = 3
value = 0, 3

[State 1410, Friction]
type = VelMul
trigger1 = 1
x = 0.65

[State 1410, 2]
type = HitDef
trigger1 = Time = 0
attr = S, SA
animtype  = Hard
damage    = 100, 6
priority  = 4
guardflag = MA
pausetime = 12,12
sparkxy = 0,-65
hitsound   = 5,3
guardsound = 6,0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 17
ground.velocity = -9
ground.cornerpush.veloff = -15 ;To push far away when p2 is in corner
guard.velocity = -9
air.velocity = -2,-5
airguard.velocity = -3.5,-4.5
air.fall = 1

[State 1410, 3]
type = PosAdd
trigger1 = AnimElem = 2
trigger2 = AnimElem = 3
trigger3 = AnimElem = 4
x = 10

[State 1410, 4]
type = VelSet
trigger1 = AnimElem = 3
x = 8

[State 1410, 5]
type = PosAdd
trigger1 = AnimElem = 9
x = 10

[State 1410, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Far Kung Fu Zankou
; CNS difficulty: easy
[Statedef 1420]
type    = S
movetype= A
physics = N
juggle  = 6
poweradd= -330
velset = 0,0
anim = 1420
ctrl = 0
sprpriority = 2

[State 1420, Afterimage]
type = AfterImage
trigger1 = Time = 0
length = 13
PalBright   =  30, 30,  0
PalContrast =  70, 70, 20
PalAdd      = -10,-10,-10
PalMul      = .85,.85,.50
TimeGap  = 1
FrameGap = 2
Trans = Add
time = 2

[State 1420, Afterimage]
type = AfterImageTime
trigger1 = AnimElemTime(8) < 0
time = 2

[State 1420, Blink Yellow]
type = PalFX
trigger1 = Time = 0
time = 20
add = 32,16,0
sinadd = 64,32,5,3

[State 1420, 1]
type = PlaySnd
trigger1 = AnimElem = 3
value = 0, 3

[State 1420, Friction]
type = VelMul
trigger1 = 1
x = 0.7

[State 1420, 2]
type = HitDef
trigger1 = AnimElemTime(4) = -2
attr = S, SA
animtype  = Hard
damage    = 25, 2
getpower  = 0
priority  = 4
guardflag = MA
pausetime = 9,9
sparkxy = -15,-45
hitsound   = 5,2
guardsound = 6,0
ground.type = Low
ground.slidetime = 22
ground.hittime  = 24
ground.velocity = -7
ground.cornerpush.veloff = -8 ;To push far away when p2 is in corner
guard.velocity = -9
air.velocity = -5,-4
airguard.velocity = -3.5,-4.5

[State 1420, 2]
type = HitDef
trigger1 = AnimElem = 4
attr = S, SA
animtype  = Hard
damage    = 100, 8
getpower  = 0
priority  = 5
guardflag = MA
pausetime = 12,12
sparkxy = 0,-65
hitsound   = 5,3
guardsound = 6,0
ground.type = Low
ground.slidetime = 22
ground.hittime  = 24
ground.velocity = -5,-4
ground.cornerpush.veloff = -15 ;To push far away when p2 is in corner
guard.velocity = -9
air.velocity = -5,-4
airguard.velocity = -3.5,-4.5
fall = 1

[State 1420, 3]
type = PosAdd
trigger1 = AnimElem = 2
trigger2 = AnimElem = 3
trigger3 = AnimElem = 4
x = 10

[State 1420, 4]
type = VelSet
trigger1 = AnimElemTime(3) = [1,2]
x = 20

[State 1420, 5]
type = PosAdd
trigger1 = AnimElem = 10
x = 10

[State 1420, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1



;------------------
; Smash Kung Fu Upper (success)
; Description: This is the state that KFM changes to if he successfully hits
;     with Smash Kung Fu Upper. KFM holds his arm high for a short while
;     longer, then changes back to his idle stand state.
[Statedef 3051]
type    = S
movetype= A
physics = S
anim = 3051

[State 3051, 1]
type = AfterImageTime
trigger1 = AnimTime < -2
time = 2

[State 3051, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; HITG_SHAKE
[Statedef 5000]
type    = S
movetype= H
physics = N
velset = 0,0

[State 5000, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(groundtype) = 1),5000,5010) + GetHitVar(animtype)

[State 5000, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 5000, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 5000, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5000, 5] ;State type gets set to aerial if getting hit up
type = StateTypeSet
trigger1 = Time = 0
trigger1 = GetHitVar(yvel) != 0 && GetHitVar(fall)
trigger2 = Pos Y != 0
type = a

[State 5000, 6]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) = 0
value = 5001 ;HITG_SLIDE

[State 5000, 7]
type = ChangeState
trigger1 = HitShakeOver
value = 5030

[State 5000, FFB Light]
type = ForceFeedback
trigger1 = anim = 5000
trigger2 = anim = 5010
persistent = 0
time = 6
waveform = square

[State 5000, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5001
trigger2 = anim = 5011
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5000, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012
trigger2 = anim = 5002
trigger3 = anim = 5030
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

;---------------------------------------------------------------------------
; HITG_SLIDE
[Statedef 5001]
type    = S
movetype= H
physics = S

[State 5001, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 5001, 2]
type = ChangeAnim
trigger1 = AnimTime = 0
value = 5005 + GetHitVar(animtype) + (GetHitVar(groundtype)=2)*10

[State 5001, 3] ;Stop sliding back
type = VelMul
trigger1 = Time >= GetHitVar(slidetime)
x = .6

[State 5001, 4]
type = VelSet
trigger1 = HitOver
x = 0

[State 5001, 5]
type = DefenceMulSet
trigger1 = HitOver
value = 1

[State 5001, 6]
type = ChangeState
trigger1 = HitOver
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; HITC_SHAKE
[Statedef 5010]
type    = C
movetype= H
physics = N
velset = 0,0

[State 5010, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = 5020 + GetHitVar(animtype)

[State 5010, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 5010, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 5010, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5010, 5]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) = 0
value = 5011 ;HITC_SLIDE

[State 5010, 6]
type = ChangeState
trigger1 = HitShakeOver
value = 5030

[State 5010, FFB Light]
type = ForceFeedback
trigger1 = anim = 5020
persistent = 0
time = 6
waveform = square

[State 5010, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5021
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5010, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5022
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

;---------------------------------------------------------------------------
; HITC_SLIDE
[Statedef 5011]
type    = C
movetype= H
physics = C

[State 5011, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 5011, 2]
type = ChangeAnim
trigger1 = AnimTime = 0
value = 5025 + GetHitVar(animtype)

[State 5011, 3] ;Stop sliding back
type = VelMul
trigger1 = Time >= GetHitVar(slidetime)
x = .6

[State 5011, 4]
type = VelSet
trigger1 = HitOver
x = 0

[State 5011, 5]
type = DefenceMulSet
trigger1 = HitOver
value = 1

[State 5011, 6]
type = ChangeState
trigger1 = HitOver
value = 11
ctrl = 1


;---------------------------------------------------------------------------
; HITA_SHAKE
[Statedef 5020]
type    = A
movetype= H
physics = N
velset = 0,0

[State 5020, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(airtype) = 1),5000,5010) + GetHitVar(animtype)

[State 5020, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 5020, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 5020, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5020, 5]
type = ChangeState
trigger1 = HitShakeOver
value = 5030

[State 5020, FFB Light]
type = ForceFeedback
trigger1 = anim = 5000
trigger2 = anim = 5010
persistent = 0
time = 6
waveform = square

[State 5020, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5001
trigger2 = anim = 5011
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5020, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012
trigger2 = anim = 5002
trigger3 = anim = 5030
trigger4 = anim = [5051,5059]
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

;---------------------------------------------------------------------------
; Override common states (use same number to override) :
;---------------------------------------------------------------------------

;---------------------------------------------------------------------------
; GUARD (start)
[Statedef 120]
type = U    ;Leave state type unchanged
physics = U ;Leave physics unchanged


[State 120]
type = Velset
trigger1 = Time = 0 && statetype != A
x=0
y=0

[State 120, 1]
type = ChangeAnim
trigger1 = Time = 0
value = 120 + (statetype = C) + (statetype = A)*2

[State 120, 2]
type = StateTypeSet
trigger1 = Time = 0 && statetype = S
physics = S

[State 120, 3]
type = StateTypeSet
trigger1 = Time = 0 && statetype = C
physics = C

[State 120, 4]
type = StateTypeSet
trigger1 = Time = 0 && statetype = A
physics = A

[State 120, Hi to Lo]
type = StateTypeSet
trigger1 = !var(59) && statetype = S && command = "holddown"
trigger2 = var(59) && statetype = S && (enemynear,movetype = A) && (enemynear,statetype = C)
statetype = C
physics = C

[State 120, Lo to Hi]
type = StateTypeSet
trigger1 = !var(59) && statetype = C && command != "holddown"
trigger2 = var(59) && statetype = C && (enemynear,movetype = A) && (enemynear,statetype != C)
statetype = S
physics = S

[State AI fix]
type= Ctrlset
trigger1= var(59)
value=0

[State 120, 5]
type = ChangeState
trigger1 = AnimTime = 0 ;|| var(59)
value = 130 + (statetype = C) + (statetype = A)*2

[State 120, Stop Guarding]
type = ChangeState
trigger1 = !var(59) && command != "holdback"
trigger2 = !inguarddist
trigger3= var(59) && Numenemy
trigger3= enemynear,hitdefattr = SCA,AT
value = 140



;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
; STAND GUARD (guarding)
[Statedef 130]
type    = S
physics = S
facep2 = 1

[State 130, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State AI fix]
type= Ctrlset
trigger1= var(59)
value=0

[State 130, 1]
type = ChangeAnim
trigger1 = Anim != 130
value = 130

[State 130, Hi to Lo]
type = ChangeState
trigger1 = !var(59) && command = "holddown"
trigger2 = var(59) && (enemynear,movetype = A) && (enemynear,statetype = C)
value = 131

[State 130, Stop Guarding]
type = ChangeState
trigger1 = !var(59) && command != "holdback"
trigger2 = !inguarddist
trigger3 = var(59) && Numenemy
trigger3 = enemynear,hitdefattr = SCA,AT
value = 140



;---------------------------------------------------------------------------
; CROUCH GUARD (guarding)
[Statedef 131]
type    = C
physics = C
facep2 = 1

[State 131, 2]
type = PosSet
trigger1 = Time = 0
y = 0



[State AI fix]
type= Ctrlset
trigger1= var(59)
value=0


[State 131, 1]
type = ChangeAnim
trigger1 = Anim != 131
value = 131



[State 131, Lo to Hi]
type = ChangeState
trigger1 = !var(59) && command != "holddown"
trigger2 = var(59) && (enemynear,movetype = A) && (enemynear,statetype != C)
value = 130

[State 131, Stop Guarding]
type = ChangeState
trigger1 = !var(59) && command != "holdback"
trigger2 = !inguarddist
trigger3= var(59) && Numenemy
trigger3= enemynear,hitdefattr = SCA,AT
value = 140


;---------------------------------------------------------------------------
; AIR GUARD (guarding)
[Statedef 132]
type    = A
physics = N
facep2 = 1

[State 132, 1]
type = ChangeAnim
trigger1 = Anim != 132
value = 132

[State 132, 2]
type = VelAdd
trigger1 = 1
y = Const(movement.yaccel)

[State 132, 3]
type = VarSet
trigger1 = 1
sysvar(0) = (pos y >= 0) && (vel y > 0)

[State 132, 4]
type = VelSet
trigger1 = sysvar(0)
y = 0

[State 132, 5]
type = PosSet
trigger1 = sysvar(0)
y = 0


[State AI fix]
type= Ctrlset
trigger1= var(59)
value=0



[State 132, 6]
type = ChangeState
trigger1 = sysvar(0) 
trigger1 = (command = "holdback" && !var(59)) || var(59)
trigger1 = inguarddist
value = 130

[State 132, 7]
type = ChangeState
trigger1 = sysvar(0)
value = 52

[State 132, Stop Guarding]
type = ChangeState
trigger1 = !var(59) && command != "holdback"
trigger2 = !inguarddist
trigger3= var(59) && Numenemy
trigger3= enemynear,hitdefattr = SCA,AT
value = 140


;---------------------------------------------------------------------------
; GUARD (end)
[Statedef 140]
type = U    ;Leave state type unchanged
physics = U ;Leave physics unchanged
ctrl = 1
facep2 = 1

[State 140, 1]
type = ChangeAnim
trigger1 = Time = 0
value = 140 + (statetype = C) + (statetype = A)*2

[State 140, 2]
type = StateTypeSet
trigger1 = Time = 0 && statetype = S
physics = S

[State 140, 3]
type = StateTypeSet
trigger1 = Time = 0 && statetype = C
physics = C

[State 140, 4]
type = StateTypeSet
trigger1 = Time = 0 && statetype = A
physics = A


[State 140, Hi to Lo]
type = StateTypeSet
trigger1 = !var(59) && statetype = S && command = "holddown"
trigger2 = var(59) && statetype = S && (enemynear,movetype = A) && (enemynear,statetype = C)
statetype = C
physics = C

[State 140, Lo to Hi]
type = StateTypeSet
trigger1 = !var(59) && statetype = C && command != "holddown"
trigger2 = var(59) && statetype = C && (enemynear,movetype = A) && (enemynear,statetype != C)
statetype = S
physics = S

;[State 140, 5] ;Implemented within engine
;type = ChangeState
;trigger1 = AnimTime = 0
;value = (statetype = C)*11 + (statetype = A)*51



;---------------------------------------------------------------------------
; SGUARDHIT (shaking)
[Statedef 150]
type    = S
movetype= H
physics = N
velset = 0,0

[State 150, 1]
type = ChangeAnim
trigger1 = 1
value = 150

[State 150, 2]
type = ChangeState
trigger1 = HitShakeOver
value = 151 + 2*((!var(59) &&command = "holddown") || var(59) && statetype = S && (enemynear,movetype = A) && (enemynear,statetype = C))

[State 150, Hi to Lo]
type = StateTypeSet
trigger1 = !var(59) && statetype = S && command = "holddown"
trigger2 = var(59) && statetype = S && (enemynear,movetype = A) && (enemynear,statetype = C)
statetype = C
physics = C

[State 150, Lo to Hi]
type = StateTypeSet
trigger1 = !var(59) && statetype = C && command != "holddown"
trigger2 = var(59) && statetype = C && (enemynear,movetype = A) && (enemynear,statetype != C)
statetype = S
physics = S

[State 150, 3]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 3

;---------------------------------------------------------------------------
; SGUARDHIT2 (knocked back)
[Statedef 151]
type    = S
movetype= H
physics = S
anim = 150
facep2 = 1

[State 151]
type = PosAdd
trigger1 = Time <= 12 
x = 2*sin(Time*(pi/2))
;y = sin(Time*(pi/2))


[State 151, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 151, 2]
type = VelSet
trigger1 = Time = GetHitVar(slidetime)
trigger2 = HitOver
x = 0

[State 151, 3]
type = CtrlSet
trigger1 = Time = GetHitVar(ctrltime)
value = 1

[State 151, Hi to Lo]
type = StateTypeSet
trigger1 = !var(59) && statetype = S && command = "holddown"
trigger2 = var(59) && statetype = S && (enemynear,movetype = A) && (enemynear,statetype = C)
statetype = C
physics = C

[State 151, Lo to Hi]
type = StateTypeSet
trigger1 = !var(59) && statetype = C && command != "holddown"
trigger2 = var(59) && statetype = C && (enemynear,movetype = A) && (enemynear,statetype != C)
statetype = S
physics = S

[State 151, 4]
type = ChangeState
trigger1 = HitOver
value = 130
ctrl = 1


;---------------------------------------------------------------------------
; CGUARDHIT (shaking)
[Statedef 152]
type    = C
movetype= H
physics = N
velset = 0,0

[State 152, 1]
type = ChangeAnim
trigger1 = 1
value = 151

[State 152, 3]
type = ChangeState
trigger1 = HitShakeOver
value = 151 + 2*((!var(59) &&command = "holddown") || var(59) && statetype = S && (enemynear,movetype = A) && (enemynear,statetype = C))

[State 152, Hi to Lo]
type = StateTypeSet
trigger1 = !var(59) && statetype = S && command = "holddown"
trigger2 = var(59) && statetype = S && (enemynear,movetype = A) && (enemynear,statetype = C)
statetype = C
physics = C

[State 152, Lo to Hi]
type = StateTypeSet
trigger1 = !var(59) && statetype = C && command != "holddown"
trigger2 = var(59) && statetype = C && (enemynear,movetype = A) && (enemynear,statetype != C)
statetype = S
physics = S

[State 152, 4]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 4
;---------------------------------------------------------------------------
; CGUARDHIT2 (knocked back)
[Statedef 153]
type    = C
movetype= H
physics = C
anim = 151
facep2 = 1

[State 153]
type = PosAdd
trigger1 = Time <= 12 
x = 2*sin(Time*(pi/2))
;y = sin(Time*(pi/2))

[State 153, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 153, 2]
type = VelSet
trigger1 = Time = GetHitVar(slidetime)
trigger2 = HitOver
x = 0

[State 153, 3]
type = CtrlSet
trigger1 = Time = GetHitVar(ctrltime)
value = 1

[State 153, Hi to Lo]
type = StateTypeSet
trigger1 = !var(59) && statetype = S && command = "holddown"
trigger2 = var(59) && statetype = S && (enemynear,movetype = A) && (enemynear,statetype = C)
statetype = C
statetype = C
physics = C

[State 153, Lo to Hi]
type = StateTypeSet
trigger1 = !var(59) && statetype = C && command != "holddown"
trigger2 = var(59) && statetype = C && (enemynear,movetype = A) && (enemynear,statetype != C)
statetype = S
physics = S

[State 153, 4]
type = ChangeState
trigger1 = HitOver
value = 131
ctrl = 1


;---------------------------------------------------------------------------
; AGUARDHIT (shaking)
[Statedef 154]
type    = A
movetype= H
physics = N
velset = 0,0

[State 154, 1]
type = ChangeAnim
trigger1 = 1
value = 152

[State 154, 2]
type = ChangeState
trigger1 = HitShakeOver
value = 155 ;AGUARDHIT2

[State 154, 3]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 4

;---------------------------------------------------------------------------
; AGUARDHIT2 (knocked away)
[Statedef 155]
type    = A
movetype= H
physics = N
anim = 152

[State 155, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 155, 2]
type = VelAdd
trigger1 = 1
y = Const(movement.yaccel)

[State 155, 3]
type = CtrlSet
trigger1 = Time = GetHitVar(ctrltime)
value = 1

[State 155, 4]
type = VarSet
trigger1 = 1
sysvar(0) = (pos y >= 0) && (vel y > 0)

[State 155, 5]
type = VelSet
trigger1 = sysvar(0)
y = 0

[State 155, 6]
type = PosSet
trigger1 = sysvar(0)
y = 0

[State 155, 6]
type = ChangeState
trigger1 = sysvar(0) 
trigger1 = (command = "holdback" && !var(59)) || var(59)
trigger1 = inguarddist
value = 130

[State 155, 7]
type = ChangeState
trigger1 = sysvar(0)
value = 52

;---------------------------------------------------------------------------
; HIT_LIEDEAD
[Statedef 5150]
type    = L
movetype= H
physics = N
sprpriority = -3

[State 5150, 1] ;Normal anim
type = ChangeAnim
triggerall = PrevStateNo != 5950
triggerall = Time = 0
triggerall = SelfAnimExist(5140)
trigger1 = (anim != [5111,5119]) && (anim != [5171,5179])
trigger2 = !SelfAnimExist(5140 + (anim % 10))
value = 5140

[State 5150, 3] ;Hit up type anim
type = ChangeAnim
triggerall = PrevStateNo != 5950
trigger1 = Time = 0
trigger1 = (anim = [5111,5119]) || (anim = [5171,5179])
trigger1 = SelfAnimExist(5140 + (anim % 10))
value = 5140 + (anim % 10)

[State 5150, 4] ;Match over anim
type = ChangeAnim
persistent = 0
triggerall = PrevStateNo != 5950
;trigger1 = Time = 0
trigger1 = MatchOver = 1
trigger1 = Anim = [5140,5149]
trigger1 = SelfAnimExist(anim+10)
value = anim+10

[State 5150, 5] ;Switch to 5110 if liedead anim does not exist
type = ChangeAnim
triggerall = PrevStateNo != 5950
trigger1 = Time = 0
trigger1 = Anim != [5140,5159]
trigger1 = Anim != [5110,5119]
value = 5110

[State 5150, 6] ;Friction
type = VelMul
trigger1 = 1
x = 0.85

[State 5150, 7] ;Friction
type = VelSet
trigger1 = Vel x < .05
persistent = 0
x = 0

[State 5150, 8]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;ƒJƒƒ‰§Œä------------------
[State 5150, 0]
type = ScreenBound
trigger1 = roundstate>3&&numenemy
trigger1 = enemy(numenemy>1&!enemy(0),alive),win&enemy(numenemy>1&!enemy(0),alive),alive&enemy(numenemy>1&!enemy(0),alive),stateno>179
value = 0
movecamera = 0,0

[State 5150, 0]
type = Helper
trigger1 = !numhelper(2047483647)&roundstate>3&&numenemy
trigger1 = enemy(numenemy>1&!enemy(0),alive),win&enemy(numenemy>1&!enemy(0),alive),alive&enemy(numenemy>1&!enemy(0),alive),stateno>179
helpertype = Normal;								Normal or Player
name = "camera";									Name
ID = 2047483647;									ID		Int
pos = floor(ifelse(numenemy>1&enemy(0),alive&enemy(numenemy>1),alive,abs(enemy(0),screenpos x+enemy(numenemy>1),screenpos x)*.5,enemy(numenemy>1&!enemy(0),alive),screenpos X)),1073741824;Pos(x.y) Int
postype = left;										p1/p2/front/back/left/right
Facing = 1;											1 or -1 Int
stateno = 2047483647;								StateNo Int
keyctrl = 0;										Boolean
ownpal = 0;											boolean
supermovetime = 2147483647;							Int
pausemovetime = 2147483647;							Int
size.xscale = 1;									Float
size.yscale = 1;									Float
size.ground.back = 0;								Int
size.ground.front = 0;								Int
size.air.back = 0;									Int
size.air.front = 0;									Int
size.height = 0;									Int(C:64)
size.proj.doscale = 1;								Int
size.head.pos = 0,0;								Int
size.mid.pos = 0,0;									Int
size.shadowoffset = 0;								Int
persistent=0;										Def1
ignorehitpause=1;									Def0

;---------------------------------------------------------------------------
;Code for Center A Char Winpose
[Statedef 2047483647]
type=L
movetype=I
physics=N
anim=0
ctrl=0
sprpriority=-5
[state ];GameWidth (±ÒØŽì¬)
type=varset
triggerall=!fvar(39)*!time
trigger1=fvar(39):=320&&FrontEdgeDist+BackEdgeDist<=1920;1740-4
trigger1=fvar(39):=1920&&FrontEdgeDist+BackEdgeDist<=1600;1450-4
trigger1=fvar(39):=1600&&FrontEdgeDist+BackEdgeDist<=1280;1160-3
trigger1=fvar(39):=1280&&FrontEdgeDist+BackEdgeDist<=960;870-3;trigger1=var(49):=1280&&FrontEdgeDist+BackEdgeDist<=1200;1087-3
;trigger1=fvar(39):=1200&&FrontEdgeDist+BackEdgeDist<=960;870-3
trigger1=fvar(39):=960&&FrontEdgeDist+BackEdgeDist<=800;724-2
trigger1=fvar(39):=800&&FrontEdgeDist+BackEdgeDist<=640;580-2
trigger1=fvar(39):=640&&FrontEdgeDist+BackEdgeDist<=400;361+1
trigger1=fvar(39):=400&&FrontEdgeDist+BackEdgeDist<=320;290-2
trigger1=fvar(39):=320&&FrontEdgeDist+BackEdgeDist<=200;180+1
trigger1=fvar(39):=200&&FrontEdgeDist+BackEdgeDist<=160;144+1
trigger1=fvar(39):=160;;Bound.screenleft+Bound.screenright=15+15+1
fvar(39)=(fvar(39)>0)*fvar(39)+(fvar(39)<=0)*320
[state ]
type=varset
trigger1=!time*fvar(39)
sysfvar(3)=fvar(39)
[state ]
type=turn
triggerall=ishelper(2047483647)&!time&&numenemy
trigger1=numenemy<2|!enemy(0),alive|!enemy(numenemy>1),alive
trigger1=facing>0&enemy(numenemy>1&!enemy(0),alive),screenpos X>sysfvar(3)*.5
trigger2=numenemy<2|!enemy(0),alive|!enemy(numenemy>1),alive
trigger2=facing<0&enemy(numenemy>1&!enemy(0),alive),screenpos X<sysfvar(3)*.5
trigger3=numenemy>1&enemy(0),alive&enemy(numenemy>1),alive
trigger3=facing>0&abs(enemy(0),screenpos X+enemy(1),screenpos X)*.5>sysfvar(3)*.5
trigger4=numenemy>1&enemy(0),alive&enemy(numenemy>1),alive
trigger4=facing<0&abs(enemy(0),screenpos X+enemy(1),screenpos X)*.5<sysfvar(3)*.5
ignorehitpause=1
[State ]
type = VelMul
triggerall=ishelper(2047483647)&&numenemy
trigger1=numenemy<2|!enemy(0),alive|!enemy(numenemy>1),alive
trigger1=enemy(numenemy>1&!enemy(0),alive),ScreenPos X-sysfvar(3)*.5=[-40*(sysfvar(3)/320),40*(sysfvar(3)/320)]
trigger2=numenemy>1&enemy(0),alive&enemy(numenemy>1),alive
trigger2=abs(enemy(0),screenpos X+enemy(1),screenpos X)*.5-sysfvar(3)*.5=[-40*(sysfvar(3)/320),40*(sysfvar(3)/320)]
x=.845
ignorehitpause=1;									Def0
[State ]
type = Velset
trigger1 = !time
x = -7*(sysfvar(3)/320)
[State ]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1
[State ]
type = NotHitBy
trigger1 = 1
value2 = SCA
time = 1
[State ]
type = AssertSpecial
Trigger1 = 1
flag = invisible
flag2 = noshadow
[State ]
type = ScreenBound
trigger1 =1
value =0
movecamera = 1,1
[State ]
type = PlayerPush
trigger1 =1
value = 0
[state ]
type=varset
trigger1=ishelper(2047483647)&(vel X=(-.05,.05))&&numenemy
trigger1=numenemy<2|!enemy(0),alive|!enemy(numenemy>1),alive
sysfvar(4)=enemy(numenemy>1&!enemy(0),alive),pos x-pos x
persistent=0;										Def1
ignorehitpause=1;									Def0
[state ]
type=posset
trigger1=ishelper(2047483647)&(vel X=(-.05,.05))&&numenemy
trigger1=numenemy>1&enemy(0),alive&enemy(numenemy>1),alive
trigger1=(enemy(0),pos X+enemy(1),pos X)<frontedgedist+backedgedist-51*(parent,sysfvar(3)/320)
sysfvar(4)=(enemy(0),pos X+enemy(1),pos X)*.5-pos x
persistent=0;										Def1
ignorehitpause=1;									Def0
[state ]
type=posset
trigger1=ishelper(2047483647)&(vel X=(-.05,.05))&&numenemy
trigger1=numenemy<2|!enemy(0),alive|!enemy(numenemy>1),alive
x=enemy(numenemy>1&!enemy(0),alive),pos x-sysfvar(4)
ignorehitpause=1;									Def0
[state ]
type=posset
trigger1=ishelper(2047483647)&(vel X=(-.05,.05))&&numenemy
trigger1=numenemy>1&enemy(0),alive&enemy(numenemy>1),alive
trigger1=(enemy(0),pos X+enemy(1),pos X)<frontedgedist+backedgedist-51*(parent,sysfvar(3)/320)
x=(enemy(0),pos X+enemy(1),pos X)*.5-sysfvar(4)
ignorehitpause=1;									Def0
[State ]
type = Helper
trigger1=ishelper(2047483647)&!numhelper(2047483648)&(vel X=(-.05,.05))&&numenemy
x=enemy(numenemy>1&!enemy(0),alive),pos x
helpertype = Normal;								Normal or Player
name = "camera";									Name
ID = 2047483648;									ID		Int
pos = 0,1073741824;											Pos(x.y) Int
postype = p2;										p1/p2/front/back/left/right
Facing = 1;											1 or -1 Int
stateno = 2047483648;								StateNo Int
keyctrl = 0;										Boolean
ownpal = 0;											boolean
supermovetime = 2147483647;							Int
pausemovetime = 2147483647;							Int
size.xscale = 1;									Float
size.yscale = 1;									Float
size.ground.back = 0;								Int
size.ground.front = 0;								Int
size.air.back = 0;									Int
size.air.front = 0;									Int
size.height = 0;									Int(C:64)
size.proj.doscale = 1;								Int
size.head.pos = 0,0;								Int
size.mid.pos = 0,0;									Int
size.shadowoffset = 0;								Int
persistent=0;										Def1
ignorehitpause=1;									Def0
[Statedef 2047483648]
type=L
movetype=I
physics=N
anim=0
ctrl=0
sprpriority=-5
[State ]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1
[State ]
type = NotHitBy
trigger1 = 1
value2 = SCA
time = 1
[State ]
type = AssertSpecial
Trigger1 = 1
flag = invisible
flag2 = noshadow
[State ]
type = ScreenBound
trigger1 =1
value =0
movecamera = 1,1
[State ]
type = PlayerPush
trigger1 =1
value = 0
[state ]
type=posset
trigger1=ishelper(2047483648)&&numenemy
trigger1=numenemy<2|!enemy(0),alive|!enemy(numenemy>1),alive
x=enemy(numenemy>1&!enemy(0),alive),pos x+parent,sysfvar(4)-10*(parent,sysfvar(3)/320)*ifelse(parent,sysfvar(4)>0,1,-1)
ignorehitpause=1;									Def0
[state ]
type=posset
trigger1=ishelper(2047483647)&&numenemy
trigger1=numenemy>1&enemy(0),alive&enemy(numenemy>1),alive
trigger1=(enemy(0),pos X+enemy(1),pos X)<frontedgedist+backedgedist-51*(parent,sysfvar(3)/320)
x=(enemy(0),pos X+enemy(1),pos X)*.5+parent,sysfvar(4)-10*(parent,sysfvar(3)/320)*ifelse(parent,sysfvar(4)>0,1,-1)

;---------------------------------------------------------------------------
; States that are always executed (use statedef -2)
;---------------------------------------------------------------------------
[Statedef -2]
;-------------------------------------------------------------------------------
;Extra Carteles KOF MEMORIAL LEVEL 2
;-------------------------------------------------------------------------------
;Perfect p1
[State 1000, Explod]
type = Explod
triggerall = numexplod(7000) <= 0 && teamside = 1
trigger1 = win = 1 && Life >= LifeMax
trigger1 = stateno != [180,189]
anim = f7000
ID = 7000
pos = -70,85
postype = left
bindtime = -1
removetime = -2
sprpriority = 9
ontop = 1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
ignorehitpause = 1
ownpal = 1

;Perfect p2
[State 1000, Explod]
type = Explod
triggerall = numexplod(7000) <= 0 && teamside = 2
trigger1 = win = 1 && Life >= LifeMax
trigger1 = stateno != [180,189]
anim = f7000
ID = 7000
pos = -390,85
postype = right
bindtime = -1
removetime = -2
sprpriority = 9
ontop = 1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
ignorehitpause = 1
ownpal = 1

;Lose cartel p1
[State 1000, Explod]
type = Explod
triggerall = numexplod(7010) <= 0 && teamside = 1
triggerall = win = 1 && stateno = [180,189]
trigger1 = time = 0
anim = f7010
ID = 7010
pos = 200,70
postype = left
bindtime = -1
removetime = -2
sprpriority = 9
ontop = 1
ownpal = 1

;Lose cartel p2
[State 1000, Explod]
type = Explod
triggerall = numexplod(7010) <= 0 && teamside = 2
triggerall = win = 1 && stateno = [180,189]
trigger1 = time = 0
anim = f7010
ID = 7010
pos = 25,70
postype = left
bindtime = -1
removetime = -2
sprpriority = 9
ontop = 1
ownpal = 1

;Winner p1
[State 1000, Explod]
type = Explod
triggerall = numexplod(7015) <= 0 && teamside = 1
triggerall = win = 1 && stateno = [180,189]
trigger1 = time = 0
anim = f7015
ID = 7015
pos = -310,200
postype = left
bindtime = -1
removetime = -2
sprpriority = 9
ontop = 1
ownpal = 1
;Winner p1 Estatico
[State 1000, Explod]
type = Explod
triggerall = numexplod(7020) <= 0 && teamside = 1
triggerall = win = 1 && stateno = [180,189]
trigger1 = time = 0
anim = f7020
ID = 7020
pos = -8,202
postype = left
bindtime = -1
removetime = -2
sprpriority = 9
ontop = 1
ownpal = 1

;Winner p2
[State 1000, Explod]
type = Explod
triggerall = numexplod(7015) <= 0 && teamside = 2
triggerall = win = 1 && stateno = [180,189]
trigger1 = time = 0
anim = f7016
ID = 7015
pos = -120,200
postype = left
bindtime = -1
removetime = -2
sprpriority = 9
ontop = 1
ownpal = 1

;Winner p2 Estatico
[State 1000, Explod]
type = Explod
triggerall = numexplod(7020) <= 0 && teamside = 2
triggerall = win = 1 && stateno = [180,189]
trigger1 = time = 0
anim = f7021
ID = 7020
pos = 182,202
postype = left
bindtime = -1
removetime = -2
sprpriority = 9
ontop = 1
ownpal = 1
;--------------------------------------------------------------------
;Hyper Available
[State -2, Hyper Available]
type = Explod
triggerall = numexplod(4190) <= 0 && teamside = 1
trigger1 = life <= 1200
ignorehitpause = 1
persistent = 0
anim = f4190
id = 4190
pos = 4,196
postype = left
bindtime = -1
ontop = 1
ownpal = 1

[State -2, Hyper Available]
type = Explod
triggerall = numexplod(4190) <= 0 && teamside = 2
trigger1 = life <= 1200
ignorehitpause = 1
persistent = 0
anim = f4190
id = 4190
pos = -116,196
postype = right
bindtime = -1
ontop = 1
ownpal = 1
;-------------------------------------------------------------------------------
;Life Danger
[State -2, Life Danger]
type = Explod
triggerall = numexplod(4180) <= 0 && teamside = 1
trigger1 = Life <= LifeMax/4.7
ignorehitpause = 1
persistent = 0
anim = f4180
id = 4180
pos = 4,196
postype = left
bindtime = -1
ontop = 1
ownpal = 1
supermove = 1
pausemove = 1
supermovetime = 99999
pausemovetime = 99999

[State -2, Life Danger]
type = Explod
triggerall = numexplod(4180) <= 0 && teamside = 2
trigger1 = Life <= LifeMax/4.7
ignorehitpause = 1
persistent = 0
anim = f4180
id = 4180
pos = -55,196
postype = right
bindtime = -1
ontop = 1
ownpal = 1
supermove = 1
pausemove = 1
supermovetime = 99999
pausemovetime = 99999
;-------------------------------------------------------------------------------
;First Attack
[State -2, First Attack]
type = Explod
triggerall = numexplod(4170) <= 0 && teamside = 1
triggerall = enemy,numexplod(4170) <= 0
triggerall = p2movetype = H && p2stateno = [800,5070]
trigger1 = NumPartner
trigger1 = partner,numexplod(4170) <= 0
trigger2 = !NumPartner
ignorehitpause = 1
persistent = 9
anim = f4170
id = 4170
pos = 4,196
postype = left
bindtime = -1
removetime = -2
ontop = 1
ownpal = 1
supermove = 1
pausemove = 1
supermovetime = 99999
pausemovetime = 99999

[State -2, First Attack]
type = Explod
triggerall = numexplod(4170) <= 0 && teamside = 2
triggerall = enemy,numexplod(4170) <= 0
triggerall = p2movetype = H && p2stateno = [800,5070]
trigger1 = NumPartner
trigger1 = partner,numexplod(4170) <= 0
trigger2 = !NumPartner
ignorehitpause = 1
persistent = 9
anim = f4170
id = 4170
pos = -92,196
postype = right
bindtime = -1
removetime = -2
ontop = 1
ownpal = 1
supermove = 1
pausemove = 1
supermovetime = 99999
pausemovetime = 99999
;-------------------------------------------------------------------------------
;Counter Hits
[State -2, Counter Hit1]
type = VarSet
trigger1 = enemy, movetype = A
ignorehitpause = 1
var(15) = 1

[State -2, Counter Hit2]
type = VarSet
trigger1 = enemy, movetype = I || var(16) >= 1
ignorehitpause = 1
var(15) = 0

[State -2, Counter Hit3]
type = VarSet
trigger1 = var(16) > 10 && enemy, movetype = H
ignorehitpause = 1
var(15) = 0

[State -2, Counter Hit4]
type = VarSet
trigger1 = var(15) = 1 && movehit
ignorehitpause = 1
var(16) = 1

[State -2, Counter Hit5]
type = Varadd
trigger1 = var(16) >= 1
ignorehitpause = 1
var(16) = 1

[State -2, Counter Hit6]
type = VarSet
trigger1 = p2movetype != H
trigger2 = var(16) > 22
trigger3 = p2statetype = L
trigger4 = var(16) > 30 && movehit
ignorehitpause = 1
var(16) = 0

[State -2, Counter Hit7]
type = Assertspecial
trigger1 = var(15) = 1 && numexplod(4150) <= 1
flag = Nojugglecheck

[State -2, EnvColor]
type = EnvColor
trigger1 = var(16) = [1,2]
value = 255,255,255
time = 1
ignorehitpause = 1
under = 1

[State -2, Counter Explod1]
type = Explod
triggerall = var(15) = 1 && numexplod(4150) <= 0 && teamside = 2
trigger1 = movehit
trigger2 = Projhit >= 1
ignorehitpause = 1
persistent = 0
anim = f4150
id = 4150
pos = -62,206
postype = right
bindtime = -1
ontop = 1
ownpal = 1
supermove = 1
pausemove = 1
supermovetime = 99999
pausemovetime = 99999

[State -2, Counter Explod2]
type = Explod
triggerall = var(15) = 1 && numexplod(4150) <= 0 && teamside = 1
trigger1 = movehit
trigger2 = Projhit >= 1
ignorehitpause = 1
persistent = 0
anim = f4150
id = 4150
pos = 4,206
postype = left
bindtime = -1
ontop = 1
ownpal = 1
supermove = 1
pausemove = 1
supermovetime = 99999
pausemovetime = 99999

;-------------------------------------------------------------------------------
;Final KO Effect
[State -2, Helper]
type = Helper
triggerall = numhelper(9920) <= 0
Trigger1 = Teammode = Single || Teammode = Turns
trigger1 = Roundstate = 3 && Win && matchover
helpertype = normal
name = "Winpose"
Id = 9920
stateno = 9920
pos = 0,0
postype = p1
facing = 1
ignorehitpause = 1
pausemovetime = 99999
supermovetime = 99999
ownpal = 1

[State -2, ChangeState]
type = ChangeState
Triggerall = Teammode = Single || Teammode = Turns
Triggerall = stateno = 180
trigger1 = matchover
value = 9925
ctrl = 0
ignorehitpause = 1
;-------------------------------------------------------------------------------
;KO Flash Effect
[State -2, Helper]
type = Helper
triggerall = numhelper(9910) <= 0
trigger1 = winKo = 1 && movehit && stateno = [899,4999]
trigger2 = winko = 1 && Projhittime(1000) >= 0 && Projhittime(1000) <= 1
trigger3 = winko = 1 && Projhittime(2000) >= 0 && Projhittime(2000) <= 1
trigger4 = Numhelper(1000)
trigger4 = win && (Helper(1000),Numtarget || Helper(1000),Movehit)
trigger5 = Numhelper(2000)
trigger5 = win && (Helper(2000),Numtarget || Helper(2000),Movehit)
trigger6 = Numhelper(2001)
trigger6 = win && (Helper(2001),Numtarget || Helper(2001),Movehit)
trigger7 = winKo = 1 && stateno = 2090 && p2stateno = [5000,5050]
helpertype = normal
name = "KO Flash"
Id = 9910
stateno = 9910
pos = 0,0
postype = p1
facing = 1
ignorehitpause = 1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
ownpal = 1

[state -2, PlaySound]
type = playsnd
trigger1 = WinKO
trigger1 = RoundState = 3
trigger1 = var(12) = 0
IgnoreHitPause = 1
persistent = 0
value = f5200,0
volumescale = 255

[state -2, varset]
type = varset
trigger1 = RoundState = 3
IgnoreHitPause = 1
v = 12
value = 1

[state -2, varset]
type = varset
trigger1 = RoundState = 2
IgnoreHitPause = 1
v = 12
value = 0

[State -2, EnvColor]
type = EnvColor
trigger1 = Projhittime(2000) >= 0 && Projhittime(2000) <= 1
value = 255,255,255
time = 1
under = 1
;-------------------------------------------------------------------------------
;Intro and K.O. no Lifebars
[State -2]
type = assertspecial
trigger1 = roundstate != 2
trigger2 = Ctrl = 0 && (Anim = [0,2]) && MoveType != H
flag = NoBarDisplay
ignorehitpause = 1
;===================================================================================;
; States that are executed when in self's state file (use statedef -3)
;---------------------------------------------------------------------------

[Statedef -3]

;This controller plays a sound everytime KFM lands from a jump, or
;from his back-dash.
[State -3, Landing Sound]
type = PlaySnd
triggerall = Time = 1
trigger1 = stateno = 52 ;Jump land
trigger2 = stateno = 106 ;Run-back land
value = 40, 0

[State -3, 1]
type = PlaySnd
triggerall = Time = 1
triggerall = Life
triggerall = random % 10 > 5
trigger1 = stateno = 5000 || stateno = 5020
trigger1 = anim != 5000 && anim != 5010
trigger2 = stateno = 5010
trigger2 = anim != 5020
value = 63,0
channel = 0
ignorehitpause = 1
;volume = 255

[State -3, 2]
type = PlaySnd
triggerall = Time = 1
triggerall = Life
triggerall = random % 10 > 5
trigger1 = stateno = 5000 || stateno = 5020
trigger1 = anim != 5000 && anim != 5010
trigger2 = stateno = 5010
trigger2 = anim != 5020
value = 63,1
channel = 0
ignorehitpause = 1
;volume = 255

[State -3, 3]
type = PlaySnd
triggerall = Time = 1
triggerall = Life
triggerall = random % 10 > 5
trigger1 = stateno = 5000 || stateno = 5020
trigger1 = anim != 5000 && anim != 5010
trigger2 = stateno = 5010
trigger2 = anim != 5020
value = 63,2
channel = 0
ignorehitpause = 1
;volume = 255


;---------------------- dodge forward 110 ------------------------------

[Statedef 112]
type    = S
movetype= I
physics = S
velset = 0,0
ctrl = 0
anim = 10000
sprpriority = -1

[State 110, 1]
type = Afterimage
trigger1 = Time = 3
time = 10
length = 5
PalBright = 0, 0, 0
PalContrast = 128,128,128
PalAdd = 0, 0, 0
PalMul = 1,1,1
FrameGap = 4
Trans = Add1

[State 110, Vel Y]
type = VelSet
trigger1 = Time >= 6
x = 5

[State 110, 3]
type = VelSet
trigger1 = Time >= 23
x = 0

[State 110, 4]
type = PlayerPush
trigger1 = Time >= 0
value = 0

[State 110, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[State 350, 0]
type = PlaySnd
trigger1 = Time = 0
value = 47,2
persistent = 0

;---------------------- dodge backward 120 ------------------------------

;Œã•û‹Ù‹}‰ñ”ð
[Statedef 122]
type    = S
movetype= I
physics = N
velset = 0,0
ctrl = 0
anim = 10001

[State 355, 1]
type = VelSet
trigger1 = time >= 6
x = -5

[State 355, 1]
type = NotHitBy
trigger1 = Time >= 0
value = SCA
time = 1

[State 355, 1]
type = Afterimage
trigger1 = Time = 5
time = 10
length = 5
PalBright = 0, 0, 0
PalContrast = 128,128,128
PalAdd = 0, 0, 0
PalMul = 1,1,1
FrameGap = 4
Trans = Add1

[State 355, 2]
type = VelSet
trigger1 = Time >= 24
x = 0

[State 355, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[State 350, 0]
type = PlaySnd
trigger1 = Time = 0
value = 47,2
persistent = 0