; NGBC - Kisarah Westfield CNS

;----------------------------------------------------------
;       �ndice de Vari�veis (Player)
;----------------------------------------------------------
; var(1) = winstate decider
; var(2) = Special Attacks Strenght
; var(3) = Joy Joy Block Positions
; var(4) =
; var(5) =
; var(6) = Balloon Time Controller
; var(7) =
; var(8) =

; var(56) - used by the XOR-ed commands method to detect recent custom states.
; var(57) - the GameTime variable, required by the helper and XOR methods.
; var(58) - the primary AI variable.
; var(0)  - the simplifier variable, optional but helpful.

;----------------------------------------------------------
;       �ndice de Vari�veis (Helper)
;----------------------------------------------------------
; var(1) =
; var(2) = Helpers Strenght
; var(3) = Joy Joy Block Velocity
; var(3) =
; var(4) =
; var(5) =

 
[Data]
life = 1600;jambu;1500
power = 7000;jambu;
attack = 100
defence = 90;jambu;100
fall.defence_up = 50
liedown.time = 60
airjuggle = 15
sparkno = 1
guard.sparkno = 40
KO.echo = 0
volume = 50
IntPersistIndex = 58
FloatPersistIndex = 40

[Size]
xscale = .9;jambu;1           
yscale = .9;jambu;1           
ground.back = 15     
ground.front = 16    
air.back = 12        
air.front = 12       
height = 60      
attack.dist = 160    
proj.attack.dist = 90 
proj.doscale = 0     
head.pos = 0, -90
mid.pos = 0, -60
shadowoffset = 0    
draw.offset = 0,0    

[Velocity]
walk.fwd  = 3.5
walk.back = -3
run.fwd  = 6, 0
run.back = -2.5,-5
jump.neu = 0,-9.5
jump.back = -3
jump.fwd = 3
runjump.back = -4.5,-10
runjump.fwd = 4.5,-10
airjump.neu = 0,-8.8     
airjump.back = -2.55      
airjump.fwd = 2.5         

[Movement]
airjump.num = 1  
airjump.height = 35  
yaccel = .5
stand.friction = .85  
crouch.friction = .82 

;---------------------------------------------------------------------------
; Format:
; [Statedef STATENO]
; type = ?      S/C/A/L  stand/crouch/air/liedown
; movetype = ?  I/A/H    idle/attack/gethit
; physics = ?   S/C/A/N  stand/crouch/air/none
; juggle = ?             air juggle points move requires
;
; [State STATENO, ?]     ? - any number you choose
; type = ?
; ...

;---------------------------------------------------------------------------
; Lose by Time Over
[Statedef 170]
type = S
ctrl = 0
anim = 170
velset = 0,0

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 170, 2]
type = playsnd
trigger1 = animelem = 3
value = s170,0
channel = 0

;---------------------------------------------------------------------------
; Win state decider
[Statedef 180]
type = S

[State 180, 1]
type = VarRandom
trigger1 = Time = 0
v = 1
range = 0, 2

[State 180, 2]
type = ChangeState
triggerall = command = "holdx" || command = "holdy"
trigger1 = time = 1
value = 181

[State 180, 3]
type = ChangeState
triggerall = command = "holda" || command = "holdb"
trigger1 = time = 1
value = 182

[State 180, 4]
type = ChangeState
trigger1 = Time = 1
value = 180 + var(1)

;---------------------------------------------------------------------------
; Win pose 1
[Statedef 181]
type = S
ctrl = 0
anim = 181
velset = 0,0

[State 181, 1]
type = playsnd
trigger1 = animelem = 2
value = s182,0
channel = 0

[State 181, 2]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
;Win pose 2
[Statedef 182]
type = S
ctrl = 0
anim = 182
velset = 0,0

[State 182, 1]
type = playsnd
trigger1 = animelem = 2
value = s182,1
channel = 0

[State 182, 1]
type = playsnd
trigger1 = animelem = 10, = 8
value = s182,2
channel = 0

[State 182, 3]
type = AssertSpecial
trigger1 = time <= 190
flag = roundnotover

[State 182, 2]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1


;---------------------------------------------------------------------------
; PREINTRO
[Statedef 190]
type = S
ctrl = 0
velset = 0,0

[State 190, 1]
type = ChangeAnim
trigger1 = SelfAnimExist(190)
value = 190

[State 190, 2]
type = Changestate
trigger1 = (P2Name = "Yuki" || P4Name = "Yuki" ) && enemy,authorname = "ahuron"
trigger1 = time = 0
value = 194

[State 190, 3] ;Go straight to intro.
type = ChangeState
trigger1 = Time = 0
value = 191

;---------------------------------------------------------------------------
; Introduction
[Statedef 191]
type = S
ctrl = 0
anim = 193
velset = 0,0

[State 191, 1]
type = ChangeAnim
trigger1 = RoundState = 0
value = 193

[State 191, 2]
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 191, 3]
type = AssertSpecial
trigger1 = animelemtime(2) <= 0
flag = noshadow
flag2 = invisible

[State 191, 5]
type = playsnd
trigger1 = animelem = 9
value = s180,2
channel = 0

[State 191, 6]
type = Helper
trigger1 = animelem = 2
helpertype = normal
name = "car"
ID = 192
pos = 0,0
postype = p1
facing = 1
stateno = 192
keyctrl = 0
ownpal = 1

[State 191, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
; Car states
[Statedef 192]
type = S
ctrl = 0
anim = 190
velset = 0,0
movetype = I
physics = S
sprpriority = 4

[State 192, 1]
type = playsnd
trigger1 = time = 1
value = s180,0

[State 191, 4]
type = playsnd
trigger1 = time = 38
value = s180,1

[State 192, 2]
type = Explod
trigger1 = time = 38
anim = 192
ID =192
pos = 0,0
postype = p1
facing = 1
bindtime = 1
sprpriority = 7
ownpal = 1
removeongethit = 1

[State 192, 3]
type = destroyself
trigger1 = animtime = 0

;---------------------------------------------------------------------------
; Intro vs Yuki
[Statedef 194]
type = S
ctrl = 0
anim = 185
velset = 0,0

[State 194, 1]
type = ChangeAnim
trigger1 = RoundState = 0
value = 185

[State 194, 2]
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 194, 3]
type = playsnd
trigger1 = animelem = 1, = 98
value = s181,0
channel = 0

[State 194, 4]
type = playsnd
trigger1 = animelem = 8
value = s181,2
channel = 0

[State 194, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
; Taunt
[Statedef 195]
type = S
ctrl = 0
anim = 195
velset = 0,0
movetype = I
physics = S
sprpriority = 2

[State 181, snd]
type = playsnd
trigger1 = animelem = 5
value = s195,0

[State 195, 1]
type = CtrlSet
trigger1 = Time = 60
value = 1

[State 195, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Stand Light Punch
[Statedef 200]
type    = S                    
movetype= A                 
physics = S                
juggle  = 8
velset = 0,0                    
ctrl = 0                       
anim = 200                      
poweradd = 20                    
sprpriority = 2

[State 200, 1]
type = PlaySnd
trigger1 = AnimElem = 2
value = s205,0

[State 200, 2]
type = PlaySnd
trigger1 = AnimElem = 1 && Random <= 800
value = s200,0+random%3
channel = 0

[State 200, 3]
type = Explod
triggerall = numexplod(205) = 0
trigger1 = animelem = 2, = 0
anim = 205
ID = 205
pos = 0,0
postype = p1
facing = 1
bindtime = -1
supermove = 0
ownpal = 1
removeongethit = 1
ignorehitpause = 1
sprpriority = 3

[State 200, 4]
type = RemoveExplod
trigger1 = time = 0
trigger2 = animelemtime(3) = 1
;trigger3 = numexplod(206) = 1
trigger3 = numhelper(201) = 1
id = 205
ignorehitpause = 1

;[State 200, 5]
;type = Explod
;triggerall = numexplod(206) = 0
;trigger1 = animelem = 3, = 1
;anim = 206
;ID = 206
;pos = 0,0
;postype = p1
;facing = 1
;bindtime = -1
;supermove = 0
;ownpal = 1
;trans = addalpha
;alpha = 256-(time-14)*50,256-(time-14)*50
;removeongethit = 1
;ignorehitpause = 1
;sprpriority = 3

;[State 200, 6]
;type = RemoveExplod
;trigger1 = time = 0
;id = 206

[State 410, 15]
type = Helper
trigger1 = animelem = 3, = 1
helpertype = normal
name = "SL Punch Effect"
ID = 201
stateno = 201
pos = 0,0
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
supermove = 0
pausemove = 0

[State 200, 7]
type = HitDef
triggerall = numtarget(1100) = 0 || numtarget(1470) = 0 || numtarget(1480) = 0 || numtarget(3100) = 0
triggerall = p2stateno != [5020,5040]
trigger1 = animelemtime(2) = 1
attr = S, NA                    
damage = 30, 0
animtype = Light                
hitflag = MA
guardflag = MA
priority = 3, hit             
pausetime = 8,8
sparkno = S30000
guard.sparkno = S30040
sparkxy = -10,-85
hitsound = s202,0+random%3
guardsound = s120,0
ground.type = High              
ground.slidetime = 10
ground.hittime = 10
ground.velocity = -6
air.velocity = -3,-5

[State 200, 8]
type = HitDef
triggerall = numtarget(1100) = 1 || numtarget(1470) = 1 || numtarget(1480) = 1 || numtarget(3100) = 1
triggerall = p2stateno != 5040
trigger1 = animelemtime(2) = 1
attr = S, NA
damage = 30, 0
animtype = Light
hitflag = MAF
guardflag = MA
priority = 3, hit
pausetime = 8,8
sparkno = S30000
guard.sparkno = S30040
sparkxy = -10,-85
hitsound = s202,0+random%3
guardsound = s120,0
ground.type = High
ground.slidetime = 10
ground.hittime = 10
ground.velocity = -6
air.velocity = -3,-5
p2stateno = 205

[State 200, 9]
type = AssertSpecial
triggerall = numtarget(1100) = 1 || numtarget(1470) = 1 || numtarget(1480) = 1 || numtarget(3100) = 1 || numtarget(3110) = 1
trigger1 = time >= 0
flag = nojugglecheck

[State 200, 10]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[Statedef 201]
type    = S
movetype= I
physics = S
juggle  = 0
velset = 0,0
poweradd= 0
ctrl = 0
anim = 206
sprpriority = 3

[State 411, 1]
type = AssertSpecial
trigger1 = time >= 0
flag = noshadow

[State 411, 2]
type = NotHitBy
trigger1 = time >= 0
value = SCA

[State 411, 3]
type = BindToParent
trigger1 = time >= 0
pos = 0,0

[State 411, 4]
type = Trans
trigger1 = time >= 0
trans = addalpha
alpha = 256-(time)*30,(time)*30

[State 411, 5]
type = DestroySelf
trigger1 = animtime = 0
trigger2 = parent, stateno != 200 || (parent, stateno = 200 && parent, animelemtime(1) = 0)

;P2 states
----------------
; HITA_SHAKE
[Statedef 205]
type    = A
movetype= H
physics = N
velset = 0,0

[State 0, PosSet]
type = PosSet
triggerall = pos y > 0
trigger1 = time = 0
y = 0

[State 5020, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(airtype) = 1),5000,5010) + GetHitVar(animtype)

[State 5020, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 5020, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 5020, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5020, 5]
type = ChangeState
trigger1 = HitShakeOver
value = 206

[State 5020, FFB Light]
type = ForceFeedback
trigger1 = anim = 5000
trigger2 = anim = 5010
persistent = 0
time = 6
waveform = square

[State 5020, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5001
trigger2 = anim = 5011
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5020, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012
trigger2 = anim = 5002
trigger3 = anim = 5030
trigger4 = anim = [5051,5059]
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

;---------------------------------------------------------------------------
; HITA_UP (initial going up)
[Statedef 206]
type    = A
movetype= H
physics = N
ctrl = 0

[State 5030, 1]
type = VelAdd;Gravity
trigger1 = 1
y = GetHitVar(yaccel)

[State 5030, 2]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 5030, 3]
type = ChangeState
trigger1 = HitOver
trigger2 = Vel Y > 0    ;Hit ground
trigger2 = Pos Y >= 10  ;.
value = 207 ;HITA_RECOV

[State 5030, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 207 ;HITA_UP (transition)

;---------------------------------------------------------------------------
; HITA_UP_T (transition)
[Statedef 207]
type    = A
movetype= H
physics = N

[State 5035, 1]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5035)
trigger1 = Anim != [5051,5059] ;Not if in hit up anim
trigger1 = Anim != 5090 ;Not if hit off ground anim
value = 5035

[State 5035, 2]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5035, 3]
type = ChangeState
trigger1 = HitOver  ;Hit is over
trigger2 = AnimTime = 0 ;Animation over
trigger3 = Vel Y > 0    ;Hit ground
trigger3 = Pos Y >= 10  ;.
trigger4 = Time = 0     ;No transition anim
trigger4 = Anim != 5035 ;.
value = 208 ;HITA_RECOV

[Statedef 208]
type    = A
movetype= H
physics = N
;velset = -1.5,-5

[State 5040, 1]
type = ChangeState
trigger1 = !Alive
value = 5050

[State 5040, 2]
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim != 5040
trigger2 = Time = 0
trigger2 = Anim != 5035
value = 5040

;[State 5040, 4]
;type = StateTypeSet
;trigger1 = HitOver
;movetype = I

[State 5040, 5]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5040, 6]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 52 ;JUMPLAND

;---------------------------------------------------------------------------
; Standing strong punch
[Statedef 210]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 65
ctrl = 0
velset = 0,0
anim = 210
sprpriority = 2

[State 210, 1]
type = PlaySnd
trigger1 = animelem = 2
trigger2 = animelem = 4
value = s201,0

[State 210, 2]
type = PlaySnd
trigger1 = AnimElem = 1 && Random <= 800
value = s200,3+random%3
channel = 0

[State 210, 3]
type = HitDef
triggerall = numtarget(1100) = 0 || numtarget(1470) = 0 || numtarget(1480) = 0 || numtarget(3100) = 0
triggerall = p2stateno != [5020,5040]
trigger1 = animelem = 2
attr = S, NA
damage = 50,0
animtype = Hard
hitflag = MA
guardflag = MA
priority = 3, hit
pausetime = 10,16
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10,-75
hitsound = s202,3+random%3
guardsound = s120,0
ground.type = High
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -.5,0
air.velocity = -3,-5
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0

[State 210, 4]
type = HitDef
triggerall = numtarget(1100) = 0 || numtarget(1470) = 0 || numtarget(1480) = 0 || numtarget(3100) = 0
triggerall = p2stateno != [5020,5040]
trigger1 = animelem = 4
attr = S, NA
damage = 50,0
animtype = Hard
hitflag = MA
guardflag = MA
priority = 3, hit
pausetime = 12,12
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10,-75
hitsound = s202,3+random%3
guardsound = s120,0
ground.type = High
ground.slidetime = 16
ground.hittime = 16
ground.velocity = -10
air.velocity = -3,-5

[State 210, 5]
type = HitDef
triggerall = numtarget(1100) = 1 || numtarget(1470) = 1 || numtarget(1480) = 1 || numtarget(3100) = 1
triggerall = p2stateno != 5040
trigger1 = animelem = 2
attr = S, NA
damage = 50,0
animtype = Hard
hitflag = MAF
guardflag = MA
priority = 3, hit
pausetime = 8,18
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10,-75
hitsound = s202,3+random%3
guardsound = s120,0
ground.type = High
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -.5,0
air.velocity = -3,-5
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
p2stateno = 205
id = 210

[State 210, 6]
type = HitDef
triggerall = numtarget(1100) = 1 || numtarget(1470) = 1 || numtarget(1480) = 1 || numtarget(3100) = 1
triggerall = p2stateno != 5040
triggerall = !movehit
trigger1 = animelem = 4
attr = S, NA
damage = 50,0
animtype = Hard
hitflag = MAF
guardflag = MA
priority = 3, hit
pausetime = 12,12
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10,-75
hitsound = s202,3+random%3
guardsound = s120,0
ground.type = High
ground.slidetime = 16
ground.hittime = 16
ground.velocity = -10
air.velocity = -3,-5
p2stateno = 205

[State 210, 7]
type = AssertSpecial
triggerall = numtarget(1100) = 1 || numtarget(1470) = 1 || numtarget(1480) = 1 || numtarget(3100) = 1 || numtarget(3110) = 1
trigger1 = time >= 0
flag = nojugglecheck

[State 210, 8]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Whirlwind fist
[Statedef 215]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 65
ctrl = 0
anim = 215
velset = 0,0
sprpriority = 2

[State 215, 1]
type = Varset
trigger1 = time = 0
var(2) = ifelse(command = "holdback", 0, 1)

[State 215, 2]
type = PlaySnd
trigger1 = animelem = 2
value = s211,0

[State 215, 3]
type = PlaySnd
trigger1 = AnimElem = 2 && Random <= 800
value = s200,3+random%3
channel = 0

[State 215, 4]
type = velset
trigger1 = animelemtime(2) >= 0 && animelemtime(8) < 0
x = -2+var(2)*5

[State 215, 5]
type = velset
trigger1 = animelem = 8
x = 0

[State 215, 6]
type = Explod
trigger1 = animelem = 3
anim = 220
ID = 215
pos = 0,0
postype = p1
facing = 1
bindtime = -1
sprpriority = 3
ownpal = 1
removeongethit = 1
ignorehitpause = 0

[State 215, 7]
type = AssertSpecial
triggerall = numtarget(210) = 1 || numtarget(1100) = 1 || numtarget(1470) = 1 || numtarget(1480) = 1 || numtarget(3100) = 1
triggerall = !var(2)
trigger1 = time >= 0
flag = nojugglecheck

[State 215, 8]
type = AssertSpecial
triggerall = numtarget(1100) = 1 || numtarget(1470) = 1 || numtarget(1480) = 1 || numtarget(3100) = 1
triggerall = var(2)
trigger1 = time >= 0
flag = nojugglecheck

[State 215, 9]
type = HitDef
triggerall = numtarget(210) = 0
triggerall = p2stateno != 5040
triggerall = !var(2)
trigger1 = animelem = 3
attr = S, NA
damage = 57,0
animtype = Hard
hitflag = MAF
guardflag = MA
priority = 3, hit
pausetime = 12,20
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10,-75
hitsound = s202,3+random%3
guardsound = s120,0
ground.type = Low
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -1.5,-7
air.velocity = -2,-7
fall = 1
air.fall = 1
air.recover = 0
fall.recover = 0
yaccel = .6
fall.yvelocity = -3.5

[State 215, 10]
type = HitDef
triggerall = p2stateno != 5040
triggerall = !var(2)
trigger1 = animelem = 5
attr = S, NA
damage = 57,0
animtype = Up
hitflag = MAF
guardflag = MA
priority = 3, hit
pausetime = 14,14
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10,-75
hitsound = s202,3+random%3
guardsound = s120,0
ground.type = Low
air.type = Low
ground.slidetime = 18
guard.slidetime = 18
ground.hittime = 18
guard.hittime = 18
air.hittime = 18
guard.ctrltime = 18
ground.velocity = -3,-6
guard.velocity = -10
air.velocity = -3,-6
sprpriority = 2
fall = 1
air.fall = 1
air.recover = 0
fall.recover = 0
yaccel = .5

[State 215, 11]
type = HitDef
triggerall = p2stateno != [5020,5040]
triggerall = var(2)
trigger1 = animelem = 3
attr = S, NA
damage = 65,0
animtype = Hard
hitflag = MAF
guardflag = MA
priority = 3, hit
pausetime = 12,12
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10,-75
hitsound = s202,3+random%3
guardsound = s120,0
ground.type = Low
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -2.5,-7
air.velocity = -2.5,-7
guard.velocity = -6
fall = 1
air.fall = 1
air.recover = 0
fall.recover = 0
yaccel = .5
fall.yvelocity = -3.5

[State 215, 12]
type = HitDef
triggerall = p2stateno != [5020,5040]
triggerall = var(2)
triggerall = !movehit
trigger1 = animelem = 5
attr = S, NA
damage = 65,0
animtype = Hard
hitflag = MAF
guardflag = MA
priority = 3, hit
pausetime = 12,12
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10,-75
hitsound = s202,3+random%3
guardsound = s120,0
ground.type = Low
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -2.5,-7
guard.velocity = -10
air.velocity = -2.5,-7
fall = 1
air.fall = 1
air.recover = 0
fall.recover = 0
yaccel = .5
fall.yvelocity = -3.5

[State 215, 13]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing light kick
[Statedef 230]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 22
ctrl = 0
velset = 0,0
anim = 230
sprpriority = 2

[State 230, 1]
type = PlaySnd
trigger1 = AnimElem = 2
value = s201,1

[State 230, 2]
type = PlaySnd
trigger1 = AnimElem = 2 && Random <= 800
value = s200,0+random%3
channel = 0

[State 230, 3]
type = HitDef
triggerall = numtarget(1100) = 0 || numtarget(1470) = 0 || numtarget(1480) = 0 || numtarget(3100) = 0
triggerall = p2stateno != [5020,5040]
trigger1 = time = 0
attr = S, NA
damage = 30,0
animtype = Light
hitflag = MA
guardflag = L
priority = 3, hit
pausetime = 8,8
sparkno = S30000
guard.sparkno = S30040
sparkxy = -10,-15
hitsound = s202,6+random%3
guardsound = s120,0
ground.type = High
ground.slidetime = 10
ground.hittime = 10
ground.velocity = -6
air.velocity = -3,-5

[State 230, 4]
type = HitDef
triggerall = numtarget(1100) = 1 || numtarget(1470) = 1 || numtarget(1480) = 1 || numtarget(3100) = 1
triggerall = p2stateno != 5040
trigger1 = time = 0
attr = S, NA
damage = 30, 0
animtype = Light
hitflag = MAF
guardflag = L
priority = 3, hit
pausetime = 8,8
sparkno = S30000
guard.sparkno = S30040
sparkxy = -10,-15
hitsound = s202,6+random%3
guardsound = s120,0
ground.type = High
ground.slidetime = 10
ground.hittime = 10
ground.velocity = -6
air.velocity = -3,-5
p2stateno = 205

[State 230, 5]
type = AssertSpecial
triggerall = numtarget(1100) = 1 || numtarget(1470) = 1 || numtarget(1480) = 1 || numtarget(3100) = 1 || numtarget(3110) = 1
trigger1 = time >= 0
flag = nojugglecheck

[State 230, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing strong kick
[Statedef 240]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 65
ctrl = 0
velset = 0,0
anim = 240
sprpriority = 2

[State 240, 1]
type = PlaySnd
trigger1 = AnimElem = 1
trigger2 = animelem = 4
value = s201,1

[State 240, 2]
type = PlaySnd
trigger1 = AnimElem = 1 && Random <= 800
value = s200,3+random%3
channel = 0

[State 240, 3]
type = PlaySnd
trigger1 = AnimElem = 9
value = s47,0

[State 240, 4]
type = HitDef
triggerall = numtarget(1100) = 0 || numtarget(1470) = 0 || numtarget(1480) = 0 || numtarget(3100) = 0
triggerall = !Movehit
triggerall = p2stateno != [5020,5040]
trigger1 = animelem = 2
attr = S, NA
damage = 65,0
animtype = Hard
hitflag = MA
guardflag = MA
priority = 3, hit
pausetime = 12,14
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10,-60
hitsound = s202,9+random%3
guardsound = s120,0
ground.type = Low
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -8
guard.velocity = -10
air.velocity = -1.5,-7
air.guard.velocity = -3,-5
fall = 0
air.fall = 0
air.recover = 0
fall.recover = 0
yaccel = .6
fall.yvelocity = -3.5

[State 240, 5]
type = HitDef
triggerall = numtarget(1100) = 1 || numtarget(1470) = 1 || numtarget(1480) = 1 || numtarget(3100) = 1
triggerall = !Movehit
triggerall = p2stateno != 5040
trigger1 = animelem = 2
attr = S, NA
damage = 65,0
animtype = Hard
hitflag = MAF
guardflag = MA
priority = 3, hit
pausetime = 12,14
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10,-60
hitsound = s202,9+random%3
guardsound = s120,0
ground.type = Low
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -8
guard.velocity = 10
air.velocity = -1.5,-7
air.guard.velocity = -3,-5
fall = 0
air.fall = 0
air.recover = 0
fall.recover = 0
yaccel = .6
fall.yvelocity = -3.5

[State 240, 6]
type = HitDef
triggerall = numtarget(1100) = 0 || numtarget(1470) = 0 || numtarget(1480) = 0 || numtarget(3100) = 0
triggerall = !Movehit
triggerall = p2stateno != [5020,5040]
trigger1 = animelem = 4
attr = S, NA
damage = 65,0
animtype = Hard
hitflag = MA
guardflag = MA
priority = 3, hit
pausetime = 12,14
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10,-60
hitsound = s202,9+random%3
guardsound = s120,0
ground.type = Low
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -8
guard.velocity = 10
air.velocity = 1.5,-7
air.guard.velocity = 3,-5
fall = 0
air.fall = 0
air.recover = 0
fall.recover = 0
yaccel = .6
fall.yvelocity = -3.5

[State 240, 7]
type = HitDef
triggerall = numtarget(1100) = 1 || numtarget(1470) = 1 || numtarget(1480) = 1 || numtarget(3100) = 1
triggerall = !Movehit
triggerall = p2stateno != 5040
trigger1 = animelem = 4
attr = S, NA
damage = 65,0
animtype = Hard
hitflag = MAF
guardflag = MA
priority = 3, hit
pausetime = 12,14
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10,-60
hitsound = s202,9+random%3
guardsound = s120,0
ground.type = Low
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -8
guard.velocity = 10
air.velocity = 1.5,-7
air.guard.velocity = 3,-5
fall = 0
air.fall = 0
air.recover = 0
fall.recover = 0
yaccel = .6
fall.yvelocity = -3.5



[State 240, 10]
type = AssertSpecial
triggerall = numtarget(1100) = 1 || numtarget(1470) = 1 || numtarget(1480) = 1 || numtarget(3100) = 1 || numtarget(3110) = 1
trigger1 = time >= 0
flag = nojugglecheck

[State 240, 11]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Crouching light punch
[Statedef 400]
type    = C
movetype= A
physics = C
juggle  = 8
velset = 0,0
poweradd= 15
ctrl = 0
anim = 400
sprpriority = 2

[State 400, 1]
type = PlaySnd
trigger1 = AnimElem = 1
value = s201,0

[State 400, 2]
type = PlaySnd
trigger1 = AnimElem = 1 && Random <= 800
value = s200,0+random%3
channel = 0

[State 400, 3]
type = HitDef
triggerall = numtarget(1100) = 0 || numtarget(1470) = 0 || numtarget(1480) = 0 || numtarget(3100) = 0
triggerall = p2stateno != [5020,5040]
trigger1 = time = 0
attr = C, NA
damage = 30, 0
animtype = Light
hitflag = MA
guardflag = MA
priority = 3, hit
pausetime = 8,8
sparkno = S30000
guard.sparkno = S30040
sparkxy = -10,-32
hitsound = s202,0+random%3
guardsound = s120,0
ground.type = High
ground.slidetime = 10
ground.hittime = 10
ground.velocity = -6
air.velocity = -3,-5

[State 400, 4]
type = HitDef
triggerall = numtarget(1100) = 1 || numtarget(1470) = 1 || numtarget(1480) = 1 || numtarget(3100) = 1
triggerall = p2stateno != 5040
trigger1 = time = 0
attr = C, NA
damage = 30, 0
animtype = Light
hitflag = MAF
guardflag = MA
priority = 3, hit
pausetime = 8,8
sparkno = S30000
guard.sparkno = S30040
sparkxy = -10,-32
hitsound = s202,0+random%3
guardsound = s120,0
ground.type = High
ground.slidetime = 12
ground.hittime = 12
ground.velocity = -6
air.velocity = -3,-5
p2stateno = 205

[State 400, 5]
type = AssertSpecial
triggerall = numtarget(1100) = 1 || numtarget(1470) = 1 || numtarget(1480) = 1 || numtarget(3100) = 1 || numtarget(3110) = 1
trigger1 = time >= 0
flag = nojugglecheck

[State 400, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;Robo Arm
[Statedef 405]
type    = C
movetype= A
physics = C
juggle  = 8
velset = 0,0
poweradd= 15
ctrl = 0
anim = 405
sprpriority = 2

[State 405, 1]
type = PlaySnd
trigger1 = AnimElem = 4
value = s405,0

[State 405, 2]
type = PlaySnd
trigger1 = AnimElem = 3 && Random <= 800
value = s200,0+random%3
channel = 0

[State 405, 3]
type = HitDef
triggerall = p2stateno != 5040
trigger1 = animelem = 2
attr = C, NA
damage = 50,0
animtype = Hard
hitflag = MAF
guardflag = MA
priority = 3, hit
pausetime = 8,14
sparkno = S30000
guard.sparkno = S30040
sparkxy = -10,-38
hitsound = s202,0+random%3
guardsound = s120,0
ground.type = Low
ground.slidetime = 10
ground.hittime = 10
ground.velocity = -6.5
air.velocity = -3,-5

[State 405, 4]
type = AssertSpecial
triggerall = numtarget(1100) = 1 || numtarget(1470) = 1 || numtarget(1480) = 1 || numtarget(3100) = 1 || numtarget(3110) = 1
trigger1 = time >= 0
flag = nojugglecheck

[State 405, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;Crouching strong punch
[Statedef 410]
type    = C
movetype= A
physics = C
juggle  = 8
velset = 0,0
poweradd= 50
ctrl = 0
anim = 410
sprpriority = 2

[State 410, 1]
type = PlaySnd
trigger1 = AnimElem = 1, = 2
value = s410,0

[State 410, 2]
type = PlaySnd
trigger1 = AnimElem = 2
value = s5000,2
channel = 0

[State 410, 3]
type = PlaySnd
trigger1 = AnimElem = 4
value = s410,1

[State 410, 3]
type = Explod
triggerall = numexplod(415) = 0
trigger1 = animelem = 1, = 4
anim = 415
ID = 415
pos = 8,-20
postype = p1
facing = 1
bindtime = -1
sprpriority = 3
ownpal = 1
removeongethit = 1
ignorehitpause = 1

[State 410, 4]
type = RemoveExplod
trigger1 = animelem = 2, = 0
trigger2 = numexplod(416) = 1
id = 415
ignorehitpause = 1

[State 410, 5]
type = Explod
triggerall = numexplod(416) = 0
trigger1 = animelem = 2
anim = 416
ID = 416
pos = 8,-20
postype = p1
facing = 1
bindtime = -1
sprpriority = 3
ownpal = 1
removeongethit = 1
ignorehitpause = 1

[State 410, 6]
type = RemoveExplod
trigger1 = animelem = 3, = 0
trigger2 = numexplod(417) = 1
id = 416
ignorehitpause = 1

[State 410, 7]
type = Explod
triggerall = numexplod(417) = 0
trigger1 = animelem = 3
anim = 417
ID = 417
pos = 8,-20
postype = p1
facing = 1
bindtime = -1
sprpriority = 3
ownpal = 1
removeongethit = 1
ignorehitpause = 1

[State 410, 8]
type = RemoveExplod
trigger1 = animelem = 4, = 0
trigger2 = numexplod(418) = 1
id = 417
ignorehitpause = 1

[State 410, 9]
type = Explod
triggerall = numexplod(418) = 0
trigger1 = animelem = 4
anim = 418
ID = 418
pos = 8,-20
postype = p1
facing = 1
bindtime = -1
sprpriority = 3
ownpal = 1
removeongethit = 1
ignorehitpause = 1

[State 410, 10]
type = RemoveExplod
trigger1 = animelem = 6, = 0
trigger2 = numexplod(419) = 1
id = 418
ignorehitpause = 1

[State 410, 11]
type = Explod
triggerall = numexplod(419) = 0
trigger1 = animelem = 6
anim = 419
ID = 419
pos = 8,-20
postype = p1
facing = 1
bindtime = -1
sprpriority = 3
ownpal = 1
removeongethit = 1
ignorehitpause = 1

[State 410, 12]
type = RemoveExplod
trigger1 = animelem = 7, = 0
trigger2 = numexplod(420) = 1
id = 419
ignorehitpause = 1

[State 410, 13]
type = Explod
triggerall = numexplod(420) = 0
trigger1 = animelem = 7
anim = 420
ID = 420
pos = 8,-20
postype = p1
facing = 1
bindtime = -1
sprpriority = 3
ownpal = 1
removeongethit = 1
ignorehitpause = 1

[State 410, 14]
type = RemoveExplod
trigger1 = animelem = 8, = 0
trigger2 = numhelper(411) = 1
;trigger2 = numexplod(421) = 1
id = 420
ignorehitpause = 1

;[State 410, 15]
;type = Explod
;triggerall = numexplod(421) = 0
;trigger1 = animelem = 8
;anim = 421
;ID = 421
;pos = 8,-20
;postype = p1
;facing = 1
;bindtime = -1
;sprpriority = 3
;trans = addalpha
;alpha = 256-(time-14)*30,(time-14)*30
;ownpal = 1
;removeongethit = 1
;ignorehitpause = 1

[State 410, 15]
type = Helper
trigger1 = animelem = 8
helpertype = normal
name = "CS Punch Effect"
ID = 411
stateno = 411
pos = 8,-20
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
supermove = 0
pausemove = 0

[State 410, 16]
type = HitDef
triggerall = numtarget(1100) = 0 || numtarget(1470) = 0 || numtarget(1480) = 0 || numtarget(3100) = 0
triggerall = p2stateno != [5020,5040]
trigger1 = time = 0
attr = C, NA
damage = 65,0
animtype = Hard
hitflag = MA
guardflag = MA
priority = 3, hit
pausetime = 12,12
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10,-75
hitsound = s202,3+random%3
guardsound = s120,0
ground.type = High
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -10
air.velocity = -3,-5

[State 410, 17]
type = HitDef
triggerall = numtarget(1100) = 1 || numtarget(1470) = 1 || numtarget(1480) = 1 || numtarget(3100) = 1
triggerall = p2stateno != 5040
trigger1 = time = 0
attr = C, NA
damage = 65,0
animtype = Hard
hitflag = MAF
guardflag = MA
priority = 3, hit
pausetime = 12,12
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10,-75
hitsound = s202,3+random%3
guardsound = s120,0
ground.type = High
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -10
air.velocity = -3,-5
p2stateno = 205

[State 410, 18]
type = AssertSpecial
triggerall = numtarget(1100) = 1 || numtarget(1470) = 1 || numtarget(1480) = 1 || numtarget(3100) = 1 || numtarget(3110) = 1
trigger1 = time >= 0
flag = nojugglecheck

[State 410, 19]
type = StateTypeSet
trigger1 = animelem = 2
statetype = S
physics = S
ignorehitpause = 1

[State 410, 20]
type = StateTypeSet
trigger1 = animelem = 8
statetype = C
physics = C
ignorehitpause = 1

[State 410, 21]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

[Statedef 411]
type    = S
movetype= I
physics = S
juggle  = 0
velset = 0,0
poweradd= 0
ctrl = 0
anim = 421
sprpriority = 3

[State 411, 1]
type = AssertSpecial
trigger1 = time >= 0
flag = noshadow

[State 411, 2]
type = NotHitBy
trigger1 = time >= 0
value = SCA

[State 411, 3]
type = BindToParent
trigger1 = time >= 0
pos = 8,-20

[State 411, 4]
type = Trans
trigger1 = time >= 0
trans = addalpha
alpha = 256-(time)*18,(time)*18

[State 411, 5]
type = DestroySelf
trigger1 = animtime = 0
trigger2 = parent, stateno != 410


;---------------------------------------------------------------------------
;Crouching light kick
[Statedef 430]
type    = C
movetype= A
physics = C
juggle  = 8
velset = 0,0
poweradd= 22
ctrl = 0
anim = 430
sprpriority = 2

[State 430, 1]
type = PlaySnd
trigger1 = animelem = 1, = 3
value = s201,1

[State 430, 2]
type = PlaySnd
trigger1 = AnimElem = 1, = 3 && Random <= 800
value = s200,0+random%3
channel = 0

[State 430, 3]
type = HitDef
triggerall = p2stateno != [5020,5040]
trigger1 = time = 0
attr = C, NA
damage = 30,0
animtype = Light
hitflag = M
guardflag = L
priority = 3, hit
pausetime = 8,8
sparkno = S30000
guard.sparkno = S30040
sparkxy = -10,-5
hitsound = s202,6+random%3
guardsound = s120,0
ground.type = High
ground.slidetime = 10
ground.hittime = 10
ground.velocity = -6
air.velocity = -3,-5

[State 430, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;Crouch Strong Kick
[Statedef 440]
type    = C
movetype= A
physics = C
juggle  = 8
velset = 0,0
poweradd= 70
ctrl = 0
anim = 440
sprpriority = 2

[State 440, 1]
type = PlaySnd
trigger1 = AnimElem = 2
value = s100,1

[State 440, 2]
type = velset
trigger1 = animelemtime(2) >= 0 && animelemtime(5) < 0
x = 2.75

[State 440, 2]
type = velset
trigger1 = animelemtime(5) >= 0 && animelemtime(6) < 0
x = 2.25

[State 440, 2]
type = velset
trigger1 = animelemtime(6) >= 0 && animelemtime(7) < 0
x = 1.75

[State 440, 3]
type = velset
trigger1 = animelem = 7
x = 0

[State 440, 4]
type = StateTypeSet
trigger1 = animelem = 3
statetype = S
physics = S

[State 440, 5]
type = StateTypeSet
trigger1 = animelem = 8
statetype = C
physics = C

[State 440, 6]
type = HitDef
triggerall = numtarget(1100) = 0 || numtarget(1470) = 0 || numtarget(1480) = 0 || numtarget(3100) = 0
triggerall = p2stateno != [5020,5040]
trigger1 = time = 0
attr = C, NA
damage = 65,0
animtype = Hard
hitflag = MA
guardflag = MA
priority = 3, hit
pausetime = 8,14
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10,-50
hitsound = s202,9+random%3
guardsound = s120,0
ground.type = Low
ground.slidetime = 16
ground.hittime = 16
ground.velocity = -7.5
air.velocity = -3,-5
ground.cornerpush.veloff = -7
air.cornerpush.veloff = -7
guard.cornerpush.veloff = -7
airguard.cornerpush.veloff = -7

[State 440, 7]
type = HitDef
triggerall = numtarget(1100) = 1 || numtarget(1470) = 1 || numtarget(1480) = 1 || numtarget(3100) = 1
triggerall = p2stateno != 5040
trigger1 = time = 0
attr = C, NA
damage = 65,0
animtype = Hard
hitflag = MAF
guardflag = MA
priority = 3, hit
pausetime = 8,14
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10,-50
hitsound = s202,9+random%3
guardsound = s120,0
ground.type = Low
ground.slidetime = 16
ground.hittime = 16
ground.velocity = -7.5
air.velocity = -3,-5
ground.cornerpush.veloff = -7
air.cornerpush.veloff = -7
guard.cornerpush.veloff = -7
airguard.cornerpush.veloff = -7
p2stateno = 205

[State 440, 8]
type = AssertSpecial
triggerall = numtarget(1100) = 1 || numtarget(1470) = 1 || numtarget(1480) = 1 || numtarget(3100) = 1 || numtarget(3110) = 1
trigger1 = time >= 0
flag = nojugglecheck

[State 440, 9]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;Hyper Tackle
[Statedef 445]
type    = C
movetype= A
physics = C
juggle  = 8
velset = 0,0
poweradd= 70
ctrl = 0
anim = 440
sprpriority = 2

[State 445, 1]
type = varset
trigger1 = time = 0
var(2) = ifelse(command = "holdback", 0, 1)

[State 445, 2]
type = PlaySnd
trigger1 = AnimElem = 2
value = s100,1

[State 445, 3]
type = velset
trigger1 = animelemtime(2) >= 0 && animelemtime(5) < 0
x = 2+var(2)*1.5

[State 440, 2]
type = velset
trigger1 = animelemtime(5) >= 0 && animelemtime(6) < 0
x = 1.50+var(2)*1.5

[State 440, 2]
type = velset
trigger1 = animelemtime(6) >= 0 && animelemtime(7) < 0
x = 1+var(2)*1.5

[State 445, 4]
type = velset
trigger1 = animelem = 7
x = 0

[State 445, 5]
type = StateTypeSet
trigger1 = animelem = 3
statetype = S
physics = S

[State 445, 6]
type = StateTypeSet
trigger1 = animelem = 8
statetype = C
physics = C

[State 445, 7]
type = HitDef
triggerall = numtarget(1100) = 0 || numtarget(1470) = 0 || numtarget(1480) = 0 || numtarget(3100) = 0
triggerall = p2stateno != [5020,5040]
trigger1 = time = 0
attr = C, NA
damage = 65,0
animtype = Hard
hitflag = MA
guardflag = MA
priority = 3, hit
pausetime = 6,ifelse(prevstateno = 400, 18, 14)
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10,-50
hitsound = s202,9+random%3
guardsound = s120,0
ground.type = Low
ground.slidetime = ifelse(prevstateno = 400, 12, 16)
ground.hittime = ifelse(prevstateno = 400, 12, 16)
ground.velocity = -7.5
air.velocity = -3,-5
ground.cornerpush.veloff = -7
air.cornerpush.veloff = -7
guard.cornerpush.veloff = -7
airguard.cornerpush.veloff = -7

[State 445, 8]
type = HitDef
triggerall = numtarget(1100) = 1 || numtarget(1470) = 1 || numtarget(1480) = 1 || numtarget(3100) = 1
triggerall = p2stateno != 5040
trigger1 = time = 0
attr = C, NA
damage = 65,0
animtype = Hard
hitflag = MAF
guardflag = MA
priority = 3, hit
pausetime = 6,14
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10,-50
hitsound = s202,9+random%3
guardsound = s120,0
ground.type = Low
ground.slidetime = 16
ground.hittime = 16
ground.velocity = -7.5
air.velocity = -3,-5
ground.cornerpush.veloff = -7
air.cornerpush.veloff = -7
guard.cornerpush.veloff = -7
airguard.cornerpush.veloff = -7
p2stateno = 205

[State 445, 9]
type = AssertSpecial
triggerall = numtarget(1100) = 1 || numtarget(1470) = 1 || numtarget(1480) = 1 || numtarget(3100) = 1 || numtarget(3110) = 1
trigger1 = time >= 0
flag = nojugglecheck

[State 445, 10]
type = PosAdd
triggerall = prevstateno = 400
trigger1 = time = 0
x = 15

[State 445, 11]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;Jump Light Punch
[Statedef 600]
type    = A
movetype= A
physics = A
juggle  = 8
poweradd= 11
ctrl = 0
anim = 600
sprpriority = 2

[State 600, 1]
type = PlaySnd
trigger1 = animelem = 1
value = s201,0

[State 600, 2]
type = PlaySnd
trigger1 = AnimElem = 1 && Random <= 800
value = s200,0+random%3
channel = 0

[State 600, 3]
type = HitDef
triggerall = numtarget(1100) = 0 || numtarget(1470) = 0 || numtarget(1480) = 0 || numtarget(3100) = 0
triggerall = p2stateno != [5020,5040]
trigger1 = time = 0
attr = A, NA
damage = 30, 0
animtype = Light
hitflag = MA
guardflag = HA
priority = 3, hit
pausetime = 8,8
sparkno = S30000
guard.sparkno = S30040
sparkxy = -10,-85
hitsound = s202,0+random%3
guardsound = s120,0
ground.type = Low
ground.slidetime = 15
ground.hittime = 15
ground.velocity = -4
air.velocity = -3,-5

[State 600, 4]
type = HitDef
triggerall = numtarget(1100) = 1 || numtarget(1470) = 1 || numtarget(1480) = 1 || numtarget(3100) = 1
triggerall = p2stateno != 5040
trigger1 = time = 0
attr = A, NA
damage = 30, 0
animtype = Light
hitflag = MAF
guardflag = HA
priority = 3, hit
pausetime = 8,8
sparkno = S30000
guard.sparkno = S30040
sparkxy = -10,-93
hitsound = s202,0+random%3
guardsound = s120,0
ground.type = Low
ground.slidetime = 15
ground.hittime = 15
ground.velocity = -4
air.velocity = -3,-5
p2stateno = 205

[State 600, 5]
type = AssertSpecial
triggerall = numtarget(1100) = 1 || numtarget(1470) = 1 || numtarget(1480) = 1 || numtarget(3100) = 1 || numtarget(3110) = 1
trigger1 = time >= 0
flag = nojugglecheck

;---------------------------------------------------------------------------
;Jump Strong Punch
[Statedef 610]
type    = A
movetype= A
physics = A
juggle  = 8
poweradd= 65
ctrl = 0
anim = 610
sprpriority = 2

[State 610, 1]
type = PlaySnd
trigger1 = animelem = 3
value = s201,0

[State 610, 2]
type = PlaySnd
trigger1 = animelem = 3
value = s410,0

[State 610, 3]
type = PlaySnd
trigger1 = AnimElem = 1 && Random <= 800
value = s200,3+random%3
channel = 0

[State 610, 4]
type = Explod
trigger1 = animelem = 3
anim = 615
ID = 615
pos = 0,-5
postype = p1
facing = 1
bindtime = -1
sprpriority = 3
ownpal = 1
removeongethit = 1
ignorehitpause = 1

[State 610, 5]
type = Explod
triggerall = numexplod(616) = 0
trigger1 = animelem = 4, = 0
anim = 616
ID = 616
pos = 0,-5
postype = p1
facing = 1
bindtime = -1
sprpriority = 3
ownpal = 1
removeongethit = 1
ignorehitpause = 1

[State 610, 6]
type = Explod
triggerall = numexplod(617) = 0
trigger1 = animelem = 5
anim = 617
ID = 617
pos = 0,-5
postype = p1
facing = 1
bindtime = -1
sprpriority = 3
ownpal = 1
removeongethit = 1
ignorehitpause = 1

[State 610, 7]
type = Explod
triggerall = numexplod(618) = 0
trigger1 = animelem = 7
anim = 618
ID = 618
pos = 0,-5
postype = p1
facing = 1
bindtime = -1
sprpriority = 3
ownpal = 1
removeongethit = 1
ignorehitpause = 1

[State 610, 8]
type = RemoveExplod
trigger1 = animelem = 4
trigger2 = numexplod(616) = 1
id = 615
ignorehitpause = 1

[State 610, 9]
type = RemoveExplod
trigger1 = animelem = 5
trigger2 = numexplod(617) = 1
id = 616
ignorehitpause = 1

[State 610, 10]
type = RemoveExplod
trigger1 = animelem = 7
trigger2 = numexplod(618) = 1
id = 617
ignorehitpause = 1

[State 610, 11]
type = HitDef
triggerall = numtarget(1100) = 0 || numtarget(1470) = 0 || numtarget(1480) = 0 || numtarget(3100) = 0
triggerall = p2stateno != [5020,5040]
trigger1 = time = 0
attr = A, NA
damage = 72,0
animtype = Hard
hitflag = MA
guardflag = HA
priority = 3, hit
pausetime = 10,12
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10,-50
hitsound = s202,3+random%3
guardsound = s120,0
ground.type = Low
ground.slidetime = 15
ground.hittime = 15
ground.velocity = -4
air.velocity = -3,-5

[State 610, 12]
type = HitDef
triggerall = numtarget(210) = 1 || numtarget(1100) = 1 || numtarget(1470) = 1 || numtarget(1480) = 1 || numtarget(3100) = 1
triggerall = p2stateno != 5040
trigger1 = time = 0
attr = A, NA
damage = 72,0
animtype = Hard
hitflag = MAF
guardflag = HA
priority = 3,hit
pausetime = 10,12
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10,-50
hitsound = s202,3+random%3
guardsound = s120,0
ground.type = Low
ground.slidetime = 15
ground.hittime = 15
ground.velocity = -4
air.velocity = -3,-5
p2stateno = 205

[State 610, 13]
type = AssertSpecial
triggerall = numtarget(1100) = 1 || numtarget(1470) = 1 || numtarget(1480) = 1 || numtarget(3100) = 1 || numtarget(3110) = 1
trigger1 = time >= 0
flag = nojugglecheck


;---------------------------------------------------------------------------
;Jump Light Kick
[Statedef 630]
type    = A
movetype= A
physics = A
juggle  = 8
poweradd= 20
ctrl = 0
anim = 630
sprpriority = 2

[State 630, 1]
type = PlaySnd
trigger1 = animelem = 1
value = s201,1

[State 630, 2]
type = PlaySnd
trigger1 = AnimElem = 1 && Random <= 800
value = s200,0+random%3
channel = 0

[State 630, 3]
type = HitDef
triggerall = numtarget(1100) = 0 || numtarget(1470) = 0 || numtarget(1480) = 0 || numtarget(3100) = 0
triggerall = p2stateno != [5020,5040]
trigger1 = time = 0
attr = A, NA
damage = 30,0
animtype = Light
hitflag = MA
guardflag = HA
priority = 3, hit
pausetime = 10,10
sparkno = S30000
guard.sparkno = S30040
sparkxy = -10,-55
hitsound = s202,6+random%3
guardsound = s120,0
ground.type = Low
ground.slidetime = 15
ground.hittime = 15
ground.velocity = -4
air.velocity = -3,-5

[State 630, 4]
type = HitDef
triggerall = numtarget(1100) = 1 || numtarget(1470) = 1 || numtarget(1480) = 1 || numtarget(3100) = 1
triggerall = p2stateno != 5040
trigger1 = time = 0
attr = A, NA
damage = 30,0
animtype = Light
hitflag = MAF
guardflag = HA
priority = 3, hit
pausetime = 10,10
sparkno = S30000
guard.sparkno = S30040
sparkxy = -10,-55
hitsound = s202,6+random%3
guardsound = s120,0
ground.type = Low
ground.slidetime = 15
ground.hittime = 15
ground.velocity = -4
air.velocity = -3,-5
p2stateno = 205

[State 630, 5]
type = AssertSpecial
triggerall = numtarget(1100) = 1 || numtarget(1470) = 1 || numtarget(1480) = 1 || numtarget(3100) = 1 || numtarget(3110) = 1
trigger1 = time >= 0
flag = nojugglecheck

;---------------------------------------------------------------------------
;Jump Strong Kick
[Statedef 640]
type    = A
movetype= A
physics = A
juggle  = 8
poweradd= 65
ctrl = 0
anim = 640
sprpriority = 2

[State 640, 1]
type = PlaySnd
trigger1 = animelem = 2
value = s201,1

[State 640, 2]
type = PlaySnd
trigger1 = AnimElem = 2 && Random <= 800
value = s200,3+random%3
channel = 0

[State 640, 3]
type = HitDef
triggerall = numtarget(1100) = 0 || numtarget(1470) = 0 || numtarget(1480) = 0 || numtarget(3100) = 0
triggerall = p2stateno != [5020,5040]
trigger1 = time = 0
attr = A, NA
damage = 65,0
animtype = Hard
hitflag = MA
guardflag = HA
priority = 3, hit
pausetime = 12,12
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10,-40
hitsound = s202,9+random%3
guardsound = s120,0
ground.type = Low
ground.slidetime = 15
ground.hittime = 15
ground.velocity = -4
air.velocity = -3,-5

[State 640, 4]
type = HitDef
triggerall = numtarget(1100) = 1 || numtarget(1470) = 1 || numtarget(1480) = 1 || numtarget(3100) = 1
triggerall = p2stateno != 5040
trigger1 = time = 0
attr = A, NA
damage = 65,0
animtype = Hard
hitflag = MAF
guardflag = HA
priority = 3, hit
pausetime = 12,12
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10,-40
hitsound = s202,9+random%3
guardsound = s120,0
ground.type = Low
ground.slidetime = 15
ground.hittime = 15
ground.velocity = -4
air.velocity = -3,-5
p2stateno = 205

[State 640, 5]
type = AssertSpecial
triggerall = numtarget(1100) = 1 || numtarget(1470) = 1 || numtarget(1480) = 1 || numtarget(3100) = 1 || numtarget(3110) = 1
trigger1 = time >= 0
flag = nojugglecheck






















[Statedef 650]
type    = A
movetype= A
physics = A
juggle  = 8
poweradd= 80
ctrl = 0
anim = 640
sprpriority = 2

[State 640, 1]
type = PlaySnd
trigger1 = animelem = 2
value = s201,1

[State 640, 2]
type = PlaySnd
trigger1 = AnimElem = 2 && Random <= 800
value = s200,3+random%3
channel = 0

[State 640, 3]
type = HitDef
triggerall = numtarget(1100) = 0 || numtarget(1470) = 0 || numtarget(1480) = 0 || numtarget(3100) = 0
triggerall = p2stateno != [5020,5040]
trigger1 = time = 0
attr = A, NA
damage = 80,0
animtype = Hard
hitflag = MA
guardflag = HA
priority = 3, hit
pausetime = 12,12
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10,-40
hitsound = s202,9+random%3
guardsound = s120,0
ground.type = Low
ground.slidetime = 15
ground.hittime = 15
ground.velocity = -4
air.velocity = -3,-5
fall = 1

[State 640, 4]
type = HitDef
triggerall = numtarget(1100) = 1 || numtarget(1470) = 1 || numtarget(1480) = 1 || numtarget(3100) = 1
triggerall = p2stateno != 5040
trigger1 = time = 0
attr = A, NA
damage = 80,0
animtype = Hard
hitflag = MAF
guardflag = HA
priority = 3, hit
pausetime = 12,12
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10,-40
hitsound = s202,9+random%3
guardsound = s120,0
ground.type = Low
ground.slidetime = 15
ground.hittime = 15
ground.velocity = -4
air.velocity = -3,-5
p2stateno = 205
fall = 1

[State 640, 5]
type = AssertSpecial
triggerall = numtarget(1100) = 1 || numtarget(1470) = 1 || numtarget(1480) = 1 || numtarget(3100) = 1 || numtarget(3110) = 1
trigger1 = time >= 0
flag = nojugglecheck



























;----------------------------------------------------------
; Top Hunter Throw
[Statedef 800]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = 800
sprpriority = 2

[State 800, 1]
type = VarSet
trigger1 = time = 0
var(2) = ifelse(command = "holdback", 1, 0)

[State 800, 2]
type = PlaySnd
trigger1 = animelem = 3
value = s5000,1
channel = 0

[State 800, 3]
type = HitDef
Trigger1 = Time = 0
attr = S, NT
hitflag = M-
priority = 1, Miss
sparkno = -1
sprpriority = 1
p1facing = 1
p2facing = -1
p1stateno = 810
p2stateno = 820
guard.dist = 0
fall = 1
id = 800

[State 800, 4]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Top Hunter Throw - Throwing the opponent
[Statedef 810]
type    = S
movetype= A
physics = S
anim = 810
poweradd = 60

[State 810, 1]
type = PlaySnd
trigger1 = AnimElem = 1
value = s202,0

[State 810, 2]
type = PlaySnd
trigger1 = AnimElem = 5
value = s200,3+random%3
channel = 0

[State 810, 3]
type = Explod
trigger1 = animelem = 1
anim = 8020
ID = 8020
pos = 25,-70
postype = p1
bindtime = 1
vel = 0,0
accel = 0,0
sprpriority = 3
ownpal = 1

[State 810, 4]
type = Turn
triggerall = var(2)
trigger1 = animelem = 3

[State 810, 5]
type = TargetFacing
trigger1 = animelemtime(4) <= 0
value = -1
ID = 800

[State 800, 6]
type = VarSet
trigger1 = animelem = 4
var(2) = 0

[State 810, 7]
type = TargetBind
trigger1 = AnimElemTime(3) < 0
pos = 20, 0

[State 810, 8]
type = TargetBind
trigger1 = AnimElemTime(3) >= 0 && AnimElemTime(5) < 0
pos = -2, -108

[State 810, 9]
type = TargetBind
trigger1 = AnimElem = 5, = 0
pos = 15, -98

[State 810, 10]
type = Width
trigger1 = AnimElemTime(8) < 0
edge = 25,0

[State 810, 11]
type = TargetLifeAdd
trigger1 = AnimElem = 5
value = -100

[State 810, 12]
type = TargetState
trigger1 = AnimElem = 5, =0
value = 821

[State 810, 13]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Thrown by Top Hunter Throw
[Statedef 820]
type    = A
movetype= H
physics = N
velset = 0,0

[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 820

;---------------------------------------------------------------------------
;Thrown by Top Hunter Throw - thrown into the air
[Statedef 821]
type    = A
movetype= H
physics = N
velset = -4,-7
poweradd = 40

[State 821, 1]
type = VelAdd
Trigger1 = 1
y = .4

[State 821, 2]
type = ChangeState
triggerall = Vel Y > 0
triggerall = Pos Y >= -20
triggerall = alive
triggerall = CanRecover
trigger1 = Command = "recovery"
value = 5200 ;HITFALL_RECOVER

[State 821, 3]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100 ;Hit ground


;---------------------------------------------------------------------------
;P2 getting ou of a custon state (coded by SMI)
;---------------------------------------------------------------------------
; Throw_BOUNCE (hit ground)
[Statedef 822]
type    = L
movetype= H
physics = N

[State 822, 1]
type = VelSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
trigger1 = vel x > 1
x = 1

[State 822, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 822, Var] ;Save fall velocity
type = VarSet
trigger1 = Time = 0
sysvar(1) = floor(vel y)

[State 822, 2] ;Hit ground anim (normal)
type = ChangeAnim
trigger1 = time = 0
value = 5100

[State 822, 4]
type = PosSet
trigger1 = Time = 0
y = 0

[State 822, 5]
type = VelSet
trigger1 = Time = 0
y = 0

[State 822, 6] ;Reduce speed
type = VelMul
trigger1 = Time = 0
x = 0.75

[State 822, 7]
type = ChangeState
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
value = 824 ;Throw_LIEDOWN

[State 822, 8]
type = GameMakeAnim
trigger1 = Time = 1
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = sysvar(1) <= 10

[State 822, 9]
type = HitFallDamage
trigger1 = Time = 3

[State 822, 10]
type = PlaySnd
trigger1 = Time = 1
value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)

[State 822, 11]
type = PosFreeze
trigger1 = 1

[State 822, 12]
type = ChangeState
trigger1 = AnimTime = 0
value = 823

[State 822, 13]
type = ForceFeedback
trigger1 = Time = 0
waveform = sinesquare
ampl = 128,-3,-.2,.005
time = 20

;---------------------------------------------------------------------------
; Throw_BOUNCE (bounce into air)
[Statedef 823]
type    = L
movetype= H
physics = N

[State 823, 1] ;Coming hit ground anim (normal)
type = ChangeAnim
trigger1 = time = 0
value = 5160

[State 823, 3]
type = HitFallVel
trigger1 = Time = 0

[State 823, 4]
type = PosSet
trigger1 = Time = 0
y = 20

[State 823, 5] ;Acceleration
type = VelAdd
trigger1 = 1
y = .4

[State 823, 6] ;Hit ground
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 12
type = ChangeState
value = 824

;---------------------------------------------------------------------------
; HIT_LIEDOWN
[Statedef 824]
type    = L
movetype= H
physics = N

[State 824, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 824, 2] ;Hit ground anim (normal)
type = ChangeAnim
trigger1 = time = 0
value = 5170

[State 824, 4]
type = HitFallDamage
trigger1 = Time = 0

[State 824, 5]
type = PosSet
trigger1 = Time = 0
y = 0

[State 824, Var] ;Get fall velocity
type = VarSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) != 0
sysvar(1) = floor(vel y)

[State 824, 6]
type = PlaySnd
trigger1 = Time = 0
trigger1 = !SysVar(0)
value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)

[State 824, 7]
type = GameMakeAnim
trigger1 = Time = 0
trigger1 = !SysVar(0)
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = sysvar(1) <= 10

[State 824, 8]
type = VelSet
trigger1 = Time = 0
y = 0

[State 824, 10] ;For normal
type = ChangeAnim
persistent = 0
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
value = 5110

[State 824, 11] ;If just died
type = ChangeState
triggerall = !alive
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
trigger3 = time > 40
value = 5150

[State 824, 12]
type = VarSet
trigger1 = SysVar(0)
trigger1 = Time = 0
sysvar(0) = 0

[State 824, 13] ;Friction
type = VelMul
trigger1 = 1
x = 0.85

[State 824, 14]
type = ForceFeedback
trigger1 = alive
trigger1 = Time = 0
time = 8
ampl = 240
waveform = sine

[State 824, 15]
type = ForceFeedback
trigger1 = !alive
trigger1 = Time = 0
ampl = 200, 7, -.467
time = 30
waveform = sine

[State 824, ChangeState]
Type = SelfState
trigger1 = anim = 5110
trigger1 = time > 40
value = 5120

;---------------------------------------------------------------------------
; HIT_LIEDOWN
[Statedef 825]
type    = L
movetype= H
physics = N

[State 825, 10] ;For normal
type = ChangeAnim
trigger1 = time = 0
value = 5110

[State 825, SelfState]
Type = SelfState
trigger1 = alive
trigger1 = time = 40
value = 5120

[State 825, SelfState]
Type = SelfState
trigger1 = !alive
trigger1 = time = 40
value = 5150

;---------------------------------------------------------------------------
; Tactical Step
[Statedef 900]
type    = S
physics = S
sprpriority = 1
ctrl = 0

[State 900, 1]
type = changeanim
triggerall = prevstateno = [200,440]
trigger1 = time < 4
value = (anim)
elem = (animelemno(0))

[State 900, 2]
type = changeanim
triggerall = prevstateno = [200,440]
trigger1 = Time = 4
value = 100

[State 900, 3]
type = changeanim
triggerall = prevstateno != [200,440]
trigger1 = Time = 0
value = 100

[State 900, 4]
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 900, 5]
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 900, 6]
type = VelSet
triggerall = anim = 100
trigger1 = animelemtime(2) >= 0
x = const(velocity.run.fwd.x)*1.5

[State 900, 7]
type = Playsnd
triggerall = anim = 100
trigger1 = animelem = 2
value = s100,0

[State 900, 8]
type = Playsnd
triggerall = anim = 100
trigger1 = animelem = 2
value = s100,2
channel = 0

[State 900, 9]
type = NotHitBy
trigger1 = Time >= 0
value = SCA

[State 900, 10]
type = AfterImage
trigger1 = Time = 0
time = 14
length = 15
palbright = 40,40,40
palcontrast = 250,250,250
palpostbright = -80,-80,-80
timegap = 1
flamegap = 1
trans = add1

[State 900, 11]
type = PowerAdd
trigger1 = time = 0
value = ifelse((prevstateno = 150 || prevstateno = 152 || (prevstateno = [200,246]) || (prevstateno = [400,441])), -1000, -500)

[State 900, 12] ;Blink White
type = PalFX
triggerall = prevstateno = 150 || prevstateno = 152
trigger1 = Time = 0
time = 3
add = 512,512,512

[State 900, 13] ;Blink Blue
type = PalFX
triggerall = ((prevstateno = [200,246]) || (prevstateno = [400,441]))
trigger1 = Time = 0
trigger2 = Time = 2
trigger3 = Time = 4
trigger4 = Time = 5
time = 1
add = 0,0,256
mul = 0,0,256

[State 900, 14]
type = ChangeState
triggerall = animelemtime(2) >= 0
trigger1 = command = "holdup"
value = 40
ctrl = 1

[State 900, 15]
type = ChangeState
trigger1 = animtime = 0
value = 901
ctrl = 0

[Statedef 901]
type    = S
physics = S
anim = 102
sprpriority = 1
ctrl = 0
velset = 0,0

[State 901, 1]
type = CtrlSet
trigger1 = time >= 0
value = 1

[State 901, 2]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Guard Cancel
[Statedef 910]
type = U
movetype = A
physics = U
ctrl = 0
velset = 0, 0
poweradd = -1000

[State 910, 1]
type = changeanim
trigger1 = time < 4
value = (anim)
elem = (animelemno(0))

[State 910, 2]
type = changeanim
trigger1 = Time = 4
value = 445

[State 910, 3]
type = PlaySnd
triggerall = anim = 445
trigger1 = Animelem = 1
value = s910,0
channel = 0

[State 910, 4] ;Blink White
type = PalFX
trigger1 = Time = 0
time = 3
add = 512,512,512

[State 910, 5]
type = NotHitBy
trigger1 = time <= 10
value = SCA

[State 910, 6]
type = velset
triggerall = anim = 445
trigger1 = animelemtime(2) >= 0 && animelemtime(7) < 0
x = 2.75

[State 910, 7]
type = velset
triggerall = anim = 445
trigger1 = animelem = 7
x = 0

[State 910, 8]
type = StateTypeSet
triggerall = anim = 445
trigger1 = animelem = 3
statetype = S
physics = S

[State 910, 9]
type = StateTypeSet
triggerall = anim = 445
trigger1 = animelem = 8
statetype = C
physics = C

[State 910, 10]
type = HitDef
trigger1 = time = 0
attr = C, NA
damage = 65,0
animtype = Hard
hitflag = MA
guardflag = MA
priority = 3, hit
pausetime = 6,14
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10,-50
hitsound = s202,9+random%3
guardsound = s120,0
ground.type = Low
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -3,-5
air.velocity = -3,-4
guard.velocity = -5
fall = 1
air.fall = 1
air.recover = 0
getpower = 0,0
givepower = 0,0

[State 910, 11]
type = ChangeState
triggerall = anim = 445
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
; Special Attacks
;---------------------------------------------------------------------------
; Joy Joy Block
[Statedef 1000]
type    = S
movetype= A
physics = S
juggle  = 8
anim = 1000
velset = 0,0
poweradd = 100
ctrl = 0
sprpriority = 2

[State 1000, 1]
type = varset
triggerall = !var(0)
trigger1 = time = 0
var(2) = ifelse((command = "x" && command = "y"), 2, ifelse(command = "x", 0, 1))

[State 1000, 1]
type = varset
triggerall = var(0)
trigger1 = time = 0
var(2) = ifelse(p2bodydist x <= 100, 0, ifelse((p2bodydist x = [101,200]),1,2))


[State 1000, 2]
type = PlaySnd
trigger1 = animelem = 1
value = s1000,0
channel = 0

[State 1000, 3]
type = Helper
trigger1 = animelem = 4
helpertype = normal
name = "Joy Joy Block"
ID = 1001
pos = ifelse(!var(2), 70, ifelse(var(2) = 1, 170, 255)), ifelse(!var(2), -160, ifelse(var(2) = 1, -190, -210))
postype = p1
facing = 1
stateno = 1001
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
ignorehitpause = 0

[State 1000, 4]
type = Changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------------------
; Block States
[Statedef 1001]
type    = A
movetype= A
physics = N
juggle  = 8
poweradd = 0
ctrl = 0
sprpriority = 8

[State 1001, 1]
type = ChangeAnim
trigger1 = time = 0
value = ifelse(parent,var(2) = 0, 1005, ifelse(parent,var(2)= 1, (1010+random%3), (1025+random%3)))

[State 1001, 2]
type = playsnd
trigger1 = time = 0
value = s1000,1

[State 1001, 3]
type = AssertSpecial
trigger1 = time >= 0
flag = noshadow
ignorehitpause = 1
persistent = 1

[State 1001, 4]
type = VarSet
trigger1 = time = 0
var(3) = 0

[State 1001, 5]
type = VarSet
trigger1 = time = 0
var(2) = parent, var(2)

[State 1001, 6]
type = VarSet
triggerall = parent, var(0) = 0
triggerall = time = [1,35]
trigger1 = parent, command = "holddown"
var(3) = 1

[State 1001, 7]
type = VarSet
triggerall = parent, var(0)
triggerall = time = [1,35]
trigger1 = p2bodydist x = [(ifelse(var(2) = 2, -20, -15)),20]
var(3) = 1

;Progress�o Aritm�tica
; S = a1 + r
; a1 = valor de compara��o
; r = divisor
; Se os times forem 12,78,144 forma uma PA de raz�o = 66 (r = 66)
; Ent�o: Timemod = r, a1

[State 1001, 8]
type = VelSet
triggerall = !var(3)
trigger1 = Time%(54-(var(2)*12)) = 13
x = 0
y = 4

[State 1001, 9]
type = VelSet
triggerall = !var(3)
trigger1 = Time%(54-(var(2)*12)) = 16
x = 0
y = 0

[State 1001, 10]
type = hitby
trigger1 = 1
value = SCA,NP,SP,HP

[STate 1001, 11]
type = HitOverride
trigger1 = 1
attr = SCA,NP,SP,HP
stateno = 1005

[State 1001, 12]
type = HitDef
triggerall = anim = 1011
trigger1 = time = 0
attr = S, SP
hitflag = MAF
guardflag = M
animtype = hard
air.animtype = hard
priority = 4,Hit
damage = 65,10
pausetime = 0,12
guard.pausetime = 0,12
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10,-10
hitsound = s1405,11
guardsound = s120,1
ground.type = Low
air.type = Low
ground.slidetime = 18
guard.slidetime = 18
ground.hittime = 20
guard.hittime = 20
air.hittime = 20
guard.ctrltime = 20
ground.velocity = -2,-6
guard.velocity = -6
air.velocity = -2,-6
sprpriority = 2
palfx.time = 32
palfx.add = 100,100,100
palfx.mul = 256,256,256
palfx.sinadd = -80,-80,-80,10
Palfx.color = 0
palfx.invertall = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0

[State 1011, 13]
type = Helper
triggerall = anim = 1011
triggerall = p2stateno = [5000,5999]
triggerall = numhelper(9185) = 0
trigger1 = movehit
name = "Eletricity"
ID = 9185
stateno = 9185
postype = P1
pos = 0,0
sprpriority = 3
bindtime = 1
ownpal = 1
ignorehitpause = 1
persistent = 1

[State 1001, 14]
type = HitDef
triggerall = anim = 1012
trigger1 = time = 0
attr = S, SP
hitflag = MAF
guardflag = M
animtype = hard
air.animtype = hard
priority = 4,Hit
damage = 65,10
pausetime = 0,12
guard.pausetime = 0,12
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10,-10
hitsound = s202,3+random%3
guardsound = s120,1
ground.type = Low
air.type = Low
ground.slidetime = 18
guard.slidetime = 18
ground.hittime = 20
guard.hittime = 20
air.hittime = 20
guard.ctrltime = 20
ground.velocity = -2,-6
guard.velocity = -6
air.velocity = -2,-6
sprpriority = 2
palfx.time = 32
palfx.add = 150,180,256
;palfx.add = 200,250,250
palfx.mul = 256,256,256
palfx.sinadd = -80,-100,-80,0
Palfx.color = 0
palfx.invertall = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0

[State 1001, 15]
type = HitDef
triggerall = anim = 1026
trigger1 = time = 0
attr = S, SP
hitflag = MAF
guardflag = M
animtype = hard
air.animtype = hard
priority = 4,Hit
damage = 65,10
pausetime = 0,12
guard.pausetime = 0,12
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10,-10
hitsound = s1405,21
guardsound = s120,1
ground.type = Low
air.type = Low
ground.slidetime = 18
guard.slidetime = 18
ground.hittime = 20
guard.hittime = 20
air.hittime = 20
guard.ctrltime = 20
ground.velocity = -2,-6
guard.velocity = -6
air.velocity = -2,-6
sprpriority = 2
palfx.time = 32
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10
Palfx.color = 0
palfx.invertall = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0

[State 1001, 16]
type = Helper
triggerall = anim = 1026
triggerall = p2stateno = [5000,5999]
triggerall = numhelper(9180) = 0
trigger1 = movehit
name = "Fire"
ID = 9180
stateno = 9180
postype = P1
pos = 0,0
sprpriority = 3
bindtime = 1
ownpal = 1
ignorehitpause = 1
persistent = 1

[State 1001, 17]
type = HitDef
triggerall = anim = 1005 || anim = 1010 || anim = 1025 || anim = 1027
trigger1 = time = 0
attr = A, SP
hitflag = MAF
guardflag = M
animtype = hard
air.animtype = hard
priority = 4,Hit
damage = 65,10
pausetime = 0,12
guard.pausetime = 0,12
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10,-10
hitsound = s202,3+random%3
guardsound = s120,1
ground.type = Low
air.type = Low
ground.slidetime = 18
guard.slidetime = 18
ground.hittime = 20
guard.hittime = 20
air.hittime = 20
guard.ctrltime = 20
ground.velocity = -2,-6
guard.velocity = -6
air.velocity = -2,-6
sprpriority = 2
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0

[State 1001, 18]
type = changestate
triggerall = var(3)
trigger1 = time >= 12
value = 1002
ctrl = 0

[State 1001, 19]
type = changestate
triggerall = parent, anim = 1110 && parent, animelem = 21
trigger1 = 1
value = 1002
ctrl = 0

[State 1001, 20]
type = changestate
triggerall = parent, GetHitVar(guarded) = 0
trigger1 = parent, movetype = H
trigger2 = parent, stateno = 3505
trigger3 = parent, stateno = 3705
value = 1005
ctrl = 0

[State 1001, 21]
type = changestate
trigger1 = movecontact
value = 1010
ctrl = 0

[State 1001, 22]
type = changestate
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 1010
ctrl = 0

; Block fast version
[Statedef 1002]
type    = A
movetype= A
physics = N
juggle  = 8
poweradd = 0
ctrl = 0
sprpriority = 8

[State 1002, 1]
type = AssertSpecial
trigger1 = time >= 0
flag = noshadow
ignorehitpause = 1
persistent = 1

[State 1002, 2]
type = VelSet
trigger1 = time >= 0
x = 0
y = 8

[State 1002, 3]
type = hitby
trigger1 = 1
value = SCA,NP,SP,HP

[STate 1002, 4]
type = HitOverride
trigger1 = 1
attr = SCA,NP,SP,HP
stateno = 1005

[State 1002, 5]
type = HitDef
triggerall = !movehit
trigger1 = time = 0
attr = S, SP
hitflag = MAF
guardflag = H
animtype = up
air.animtype = up
priority = 4,Hit
damage = 65,10
pausetime = 0,12
guard.pausetime = 0,12
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10,-10
hitsound = s202,3+random%3
guardsound = s120,1
ground.type = Low
air.type = Low
ground.slidetime = 15
guard.slidetime = 15
ground.hittime = 12
guard.hittime = 12
air.hittime = 12
guard.ctrltime = 12
ground.velocity = -3,-7
guard.velocity = -6
air.velocity = -3,-7
sprpriority = 2
fall = 1
air.fall = 1
air.recover = 0
yaccel = .5
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0

[State 1002, 6]
type = changestate
triggerall = parent, GetHitVar(guarded) = 0
trigger1 = parent, movetype = H
trigger2 = parent, stateno = 3505
trigger3 = parent, stateno = 3705
value = 1005
ctrl = 0

[State 1002, 7]
type = changestate
trigger1 = movecontact
value = 1010
ctrl = 0

[State 1002, 8]
type = changestate
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 1010
ctrl = 0

; Block Destroying
[Statedef 1005]
type    = A
movetype= I
physics = N
juggle  = 8
poweradd = 0
ctrl = 0
sprpriority = 8

[State 1005, 1]
type = changeanim
trigger1 = time = 0
value = anim+10

[State 1005, 2]
type = velset
trigger1 = time >= 0
x = 0
y = 0

[State 1005, 3]
type = AssertSpecial
trigger1 = time >= 0
flag = noshadow
ignorehitpause = 1
persistent = 1

[State 1005, 4]
type = NotHitBy
trigger1 = time >= 0
value = SCA

[State 1005, 5]
type = Destroyself
trigger1 = time = 20
;trigger1 = animtime = 0

; Block hitting Ground/Enemy
[Statedef 1010]
type    = A
movetype= I
physics = N
juggle  = 8
poweradd = 0
ctrl = 0
sprpriority = 8

[State 1010, 1]
type = changeanim
trigger1 = time = 0
value = anim+10

[State 1010, 2]
type = velset
trigger1 = time >= 0
x = 0
y = 0
ignorehitpause = 1

[State 1010, 3]
type = AssertSpecial
trigger1 = time >= 0
flag = noshadow
ignorehitpause = 1
persistent = 1

[State 1010, 4]
type = PlaySnd
trigger1 = animelem = 1
value = s1000,2

[State 1010, 5]
type = NotHitBy
trigger1 = time >= 0
value = SCA

[State 1010, 6]
type = Destroyself
trigger1 = time = 20
;trigger1 = animtime = 0

;---------------------------------------------------------------------------
; Baseball Stars
[Statedef 1100]
type    = S
movetype= A
physics = S
juggle  = 8
velset = 8,0
poweradd = 100
ctrl = 0
sprpriority = 2

[State 1100, 1]
type = varset
triggerall = !var(0)
trigger1 = time = 0
var(2) = ifelse(command = "x", 0, 1)

[State 1100, 2]
type = varset
triggerall = var(0)
trigger1 = time = 0
var(2) = ifelse((prevstateno = 210 && enemy, vel x = 0), 1, 0)

[State 1100, 3]
type = ChangeAnim
trigger1 = time = 0
value = 1100+var(2)*5

[State 1100, 4]
type = PlaySnd
triggerall = !var(2)
trigger1 = animelem = 1
value = s1100,2
channel = 0

[State 1100, 5]
type = PlaySnd
triggerall = var(2)
trigger1 = animelem = 1
value = s1100,3
channel = 0

[State 1100, 6]
type = PlaySnd
triggerall = !var(2)
trigger1 = animelem = 3
value = s1100,0

[State 1100, 7]
type = PlaySnd
triggerall = var(2)
trigger1 = animelem = 4
value = s1100,0

[State 1100, 8]
type = HitDef
triggerall = !var(2)
trigger1 = animelem = 4
attr = S, SA
hitflag = MAF
guardflag = MA
animtype = heavy
air.animtype = heavy
priority = 4,Hit
damage = 65,10
pausetime = 12,14
guard.pausetime = 12,12
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10,-65
hitsound = s1100,4
guardsound = s120,1
ground.type = Low
air.type = Low
ground.slidetime = 15
guard.slidetime = 15
ground.hittime = 12
guard.hittime = 12
air.hittime = 12
guard.ctrltime = 12
ground.velocity = -5.5,-5
guard.velocity = -6
air.velocity = -5.5,-5
sprpriority = 2
fall = 1
air.fall = 1
air.recover = 0
fall.recover = 0
yaccel = .5
p2stateno = ifelse(enemynear, movetype = A, 1170, 1150)
id = 1100
p2facing = 1

[State 1100, 9]
type = HitDef
triggerall = var(2)
trigger1 = animelem = 4
attr = S, SA
hitflag = MAF
guardflag = MA
animtype = heavy
air.animtype = heavy
priority = 4,Hit
damage = 40,10
pausetime = 12,15
guard.pausetime = 12,15
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10,-65
hitsound = s1100,4
guardsound = s120,1
ground.type = Low
air.type = Low
ground.slidetime = 15
guard.slidetime = 15
ground.hittime = 12
guard.hittime = 12
air.hittime = 12
guard.ctrltime = 12
ground.velocity = -5.5,-4
air.velocity = -5.5,-3
sprpriority = 2
fall = 1
air.fall = 1
air.recover = 0
fall.recover = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
p2facing = 1
id = 1101

[State 1100, 10]
type = HitDef
triggerall = var(2)
trigger1 = animelem = 5
attr = S, SA
hitflag = MAF
guardflag = MA
animtype = up
air.animtype = up
priority = 4,Hit
damage = 65,10
pausetime = 12,14
guard.pausetime = 12,12
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10,-65
hitsound = s1100,4
guardsound = s120,1
ground.type = Low
air.type = Low
ground.slidetime = 15
guard.slidetime = 15
ground.hittime = 12
guard.hittime = 12
air.hittime = 12
guard.ctrltime = 12
ground.velocity = -5.5,-5
guard.velocity = -6
air.velocity = -5.5,-5
sprpriority = 2
fall = 1
air.fall = 1
air.recover = 0
fall.recover = 0
yaccel = .5
p2stateno = ifelse(enemynear, movetype = A, 1170, 1190)
id = 1100
p2facing = 1

[State 1100, 11]
type = Helper
triggerall = !var(2)
trigger1 = animelem = 4
helpertype = normal
name = "Baseball Reflect"
ID = 1105
pos = 0,0
postype = p1
facing = 1
stateno = 1105
keyctrl = 0
ownpal = 1

[State 1100, 12]
type = Helper
triggerall = var(2)
trigger1 = animelem = 5
helpertype = normal
name = "Baseball Reflect"
ID = 1105
pos = 0,0
postype = p1
facing = 1
stateno = 1105
keyctrl = 0
ownpal = 1

[State 1100, 13]
type = AssertSpecial
triggerall = numtarget(3100) = 1 || numtarget(1470) = 1 || numtarget(1480) = 1
trigger1 = time >= 0
flag = nojugglecheck

[State 1100, 14]
type = Changestate
trigger1 = animtime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
; Baseball Stars 2
[Statedef 1101]
type    = S
movetype= A
physics = S
juggle  = 8
anim = 1110
velset = 0,0
poweradd = 100
ctrl = 0
sprpriority = 2

[State 1101, 1]
type = PlaySnd
trigger1 = animelem = 1
value = s1000,0
channel = 0

[State 1101, 2]
type = PlaySnd
trigger1 = animelem = 22
value = s1100,0

[State 1101, 3]
type = Helper
trigger1 = animelem = 7, = 3
helpertype = normal
name = "Joy Joy Block"
ID = 1110
pos = 53, -175
postype = p1
facing = 1
stateno = 1110
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
ignorehitpause = 0

[State 1101, 4]
type = PlaySnd
trigger1 = animelem = 21
value = s1100,4

[State 1101, 5]
type = AssertSpecial
triggerall = numtarget(3100) = 1 || numtarget(1470) = 1 || numtarget(1480) = 1
trigger1 = time >= 0
flag = nojugglecheck

[State 1101, 6]
type = Changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------------------
; Baseball Reflect States
[Statedef 1105]
type    = S
movetype= A
physics = S
anim = 1125

[State 1105, 1]
type = AssertSpecial
trigger1 = time >= 0
flag = noshadow
ignorehitpause = 1
persistent = 1

[State 1105, 2]
type = hitby
trigger1 = 1
value = SCA,NP,SP,HP

[STate 1105, 3]
type = HitOverride
trigger1 = 1
attr = SCA,NP,SP,HP
stateno = 1106

[State 1105, 4]
type = destroyself
trigger1 = animtime = 0

[Statedef 1106]
type    = S
movetype= A
physics = S

[State 1106, 1]
type = nothitby
trigger1 = 1
value = SCA

[State 1106, 2]
type = AssertSpecial
trigger1 = time >= 0
flag = noshadow
ignorehitpause = 1
persistent = 1

[State 1106, 3]
type = PlaySnd
trigger1 = time = 0
value = S1100,4

[State 1106, 4]
type = Projectile
triggerall = random <= 700
trigger1 = time = 0
projanim = 1120
Projhitanim = 1121
projcancelanim = 1121
remvelocity = 2,0
Projremanim = -1
Projremovetime = 100
velocity = 12,0
ProjID = 1100
offset = 35,-75
projpriority = 1
projsprpriority = 7
attr = S, SP
hitflag = MA
guardflag = MA
damage = 60,10
priority = 4,Hit
pausetime = 2,4
sparkno = S30002
guard.sparkno = S30040
sparkxy = 0,0
hitsound = s202,3+random%3
guardsound = s120,1
animtype = heavy
ground.type = Low
ground.slidetime = 15
ground.hittime = 12
guard.ctrltime = 15
ground.velocity = -3, -6.5
guard.velocity = -6
air.velocity = -3,-6.5
guard.ctrltime = 15
persistent = 0
ignorehitpause = 0
fall = 1
air.fall = 1
yaccel = .5

[State 1106, 5]
type = Projectile
triggerall = parent, numprojid(1100) = 0
trigger1 = time = 0
projanim = 1120
Projhitanim = 1121
projcancelanim = 1121
remvelocity = 2,0
Projremanim = -1
Projremovetime = 100
velocity = 11,-10
accel = -.2,.5
ProjID = 1105
offset = 35,-75
projpriority = 1
projsprpriority = 7
attr = S, SP
hitflag = MA
guardflag = MA
damage = 60,10
priority = 4,Hit
pausetime = 2,4
sparkno = S30002
guard.sparkno = S30040
sparkxy = 0,0
hitsound = s202,3+random%3
guardsound = s120,1
animtype = heavy
ground.type = Low
ground.slidetime = 15
ground.hittime = 12
guard.ctrltime = 15
ground.velocity = -3, -6.5
guard.velocity = -6
air.velocity = -3,-6.5
guard.ctrltime = 15
persistent = 0
ignorehitpause = 0
fall = 1
air.fall = 1
yaccel = .5

[State 1106, 7]
type = destroyself
trigger1 = time = 0

;-------------------------------------------------------------------------------------------
; Block States
[Statedef 1110]
type    = A
movetype= A
physics = N
juggle  = 7
anim = 1005
poweradd = 0
ctrl = 0
sprpriority = 2

[State 1110, 1]
type = playsnd
trigger1 = time = 0
value = s1000,1

[State 1110, 2]
type = VelSet
trigger1 = time = 12
x = 0
y = 8

[State 1110, 3]
type = AssertSpecial
trigger1 = time >= 0
flag = noshadow
ignorehitpause = 1
persistent = 1

[State 1110, 4]
type = nothitby
trigger1 = 1
value = SCA

[State 1110, 5]
type = changestate
triggerall = parent, GetHitVar(guarded) = 0
trigger1 = parent, movetype = H
value = 1005
ctrl = 0

[State 1110, 6]
type = HitDef
trigger1 = time = 0
attr = A, SP
hitflag = MAF
guardflag = H
animtype = up
air.animtype = up
priority = 4,Hit
damage = 45,10
pausetime = 0,14
guard.pausetime = 0,14
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10,-10
hitsound = s202,3+random%3
guardsound = s120,1
ground.type = Low
air.type = Low
ground.slidetime = 15
guard.slidetime = 15
ground.hittime = 15
guard.hittime = 15
air.hittime = 15
guard.ctrltime = 18
ground.velocity = -3,-7.2
guard.velocity = -6
air.velocity = -3,-7.2
guard.velocity = -5
sprpriority = 2
fall = 1
air.fall = 1
fall.recover = 0
air.recover = 0
yaccel = .6

[State 1110, 7]
type = changestate
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 1115
ctrl = 0

[Statedef 1115]
type    = A
movetype= A
physics = N
juggle  = 8
poweradd = 0
ctrl = 0
sprpriority = 2

[State 1115, 1]
type = PlaySnd
trigger1 = time = 0
value = s1000,2

[State 1115, 2]
type = velset
trigger1 = time = 0
y = 0

[State 1115, 4]
type = AssertSpecial
trigger1 = time >= 0
flag = noshadow
ignorehitpause = 1
persistent = 1

[State 1115, 5]
type = nothitby
trigger1 = 1
value = SCA

[State 1115, 6]
type = changestate
triggerall = parent, GetHitVar(guarded) = 0
trigger1 = parent, movetype = H
value = 1005
ctrl = 0

[State 1115, 7]
type = ChangeState
trigger1 = parent, animelem = 21
value = 1120
ctrl = 0

;[State 1115, 7]
;type = DestroySelf
;trigger1 = numhelper(1120) = 1

[Statedef 1120]
type    = A
movetype= A
physics = N
juggle  = 8
anim = 1130
poweradd = 0
ctrl = 0
sprpriority = 8

[State 1120, 1]
type = AssertSpecial
trigger1 = time >= 0
flag = noshadow
ignorehitpause = 1
persistent = 1

[State 1120, 2]
type = PlaySnd
trigger1 = time = 0
value = s1121,0

[State 1120, 3]
type = velset
trigger1 = time >= 0
x = 7

[State 1120, 4]
type = velset
trigger1 = time = 0
y = -9

[State 1120, 5]
type = veladd
trigger1 = time >= 0
y = .5

[State 1120, 6]
type = hitby
trigger1 = 1
value = SCA,NP,SP,HP

[STate 1120, 7]
type = HitOverride
trigger1 = 1
attr = SCA,NP,SP,HP
stateno = 1005

[State 1120, 8]
type = HitDef
trigger1 = time = 0
attr = A, SP
hitflag = MAF
guardflag = M
animtype = hard
air.animtype = hard
priority = 4,Hit
damage = 65,10
pausetime = 0,14
guard.pausetime = 0,14
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10,-10
hitsound = s202,3+random%3
guardsound = s120,1
ground.type = Low
air.type = Low
ground.slidetime = 16
guard.slidetime = 16
ground.hittime = 18
guard.hittime = 18
air.hittime = 18
guard.ctrltime = 18
ground.velocity = -6
guard.velocity = -6
air.velocity = -3,-6
sprpriority = 2
yaccel = .5
fall = 0
air.fall = 1
fall.recover = 0
air.recover = 0

[State 1120, 9]
type = changestate
triggerall = parent, GetHitVar(guarded) = 0
trigger1 = parent, movetype = H
value = 1005
ctrl = 0

[State 1120, 10]
type = changestate
trigger1 = movecontact
value = 1010
ctrl = 0

[State 1120, 8]
type = changestate
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 1010
ctrl = 0

;---------------------------------------------------------------------------
; P2 Sates
[statedef 1150]
type = A
movetype = H
physics = N
velset = 0,0
ctrl = 0

[State 1150, 1]
type = Changeanim
trigger1 = time = 0
value = 5030

[State 1150, 2]
type = PosSet
triggerall = Pos y > 0
trigger1 = time = 0
y = 0
ignorehitpause = 1

[State 1150, 3]
type = ChangeState
trigger1 = hitshakeover = 1
value = 1155

[Statedef 1155]
type = A
movetype= H
physics = N
ctrl = 0
velset = -5.5,-4

[State 1155, 1]
type = Changeanim
trigger1 = time = 0
value = 5050

;[State 1155, 2]
;type = Changeanim
;triggerall = anim = 5035
;trigger1 = animtime = 0
;value = 5050

[State 1155, 3]
type = Changeanim
triggerall = anim = 5050
trigger1 = animtime = 0
value = 5060

[State 1155, 4]
type = VelAdd
trigger1 = 1
y = .45

[State 1155, 5]
type = Changestate
triggerall = time > 10
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 1160

[Statedef 1160]
type = L
movetype = H
physics = N
ctrl = 0

[State 1160, 1]
type = Posset
trigger1 = time = 0
y = 0

[State 1160, 2]
type = Changeanim
trigger1 = time = 0
value = 5080

[State 1160, 3]
type = Changeanim
trigger1 = time = 20
value = 5110

[State 1160, 4]
type = Velset
trigger1 = time = 0
x = -7.5
y = 0

[State 1160, 5]
type = Velset
trigger1 = time = 20
x = 0

[State 1160, 6]
type = Veladd
trigger1 = time <= 15
x = 0.4

[State 1160, 7]
type = Selfstate
trigger1 = alive
trigger1 = time = 30
value = 5120

[State 1160, 8]
type = selfstate
trigger1 = !alive
trigger1 = time = 30
value = 5150


;------------------
; Hit by Baseball Stars - Counter-hit
[Statedef 1170]
type    = A
movetype= H
physics = N
velset = 0,0

[State 1170, 1]
type = ChangeAnim2
trigger1 = 1
value = 1150

[State 1170, 2]
type = PosSet
triggerall = Pos y > 0
trigger1 = time = 0
y = 0
ignorehitpause = 1

[State 1170, 3]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 1175

;------------------
; Hit by Baseball Stars - flying through the air
[Statedef 1175]
type    = A
movetype= H
physics = N

[State 1175, 1]
type = VelSet
trigger1 = Time = 0
x = -14
y = -2

[State 1175, 3]
type = ScreenBound
triggerall = Pos y < -15
trigger1 = BackEdgeBodyDist < 65
trigger2 = FrontEdgeBodyDist < 65
value = 1
movecamera = 0,1

[State 1175, 4]
type = ChangeState
triggerall = Pos y < -15
trigger1 = BackEdgeBodyDist <= 20
trigger2 = FrontEdgeBodyDist <= 20
value = 1180

[State 1175, 5]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100

;------------------
; Hit by Baseball Stars - hit wall
[Statedef 1180]
type    = A
movetype= H
physics = N

[State 1180, 1]
type = Turn
trigger1 = (Time = 0) && (FrontEdgeBodyDist <= 30)

[State 1180, 2]
type = PosAdd
trigger1 = Time = 0
x = 15 - BackEdgeBodyDist

[State 1180, 3]
type = PosFreeze
trigger1 = 1
x = 1
y = 1

[State 1180, 4]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,1

[State 1180, 5]
type = Explod
trigger1 = Time = 0
anim = F72
pos = 0, floor (screenpos y) - 50
postype = back
sprpriority = 3

[State 1180, 6]
type = ChangeAnim2
trigger1 = Time = 0
value = 1155

[State 1180, 7]
type = PlaySnd
trigger1 = Time = 0
value = F7,0

[State 1180, 8]
type = ChangeState
trigger1 = AnimTime = 0
value = 1185

;------------------
; Hit by Baseball Stars - bounce off wall
[Statedef 1185]
type    = A
movetype= H
physics = N

[State 1185, 2]
type = VelSet
trigger1 = Time = 0
y = -5.5

[State 1185, 3]
type = VelSet
trigger1 = Time = 0
x = 4

[State 1185, 4]
type = Turn
trigger1 = (Time = 0) && (BackEdgeDist < 30)

[State 1185, 5]
type = VelAdd
trigger1 = 1
y = .35

[State 1185, 6]
type = ChangeAnim
trigger1 = Time = 0
value = 5050

[State 1185, 8]
type = ChangeAnim
trigger1 = Vel Y > -2
persistent = 0
value = ifelse((SelfAnimExist(5062)), 5062, 5060)

[State 1185, 10]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100

;---------------------------------------------------------------------------
; P2 Sates
[statedef 1190]
type = A
movetype = H
physics = N
velset = 0,0
ctrl = 0

[State 1190, 1]
type = Changeanim
trigger1 = time = 0
value = ifelse((SelfAnimExist(5051)), 5051, 5030)

[State 1190, 2]
type = PosSet
triggerall = Pos y > 0
trigger1 = time = 0
y = 0
ignorehitpause = 1

[State 1190, 3]
type = ChangeState
trigger1 = hitshakeover = 1
value = 1191

[Statedef 1191]
type = A
movetype= H
physics = N
ctrl = 0
velset = -5.5,-4

[State 1191, 1]
type = Changeanim
trigger1 = vel y > 0
value = ifelse((SelfAnimExist(5061)), 5061, 5060)

[State 1191, 2]
type = VelAdd
trigger1 = 1
y = .45

[State 1191, 3]
type = Changestate
triggerall = time > 10
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 1192

[Statedef 1192]
type = L
movetype = H
physics = N
ctrl = 0

[State 1192, 1]
type = Posset
trigger1 = time = 0
y = 0

[State 1192, 2]
type = Changeanim
trigger1 = time = 0
value = ifelse((SelfAnimExist(5101)), 5101, 5100)

[State 1192, 2]
type = Changeanim
triggerall = anim = 5100 || anim = 5101
trigger1 = animtime = 0
value = ifelse((SelfAnimExist(5111)), 5111, 5110)

[State 1192, 4]
type = Velset
trigger1 = time = 0
x = -7.5
y = 0

[State 1192, 5]
type = Velset
trigger1 = time = 20
x = 0

[State 1192, 6]
type = Veladd
trigger1 = time <= 15
x = 0.4

[State 1192, 7]
type = selfstate
trigger1 = alive
trigger1 = time = 30
value = 5120

[State 1192, 8]
type = selfstate
trigger1 = !alive
trigger1 = time = 30
value = 5150


;---------------------------------------------------------------------------
;2020 Super Catch
[Statedef 1200]
type    = S
movetype= I
physics = S
juggle  = 8
velset = 0,0
poweradd = 100
ctrl = 0
sprpriority = 2

[State 1200, 1]
type = varset
trigger1 = time = 0
var(2) = ifelse(command = "a", 0, 1)

[State 1200, 2]
type = ChangeAnim
trigger1 = time = 0
value = ifelse(var(2) = 0, 1200, 1205)

[State 1200, 3]
type = PlaySnd
triggerall = !var(2)
trigger1 = animelem = 4
value = s1000,1

[State 1200, 4]
type = PlaySnd
triggerall = var(2)
trigger1 = animelem = 5
value = s1000,1

[State 1200, 5]
type = Explod
triggerall = !var(2)
trigger1 = animelem = 4
anim = 1210
ID = 1210
pos = 0,0
postype = p1
facing = 1
bindtime = -1
supermove = 0
pausemovetime = 0
sprpriority = 3
ownpal = 1
removeongethit = 1
ignorehitpause = 1

[State 1200, 6]
type = Explod
triggerall = !var(2)
trigger1 = animelem = 8, = 3
anim = 1225
ID = 1225
pos = 19,-14
postype = p1
facing = 1
bindtime = -1
supermove = 0
pausemovetime = 0
sprpriority = 3
ownpal = 1
removeongethit = 1
ignorehitpause = 1

[State 1200, 7]
type = Explod
triggerall = var(2)
trigger1 = animelem = 5
anim = 1215
ID = 1215
pos = 0,0
postype = p1
facing = 1
bindtime = -1
supermove = 0
pausemovetime = 0
sprpriority = 4
ownpal = 1
removeongethit = 1
ignorehitpause = 1

[State 1200, 8]
type = Explod
triggerall = var(2)
trigger1 = animelem = 5, = 15
anim = 1225
ID = 1225
pos = 25,35
postype = p1
facing = 1
bindtime = -1
supermove = 0
pausemovetime = 0
sprpriority = 5
ownpal = 1
removeongethit = 1
ignorehitpause = 1

[State 1200, 9]
type = Helper
triggerall = !var(2)
trigger1 = animelem = 8, = 3
helpertype = normal
name = "Catch"
ID = 1210
pos = 0,0
postype = p1
facing = 1
stateno = 1210
keyctrl = 0
ownpal = 1

[State 1200, 10]
type = Helper
triggerall = var(2)
trigger1 = animelem = 5, = 14
helpertype = normal
name = "Catch"
ID = 1210
pos = 0,0
postype = p1
facing = 1
stateno = 1210
keyctrl = 0
ownpal = 1

[State 1200, 11]
type = Changestate
triggerall = !var(2)
triggerall = animelemtime(8) >= 3 && animelemtime(8) < 22
trigger1 = !numhelper(1210)
value = 1205
ctrl = 0

[State 1200, 12]
type = Changestate
triggerall = var(2)
triggerall = animelemtime(5) >= 14 && animelemtime(5) < 33
trigger1 = !numhelper(1210)
value = 1205
ctrl = 0

[State 1200, 13]
type = Changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;2020 Super Catch (End)
[Statedef 1205]
type    = S
movetype= I
physics = S
juggle  = 8
anim = 1240
velset = 0,0
poweradd = 250
ctrl = 0
sprpriority = 2

[State 1205, 1]
type = PlaySnd
trigger1 = animelem = 2
value = s1205,0
channel = 0

[State 1205, 2]
type = RemoveExplod
trigger1 = time = 0
ID = 1210
ignorehitpause = 1

[State 1205, 3]
type = RemoveExplod
trigger1 = time = 0
ID = 1215
ignorehitpause = 1

[State 1205, 4]
type = RemoveExplod
trigger1 = time = 0
ID = 1225
ignorehitpause = 1

[State 1205, 5]
type = NotHitBy
trigger1 = time >= 0
value = SCA,NA,SA,HA,NP,SP,HP

[State 1205, 6]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------------------
; Catch States
[Statedef 1210]
type    = S
movetype= I
physics = S

[State 1210, 1]
type = ChangeAnim
trigger1 = time = 0
value = ifelse((parent, anim = 1200), 1230,1235)

[State 1210, 2]
type = AssertSpecial
trigger1 = time >= 0
flag = noshadow
ignorehitpause = 1
persistent = 1

[State 1210, 3]
type = BindToParent
trigger1 = time >= 0
pos = 0,0
ignorehitpause = 1

[State 1210, 4]
type = hitby
trigger1 = 1
value = SCA,NP,SP

[STate 1210, 5]
type = HitOverride
trigger1 = 1
attr = SCA,NP,SP,HP
stateno = 1215

[State 1210, 6]
type = Explod
triggerall = anim = 1235
trigger1 = time = 0
anim = 1220
ID = 1220
pos = 0,0
postype = p1
facing = 1
bindtime = -1
removetime = 21
supermove = 0
pausemovetime = 0
sprpriority = 3
ownpal = 1
removeongethit = 1
ignorehitpause = 1

[State 1210, 7]
type = changestate
trigger1 = parent, movetype = H
value = 1215
ctrl = 0

[State 1210, 7]
type = destroyself
trigger1 = animtime = 0

[Statedef 1215]
type    = S
movetype= A
physics = S

[State 1215, 1]
type = RemoveExplod
trigger1 = time = 0
ID = 1220
ignorehitpause = 1

[State 1215, 2]
type = nothitby
trigger1 = 1
value = SCA

[State 1215, 3]
type = destroyself
trigger1 = time = 0

;---------------------------------------------------------------------------
;Bushin Ken
[Statedef 1300]
type    = S
movetype= I
physics = S
juggle  = 8
velset = 0,0
poweradd = 100
ctrl = 0
sprpriority = 2

[State 1300, 1]
type = varset
triggerall = !var(0)
trigger1 = time = 0
var(2) = ifelse(command = "a", 0, 1)

[State 1300, 1]
type = varset
triggerall = var(0)
triggerall = numhelper(3110) = 0
trigger1 = time = 0
var(2) = ifelse((p2bodydist x < 170 && p2movetype = I && p2statetype != L), 1, 0)

[State 1300, 2]
type = varset
triggerall = var(0)
triggerall = numhelper(3110) = 1
trigger1 = time = 0
var(2) = ifelse(random < 500, 1, 0)

[State 1300, 2]
type = Changeanim
trigger1 = time = 0
value = 1300+var(2)*5

[State 1300, 3]
type = PlaySnd
trigger1 = time = 2
value = s1300,0
channel = 0

[State 1300, 4]
type = Helper
triggerall = !var(2)
;trigger1 = animelem = 3, = 3
trigger1 = time = 0
helpertype = normal
name = "Bushin ken"
ID = 1305
pos = 0,0
postype = p1
facing = 1
stateno = 1305
keyctrl = 0
ownpal = 1

[State 1300, 5]
type = Helper
triggerall = var(2)
;trigger1 = animelem = 5, = 3
trigger1 = time = 0
helpertype = normal
name = "Bushin ken End"
ID = 1310
pos = 0,0
postype = p1
facing = 1
stateno = 1310
keyctrl = 0
ownpal = 1

[State 1300, 6]
type = Playerpush
triggerall = var(2)
trigger1 = animelemtime(5) >= 0 && animelemtime(11) < 0
value = 0

[State 1300, 7]
type = PlaySnd
triggerall = var(2)
trigger1 = animelem = 6
value = s1300,1

[State 1300, 8]
type = velset
triggerall = var(2)
trigger1 = animelemtime(6) >= 0 && animelemtime(11) < 0
x = 9.1

[State 1300, 9]
type = turn
triggerall = var(2)
trigger1 = animelem = 9

[State 1300, 10]
type = velset
triggerall = var(2)
trigger1 = animelemtime(11) >= 0
x = 0

[State 1300, 11]
type = Changestate
trigger1 = animtime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
;Bushin Ken Helper
[Statedef 1305]
type    = S
movetype= I
physics = S
juggle  = 8
anim = 1310
velset = 0,0
ctrl = 0
sprpriority = 5

[State 1305, 1]
type = assertspecial
trigger1 = time >= 0
flag = noshadow

[State 1305, 2]
type = Nothitby
trigger1 = time >= 0
value = SCA

[State 1305, 3]
type = BindToParent
trigger1 = animelemtime(4) < 0
pos = 0,0

[State 1305, 4]
type = PlaySnd
trigger1 = animelem = 4
value = s1300,1

[State 1305, 5]
type = velset
trigger1 = animelemtime(4) >= 0
x = 9.1

[State 1305, 6]
type = turn
trigger1 = animelem = 7

[State 1305, 7]
type = Destroyself
trigger1 = animtime = 0

;---------------------------------------------------------------------------
;Bushin Ken Helper 2
[Statedef 1310]
type    = S
movetype= I
physics = S
juggle  = 8
anim = 1315
velset = 0,0
ctrl = 0
sprpriority = 5

[State 1310, 1]
type = assertspecial
trigger1 = time >= 0
flag = noshadow

[State 1310, 2]
type = Nothitby
trigger1 = time >= 0
value = SCA

[State 1310, 3]
type = BindToParent
trigger1 = animelemtime(2) < 0
pos = 0,0

[State 1310, 4]
type = Explod
trigger1 = animelem = 9
anim = 1320
ID = 1320
pos = 0,0
postype = p1
facing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
scale = 1,1
sprpriority = 6
ownpal = 1
removeongethit = 0

[State 1310, 5]
type = Destroyself
trigger1 = animtime = 0


;---------------------------------------------------------------------------
; Joy Joy Balloon Start
[Statedef 1400]
type    = S
physics = S
anim = 1400
ctrl = 0
sprpriority = 1

[State 1400, 1]
type = VelSet
trigger1 = Animelem = 2
x = const(velocity.jump.fwd.x)*2
y = const(velocity.jump.y)*.3

[State 1400, 2]
type = playsnd
trigger1 = time = 0
value = s1400,0
channel = 0

[State 1400, 3]
type = StateTypeSet
trigger1 = Animelem = 2
statetype = A
physics = N


[State 1400, 3]
type = ChangeState
trigger1 = animtime = 0
value = 1410
ctrl = 0

;-------------------------------------------------------------------------------
; Joy Joy Balloon (balloon appear)
[Statedef 1410]
type    = A
movetype= I
physics = N
juggle  = 8
anim = 1405
velset = 0,0
ctrl = 0
sprpriority = 2

[State 1400, 1]
type = VelSet
triggerall = prevstateno = 1400
trigger1 = Animelem = 1
x = const(velocity.jump.fwd.x)*2
y = const(velocity.jump.y)*.5

[State 1400, 2]
type = VelSet
triggerall = prevstateno = 1400
trigger1 = Animelem = 2
x = 0
y = 0

[State 1410, 3]
type = playsnd
triggerall = prevstateno != 1400
trigger1 = time = 0
value = s1400,0
channel = 0

[State 1410, 4]
type = Explod
trigger1 = animelem = 2
anim = 1500
ID = 1505
pos = 0,0
postype = p1
facing = 1
bindtime = -1
removetime = 20
supermove = 0
pausemovetime = 0
sprpriority = -1
ownpal = 1
removeongethit = 1
ignorehitpause = 0

[State 1410, 5]
type = Explod
trigger1 = animelem = 3
anim = 1505
ID = 1505
pos = 0,0
postype = p1
facing = 1
bindtime = -1
removetime = 4
supermove = 0
pausemovetime = 0
sprpriority = -2
ownpal = 1
removeongethit = 1
ignorehitpause = 0

[State 1410, 6]
type = Helper
trigger1 = time = 0
helpertype = normal
name = "Balloon Time Controller"
ID = 1410
stateno = 1500
pos = 0,0
postype = left
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 1
pausemovetime = 1

[State 1416, 7]
type = VarSet
trigger1 = time = 0
var(6) = 0

[State 1410, 8]
type = Changestate
trigger1 = animtime = 0
value = 1415

;-------------------------------------------------------------------------------
; Joy Joy Balloon (on the balloon)
[Statedef 1415]
type    = A
movetype= I
physics = N
juggle  = 8
anim = 1415
velset = 0,0
ctrl = 0
sprpriority = 2

[State 1415, 1]
type = velset
trigger1 = time > 10
x = 0
y = -cos(time*.065)*.8

[state 1415, 2]
type = posset
trigger1 = Pos Y >= -1
y = -1

[state 1415, 3]
type = posset
trigger1 = Pos Y < -150
y = -150

[State 1415, 4]
type = Turn
trigger1 = p2dist x < 0

[State 1415, 5]
type = Changestate
triggerall = !var(6)
trigger1 = command = "holddown" || command = "holdup" || command = "holdfwd" || command = "holdback"
value = 1416

[State 1415, 6]
type = Changestate
trigger1 = var(6)
trigger2 = numprojid(1440)
trigger3 = roundstate = 3
value = 1460
ctrl = 0

;-------------------------------------------------------------------------------
; Joy Joy Balloon (Walking)
[Statedef 1416]
type    = A
movetype= I
physics = N
juggle  = 8
anim = 1416
velset = 0,0
ctrl = 0
sprpriority = 2

[state 1416, 1]
type = posset
trigger1 = Pos Y >= -1
y = -1

[state 1416, 2]
type = posset
trigger1 = Pos Y < -150
y = -150

[State 1416, 3]
type = VelSet
triggerall = time >= 0
trigger1 = command = "holdfwd" && command = "holddown"
x = 1.25
y = 1.25

[State 1416, 4]
type = VelSet
triggerall = time >= 0
trigger1 = command = "holdfwd" && command = "holdup"
x = 1.25
y = -1.25

[State 1416, 5]
type = VelSet
triggerall = time >= 0
trigger1 = command = "holdback" && command = "holddown"
x = -1.25
y = 1.25

[State 1416, 6]
type = VelSet
triggerall = time >= 0
trigger1 = command = "holdback" && command = "holdup"
x = -1.25
y = -1.25

[State 1416, 7]
type = VelSet
triggerall = time >= 0
triggerall = !command = "holdup"
triggerall = !command = "holddown"
trigger1 = command = "holdfwd"
x = 1.25
y = 0

[State 1416, 8]
type = VelSet
triggerall = time >= 0
triggerall = !command = "holdup"
triggerall = !command = "holddown"
trigger1 = command = "holdback"
x = -1.25
y = 0

[State 1416, 9]
type = VelSet
triggerall = time >= 0
triggerall = !command = "holdfwd"
triggerall = !command = "holdback"
trigger1 = command = "holddown"
x = 0
y = 1.25

[State 1416, 10]
type = VelSet
triggerall = time >= 0
triggerall = !command = "holdfwd"
triggerall = !command = "holdback"
trigger1 = command = "holdup"
x = 0
y = -1.25

[State 1416, 11]
type = Turn
trigger1 = p2dist x < 0

[State 1416, 12]
type = Changestate
trigger1 = !command = "holddown"
trigger1 = !command = "holdup"
trigger1 = !command = "holdfwd"
trigger1 = !command = "holdback"
value = 1415
ctrl = 0

[State 1416, 13]
type = Changestate
trigger1 = var(6)
trigger2 = roundstate = 3
value = 1460
ctrl = 0

;-------------------------------------------------------------------------------
; Joy Joy Treasure
[Statedef 1420]
type = A
movetype = A
physics = N
juggle = 8
anim = 1420
Poweradd = 100
velset = 0,0
ctrl = 0
sprpriority = 2

[State 1420, 1]
type = VarSet
trigger1 = time = 0
var(2) = ifelse(command = "x", 0, 1)

[State 1420, 2]
type = PlaySnd
trigger1 = AnimElem = 2 && Random <= 800
value = s200,3+random%3
channel = 0

[State 1420, 3]
type = Helper
trigger1 = animelem = 3
helpertype = normal
name = "Joy Joy Treasure"
ID = 1550
pos = 25,-95
postype = p1
facing = 1
stateno = 1550
keyctrl = 0
ownpal = 1
sprpriority = 6

[State 1420, 4]
type = Changestate
trigger1 = animtime = 0
value = 1415
ctrl = 0


;-------------------------------------------------------------------------------
; Joy Joy Kick
[Statedef 1430]
type = A
movetype = A
physics = N
juggle = 8
anim = 1430
Poweradd = 100
velset = 0,0
ctrl = 0
sprpriority = 2

[State 1430, 1]
type = PlaySnd
trigger1 = animelem = 1
value = s1400,2
channel = 0

[State 1430, 2]
type = playsnd
trigger1 = animelem = 1
value = s201,1

[State 1430, 3]
type = HitDef
trigger1 = animelem = 2
attr = A, NA
damage = 55
Hitflag = MAF
guardflag = HA
priority = 4
pausetime = 12,12
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10,-30
hitsound = s202,9+random%3
guardsound = s120,0
animtype = Hard
ground.type = High
ground.slidetime = 15
ground.hittime = 15
ground.velocity = -6
guard.velocity = -6
air.velocity = -3,-4
fall = 0
air.fall = 1
fall.recover = 0
air.recover = 0

[State 1430, 4]
type = Changestate
trigger1 = animtime = 0
value = 1415
ctrl = 0


;-------------------------------------------------------------------------------
; Joy Joy Block
[Statedef 1440]
type = A
movetype = A
physics = N
juggle = 8
anim = 1440
Poweradd = 100
velset = 0,0
ctrl = 0
sprpriority = 2

[State 1440, 1]
type = varset
triggerall = !var(0)
trigger1 = time = 0
var(2) = ifelse(command = "x", 0, 1)

[State 1440, 1]
type = varset
triggerall = var(0)
trigger1 = time = 0
var(2) = ifelse(P2bodydist X < 100, 0, 1)

[State 1440, 2]
type = PlaySnd
trigger1 = AnimElem = 1
value = s1000,0
channel = 0

[State 1440, 3]
type = PlaySnd
trigger1 = numprojid(1440)
value = s1000,1
persistent = 0

[State 1440, 4]
type = Projectile
trigger1 = animelem = 2
ProjID = 1440
projanim = 1530
projhitanim = 1535
projremanim = 1535
projcancelanim = 1535
projscale = 1,1
projremove = 1
projshadow = 0,0,0
projremovetime = 110
velocity = 0,0
remvelocity = 0,0
accel = 0,0
projhits = 1
projpriority = 1
projsprpriority = 8
projedgebound = 200
projstagebound = 200
projheightbound = -240
offset = ifelse(!var(2), 89, 138), ifelse(!var(2), -104, -55)
postype = p1
supermovetime = 0
pausemovetime = 0
attr = A, SP
hitflag = MAF
guardflag = M
animtype = hard
air.animtype = hard
priority = 4,Hit
damage = 65,10
pausetime = 0,14
guard.pausetime = 0,14
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10,-10
hitsound = s202,3+random%3
guardsound = s120,1
ground.type = Low
air.type = Low
ground.slidetime = 16
guard.slidetime = 16
ground.hittime = 18
guard.hittime = 18
air.hittime = 18
guard.ctrltime = 18
ground.velocity = -6
guard.velocity = -6
air.velocity = -3,-6
sprpriority = 2
yaccel = .5
fall = 0
air.fall = 1
fall.recover = 0
air.recover = 0
ownpal = 1

[State 1440, 5]
type = Changestate
trigger1 = animtime = 0
value = 1460
ctrl = 0

;-------------------------------------------------------------------------------
; Lighting Ball
[Statedef 1450]
type = A
movetype = A
physics = N
juggle = 8
anim = 1450
Poweradd = 100
velset = 0,0
ctrl = 0
sprpriority = 2

[State 1450, 1]
type = PlaySnd
trigger1 = AnimElem = 1
value = s1400,1
channel = 0

[State 1450, 2]
type = PlaySnd
trigger1 = AnimElem = 4
value = s1405,10

[State 1450, 3]
type = Explod
trigger1 = animelem = 4
anim = 1540
ID = 1540
pos = 6,-83
postype = p1
facing = 1
bindtime = -1
removetime = 15
supermove = 0
pausemovetime = 0
sprpriority = 1
ownpal = 1
removeongethit = 1
ignorehitpause = 0

[State 1450, 4]
type = HitDef
trigger1 = time = 0
attr = A, SP
damage = 65,10
guardflag = M
priority = 4
pausetime = 0,12
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10,ceil(-60+(enemynear, pos y))
hitsound = s1405,11
guardsound = s120,1
animtype = diagup
ground.type = High
ground.slidetime = 15
ground.hittime  = 12
guard.ctrltime = 15
ground.velocity = -4.5, -8
guard.velocity = -6
air.velocity = -4.5,-8
guard.ctrltime = 15
persistent = 1
ignorehitpause = 0
fall = 1
air.fall = 1
palfx.time = 46
palfx.add = 100,100,100
palfx.mul = 256,256,256
palfx.sinadd = -80,-80,-80,10
Palfx.color = 0
palfx.invertall = 1

[State 1450, 5]
type = Helper
triggerall = p2stateno = [5000,5999]
triggerall = numhelper(9185) = 0
trigger1 = movehit
name = "Eletricity"
ID = 9185
stateno = 9185
postype = P1
pos = 0,0
sprpriority = 3
bindtime = 1
ownpal = 1
ignorehitpause = 1
persistent = 1

[State 1450, 6]
type = Projectile
trigger1 = animelem = 4
ProjID = 1545
projanim = 1545
projhitanim = -1
projremanim = -1
projcancelanim = -1
projscale = 1,1
projremove = 1
projremovetime = 8
velocity = 0,0
remvelocity = 0,0
accel = 0,0
projhits = 1
projpriority = 1
projsprpriority = 1
projedgebound = 200
projstagebound = 200
projheightbound = -240
offset = 0,0
postype = p1
supermovetime = 0
pausemovetime = 0
attr = A, SP
hitflag = P
guardflag = M
animtype = hard
air.animtype = hard
priority = 4,Hit
damage = 65,10
pausetime = 0,12
guard.pausetime = 0,12
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10,-10
hitsound = s202,3+random%3
guardsound = s120,1
ground.type = Low
air.type = Low
ground.slidetime = 15
guard.slidetime = 15
ground.hittime = 12
guard.hittime = 12
air.hittime = 12
guard.ctrltime = 12
ground.velocity = -2,-6
air.velocity = -3,-5
sprpriority = 2
fall = 0
air.fall = 1
fall.recover = 0
air.recover = 0

[State 1450, 7]
type = AssertSpecial
triggerall = numtarget(3100) = 1 || numtarget(1550) = 1
trigger1 = time >= 0
flag = nojugglecheck

[State 1450, 8]
type = Changestate
trigger1 = animtime = 0
value = 1415
ctrl = 0

;-------------------------------------------------------------------------------
; Leaving the Balloon
[Statedef 1460]
type    = A
movetype= I
physics = N
juggle  = 8
anim = 1460
velset = 0,0
ctrl = 0
sprpriority = 2

[State 1460, 1]
type = Explod
trigger1 = animelem = 1
anim = 1550
ID = 1550
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = 15
supermove = 0
pausemovetime = 0
sprpriority = -1
ownpal = 1
removeongethit = 1
ignorehitpause = 0

[State 1460, 2]
type = Explod
trigger1 = animelem = 1
anim = 1505
ID = 1505
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = 4
supermove = 0
pausemovetime = 0
sprpriority = -2
ownpal = 1
removeongethit = 1
ignorehitpause = 0

[State 1460, 3]
type = playsnd
trigger1 = animelem = 1
value = s50,1

[State 1460, 4]
type = velset
trigger1 = time >= 4
x = 4

[State 1460, 5]
type = velset
trigger1 = time = 4
y = -4

[State 1460, 6]
type = veladd
trigger1 = time >= 4
y = .45

[State 1460, 7]
type = Changestate
triggerall = animelemtime(1) > 2
;trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 106

;-------------------------------------------------------------------------------
; Coma
[Statedef 1470]
type = A
movetype = A
physics = N
juggle = 8
anim = 1470
Poweradd = 100
ctrl = 0
sprpriority = 2

[State 1470, 1]
type = PlaySnd
trigger1 = AnimElem = 2 && Random <= 800
value = s200,3+random%3
channel = 0

[State 1470, 2]
type = PlaySnd
trigger1 = AnimElem = 4
value = s1405,21

[State 1470, 3]
type = velset
trigger1 = animelemtime(4) >= 0
x = 1.8
y = 9

[State 1470, 4]
type = HitDef
trigger1 = time = 0
attr = A, NA
damage = 65,10
guardflag = MA
priority = 4
pausetime = 12,12
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10,-10
hitsound = s1405,21
guardsound = s120,0
animtype = Med
ground.type = Low
ground.slidetime = 15
ground.hittime = 15
ground.velocity = -3, -6
guard.velocity = -6
air.velocity = -3,-6
fall = 1
air.fall = 1
air.recover = 0
fall.recover = 0
palfx.time = 46
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10
Palfx.color = 0
palfx.invertall = 1
id = 1470

[State 1470, 5]
type = Helper
triggerall = p2stateno = [5000,5999]
triggerall = numhelper(9180) = 0
trigger1 = movehit
name = "Fire"
ID = 9180
stateno = 9180
postype = P1
pos = 0,0
sprpriority = 3
bindtime = 1
ownpal = 1
ignorehitpause = 1
persistent = 1

[State 1470, 6]
type = AssertSpecial
triggerall = numtarget(3100) = 1 || numtarget(1550) = 1
trigger1 = time >= 0
flag = nojugglecheck

[State 1470, 7]
type = Changestate
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 106

;-------------------------------------------------------------------------------
; Moonsault
[Statedef 1480]
type = A
movetype = A
physics = N
juggle = 8
anim = 1480
Poweradd = 100
ctrl = 0
sprpriority = 2

[State 1480, 1]
type = PlaySnd
trigger1 = AnimElem = 2 && Random <= 800
value = s200,3+random%3
channel = 0

[State 1480, 2]
type = PlaySnd
trigger1 = AnimElem = 4
value = s1405,30

[State 1480, 3]
type = velset
trigger1 = animelemtime(4) >= 0
x = 2
y = 8

[State 1480, 3]
type = veladd
trigger1 = animelemtime(4) >= 4
x = -1.5

[State 1480, 4]
type = HitDef
trigger1 = time = 0
attr = A, NA
damage = 65,10
hitflag = MAF
guardflag = MA
priority = 4
pausetime = 12,12
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10,-10
hitsound = s202,3+random%3
guardsound = s120,0
animtype = Med
ground.type = Low
ground.slidetime = 15
ground.hittime  = 15
ground.velocity = -6
guard.velocity = -6
air.velocity = -3,-6
fall = 0
air.fall = 1
air.recover = 0
fall.recover = 0
id = ifelse((numtarget(3110) = 1 || numtarget(1550) = 1 || enemynear, statetype = A), 1480, 1481)


[State 1100, 18]
type = AssertSpecial
triggerall = numtarget(3110) = 1 || numtarget(1550) = 1
trigger1 = time >= 0
flag = nojugglecheck

[State 1480, 5]
type = Changestate
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 106

;-------------------------------------------------------------------------------------------
; Balloon Time Controller States
[Statedef 1500]
type    = S
movetype= I
physics = S
anim = 9999
poweradd = 0
ctrl = 0

[State 1500, 1]
type = VarSet
trigger1 = time = 0
var(3) = 0

[State 1500, 2]
type = VarAdd
trigger1 = parent, stateno = 1420
trigger2 = parent, stateno = 1430
trigger3 = parent, stateno = 1450
v = 3
value = 1

[State 1500, 3]
type = ParentVarSet
triggerall = var(3) < 2
trigger1 = time = 300
var(6) = 1

[State 1500, 4]
type = ParentVarSet
triggerall = var(3) >= 2
trigger1 = time = 600
var(6) = 1

[State 1500, 5]
type = NotHitBy
trigger1 = time >= 0
value = SCA

[State 1500, 6]
type = DestroySelf
trigger1 = parent, stateno = 1460
trigger2 = parent, movetype = H
trigger3 = parent, var(6) = 1


;-------------------------------------------------------------------------------------------
; Joy Joy Treasure States
[Statedef 1550]
type    = A
movetype= A
physics = N
juggle  = 8
poweradd = 0
ctrl = 0
sprpriority = 7

[State 1550, 1]
type = Varset
trigger1 = time = 0
var(2) = parent, var(2)

[State 1550, 2]
type = ChangeAnim
trigger1 = time = 0
value = ifelse(!var(2), (1510+random%4), (1514+random%4))

[State 1550, 3]
type = playsnd
trigger1 = time = 0
value = s1100,0

[State 1550, 4]
type = AssertSpecial
trigger1 = time >= 0
flag = noshadow
ignorehitpause = 1
persistent = 1

[State 1550, 5]
type = VelSet
trigger1 = time = 0
y = -3
x = 2+(var(2)*1.5)

[State 1550, 6]
type = veladd
trigger1 = time >= 0
y = .4

[State 1550, 7]
type = Projectile
triggerall = anim = 1510 || anim = 1511 || anim = 1514 || anim = 1515
trigger1 = time = 0
ProjID = 1550
projanim = 1529
projhitanim = -1
projremanim = -1
projcancelanim = -1
projscale = 1,1
projremove = 1
projremovetime = -1
velocity = vel x, -3
remvelocity = 0,0
accel = 0,.41
projhits = 1
projmiss = 0
projpriority = 1
projsprpriority = -1
projedgebound = 80
projstagebound = 80
projheightbound = -280
offset = 0,0
postype = p1
supermovetime = 0
pausemovetime = 0
attr = A,SP
hitflag = MAF
guardflag = M
animtype = heavy
air.animtype = heavy
priority = 4,Hit
damage = 65,10
pausetime = 0,18
guard.pausetime = 0,18
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10,-10
hitsound = s1405,21
guardsound = s120,1
ground.type = Low
air.type = Low
ground.slidetime = 15
guard.slidetime = 15
ground.hittime = 12
guard.hittime = 12
air.hittime = 12
guard.ctrltime = 12
ground.velocity = -3,-5
guard.velocity = -6
air.velocity = -3,-5
sprpriority = 2
fall = 1
air.fall = 1
air.recover = 0
palfx.time = 30
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10
Palfx.color = 0
palfx.invertall = 1
air.juggle = 0
id = 1550

[State 1550, 8]
type = Projectile
triggerall = anim = 1512 || anim = 1513 || anim = 1516 || anim = 1517
trigger1 = time = 0
ProjID = 1550
projanim = 1529
projhitanim = -1
projremanim = -1
projcancelanim = -1
projscale = 1,1
projremove = 1
projremovetime = -1
velocity = vel x, -3
remvelocity = 0,0
accel = 0,.41
projhits = 1
projmiss = 0
projpriority = 1
projsprpriority = -1
projedgebound = 80
projstagebound = 80
projheightbound = -280
offset = 0,0
postype = p1
supermovetime = 0
pausemovetime = 0
attr = A,SP
hitflag = MAF
guardflag = M
animtype = heavy
air.animtype = heavy
priority = 4,Hit
damage = 65,10
pausetime = 0,18
guard.pausetime = 0,18
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10,-10
hitsound = s202,3+random%3
guardsound = s120,1
ground.type = Low
air.type = Low
ground.slidetime = 15
guard.slidetime = 15
ground.hittime = 12
guard.hittime = 12
air.hittime = 12
guard.ctrltime = 12
ground.velocity = -3
guard.velocity = -6
sprpriority = 2
air.velocity = -3,-5
fall = 0
air.fall = 1
air.recover = 0
air.juggle = 0
id = 1550

[State 1550, 9]
type = changestate
trigger1 = !parent, numprojid(1550)
trigger2 = Vel Y > 0
trigger2 = Pos Y >= -10
value = 1555
ctrl = 0

;------------------------------------------------------------------------
; Treasures on the Ground (going forward)
[Statedef 1555]
type = A
physics = N
movetype = I
velset = 0,0
sprpriority = 7

[State 1555, 1]
type = ChangeAnim
trigger1 = time = 0
value = anim + 10

[State 1555, 2]
type = AssertSpecial
trigger1 = time >= 0
flag = noshadow
ignorehitpause = 1
persistent = 1

[State 1555, 3]
type = PlaySnd
triggerall = anim = 1520 || anim = 1521 || anim = 1524 || anim = 1525
trigger1 = time = 0
value = s1405,20

[State 1555, 4]
type = velset
triggerall = anim = 1520 || anim = 1521 || anim = 1524 || anim = 1525
trigger1 = time = 0
x = 0
y = 0

[State 1555, 8]
type = Destroyself
triggerall = anim = 1520 || anim = 1521 || anim = 1524 || anim = 1525
trigger1 = animtime = 0

[State 1555, 9]
type = Helper
triggerall = anim = 1520 || anim = 1521 || anim = 1524 || anim = 1525
triggerall = projhittime(1550) <= 1
triggerall = p2stateno = 5000 || p2stateno = 5020
trigger1 = time = 0
name = "Fire"
ID = 9180
stateno = 9180
postype = P1
pos = 0,0
sprpriority = 3
bindtime = 1
ownpal = 1
ignorehitpause = 1
persistent = 1

[State 1555, 9]
type = velset
triggerall = anim = 1522 || anim = 1523 || anim = 1526 || anim = 1527
trigger1 = time >= 0
x = 3+var(2)

[State 1555, 10]
type = velset
triggerall = anim = 1522 || anim = 1523 || anim = 1526 || anim = 1527
trigger1 = time = 0
y = -5-var(2)

[State 1555, 11]
type = veladd
triggerall = anim = 1522 || anim = 1523 || anim = 1526 || anim = 1527
trigger1 = time >= 0
y = .45

[State 1555, 12]
type = Destroyself
triggerall = anim = 1522 || anim = 1523 || anim = 1526 || anim = 1527
triggerall = time > 3
trigger1 = pos y >= -6 && vel Y > 0



;---------------------------------------------------------------------------
;                      Hyper Attacks
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
; Joy Joy Party
[Statedef 3000]
type    = S
movetype= A
physics = S
juggle  = 8
velset = 0,0
poweradd = 0
ctrl = 0
sprpriority = 2

[State 3000, 1]
type = varset
trigger1 = time = 0
var(2) = ifelse(command = "x", 0, 1)

[State 3000, 2]
type = ChangeAnim
trigger1 = time = 0
value = 3000+var(2)

[State 3000, 3]
type = Turn
triggerall = prevstateno = 1300
triggerall = enemynear, facing = facing
trigger1 = time = 0

[State 3000, 4]
type = AssertSpecial
trigger1 = time = [0,28]
flag= noFG
flag2= noBG

[State 3000, 6]
type = SuperPause
trigger1 = animelem = 1, = 0
time = 27
anim = -1
sound = s3200,0
movetime = 27
darken = 0
poweradd = -1000
unhittable = 1

[State 3000, 7]
type = EnvColor
trigger1 = animelem = 1, = 0
value = 248,248,248
time = 2
under = 1

[State 3000, 8]
type = EnvColor
trigger1 = animelem = 1, = 0
value = 0, 0, 0
time = 27
under = 1

[State 3000, 9]
type = NotHitBy
trigger1 = time <= 28
value = SCA

[State 3000, 10]
type = Explod
trigger1 = animelem = 1
anim = 10010
ID = 8200
pos = 20,-76
postype = p1
bindtime = 1
vel = 0,0
accel = 0,0
sprpriority = 4
ownpal = 1
supermove = 1

[State 3000, 10]
type = Explod
trigger1 = animelem = 1
anim = 10000
ID = 8200
pos = 20,-76
postype = p1
bindtime = 1
vel = 0,0
accel = 0,0
sprpriority = -4
ownpal = 1
supermove = 1

[State 3000, 11]
type = Explod
trigger1 = animelem = 5, = 0
anim = 3005
ID = 3005
pos = 5,-8
postype = p1
bindtime = 164
vel = 0,0
accel = 0,0
sprpriority = 3
ownpal = 1
supermove = 1
removetime = ifelse(!var(2), 100, 164)
removeongethit = 1
;trans = addalpha
;alpha = 256-(time-14)*10,150-(time-14)*10

[State 3000, 12]
type = PlaySnd
trigger1 = animelem = 2, = 0
value = s3000,0
channel = 0

;Light Version
[State 3000, 13]
type = Helper
triggerall = !var(2)
trigger1 = animelem = 5, = 19
helpertype = normal
name = "Light Blue Block"
ID = 3005
pos = 53, -175
postype = p1
facing = 1
stateno = 3005
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
ignorehitpause = 0

[State 3000, 14]
type = Helper
triggerall = !var(2)
trigger1 = animelem = 5, = 29
helpertype = normal
name = "Green Block"
ID = 3010
pos = 190,-102
postype = p1
facing = 1
stateno = 3010
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
ignorehitpause = 0

[State 3000, 15]
type = Helper
triggerall = !var(2)
trigger1 = animelem = 5, = 39
helpertype = normal
name = "Yellow Block"
ID = 3015
pos = 140,-175
postype = p1
facing = 1
stateno = 3015
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
ignorehitpause = 0

[State 3000, 16]
type = Helper
triggerall = !var(2)
trigger1 = animelem = 5, = 49
helpertype = normal
name = "Blue Block 2"
ID = 3020
pos = 235,-175
postype = p1
facing = 1
stateno = 3020
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
ignorehitpause = 0

[State 3000, 17]
type = Helper
triggerall = !var(2)
trigger1 = animelem = 5, = 59
helpertype = normal
name = "Pink Block"
ID = 3025
pos = 95,-250
postype = p1
facing = 1
stateno = 3025
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
ignorehitpause = 0

[State 3000, 18]
type = Helper
triggerall = !var(2)
trigger1 = animelem = 5, = 69
helpertype = normal
name = "Red Block"
ID = 3030
pos = 20,-225
postype = p1
facing = 1
stateno = 3030
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
ignorehitpause = 0

[State 3000, 19]
type = Helper
triggerall = !var(2)
trigger1 = animelem = 5, = 79
helpertype = normal
name = "Orange Block"
ID = 3035
pos = 190,-200
postype = p1
facing = 1
stateno = 3035
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
ignorehitpause = 0

; Strong Version
[State 3000, 20]
type = Helper
triggerall = var(2)
trigger1 = animelem = 5, = 9
helpertype = normal
name = "Blue Block"
ID = 3005
pos = 100,-75
postype = p1
facing = 1
stateno = 3005
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
ignorehitpause = 0

[State 3000, 21]
type = Helper
triggerall = var(2)
trigger1 = animelem = 5, = 19
helpertype = normal
name = "Green Block"
ID = 3010
pos = 180,-100
postype = p1
facing = 1
stateno = 3010
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
ignorehitpause = 0

[State 3000, 22]
type = Helper
triggerall = var(2)
trigger1 = animelem = 5, = 29
helpertype = normal
name = "Yellow Block"
ID = 3015
pos = 140,-125
postype = p1
facing = 1
stateno = 3015
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
ignorehitpause = 0

[State 3000, 23]
type = Helper
triggerall = var(2)
trigger1 = animelem = 5, = 39
helpertype = normal
name = "Blue Block 2"
ID = 3020
pos = 230,-150
postype = p1
facing = 1
stateno = 3020
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
ignorehitpause = 0

[State 3000, 24]
type = Helper
triggerall = var(2)
trigger1 = animelem = 5, = 49
helpertype = normal
name = "Pink Block"
ID = 3025
pos = 100,-225
postype = p1
facing = 1
stateno = 3025
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
ignorehitpause = 0

[State 3000, 25]
type = Helper
triggerall = var(2)
trigger1 = animelem = 5, = 59
helpertype = normal
name = "Red Block"
ID = 3030
pos = 20,-200
postype = p1
facing = 1
stateno = 3030
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
ignorehitpause = 0

[State 3000, 26]
type = Helper
triggerall = var(2)
trigger1 = animelem = 5, = 69
helpertype = normal
name = "Orange Block"
ID = 3035
pos = 180,-175
postype = p1
facing = 1
stateno = 3035
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
ignorehitpause = 0

[State 3000, 27] ;Blink Red
type = PalFX
triggerall = prevstateno = 1100 || prevstateno = 1300
trigger1 = Time = 0
trigger2 = Time = 2
trigger3 = Time = 4
trigger4 = Time = 5
trigger5 = Time = 7
trigger6 = Time = 9
time = 1
add = 256,-256,-256
mul = 256,256,256
sinadd = 0,0,0,0
invertall = 0
color = 256

[State 3000, 28]
type = Changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------------------
; Blue Block States
[Statedef 3005]
type    = A
movetype= A
physics = N
juggle  = 8
anim = 1005
velset = 0,0
poweradd = 0
ctrl = 0
sprpriority = 4

[State 3005, 1]
type = VarSet
trigger1 = time = 0
var(2) = parent, var(2)

[State 3005, 1]
type = AssertSpecial
trigger1 = time >= 0
flag = noshadow
ignorehitpause = 1
persistent = 1

[State 3005, 2]
type = playsnd
trigger1 = time = 0
value = s1000,1

[State 3005, 3]
type = VelSet
trigger1 = time >= 12
y = 8

[State 3005, 4]
type = hitby
trigger1 = 1
value = SCA,NP,SP,HP

[STate 3005, 5]
type = HitOverride
trigger1 = 1
attr = SCA,NP,SP,HP
stateno = 3050

[State 3005, 6]
type = HitDef
triggerall = !var(2)
trigger1 = time = 0
attr = A, HP
hitflag = MAF
guardflag = M
animtype = hard
air.animtype = hard
priority = 4,Hit
damage = 60,15
pausetime = 0,10
guard.pausetime = 0,12
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10,-10
hitsound = s202,3+random%3
guardsound = s120,1
ground.type = Low
air.type = Low
ground.slidetime = 25
guard.slidetime = 25
ground.hittime = 25
guard.hittime = 25
air.hittime = 25
guard.ctrltime = 20
ground.velocity = -3,-6
guard.velocity = -8
air.velocity = -3,-6
sprpriority = 2
fall = 1
air.fall = 1
air.recover = 0
fall.recover = 0
getpower = 0,0

[State 3005, 7]
type = HitDef
triggerall = var(2)
trigger1 = time = 0
attr = A, HP
hitflag = MAF
guardflag = M
animtype = heavy
air.animtype = heavy
priority = 4,Hit
damage = 60,15
pausetime = 0,12
guard.pausetime = 0,12
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10,-10
hitsound = s1405,21
guardsound = s120,1
ground.type = Low
air.type = Low
ground.slidetime = 25
guard.slidetime = 25
ground.hittime = 25
guard.hittime = 25
air.hittime = 25
guard.ctrltime = 20
ground.velocity = -4,-5
guard.velocity = -8
air.velocity = -4,-5
sprpriority = 2
fall = 1
air.fall = 1
air.recover = 0
fall.recover = 0
getpower = 0,0
palfx.time = 32
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10
Palfx.color = 0
palfx.invertall = 1

[State 3005, 8]
type = Helper
triggerall = var(2)
triggerall = p2stateno = [5000,5999]
triggerall = numhelper(9180) = 0
trigger1 = movehit
name = "Fire"
ID = 9180
stateno = 9180
postype = P1
pos = 0,0
sprpriority = 3
bindtime = 1
ownpal = 1
ignorehitpause = 1
persistent = 1

[State 3005, 9]
type = changestate
trigger1 = movecontact
value = 3050
ctrl = 0

[State 3005, 10]
type = changestate
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 3050
ctrl = 0

;-------------------------------------------------------------------------------------------
; Green Block States
[Statedef 3010]
type    = A
movetype= A
physics = N
juggle  = 8
poweradd = 0
ctrl = 0
sprpriority = 4

[State 3010, 1]
type = VarSet
trigger1 = time = 0
var(2) = parent, var(2)

[State 3010, 2]
type = ChangeAnim
trigger1 = time = 0
value = ifelse(var(2), 3010, 1010)

[State 3010, 3]
type = AssertSpecial
trigger1 = time >= 0
flag = noshadow
ignorehitpause = 1
persistent = 1

[State 3010, 4]
type = playsnd
trigger1 = time = 0
value = s1000,1

[State 3010, 5]
type = playsnd
triggerall = anim = 3010
trigger1 = animelem = 7
value = s3000,4

[State 3010, 6]
type = VelSet
trigger1 = time >= 12
y = 5.52-var(2)

[State 3010, 7]
type = hitby
trigger1 = 1
value = SCA,NP,SP,HP

[STate 3010, 8]
type = HitOverride
trigger1 = 1
attr = SCA,NP,SP,HP
stateno = 3050

[State 3010, 9]
type = HitDef
triggerall = !var(2)
trigger1 = time = 0
attr = A, HP
hitflag = MAF
guardflag = M
animtype = hard
air.animtype = hard
priority = 4,Hit
damage = 60,15
pausetime = 0,10
guard.pausetime = 0,12
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10,-10
hitsound = s202,3+random%3
guardsound = s120,1
ground.type = Low
air.type = Low
ground.slidetime = 25
guard.slidetime = 25
ground.hittime = 25
guard.hittime = 25
air.hittime = 25
guard.ctrltime = 20
guard.velocity = -8
ground.velocity = -7
air.velocity = -3,-6
sprpriority = 2
fall = 0
air.fall = 1
air.recover = 0
fall.recover = 0
getpower = 0,0

[State 3010, 10]
type = HitDef
triggerall = var(2)
trigger1 = time = 0
attr = A, HP
hitflag = MAF
guardflag = M
animtype = heavy
air.animtype = heavy
priority = 4,Hit
damage = 60,15
pausetime = 0,12
guard.pausetime = 0,12
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10,-10
hitsound = s1405,21
guardsound = s120,1
ground.type = Low
air.type = Low
ground.slidetime = 25
guard.slidetime = 25
ground.hittime = 25
guard.hittime = 25
air.hittime = 25
guard.ctrltime = 20
ground.velocity = -7
guard.velocity = -8
air.velocity = -4,-5
sprpriority = 2
fall = 0
air.fall = 1
air.recover = 0
fall.recover = 0
getpower = 0,0
palfx.time = 32
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10
Palfx.color = 0
palfx.invertall = 1

[State 3010, 11]
type = Helper
triggerall = var(2)
triggerall = p2stateno = [5000,5999]
triggerall = numhelper(9180) = 0
trigger1 = movehit
name = "Fire"
ID = 9180
stateno = 9180
postype = P1
pos = 0,0
sprpriority = 3
bindtime = 1
ownpal = 1
ignorehitpause = 1
persistent = 1

[State 3010, 12]
type = changestate
trigger1 = movecontact
value = 3050
ctrl = 0

[State 3010, 13]
type = changestate
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 3050
ctrl = 0

;-------------------------------------------------------------------------------------------
; Yellow Block States
[Statedef 3015]
type    = A
movetype= A
physics = N
juggle  = 8
poweradd = 0
ctrl = 0
sprpriority = 4

[State 3015, 1]
type = VarSet
trigger1 = time = 0
var(2) = parent, var(2)

[State 3015, 2]
type = ChangeAnim
trigger1 = time = 0
value = ifelse(var(2), 3015, 1011)

[State 3015, 3]
type = AssertSpecial
trigger1 = time >= 0
flag = noshadow
ignorehitpause = 1
persistent = 1

[State 3015, 4]
type = playsnd
trigger1 = time = 0
value = s1000,1

[State 3015, 5]
type = playsnd
triggerall = anim = 3015
trigger1 = animelem = 7
value = s3000,4

[State 3015, 6]
type = VelSet
trigger1 = time >= 12
y = 3.5-(var(2))*.5

[State 3015, 7]
type = hitby
trigger1 = 1
value = SCA,NP,SP,HP

[STate 3015, 8]
type = HitOverride
trigger1 = 1
attr = SCA,NP,SP,HP
stateno = 3050

[State 3015, 9]
type = HitDef
triggerall = !var(2)
trigger1 = time = 0
attr = A, HP
hitflag = MAF
guardflag = M
animtype = heavy
air.animtype = heavy
priority = 4,Hit
damage = 60,15
pausetime = 0,10
guard.pausetime = 0,12
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10,-10
hitsound = s1405,11
guardsound = s120,1
ground.type = Low
air.type = Low
ground.slidetime = 25
guard.slidetime = 25
ground.hittime = 25
guard.hittime = 25
air.hittime = 25
guard.ctrltime = 20
ground.velocity = -7
guard.velocity = -8
air.velocity = -3,-6
sprpriority = 2
fall = 0
air.fall = 1
air.recover = 0
fall.recover = 0
getpower = 0,0
palfx.time = 32
palfx.add = 100,100,100
palfx.mul = 256,256,256
palfx.sinadd = -80,-80,-80,10
Palfx.color = 0
palfx.invertall = 1

[State 3015, 10]
type = Helper
triggerall = !var(2)
triggerall = p2stateno = [5000,5999]
triggerall = numhelper(9185) = 0
trigger1 = movehit
name = "Eletricity"
ID = 9185
stateno = 9185
postype = P1
pos = 0,0
sprpriority = 3
bindtime = 1
ownpal = 1
ignorehitpause = 1
persistent = 1

[State 3015, 11]
type = HitDef
triggerall = var(2)
trigger1 = time = 0
attr = A, HP
hitflag = MAF
guardflag = M
animtype = heavy
air.animtype = heavy
priority = 4,Hit
damage = 60,15
pausetime = 0,12
guard.pausetime = 0,12
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10,-10
hitsound = s1405,21
guardsound = s120,1
ground.type = Low
air.type = Low
ground.slidetime = 25
guard.slidetime = 25
ground.hittime = 25
guard.hittime = 25
air.hittime = 25
guard.ctrltime = 20
ground.velocity = -7
guard.velocity = -8
air.velocity = -4,-5
sprpriority = 2
fall = 0
air.fall = 1
air.recover = 0
fall.recover = 0
getpower = 0,0
palfx.time = 32
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10
Palfx.color = 0
palfx.invertall = 1

[State 3015, 12]
type = Helper
triggerall = var(2)
triggerall = p2stateno = [5000,5999]
triggerall = numhelper(9180) = 0
trigger1 = movehit
name = "Fire"
ID = 9180
stateno = 9180
postype = P1
pos = 0,0
sprpriority = 3
bindtime = 1
ownpal = 1
ignorehitpause = 1
persistent = 1

[State 3015, 13]
type = changestate
trigger1 = movecontact
value = 3050
ctrl = 0

[State 3015, 14]
type = changestate
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 3050
ctrl = 0

;-------------------------------------------------------------------------------------------
; Blue Block 2 States
[Statedef 3020]
type    = A
movetype= A
physics = N
juggle  = 8
poweradd = 0
ctrl = 0
sprpriority = 4

[State 3020, 1]
type = VarSet
trigger1 = time = 0
var(2) = parent, var(2)

[State 3020, 2]
type = ChangeAnim
trigger1 = time = 0
value = ifelse(var(2), 3020, 1012)

[State 3020, 3]
type = AssertSpecial
trigger1 = time >= 0
flag = noshadow
ignorehitpause = 1
persistent = 1

[State 3020, 4]
type = playsnd
trigger1 = time = 0
value = s1000,1

[State 3020, 5]
type = playsnd
triggerall = anim = 3020
triggerall = time >= 34
trigger1 = animelem = 6
trigger2 = animelem = 7
trigger3 = animelem = 8
trigger4 = animelem = 9
value = s3000,4

[State 3020, 6]
type = VelSet
trigger1 = time >= 12
y = 9-(var(2))*6.8

[State 3020, 7]
type = hitby
trigger1 = 1
value = SCA,NP,SP,HP

[STate 3020, 8]
type = HitOverride
trigger1 = 1
attr = SCA,NP,SP,HP
stateno = 3050

[State 3020, 9]
type = HitDef
triggerall = !var(2)
trigger1 = time = 0
attr = A, HP
hitflag = MAF
guardflag = M
animtype = heavy
air.animtype = heavy
priority = 4,Hit
damage = 60,15
pausetime = 0,10
guard.pausetime = 0,12
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10,-10
hitsound = s202,3+random%3
guardsound = s120,1
ground.type = Low
air.type = Low
ground.slidetime = 25
guard.slidetime = 25
ground.hittime = 25
guard.hittime = 25
air.hittime = 25
guard.ctrltime = 20
ground.velocity = -7
guard.velocity = -8
air.velocity = -3,-6
sprpriority = 2
fall = 0
air.fall = 1
air.recover = 0
fall.recover = 0
getpower = 0,0
palfx.time = 32
palfx.add = 150,180,256
palfx.mul = 256,256,256
palfx.sinadd = -80,-80,-80,0
Palfx.color = 0
palfx.invertall = 1

[State 3020, 10]
type = HitDef
triggerall = var(2)
trigger1 = time = 0
attr = A, HP
hitflag = MAF
guardflag = M
animtype = heavy
air.animtype = heavy
priority = 4,Hit
damage = 60,15
pausetime = 0,12
guard.pausetime = 0,12
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10,-10
hitsound = s1405,21
guardsound = s120,1
ground.type = Low
air.type = Low
ground.slidetime = 25
guard.slidetime = 25
ground.hittime = 25
guard.hittime = 25
air.hittime = 25
guard.ctrltime = 20
ground.velocity = -4,-5
guard.velocity = -8
air.velocity = -4,-5
sprpriority = 2
fall = 1
air.fall = 1
air.recover = 0
fall.recover = 0
getpower = 0,0
palfx.time = 32
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10
Palfx.color = 0
palfx.invertall = 1

[State 3020, 11]
type = Helper
triggerall = var(2)
triggerall = p2stateno = [5000,5999]
triggerall = numhelper(9180) = 0
trigger1 = movehit
name = "Fire"
ID = 9180
stateno = 9180
postype = P1
pos = 0,0
sprpriority = 3
bindtime = 1
ownpal = 1
ignorehitpause = 1
persistent = 1

[State 3020, 12]
type = changestate
trigger1 = movecontact
value = 3050
ctrl = 0

[State 3020, 13]
type = changestate
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 3050
ctrl = 0

;-------------------------------------------------------------------------------------------
; Pink Block States
[Statedef 3025]
type    = A
movetype= A
physics = N
juggle  = 8
poweradd = 0
ctrl = 0
sprpriority = 4

[State 3025, 1]
type = VarSet
trigger1 = time = 0
var(2) = parent, var(2)

[State 3025, 2]
type = ChangeAnim
trigger1 = time = 0
value = ifelse(var(2), 3025, 1025)

[State 3025, 3]
type = AssertSpecial
trigger1 = time >= 0
flag = noshadow
ignorehitpause = 1
persistent = 1

[State 3025, 4]
type = playsnd
trigger1 = time = 0
value = s1000,1

[State 3025, 5]
type = playsnd
triggerall = anim = 3025
triggerall = time >= 25
trigger1 = animelem = 6
trigger2 = animelem = 7
trigger3 = animelem = 8
trigger4 = animelem = 9
value = s3000,4

[State 3025, 6]
type = VelSet
trigger1 = time >= 12
y = 6.5-(var(2))*4

[State 3025, 7]
type = hitby
trigger1 = 1
value = SCA,NP,SP,HP

[STate 3025, 8]
type = HitOverride
trigger1 = 1
attr = SCA,NP,SP,HP
stateno = 3050

[State 3025, 9]
type = HitDef
triggerall = !var(2)
trigger1 = time = 0
attr = A, HP
hitflag = MAF
guardflag = M
animtype = heavy
air.animtype = heavy
priority = 4,Hit
damage = 60,15
pausetime = 0,8
guard.pausetime = 0,12
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10,-10
hitsound = s202,3+random%3
guardsound = s120,1
ground.type = Low
air.type = Low
ground.slidetime = 25
guard.slidetime = 25
ground.hittime = 25
guard.hittime = 25
air.hittime = 25
guard.ctrltime = 20
ground.velocity = -7
guard.velocity = -8
air.velocity = -3,-6
sprpriority = 2
fall = 0
air.fall = 1
air.recover = 0
fall.recover = 0
getpower = 0,0

[State 3025, 10]
type = HitDef
triggerall = var(2)
trigger1 = time = 0
attr = A, HP
hitflag = MAF
guardflag = M
animtype = heavy
air.animtype = heavy
priority = 4,Hit
damage = 60,15
pausetime = 0,12
guard.pausetime = 0,12
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10,-10
hitsound = s1405,21
guardsound = s120,1
ground.type = Low
air.type = Low
ground.slidetime = 25
guard.slidetime = 25
ground.hittime = 25
guard.hittime = 25
air.hittime = 25
guard.ctrltime = 20
ground.velocity = -4,-5
guard.velocity = -8
air.velocity = -4,-5
sprpriority = 2
fall = 1
air.fall = 1
air.recover = 0
fall.recover = 0
getpower = 0,0
palfx.time = 32
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10
Palfx.color = 0
palfx.invertall = 1

[State 3025, 11]
type = Helper
triggerall = var(2)
triggerall = p2stateno = [5000,5999]
triggerall = numhelper(9180) = 0
trigger1 = movehit
name = "Fire"
ID = 9180
stateno = 9180
postype = P1
pos = 0,0
sprpriority = 3
bindtime = 1
ownpal = 1
ignorehitpause = 1
persistent = 1

[State 3025, 12]
type = changestate
trigger1 = movecontact
value = 3050
ctrl = 0

[State 3025, 13]
type = changestate
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 3050
ctrl = 0

;-------------------------------------------------------------------------------------------
; Red Block States
[Statedef 3030]
type    = A
movetype= A
physics = N
juggle  = 8
poweradd = 0
ctrl = 0
sprpriority = 4

[State 3030, 1]
type = VarSet
trigger1 = time = 0
var(2) = parent, var(2)

[State 3030, 2]
type = ChangeAnim
trigger1 = time = 0
value = ifelse(var(2), 3030, 1026)

[State 3030, 3]
type = AssertSpecial
trigger1 = time >= 0
flag = noshadow
ignorehitpause = 1
persistent = 1

[State 3030, 4]
type = playsnd
trigger1 = time = 0
value = s1000,1

[State 3030, 5]
type = playsnd
triggerall = anim = 3030
trigger1 = animelem = 7
value = s3000,4

[State 3030, 6]
type = VelSet
trigger1 = time >= 12
y = 7.8-(var(2))*1.55

[State 3030, 7]
type = hitby
trigger1 = 1
value = SCA,NP,SP,HP

[STate 3030, 8]
type = HitOverride
trigger1 = 1
attr = SCA,NP,SP,HP
stateno = 3050

[State 3030, 9]
type = HitDef
triggerall = !var(2)
trigger1 = time = 0
attr = A, HP
hitflag = MAF
guardflag = M
animtype = heavy
air.animtype = heavy
priority = 4,Hit
damage = 60,15
pausetime = 0,10
guard.pausetime = 0,12
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10,-10
hitsound = s1405,21
guardsound = s120,1
ground.type = Low
air.type = Low
ground.slidetime = 25
guard.slidetime = 25
ground.hittime = 25
guard.hittime = 25
air.hittime = 25
guard.ctrltime = 20
ground.velocity = -7
guard.velocity = -8
air.velocity = -3,-6
sprpriority = 2
fall = 0
air.fall = 1
air.recover = 0
fall.recover = 0
getpower = 0,0
palfx.time = 32
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10
Palfx.color = 0
palfx.invertall = 1

[State 3030, 10]
type = HitDef
triggerall = var(2)
trigger1 = time = 0
attr = A, HP
hitflag = MAF
guardflag = M
animtype = heavy
air.animtype = heavy
priority = 4,Hit
damage = 60,15
pausetime = 0,12
guard.pausetime = 0,12
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10,-10
hitsound = s1405,21
guardsound = s120,1
ground.type = Low
air.type = Low
ground.slidetime = 25
guard.slidetime = 25
ground.hittime = 25
guard.hittime = 25
air.hittime = 25
guard.ctrltime = 20
ground.velocity = -7
guard.velocity = -8
air.velocity = -4,-5
sprpriority = 2
fall = 0
air.fall = 1
air.recover = 0
fall.recover = 0
getpower = 0,0
palfx.time = 32
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10
Palfx.color = 0
palfx.invertall = 1

[State 3030, 11]
type = Helper
triggerall = p2stateno = [5000,5999]
triggerall = numhelper(9180) = 0
trigger1 = movehit
name = "Fire"
ID = 9180
stateno = 9180
postype = P1
pos = 0,0
sprpriority = 3
bindtime = 1
ownpal = 1
ignorehitpause = 1
persistent = 1

[State 3030, 12]
type = changestate
trigger1 = movecontact
value = 3050
ctrl = 0

[State 3030, 13]
type = changestate
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 3050
ctrl = 0

;-------------------------------------------------------------------------------------------
; Orange Block States
[Statedef 3035]
type    = A
movetype= A
physics = N
juggle  = 8
poweradd = 0
ctrl = 0
sprpriority = 4

[State 3035, 1]
type = VarSet
trigger1 = time = 0
var(2) = parent, var(2)

[State 3035, 2]
type = ChangeAnim
trigger1 = time = 0
value = ifelse(var(2), 3035, 1027)

[State 3035, 3]
type = AssertSpecial
trigger1 = time >= 0
flag = noshadow
ignorehitpause = 1
persistent = 1

[State 3035, 4]
type = playsnd
trigger1 = time = 0
value = s1000,1

[State 3035, 4]
type = playsnd
triggerall = anim = 3035
triggerall = time >= 25
trigger1 = animelem = 6
trigger2 = animelem = 7
trigger3 = animelem = 8
trigger4 = animelem = 9
value = s3000,4

[State 3035, 5]
type = VelSet
trigger1 = time >= 12
y = 6-(var(2))*2.5

[State 3035, 6]
type = hitby
trigger1 = 1
value = SCA,NP,SP,HP

[STate 3035, 7]
type = HitOverride
trigger1 = 1
attr = SCA,NP,SP,HP
stateno = 3050

[State 3035, 8]
type = HitDef
triggerall = !var(2)
trigger1 = time = 0
attr = A, HP
hitflag = MAF
guardflag = M
animtype = heavy
air.animtype = heavy
priority = 4,Hit
damage = 60,15
pausetime = 0,10
guard.pausetime = 0,12
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10,-10
hitsound = s202,3+random%3
guardsound = s120,1
ground.type = Low
air.type = Low
ground.slidetime = 25
guard.slidetime = 25
ground.hittime = 25
guard.hittime = 25
air.hittime = 25
guard.ctrltime = 20
ground.velocity = -3,-6
guard.velocity = -8
air.velocity = -3,-6
sprpriority = 2
fall = 1
air.fall = 1
air.recover = 0
fall.recover = 0
getpower = 0,0

[State 3035, 9]
type = HitDef
triggerall = var(2)
trigger1 = time = 0
attr = A, HP
hitflag = MAF
guardflag = M
animtype = heavy
air.animtype = heavy
priority = 4,Hit
damage = 60,15
pausetime = 0,12
guard.pausetime = 0,12
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10,-10
hitsound = s1405,21
guardsound = s120,1
ground.type = Low
air.type = Low
ground.slidetime = 25
guard.slidetime = 25
ground.hittime = 25
guard.hittime = 25
air.hittime = 25
guard.ctrltime = 20
ground.velocity = -4,-5
guard.velocity = -8
air.velocity = -4,-5
sprpriority = 2
fall = 1
air.fall = 1
air.recover = 0
fall.recover = 0
getpower = 0,0
palfx.time = 32
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10
Palfx.color = 0
palfx.invertall = 1

[State 3035, 10]
type = Helper
triggerall = var(2)
triggerall = p2stateno = [5000,5999]
triggerall = numhelper(9180) = 0
trigger1 = movehit
name = "Fire"
ID = 9180
stateno = 9180
postype = P1
pos = 0,0
sprpriority = 3
bindtime = 1
ownpal = 1
ignorehitpause = 1
persistent = 1

[State 3035, 11]
type = changestate
trigger1 = movecontact
value = 3050
ctrl = 0

[State 3035, 12]
type = changestate
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 3050
ctrl = 0

;-----------------------------------------------------------------------------
; Blocks End
[Statedef 3050]
type    = A
movetype= I
physics = N
juggle  = 8
poweradd= 0
velset = 0,0
ctrl = 0
sprpriority = 4

[State 3050, 1]
type = ChangeAnim
trigger1 = time = 0
value = ifelse(var(2), 3050, (anim+10))

[State 3050, 2]
type = AssertSpecial
trigger1 = time >= 0
flag = noshadow
ignorehitpause = 1
persistent = 1

[State 3050, 3]
type = NotHitBy
trigger1 = time >= 0
value = SCA

[State 3050, 4]
type = PlaySnd
triggerall = anim = 3050
trigger1 = time = 0
value = s1405,20

[State 3050, 7]
type = PlaySnd
triggerall = anim != 3050
trigger1 = time = 0
value = s1000,2

[State 3050, 8]
type = Explod
triggerall = anim != 3050
trigger1 = time = 0
anim = 8055
ID = 8055
pos = 0,5
postype = p1
facing = 1
bindtime = 1
vel = 0,0
removetime = 9
supermove = 0
pausemovetime = 0
sprpriority = -1
ownpal = 1
removeongethit = 0

[State 3050, 9]
type = Explod
triggerall = anim != 3050
trigger1 = time = 0
anim = 8060
ID = 8060
pos = 0,0
postype = p1
facing = 1
bindtime = 1
vel = 0,0
removetime = 11
supermove = 0
pausemovetime = 0
sprpriority = -1
ownpal = 1
removeongethit = 0

[State 3050, 10]
type = Destroyself
trigger1 = animtime = 0


;---------------------------------------------------------------------------
; Last Resort
[Statedef 3100]
type    = S
movetype= A
physics = S
juggle  = 8
anim = 3100
velset = 0,0
ctrl = 0
sprpriority = 2

[State 3100, 1]
type = varset
trigger1 = time = 0
var(2) = ifelse(command = "x", 0, 1)

[State 3100, 2]
type = Turn
triggerall = prevstateno = 1300
triggerall = enemynear, facing = facing
trigger1 = time = 0

[State 3100, 2]
type = AssertSpecial
trigger1 = time = [4,32]
flag= noFG
flag2= noBG

[State 3100, 3]
type = SuperPause
trigger1 = animelem = 2, = 0
time = 27
anim = -1
sound = s3200,0
movetime = 27
darken = 0
poweradd = -1000
unhittable = 1

[State 3100, 4]
type = EnvColor
trigger1 = animelem = 2, = 0
value = 248,248,248
time = 2
under = 1

[State 3100, 5]
type = EnvColor
trigger1 = animelem = 2, = 0
value = 0, 0, 0
time = 27
under = 1

[State 3100, 6]
type = NotHitBy
trigger1 = time <= 32
value = SCA

[State 3100, 7]
type = Explod
trigger1 = animelem = 2, = 0
anim = 10010
ID = 8200
pos = 8,-73
postype = p1
bindtime = 1
vel = 0,0
accel = 0,0
sprpriority = 4
ownpal = 1
supermove = 1

[State 3000, 10]
type = Explod
trigger1 = animelem = 1
anim = 10000
ID = 8200
pos = 20,-76
postype = p1
bindtime = 1
vel = 0,0
accel = 0,0
sprpriority = -4
ownpal = 1
supermove = 1

[State 3100, 8]
type = PlaySnd
trigger1 = animelem = 1, = 2
value = s3100,0
channel = 0

[State 3100, 9]
type = Helper
trigger1 = animelem = 3, = 0
helpertype = normal
name = "Last Resort Helper Fake"
ID = 3105
pos = 27,-82
postype = p1
facing = 1
stateno = 3105
keyctrl = 0
ownpal = 1
supermovetime = 30
pausemovetime = 0
ignorehitpause = 0

[State 3100, 10]
type = Helper
trigger1 = animelem = 5, = 29
helpertype = normal
name = "Last Resort Helper"
ID = 3110
pos = 35,-70
postype = p1
facing = 1
stateno = 3110
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
ignorehitpause = 0

[State 3100, 11] ;Blink Red
type = PalFX
triggerall = prevstateno = 1100 || prevstateno = 1300
trigger1 = Time = 0
trigger2 = Time = 2
trigger3 = Time = 4
trigger4 = Time = 5
trigger5 = Time = 7
trigger6 = Time = 9
time = 1
add = 256,-256,-256
mul = 256,256,256
sinadd = 0,0,0,0
invertall = 0
color = 256

[State 3100, 12]
type = Changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Helper Fake
[Statedef 3105]
type    = A
movetype= I
physics = N
juggle  = 8
anim = 3110
velset = 0,0
ctrl = 0
sprpriority = 2

[State 3105, 1]
type = Nothitby
trigger1 = time >= 0
value = SCA

[State 3105, 2]
type = AssertSpecial
trigger1 = time >= 0
flag = noshadow
ignorehitpause = 1
persistent = 1

[State 3105, 3]
type = PlaySnd
trigger1 = time = 0
value = s3100,1

[State 3105, 4]
type = velset
trigger1 = time = [0,18]
x = 1.4
y = .5

[State 3105, 5]
type = velset
trigger1 = time >= 6
x = 0
y = .5

[State 3105, 6]
type = Destroyself
trigger1 = parent, stateno != 3100
trigger2 = numhelper(3110) = 1

[State 3105, 7]
type = Destroyself
triggerall = parent, GetHitVar(guarded) = 0
trigger1 = parent, movetype = H


;---------------------------------------------------------------------------
; Last Resort Helper
[Statedef 3110]
type    = A
movetype= A
physics = N
juggle  = 0
anim = 3110
velset = 0,0
ctrl = 0
sprpriority = 2

[State 3110, 2]
type = BindToParent
trigger1 = time >= 0
facing = ifelse(parent, p2bodydist x <= 0, -1, 1)
pos = 35,-70

[State 3110, 3]
type = hitby
trigger1 = 1
value = SCA,NP,SP,HP

[STate 3110, 4]
type = HitOverride
trigger1 = 1
attr = SCA,NP,SP,HP
stateno = 3125

[State 3110, 5]
type = AssertSpecial
trigger1 = time >= 0
flag = noshadow
ignorehitpause = 1
persistent = 1

[State 3110, 6]
type = HitDef
trigger1 = time < 35
attr = S, HP
hitflag = MAF
guardflag = M
animtype = heavy
air.animtype = heavy
priority = 1,miss
damage = 30,10
pausetime = 0,12
guard.pausetime = 0,12
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10,0
hitsound = s202,3+random%3
guardsound = s120,1
ground.type = Low
air.type = Low
ground.slidetime = 15
guard.slidetime = 15
ground.hittime = 15
guard.hittime = 15
air.hittime = 15
guard.ctrltime = 12
ground.velocity = -4,-7
guard.velocity = -6
air.velocity = -4,-7
sprpriority = 2
numhits = 1
getpower = 0,0
fall = 1
air.fall = 1
yaccel = .5
air.juggle = 0
id = 3100

[State 3110, 7]
type = HitDef
trigger1 = time >= 35
attr = S, HP
hitflag = MAF
guardflag = M
animtype = heavy
air.animtype = heavy
priority = 1,miss
damage = 30,10
pausetime = 0,12
guard.pausetime = 0,12
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10,0
hitsound = s202,3+random%3
guardsound = s120,1
ground.type = Low
air.type = Low
ground.slidetime = 15
guard.slidetime = 15
ground.hittime = 15
guard.hittime = 15
air.hittime = 15
guard.ctrltime = 12
ground.velocity = -4
guard.velocity = -6
air.velocity = -4,-7
sprpriority = 2
numhits = 1
getpower = 0,0
air.juggle = 0
id = 3110

[State 3110, 8]
type = PlaySnd
trigger1 = time = 7
trigger2 = time = 65
value = s3100,2

[State 3110, 9]
type = Projectile
trigger1 = time = 7
trigger2 = time = 65
projanim = 3115
Projhitanim = -1
Projremanim = -1
Projremovetime = 200
velocity = 5,-5
ProjID = 3115
offset = 0, 0
projpriority = 1
projsprpriority = 7
attr = S, HP
hitflag = MAF
guardflag = M
damage = 30, 5
priority = 4, Hit
pausetime = 8,8
sparkno = S30002
guard.sparkno = S30040
sparkxy = 0,0
hitsound = s202,3+random%3
guardsound = s120,1
animtype = heavy
ground.type = Low
ground.slidetime = 15
ground.hittime  = 12
guard.ctrltime = 15
ground.velocity = -5
guard.velocity = -6
air.velocity = -4,-7
guard.ctrltime = 15
air.juggle = 0
ignorehitpause = 1
getpower = 0,0
id = ifelse(numtarget(3100) = 1, 3100, 3110)

[State 3110, 10]
type = Changestate
trigger1 = movecontact
trigger2 = time = 127
value = 3115
ctrl = 0

[State 3110, 11]
type = Changestate
trigger1 = roundstate = 3
value = 3125
ctrl = 0

[State 3120, 8]
type = Changestate
triggerall = parent, GetHitVar(guarded) = 0
trigger1 = parent, movetype = H
value = 3125
ctrl = 0

[State 3110, 11]
type = Destroyself
trigger1 = parent, stateno = 3150
trigger2 = parent, stateno = 3500 && parent, animelem = 2
trigger3 = parent, stateno = 3700


[Statedef 3115]
type    = A
movetype= A
physics = N
juggle  = 0
anim = 3111
velset = 0,0
ctrl = 0
sprpriority = 2

[State 3115, 1]
type = BindToParent
trigger1 = time >= 0
facing = ifelse(parent, p2bodydist x <= 0, -1, 1)
pos = 35,-70

[State 3115, 2]
type = hitby
trigger1 = 1
value = SCA,NP,SP,HP

[STate 3115, 3]
type = HitOverride
trigger1 = 1
attr = SCA,NP,SP,HP
stateno = 3125

[State 3115, 4]
type = AssertSpecial
trigger1 = time >= 0
flag = noshadow
ignorehitpause = 1
persistent = 1

[State 3115, 5]
type = HitDef
triggerall = numtarget(3100) = 0
trigger1 = time = 0
attr = S, HP
hitflag = MAF
guardflag = M
animtype = heavy
air.animtype = heavy
priority = 1,miss
damage = 30,10
pausetime = 0,12
guard.pausetime = 0,12
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10,0
hitsound = s202,3+random%3
guardsound = s120,1
ground.type = Low
air.type = Low
ground.slidetime = 15
guard.slidetime = 15
ground.hittime = 15
guard.hittime = 15
air.hittime = 15
guard.ctrltime = 12
ground.velocity = -4
guard.velocity = -6
air.velocity = -4,-7
sprpriority = 2
numhits = 1
getpower = 0,0
id = ifelse(numtarget(3100) = 1, 3100, 3110)

[State 3115, 6]
type = PlaySnd
trigger1 = time = 11
trigger2 = time = 53
value = s3100,2

[State 3115, 7]
type = Projectile
trigger1 = time = 11
trigger2 = time = 53
projanim = 3115
Projhitanim = -1
Projremanim = -1
Projremovetime = 200
velocity = 5,0
ProjID = 3115
offset = 0, 0
projpriority = 1
projsprpriority = 7
attr = S, HP
hitflag = MAF
guardflag = M
damage = 30, 5
priority = 4, Hit
pausetime = 8,8
sparkno = S30002
guard.sparkno = S30040
sparkxy = 0,0
hitsound = s202,3+random%3
guardsound = s120,1
animtype = heavy
ground.type = Low
ground.slidetime = 15
ground.hittime  = 12
guard.ctrltime = 15
ground.velocity = -5
guard.velocity = -6
air.velocity = -4,-7
guard.ctrltime = 15
persistent = 1
ignorehitpause = 0
getpower = 0,0
id = ifelse(numtarget(3100) = 1, 3100, 3110)

[State 3115, 8]
type = Changestate
trigger1 = movecontact
trigger2 = time = 63
value = 3120
ctrl = 0

[State 3115, 9]
type = Changestate
trigger1 = roundstate = 3
value = 3125
ctrl = 0

[State 3120, 8]
type = Changestate
triggerall = parent, GetHitVar(guarded) = 0
trigger1 = parent, movetype = H
value = 3125
ctrl = 0

[State 3115, 10]
type = Destroyself
trigger1 = parent, stateno = 3150
trigger2 = parent, stateno = 3500 && parent, animelem = 2
trigger3 = parent, stateno = 3700


[Statedef 3120]
type    = A
movetype= A
physics = N
juggle  = 0
anim = 3112
velset = 0,0
ctrl = 0
sprpriority = 2

[State 3120, 1]
type = BindToParent
trigger1 = time >= 0
facing = ifelse(parent, p2bodydist x <= 0, -1, 1)
pos = 35,-70

[State 3120, 2]
type = hitby
trigger1 = 1
value = SCA,NP,SP,HP

[STate 3120, 3]
type = HitOverride
trigger1 = 1
attr = SCA,NP,SP,HP
stateno = 3125

[State 3120, 4]
type = AssertSpecial
trigger1 = time >= 0
flag = noshadow
ignorehitpause = 1
persistent = 1

[State 3120, 5]
type = HitDef
trigger1 = time = 0
attr = S, HP
hitflag = MAF
guardflag = M
animtype = heavy
air.animtype = up
priority = 1,miss
damage = 30,10
pausetime = 0,12
guard.pausetime = 0,12
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10,0
hitsound = s202,3+random%3
guardsound = s120,1
ground.type = Low
air.type = Low
ground.slidetime = 15
guard.slidetime = 15
ground.hittime = 15
guard.hittime = 15
air.hittime = 15
guard.ctrltime = 12
ground.velocity = -4
guard.velocity = -6
air.velocity = -4,-7
sprpriority = 2
numhits = 1
getpower = 0,0
id = ifelse(numtarget(3100) = 1, 3100, 3110)

[State 3120, 6]
type = PlaySnd
trigger1 = time = 32
trigger2 = time = 74
trigger3 = time = 142
value = s3100,2

[State 3120, 7]
type = Projectile
trigger1 = time = 32
trigger2 = time = 74
trigger3 = time = 142
projanim = 3115
Projhitanim = -1
Projremanim = -1
Projremovetime = 200
velocity = 6,6
ProjID = 3115
offset = 0, 0
projpriority = 1
projsprpriority = 7
attr = S, HP
hitflag = MAF
guardflag = M
damage = 30, 5
priority = 4, Hit
pausetime = 8,8
sparkno = S30002
guard.sparkno = S30040
sparkxy = 0,0
hitsound = s202,3+random%3
guardsound = s120,1
animtype = heavy
ground.type = Low
ground.slidetime = 15
ground.hittime  = 12
guard.ctrltime = 15
ground.velocity = -5
guard.velocity = -6
air.velocity = -4,-7
guard.ctrltime = 15
persistent = 1
ignorehitpause = 0
getpower = 0,0
id = ifelse(numtarget(3100) = 1, 3100, 3110)

[State 3120, 8]
type = Changestate
trigger1 = movecontact
trigger2 = roundstate = 3
trigger3 = time = 152
value = 3125
ctrl = 0

[State 3120, 8]
type = Changestate
triggerall = parent, GetHitVar(guarded) = 0
trigger1 = parent, movetype = H
value = 3125
ctrl = 0

[State 3120, 9]
type = Destroyself
trigger1 = parent, stateno = 3150
trigger2 = parent, stateno = 3500 && parent, animelem = 2
trigger3 = parent, stateno = 3700


[Statedef 3125]
type    = A
movetype= A
physics = N
juggle  = 8
anim = 9999
velset = 0,0
ctrl = 0
sprpriority = 2

[State 3125, 1]
type = BindToParent
trigger1 = time = 0
facing = ifelse(parent, p2bodydist x <= 0, -1, 1)
pos = 35,-70

[State 3125, 2]
type = nothitby
trigger1 = 1
value = SCA,NP,SP,HP

[State 3125, 3]
type = AssertSpecial
trigger1 = time >= 0
flag = noshadow
ignorehitpause = 1
persistent = 1

[State 3125, 4]
type = Helper
trigger1 = time = 0
helpertype = normal
name = "Explosion"
ID = 3126
pos = 0,0
postype = p1
facing = 1
stateno = 3126
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
ignorehitpause = 0

[State 3125, 5]
type = Destroyself
trigger1 = time = 0

[Statedef 3126]
type    = A
movetype= A
physics = N
juggle  = 8
anim = 1524
velset = 0,0
ctrl = 0
sprpriority = 2

[State 3126, 1]
type = nothitby
trigger1 = 1
value = SCA,NP,SP,HP

[State 3126, 2]
type = AssertSpecial
trigger1 = time >= 0
flag = noshadow
ignorehitpause = 1
persistent = 1

[State 3126, 3]
type = PlaySnd
trigger1 = time = 2
value = s1405,20

[State 3126, 4]
type = Destroyself
trigger1 = animtime = 0

;---------------------------------------------------------------------------
; Power! Unit!
[Statedef 3150]
type    = U
movetype= A
physics = N
juggle  = 8
anim = 3120
velset = 0,0
ctrl = 0
sprpriority = 2

[State 3150, 1] ;Blink Red
type = PalFX
triggerall = prevstateno = 1100 || prevstateno = 1300
trigger1 = Time = 0
trigger2 = Time = 2
trigger3 = Time = 4
trigger4 = Time = 5
trigger5 = Time = 7
trigger6 = Time = 9
time = 1
add = 256,-256,-256
mul = 256,256,256
sinadd = 0,0,0,0
invertall = 0
color = 256

[State 3150, 2]
type = velset
trigger1 = animelemtime(2) >= 0 && animelemtime(4) < 0
x = -.5

[State 3150, 3]
type = velset
trigger1 = animelemtime(4) >= 0
x = -2

[State 3150, 4]
type = velset
trigger1 = animelem = 4
y = -6.5

[State 3150, 5]
type = veladd
trigger1 = animelemtime(4) >= 0
y = .4

[State 3150, 6]
type = PlaySnd
trigger1 = animelem = 4, = 0
value = s3000,0
channel = 0

[State 3150, 7]
type = StateTypeSet
trigger1 = animelemtime(4) >= 0
statetype = A
movetype = A
physics = N

[State 3150, 8]
type = Helper
trigger1 = animelem = 4, = 0
helpertype = normal
name = "Power! Unit!"
ID = 3160
pos = 29,-89
postype = p1
facing = 1
stateno = 3160
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
ignorehitpause = 0

[State 3100, 9]
type = Changestate
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 106

;---------------------------------------------------------------------------
; Power! Unit! Projectile
[Statedef 3160]
type    = A
movetype= A
physics = N
juggle  = 8
anim = 3125
velset = 8,0
ctrl = 0
sprpriority = 2

[State 3160, 1]
type = hitby
trigger1 = 1
value = SCA,NP,SP,HP

[STate 3160, 2]
type = HitOverride
trigger1 = 1
attr = SCA,NP,SP,HP
stateno = 3165

[State 3160, 3]
type = AssertSpecial
trigger1 = time >= 0
flag = noshadow
ignorehitpause = 1
persistent = 1

[State 3160, 4]
type = PlaySnd
trigger1 = time = 0
value = s1000,1

[State 3160, 4]
type = PlaySnd
trigger1 = time = 0
value = s3100,3

[State 3160, 5]
type = HitDef
trigger1 = time = 0
attr = A, HP
hitflag = MAF
guardflag = MA
animtype = up
air.animtype = up
priority = 1,miss
damage = 100,10
pausetime = 0,12
guard.pausetime = 0,12
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10,0
hitsound = s202,3+random%3
guardsound = s120,1
ground.type = Low
air.type = Low
ground.slidetime = 15
guard.slidetime = 15
ground.hittime = 15
guard.hittime = 15
air.hittime = 15
guard.ctrltime = 12
ground.velocity = -3.5, -6.5
guard.velocity = -6
air.velocity = -3.5,-6.5
sprpriority = 2
numhits = 1
fall = 1
air.fall = 1
air.recover = 0
fall.recover = 0
getpower = 0,0

[State 3160, 6]
type = Explod
trigger1 = time = 0
anim = 3130
ID = 3130
pos = 0,0
postype = p1
facing = 1
vfacing = 1
bindtime = -1
removetime = 200
sprpriority = 1
ownpal = 1
removeongethit = 1

[State 3160, 7]
type = RemoveExplod
trigger1 = Frontedgedist < -80 || Backedgedist < 0
ID = 3130

[State 3160, 8]
type = destroyself
trigger1 = Frontedgedist < -80 || Backedgedist < 0

[Statedef 3165]
type    = A
movetype= A
physics = N
juggle  = 8
anim = 3125
velset = 0,0
ctrl = 0
sprpriority = 2

[State 3165, 1]
type = nothitby
trigger1 = 1
value = SCA

[State 3165, 2]
type = AssertSpecial
trigger1 = time >= 0
flag = noshadow
ignorehitpause = 1
persistent = 1

[State 3165, 3]
type = destroyself
trigger1 = time = 0

;---------------------------------------------------------------------------
; ASO II - Last Guardian
[Statedef 3500]
type    = S
movetype= A
physics = S
poweradd = -3000
juggle  = 8
anim = 3500
velset = 0,0
ctrl = 0
sprpriority = 2


[State 1700, 3]
type = PlaySnd
trigger1 = time = 1
value = 17000,1

[State 1700, 3]
type = PlaySnd
trigger1 = AnimElem = 1
value = 17000,0


[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay
flag2 = nobg
flag3 = nofg


[State 210, Hyper bg Explod]
type = Explod
trigger1 = !time
removetime = 109
id =6090
anim = 16090
pos = 0,0
postype = Left
sprpriority = -4
facing = 1
vfacing = 1
ownpal = 1
bindtime = -1
ontop = 0
ownpal = 1
supermove = 1
pausemove = 1
removeongethit = 1
ignorehitpause = 1
persistent = 1
supermovetime = 9999
pausemovetime =  9999
scale = .5,.5


[State 1050, NotHitBy]
type = NotHitBy
trigger1 = time <= 40
value = SCA,NA,SA,HA,NP,SP,HP

;[State 863, 1]
;type = SuperPause
;trigger1 = AnimElem = 1
;anim = -1
;time = 30
;movetime = 0
;darken = 0

[State 3000,��ɫ��ɫ]
type = Envcolor
trigger1 = animelem = 1
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 30
under = 1
supermove = 1

[State 863, 4]
type = Explod
trigger1 = AnimElem = 1
anim = 17200
pos = 0,-59
postype = p1
sprpriority = -2
supermove = 1
bindtime = 1
scale = .5,.5

[State 863, 4]
type = Explod
trigger1 = AnimElem = 1
anim = 17210
pos = 0,-59
postype = p1
sprpriority = 9
persistent = 0
supermove = 1
bindtime = 1
scale = .5,.5



[State 4000, BGPalFX]
type = BGPalFX
trigger1 = 1
time = 2
mul = 900,900,900
add = -250,-250,-250
ignorehitpause = 1

[State 3500, 8]
type = Explod
trigger1 = animelem = 7, = 49
anim = 3555
ID = 3555
pos = 0,0
postype = p1
bindtime = 1
vel = 0,0
accel = 0,0
sprpriority = 3
ownpal = 1
supermove = 1
removeongethit = 1

[State 3500, 9]
type = PlaySnd
trigger1 = animelem = 1
value = s3000,0
channel = 0

[State 3500, 10]
type = PlaySnd
trigger1 = animelem = 7
value = s1000,1

[State 3500, 11]
type = Projectile
trigger1 = animelem = 7
ProjID = 3500
projanim = 3560
projhitanim = -1
projremanim = -1
projcancelanim = -1
projscale = 1,1
projremove = 1
projremovetime = -1
velocity = 15,0
remvelocity = 0,0
accel = 0,0
projhits = 1
projmiss = 0
projpriority = 7
projsprpriority = -1
projedgebound = 40
projstagebound = 40
projheightbound = -240
offset = 0,0
postype = p1
supermovetime = 0
pausemovetime = 0
attr = S,HP
hitflag = MAF
guardflag = MA
getpower = 0,0
givepower = 0,0
animtype = Up
air.animtype = Up
priority = 4,Hit
damage = 200,20
pausetime = 0,35
guard.pausetime = 0,35
sparkno = S30002
guard.sparkno = S30040
sparkxy = 0,-65
hitsound = s202,3+random%3
guardsound = s120,1
ground.type = Low
air.type = Low
ground.slidetime = 25
guard.slidetime = 25
ground.hittime = 25
guard.hittime = 25
air.hittime = 25
guard.ctrltime = 20
ground.velocity = 0,-14
guard.velocity = -6
air.velocity = 0,-14
sprpriority = 2
numhits = 1
fall = 1
air.fall = 1
air.recover = 0
fall.recover = 0
getpower = 0,0
kill = 0
p2stateno = 3600
id = 3600

[State 3500, 12] ;Blink Red
type = PalFX
triggerall = prevstateno = 1100 || prevstateno = 1300
trigger1 = Time = 0
trigger2 = Time = 2
trigger3 = Time = 4
trigger4 = Time = 5
trigger5 = Time = 7
trigger6 = Time = 9
time = 1
add = 256,-256,-256
mul = 256,256,256
sinadd = 0,0,0,0
invertall = 0
color = 256

[State 3500, 13]
type = Changestate
triggerall = numtarget(3600) = 1
trigger1 = target(3600), stateno = 3600
value = 3505
ctrl = 0

[State 3500, 14]
type = Changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------
; ASO II - Last Guardian Suceeded
[Statedef 3505]
type    = S
movetype= A
physics = S
juggle  = 8
anim = 3505
velset = 0,0
ctrl = 0
sprpriority = 2

[State 3505, 1]
type = AssertSpecial
trigger1 = time = [0,179]
flag= noFG
flag2= noBG

[State 3505, 2]
type = EnvColor
trigger1 = animelem = 1, = 0
value = 248,248,248
time = 179
under = 1

[State 3505, 3]
type = EnvColor
trigger1 = animelem = 1, = 0
value = 0, 0, 0
time = 179
under = 1

[State 3505, 4]
type = NotHitBy
trigger1 = time >= 0
value = SCA

[State 3505, 5]
type = PlaySnd
trigger1 = animelem = 1, = 4
value = s3205,0
channel = 0

[State 3505, 6]
type = Helper
trigger1 = animelem = 2, = 0
helpertype = normal
name = "Yuki"
ID = 3510
pos = 0,0
postype = p1
facing = 1
stateno = 3510
keyctrl = 0
ownpal = 1
supermovetime = 30
pausemovetime = 0
ignorehitpause = 0

[State 3505, 7]
type = Helper
trigger1 = animelem = 1, = 50
helpertype = normal
name = "ASO"
ID = 3515
pos = 0,-255
postype = back
facing = 1
stateno = 3515
keyctrl = 0
ownpal = 1
supermovetime = 30
pausemovetime = 0
ignorehitpause = 0

[State 3505, 9]
type = Explod
trigger1 = animelem = 1, = 53
anim = 3555
ID = 3555
pos = 0,0
postype = p1
bindtime = 1
vel = 0,0
accel = 0,0
sprpriority = 3
ownpal = 1
supermove = 1
removeongethit = 1

[State 3505, 10]
type = Changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------
;Yuki States
[Statedef 3510]
type    = S
movetype= I
physics = N
juggle  = 8
anim = 3565
velset = 0,0
ctrl = 0
sprpriority = 4

[State 3510, 1]
type = nothitby
trigger1 = 1
value = SCA

[State 3510, 2]
type = AssertSpecial
trigger1 = time >= 0
flag = noshadow
ignorehitpause = 1
persistent = 1

[State 3510, 3]
type = BindToParent
trigger1 = time >= 0
pos = 0,0

[State 3510, 4]
type = destroyself
trigger1 = animtime = 0

;-------------------------------------------------------------------------
;ASO States
[Statedef 3515]
type    = A
movetype= A
physics = N
juggle  = 8
anim = 3570
velset = 0,0
ctrl = 0
sprpriority = 4

[State 3515, 1]
type = nothitby
trigger1 = 1
value = SCA

[State 3515, 2]
type = AssertSpecial
trigger1 = time >= 0
flag = noshadow
ignorehitpause = 1
persistent = 1

[State 3515, 3]
type = Explod
trigger1 = animelem = 7, = 11
anim = 3580
ID = 3580
pos = 11,-36
postype = p1
bindtime = 1
removetime = 77
vel = 0,0
accel = 0,0
sprpriority = 3
ownpal = 1
supermove = 1

[State 3515, 4]
type = Helper
trigger1 = animelem = 8
helpertype = normal
name = "Hits"
ID = 3520
pos = 11,-36
postype = p1
facing = 1
stateno = 3520
keyctrl = 0
ownpal = 1
supermovetime = 30
pausemovetime = 0
ignorehitpause = 0

[State 3500, 8]
type = Explod
trigger1 = animelem = 7, = 6
anim = 3575
ID = 3575
pos = 0,-70
postype = p2
bindtime = 74
removetime = 74
vel = 0,0
accel = 0,0
sprpriority = 5
ownpal = 1
supermove = 1

[State 3515, 5]
type = destroyself
trigger1 = animtime = 0

;-------------------------------------------------------------------------
;Hits States
[Statedef 3520]
type    = S
movetype= A
physics = N
juggle  = 0
anim = 3590
velset = 0,0
ctrl = 0
sprpriority = -1

[State 3520, 1]
type = nothitby
trigger1 = 1
value = SCA

[State 3520, 2]
type = AssertSpecial
trigger1 = time >= 0
flag = noshadow
ignorehitpause = 1
persistent = 1

[State 3520, 3]
type = HitDef
trigger1 = time = 0
trigger2 = time = 6
trigger3 = time = 12
trigger4 = time = 18
trigger5 = time = 24
trigger6 = time = 30
trigger7 = time = 36
trigger8 = time = 42
trigger9 = time = 48
trigger10 = time = 54
trigger11 = time = 60
trigger12 = time = 66
attr = A, NA
damage = 35,10
hitflag = MAF
priority = 4
pausetime = 0,8
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10,120
hitsound = s1405,11
guardsound = s120,1
animtype = up
ground.type = High
ground.slidetime = 15
ground.hittime = 12
guard.ctrltime = 15
ground.velocity = 0, 10
guard,velocity = -6
air.velocity = 0,10
guard.ctrltime = 15
persistent = 1
ignorehitpause = 0
fall = 1
air.fall = 1
palfx.time = 46
palfx.add = 100,100,100
palfx.mul = 256,256,256
palfx.sinadd = -80,-80,-80,10
Palfx.color = 0
palfx.invertall = 1

[State 3520, 4]
type = Helper
triggerall = p2stateno = [5000,5999]
triggerall = numhelper(9185) = 0
trigger1 = movehit
name = "Eletricity"
ID = 9185
stateno = 9185
postype = P1
pos = 0,0
sprpriority = 3
bindtime = 1
ownpal = 1
ignorehitpause = 1
persistent = 1

[State 3520, 5]
type = destroyself
trigger1 = time = 90

;------------------
; Hit by ASO 2 - shaking from the hit
[Statedef 3600]
type    = A
movetype= H
physics = N
velset = 0,0

[State 3600, 1]
type = ChangeAnim
trigger1 = 1
value = 5030

[State 3600, 2]
type = PosSet
triggerall = Pos y > 0
trigger1 = time = 0
y = 0
ignorehitpause = 1

[State 3600, 3]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 3605

;------------------
; Hit by Hit by ASO 2 - flying through the air
[Statedef 3605]
type    = A
movetype= H
physics = N

[State 3605, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 3605, 2]
type = VelAdd
trigger1 = 1
y = .5

[State 3605, 3]
type = ChangeAnim
Trigger1 = time = 18
value = 5050

[State 3605, 4]
type = ChangeAnim2
Trigger1 = time = 28
value = 3595

[State 3605, 5]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100


;---------------------------------------------------------------------------
; Double Assault
[Statedef 3700]
type    = S
movetype= A
physics = S
juggle  = 8
anim = 3600
velset = 0,0
poweradd = 0
ctrl = 0
sprpriority = 2

[State 3700, 0]
type = Turn
triggerall = prevstateno = 1300
triggerall = enemynear, facing = facing
trigger1 = time = 0

[State 3700, 1]
type = AssertSpecial
trigger1 = time = [0,28]
flag= noFG
flag2= noBG

[State 3700, 2]
type = SuperPause
trigger1 = animelem = 1, = 0
time = 28
anim = -1
sound = s3200,1
movetime = 28
darken = 0
poweradd = -2000
unhittable = 1

[State 3700, 3]
type = EnvColor
trigger1 = animelem = 1, = 0
value = 0, 0, 0
time = 28
under = 1

[State 3700, 4]
type = NotHitBy
trigger1 = time <= 28
value = SCA

[State 3700, 5]
type = Explod
trigger1 = animelem = 1, = 0
anim = 11010
ID = 8205
pos = 9,-73
postype = p1
bindtime = 1
vel = 0,0
accel = 0,0
sprpriority = 4
ownpal = 1
supermove = 1

[State 3700, 5]
type = Explod
trigger1 = animelem = 1, = 0
anim = 11000
ID = 8205
pos = 9,-73
postype = p1
bindtime = 1
vel = 0,0
accel = 0,0
sprpriority = -4
ownpal = 1
supermove = 1

[State 3700, 6]
type = VelSet
trigger1 = animelemtime(11) >= 0 && animelemtime(12) < 0
x = 8

[State 3700, 6]
type = VelSet
trigger1 = animelemtime(12) >= 0 && animelemtime(12) < 6
x = 6

[State 3700, 6]
type = VelSet
trigger1 = animelemtime(12) >= 6 && animelemtime(13) < 0
x = 3

[State 3700, 6]
type = VelSet
trigger1 = animelemtime(13) >= 0 && animelemtime(14) < 0
x = 1.5

[State 3700, 6]
type = VelSet
trigger1 = animelemtime(15) >= 0 && animelemtime(16) < 0
x = .75

[State 3700, 8]
type = VelSet
trigger1 = animelem = 16
x = 0

[State 3700, 9]
type = Width
trigger1 = animelemtime(11) >= 0 && animelemtime(16) <= 0
edge = 25,0
ignorehitpause = 1

[State 3700, 10]
type = HitDef
trigger1 = time = 0
attr = S,HA
hitflag = MAF
guardflag = MA
animtype = Hard
priority = 1,miss
damage = 35,15
pausetime = 12,12
guard.pausetime = 12,12
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10,-35
hitsound = s202,9+random%3
guardsound = s120,1
ground.type = low
air.type = low
ground.slidetime = 15
guard.slidetime = 15
ground.hittime = 15
guard.hittime = 15
air.hittime = 20
guard.ctrltime = 15
ground.velocity = -5
air.velocity = -5,-2
ground.cornerpush.veloff = -5
air.cornerpush.veloff = -5
guard.cornerpush.veloff = -5
airguard.cornerpush.veloff = -5
sprpriority = 2
p1stateno = 3705
p2stateno = 3720
mindist = 40
maxdist = 40
p2facing = 1
fall = 0
fall.recover = 0
air.fall = 0
air.recover = 0
kill = 0
guard.kill = 0
numhits = 1
getpower = 0,0
givepower = 0,0
ignorehitpause = 0
persistent = 1
id = 3700

[State 3700, 11]
type = AssertSpecial
triggerall = numtarget(1100) = 1 || numtarget(1101) = 1 || numtarget(3100) = 1 || numtarget(1470) = 1 || numtarget(1480) = 1
trigger1 = time >= 0
flag = nojugglecheck

[State 3700, 12]
type = nothitby
triggerall = movehit
trigger1 = 1
value = SCA
ignorehitpause = 1

[State 3700, 13]
type = AfterImage
trigger1 = animelemtime(11) = 0
time = 28
length = 15
palbright = 40,40,40
palcontrast = 180,180,180
palpostbright = -80,-80,-80
timegap = 1
flamegap = 1
trans = add1

[State 3700, 14] ;Blink Red
type = PalFX
triggerall = prevstateno = 1100 || prevstateno = 1300
trigger1 = Time = 0
trigger2 = Time = 2
trigger3 = Time = 4
trigger4 = Time = 5
trigger5 = Time = 7
trigger6 = Time = 9
time = 1
add = 256,-256,-256
mul = 256,256,256
sinadd = 0,0,0,0
invertall = 0
color = 256

[State 3700, 15]
type = Changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Double Assault Suceeded
[Statedef 3705]
type    = S
movetype= A
physics = S
anim = 3605
poweradd = 0

[State 3705, 1]
type = AfterImageTime
trigger1 = time = 0
time = 0
ignorehitpause = 1
persistent = 1

[State 3705, 1]
type = nothitby
trigger1 = time >= 0
value = SCA
ignorehitpause = 1

[State 3705, 2]
type = PlaySnd
trigger1 = AnimElem = 2 && Random <= 500
value = s200,0+random%3
channel = 0

[State 3705, 3]
type = PlaySnd
triggerall = Random <= 500
trigger1 = AnimElem = 6
trigger2 = AnimElem = 11
value = s200,3+random%3
channel = 0

[State 3705, 4]
type = PlaySnd
trigger1 = AnimElem = 4
value = s202,0+random%3

[State 3705, 5]
type = PlaySnd
trigger1 = AnimElem = 12
trigger2 = AnimElem = 14
value = s202,3+random%3

[State 3705, 6]
type = PlaySnd
trigger1 = AnimElem = 7
trigger2 = AnimElem = 20
value = s202,9+random%3

[State 3705, 7]
type = PlaySnd
trigger1 = animelem = 3
trigger2 = animelem = 12
trigger3 = animelem = 14
value = S201,0

[State 3705, 8]
type = PlaySnd
trigger1 = animelem = 7
value = S201,1

[State 3705, 9]
type = PlaySnd
trigger1 = animelem = 19
value = S100,1

[State 3705, 10]
type = Explod
trigger1 = Animelem = 3
anim = 3615
ID = 3615
pos = 0,0
postype = p1
facing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
scale = 1,1
sprpriority = 4
ownpal = 1
removeongethit = 1
ignorehitpause = 1

[State 3705, 11]
type = Explod
trigger1 = Animelem = 4
anim = 8000
ID = 8000
pos = 35,-65
postype = p1
facing = 1
bindtime = 10
vel = 0,0
accel = 0,0
random = 0,0
scale = 1,1
sprpriority = 5
ownpal = 1
removeongethit = 1
ignorehitpause = 1

[State 3705, 12]
type = Explod
trigger1 = Animelem = 7
anim = 8000
ID = 8000
pos = 60,-70
postype = p1
facing = 1
bindtime = 10
vel = 0,0
accel = 0,0
random = 0,0
scale = 1,1
sprpriority = 5
ownpal = 1
removeongethit = 1
ignorehitpause = 1

[State 3705, 13]
type = Explod
trigger1 = Animelem = 12
trigger2 = Animelem = 14
anim = 8000
ID = 8000
pos = 35,-80
postype = p1
facing = 1
bindtime = 10
vel = 0,0
accel = 0,0
random = 0,0
scale = 1,1
sprpriority = 5
ownpal = 1
removeongethit = 1
ignorehitpause = 1

[State 3705, 14]
type = HitDef
trigger1 = animelem = 20
attr = S, HA
animtype = up
damage = 35
guardflag = M
pausetime = 10,12
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10,-75
hitsound = s202,3+random%2
guardsound = s120,0
ground.type = Low
ground.slidetime = 15
ground.hittime = 15
ground.velocity = -7.5,-9
air.velocity = -7.5,-9
fall = 1
air.fall = 1
fall.recover = 0
air.recover = 0
kill = 0
absolute = 1

[State 3705, 15]
type = TargetBind
trigger1 = AnimElemtime(20) < 0
pos = 40, 0

[State 3705, 16]
type = Width
trigger1 = time >= 0
edge = 25,0

[State 3705, 17]
type = VelSet
trigger1 = animelemtime(19) < 0
x = -5.5

[State 3705, 18]
type = VelSet
trigger1 = BackEdgeBodyDist <= 8
trigger2 = animelemtime(26) = 0
x = 0

[State 3705, 19]
type = ScreenBound
trigger1 = time >= 0
movecamera = 0,0
value = 0

[State 3705, 20]
type = Helper
trigger1 = animelem = 6
helpertype = normal
name = "Yuki"
ID = 3750
pos = 30, 0
postype = front
facing = -1
stateno = 3750
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
ignorehitpause = 1
persistent = 1

[State 3705, 21]
type = AssertSpecial
trigger1 = time >= 0
flag = noBG
flag2 = noFG
ignorehitpause = 1

[State 3705, 22]
type = Explod
triggerall = random <= 499
triggerall = numexplod(3401) = 0
trigger1 = time = 0
anim = 3400
ID = 3400
pos = -40,-35
postype = left
facing = 1
vfacing = 1
bindtime = 9999
vel = 0,0
accel = 0,0
random = 0,0
removetime = 9999
scale = 1.3,1.3
under = 1
pausemovetime = 9999
supermovetime = 9999
sprpriority = -7
ownpal = 1
removeongethit = 1
ignorehitpause = 1
persistent = 0

[State 3705, 24]
type = Explod
triggerall = numexplod(3400) = 0
trigger1 = time = 0
anim = 3401
ID = 3401
pos = -40,-35
postype = left ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 9999
vel = 0,0
accel = 0,0
random = 0,0
removetime = 9999
scale = 1.3,1.3
under = 1
pausemovetime = 9999
supermovetime = 9999
sprpriority = -7
ownpal = 1
removeongethit = 1
ignorehitpause = 1
persistent = 0

[State 3705, 25]
type = Explod
triggerall = numexplod(3400) = 0
triggerall = numexplod(3401) = 1
triggerall = numexplod(3402) = 0
trigger1 = time = 0
anim = 3402
ID = 3402
pos = -40,-35
postype = left ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 9999
vel = 0,0
accel = 0,0
random = 0,0
removetime = 9999
scale = 1.3,1.3
under = 1
pausemovetime = 9999
supermovetime = 9999
sprpriority = 15
ownpal = 1
removeongethit = 1
ignorehitpause = 1
persistent = 0

[State 3705, 26]
type = TargetLifeAdd
trigger1 = animelem = 4
trigger2 = animelem = 7
trigger3 = animelem = 12
trigger4 = animelem = 14
value = -22
ID = 3700
kill = 0
absolute = 1

[State 3705, 27]
type = HitAdd
trigger1 = animelem = 4
trigger2 = animelem = 7
trigger3 = animelem = 12
trigger4 = animelem = 14
value = 1

[State 3705, 28]
type = ChangeState
triggerall = time > 100
trigger1 = var(9) = 1
value = 3710
ctrl = 0

;---------------------------------------------------------------------------
;Double Assault End
[Statedef 3710]
type    = S
movetype= A
physics = N
anim = 3610
poweradd = 0

[State 3710, 1]
type = nothitby
trigger1 = time <= 10
value = SCA

[State 3710, 2]
type = PlaySnd
trigger1 = AnimElem = 1
value = s1100,3
channel = 0

[State 3710, 3]
type = PlaySnd
trigger1 = AnimElem = 2
value = s1100,0

[State 3710, 4]
type = varset
trigger1 = time = 0
var(9) = 0

[State 3710, 5]
type = HitDef
trigger1 = Time = 0
attr = S, HA
hitflag = MAFD
animtype = diagup
damage = 70,10
guardflag = M
priority = 3
pausetime = 12,12
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10,-40
hitsound = s202,3+random%3
guardsound = s120,1
ground.type = high
ground.slidetime = 6
ground.hittime  = 6
ground.velocity = -5,-10
air.velocity = -5,-10
fall = 1
air.fall = 1
fall.recover = 0
air.recover = 0
kill = 1
guard.kill = 1
numhits = 1
getpower = 0,0
givepower = 0,0
ignorehitpause = 0
persistent = 1

[State 3710, 7]
type = AssertSpecial
trigger1 = animelemtime(4) < 0
flag = noBG
flag2 = noFG
ignorehitpause = 1

[State 3710, 8]
type = RemoveExplod
trigger1 = animelem = 4
id = 3400

[State 3710, 9]
type = RemoveExplod
trigger1 = animelem = 4
id = 3401

[State 3710, 10]
type = RemoveExplod
trigger1 = animelem = 4
id = 3402

[State 3710, 12]
type = changestate
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
;Thrown by Double Assault
[Statedef 3720]
type    = A
movetype= H
physics = N
velset = 0,0

[State 3720, 0]
type = StateTypeSet
trigger1 = time >= 0
statetype = S
physics = S
ignorehitpause = 1
persistent = 1

[State 3720, 1]
type = posset
Trigger1 = Time = 0
y = 0

[State 3720, 2]
type = ChangeAnim2
Trigger1 = Time = 0
value = 3650

[State 3720, 3]
Type = VelSet
trigger1 = enemynear(0), movetype = H
x = -3
y = -6

[State 3720, 4]
Type = HitFallSet
trigger1 = enemynear(0), movetype = h
value = 1

[State 3720, 5]
Type = ChangeState
trigger1= enemynear(0), movetype = h
value = 822

[State 3720, 6]
type = SelfState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Yuki States
[Statedef 3750]
type    = A
movetype= I
physics = N
anim = 3700
poweradd = 0

[State 3750, 1]
type = velset
trigger1 = time = 0
x = 5.5
y = -2.5

[State 3750, 2]
type = gravity
trigger1 = 1

[State 3750, 3]
type = NotHitBy
trigger1 = time >= 0
value = SCA

[State 3750, 4]
type = PlaySnd
trigger1 = time = 0
value = s50,0

[State 3750, 5]
type = Explod
trigger1 = time = 0
anim = 3705
ID = 3705
pos = 0,0
postype = p1
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
sprpriority = 4
ownpal = 1
removeongethit = 1

[State 3750, 6]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 3755
keyctrl = 0

;---------------------------------------------------------------------------
;Yuki Landing and Taunt
[Statedef 3755]
type    = S
movetype= I
physics = S
anim = 3710
poweradd = 0

[State 3755, 1]
type = PlaySnd
triggerall = anim = 3710
trigger1 = time = 0
value = s47,0

[State 3755, 2]
type = posset
trigger1 = time = 0
y = 0

[State 3755, 3]
type = velset
trigger1 = time = 0
y = 0
x = 0

[State 3755, 4]
type = Explod
triggerall = anim = 3710
trigger1 = time = 0
anim = 3715
ID = 3715
pos = 0,0
postype = p1
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
sprpriority = 4
ownpal = 1
removeongethit = 1

[State 3755, 5]
type = NotHitBy
trigger1 = time >= 0
value = SCA

[State 3755, 6]
type = ChangeAnim
triggerall = anim = 3710
trigger1 = animtime = 0
value = 3720

[State 3755, 7]
type = Explod
triggerall = numexplod(3725) = 0
trigger1 = anim = 3720
anim = 3725
ID = 3725
pos = 0,0
postype = p1
facing = 1
vfacing = 1
bindtime = -1
removetime = 9999
vel = 0,0
accel = 0,0
random = 0,0
sprpriority = 4
ownpal = 1
removeongethit = 1

[State 3355, 5]
type = ChangeState
triggerall = anim = 3720
trigger1 = parent, animelem = 22
value = 3760
keyctrl = 0

;---------------------------------------------------------------------------
;Yuki Jumping
[Statedef 3760]
type    = A
movetype= I
physics = N
anim = 3730
poweradd = 0

[State 3760, 1]
type = RemoveExplod
trigger1 = time = 0
id = 3725

[State 3760, 2]
type = velset
trigger1 = animelem = 1, = 0
x = const(velocity.runjump.fwd.x)*1.7
y = const(velocity.jump.y)*1.2

[State 3760, 3]
type = NotHitBy
trigger1 = time >= 0
value = SCA

[State 3760, 4]
type = AfterImage
trigger1 = animelemtime(1) >= 0
time = 20
length = 15
palbright = 40,40,40
palcontrast = 250,250,250
palpostbright = -80,-80,-80
timegap = 1
flamegap = 1
trans = add1

[State 3760, 5]
type = PlaySnd
trigger1 = animelem = 1
value = s50,1

[State 3760, 6]
type = ChangeState
trigger1 = time = 10
value = 3765
keyctrl = 0

;---------------------------------------------------------------------------
;Yuki Attacking
[Statedef 3765]
type    = A
movetype= A
physics = N
anim = 3740
poweradd = 0

[State 3765, 1]
type = velset
trigger1 = time = 0
x = 0
y = 0

[State 3765, 2]
type = NotHitBy
trigger1 = time >= 0
value = SCA

[State 3765, 3]
type = AfterImageTime
trigger1 = Time = 0
time = 0

[State 3765, 4]
type = Explod
trigger1 = time = 0
anim = 3745
ID = 3745
pos = 0,0
postype = p1
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
sprpriority = 4
ownpal = 1
removeongethit = 1
ignorehitpause = 0

[State 3765, 5]
type = PlaySnd
trigger1 = animelem = 2
trigger2 = animelem = 8
trigger3 = animelem = 13
value = S201,1

[State 3765, 6]
type = PlaySnd
trigger1 = animelem = 5
value = S201,0

[State 3765, 6]
type = PlaySnd
trigger1 = animelem = 10
value = S3700,6

[State 3765, 7]
type = PlaySnd
trigger1 = AnimElem = 1 && Random <= 500
trigger2 = AnimElem = 5 && Random <= 500
trigger3 = AnimElem = 7 && Random <= 500
value = s3700,0+random%3
channel = 3

[State 3765, 8]
type = PlaySnd
trigger1 = AnimElem = 10 && Random <= 500
trigger2 = AnimElem = 13 && Random <= 500
value = s3700,3+random%3
channel = 3

[State 3765, 9]
type = HitDef
trigger1 = animelem = 3
attr = A, HA
animtype = Heavy
damage = 35
guardflag = M
pausetime = 5,15
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10,-100
hitsound = s202,0+random%3
guardsound = s120,0
ground.type = Low
ground.slidetime = 15
ground.hittime = 15
ground.velocity = 0,0
air.velocity = 0,0
fall = 1
air.fall = 1
fall.recover = 0
air.recover = 0
kill = 0

[State 3765, 10]
type = HitDef
trigger1 = animelem = 6
attr = A, HA
animtype = Heavy
damage = 35
guardflag = M
pausetime = 5,15
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10,-85
hitsound = s202,0+random%3
guardsound = s120,0
ground.type = Low
ground.slidetime = 15
ground.hittime = 15
ground.velocity = 0,0
air.velocity = 0,0
fall = 1
air.fall = 1
fall.recover = 0
air.recover = 0
kill = 0

[State 3765, 11]
type = HitDef
trigger1 = animelem = 9
attr = A, HA
animtype = Heavy
damage = 35
guardflag = M
pausetime = 5,15
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10,-100
hitsound = s202,0+random%3
guardsound = s120,0
ground.type = Low
ground.slidetime = 15
ground.hittime = 15
ground.velocity = 0,0
air.velocity = 0,0
fall = 1
air.fall = 1
fall.recover = 0
air.recover = 0
kill = 0

[State 3765, 12]
type = HitDef
trigger1 = animelem = 11
attr = A, HA
animtype = Heavy
damage = 35
guardflag = M
pausetime = 5,15
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10,-75
hitsound = s202,3+random%3
guardsound = s120,0
ground.type = Low
ground.slidetime = 15
ground.hittime = 15
ground.velocity = 0,0
air.velocity = 0,0
fall = 1
air.fall = 1
fall.recover = 0
air.recover = 0
kill = 0

[State 3765, 13]
type = HitDef
trigger1 = animelem = 15
attr = A, HA
animtype = Heavy
damage = 35
guardflag = M
pausetime = 10,10
sparkno = S30002
guard.sparkno = S30040
sparkxy = -10,-85
hitsound = s202,3+random%3
guardsound = s120,0
ground.type = Low
ground.slidetime = 15
ground.hittime = 15
ground.velocity = -12,6
air.velocity = -12,6
fall = 1
air.fall = 1
fall.recover = 0
air.recover = 0
kill = 0

[State 3765, 14]
type = ChangeState
trigger1 = animelem = 16
value = 3770
keyctrl = 0

;---------------------------------------------------------------------------
;Yuki Falling After Attack
[Statedef 3770]
type    = A
movetype= I
physics = N
poweradd = 0

[State 3770, 1]
type = parentvarset
trigger1 = time = 6
var(9) = 1

[State 3770, 2]
type = velset
trigger1 = time = 0
x = 3

[State 3770, 3]
type = NotHitBy
trigger1 = time >= 0
value = SCA

[State 3770, 4]
type = gravity
trigger1 = 1

[State 3770, 5]
type = Explod
trigger1 = animelem = 20
anim = 3735
ID = 3735
pos = 0,0
postype = p1
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
sprpriority = 4
ownpal = 1
removeongethit = 1

[State 3770, 6]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 3775
keyctrl = 0

;---------------------------------------------------------------------------
;Yuki Landing and Leaving the Screen
[Statedef 3775]
type    = S
movetype= I
physics = S
anim = 3710
poweradd = 0

[State 3775, 1]
type = PlaySnd
triggerall = anim = 3710
trigger1 = time = 0
value = s47,0

[State 3775, 2]
type = posset
trigger1 = time = 0
y = 0

[State 3775, 3]
type = velset
triggerall = anim = 3710
trigger1 = time = 0
x = 0
y = 0

[State 3775, 4]
type = RemoveExplod
trigger1 = time = 0
id = 3735

[State 3775, 5]
type = Explod
triggerall = anim = 3710
trigger1 = time = 0
anim = 3715
ID = 3715
pos = 0,0
postype = p1
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
sprpriority = 4
ownpal = 1
removeongethit = 1

[State 3775, 6]
type = ChangeAnim
triggerall = anim = 3710
trigger1 = animtime = 0
value = 3730

[State 3775, 7]
type = NotHitBy
trigger1 = time >= 0
value = SCA

[State 3775, 8]
type = velset
triggerall = anim = 3730
trigger1 = time >= 0
x = 8
y = -8

[State 3775, 9]
type = StateTypeSet
trigger1 = anim = 3730
statetype = A
physics = N

[State 3775, 10]
type = PlaySnd
triggerall = anim = 3730
trigger1 = animelem = 1
value = s50,1

[State 3775, 11]
type = Destroyself
trigger1 = Frontedgedist < -80 || Backedgedist < 0


;--------------------------------------------------------------------------
; Fire Effect
[statedef 9180]
type = A
movetype = I
physics = N
anim = 9999
velset = 0,0
sprpriority = -1

[State 9180, 1]
type = NotHitBy
trigger1 = time >= 0
value = SCA

[state 9180, 2]
type = explod
triggerall = numexplod(8070) <= 1
trigger1 = time = 0
trigger2 = time = 5
trigger3 = time = 15
trigger4 = time = 20
trigger5 = time = 25
trigger6 = time = 30
trigger7 = time = 35
trigger8 = time = 40
trigger9 = time = 45
trigger10 = time = 50
id = 8070
anim = 8070
postype = p2
pos = 0,-50
random = 60,80
vel = 0,0
accel = 0,0
pausemovetime = 0
supermovetime = 0
sprpriority = 4
bindtime = 1
ownpal = 1
ignorehitpause = 1
persistent = 1

[state 9180, 3]
type = Destroyself
trigger1 = time >= 51

;--------------------------------------------------------------------------
; Eletricity Effect
[statedef 9185]
type = A
movetype = I
physics = N
anim = 9999
velset = 0,0
sprpriority = -1

[State 9185, 1]
type = NotHitBy
trigger1 = time >= 0
value = SCA

[state 9185, 2]
type = explod
triggerall = numexplod(8075) <= 1
trigger1 = time = 0
trigger2 = time = 5
trigger3 = time = 15
trigger4 = time = 20
trigger5 = time = 25
trigger6 = time = 30
trigger7 = time = 35
trigger8 = time = 40
trigger9 = time = 45
trigger10 = time = 50
id = 8075
anim = 8075
postype = p2
pos = 0,-50
random = 60,80
vel = 0,0
accel = 0,0
pausemovetime = 0
supermovetime = 0
sprpriority = 4
bindtime = 1
ownpal = 1
ignorehitpause = 1
persistent = 1

[state 9185, 3]
type = Destroyself
trigger1 = time >= 51



; (Credit to ANMC, Bagaliao, and FlowaGirl for the basic helper method concept.)
;
;------------------
; AI Activation Helper State - Primary Version
; (Credit to YongMing for the basic HitPause bugfix concept.)
;
; var(1) - First tick button activation prevention.
; var(2) - Used for pause/superpause and custom state check, basically.
; var(3) - (Super/)Pause & custom state-triggered dir detection disabler.
; var(4) - Persistent direction command detection enabler (due to 2002.04.14).
; var(9) - AutoTurn bug fixer.
; var(10)- Post-custom state buffered dir detection disabler.
; parent's var(57) - Parent's GameTime var, for pause and custom state check.
; parent's var(58) - Parent's primary AI variable.
;
; The code in this state is mostly simply copy/pasteable.
; But if you're using different indices for the parent's variables,
; or if you change your character's basic commands' names, you'll
; of course need to change the code in this state accordingly.

[StateDef 9741]
type = S
movetype = I
physics = N
anim = 9741
ctrl = 0

[State 9741, Safety]; Just in case your opponent is very poorly coded.
type = SelfState
trigger1 = !IsHelper
value = 0

[State 9741, UglyHack]
type = VarSet
trigger1 = !var(1)
var(2) = 2

[State 9741, PauseCheck]
type = VarSet
trigger1 = GameTime > Parent,var(57)
trigger2 = !(Parent,Alive)
trigger3 = RoundState != 2
trigger4 = Parent,var(58)
trigger5 = var(3):=0
var(2) = (var(3):=1)+(var(4):=0)

[State 9741, Facing]
type = Turn
trigger1 = var(9):=(Facing != Parent,Facing)
trigger1 = !(var(4):=0)

[State 9741, DirTurnOnAI]
type = ParentVarSet
triggerall = !(var(3) || var(9))
trigger1 = Parent,command = "holdfwd"
trigger2 = Parent,command = "holdback"
trigger3 = Parent,command = "holdup"
trigger4 = Parent,command = "holddown"
trigger5 = !(var(4):=1)
var(58) = var(4)

[State 9741, DirTurnOffAI]
type = ParentVarSet
triggerall = !var(3)
triggerall = Parent,var(58)
trigger1 = command = "holdfwd"
trigger1 = Parent,command = "holdfwd"
trigger2 = command = "holdback"
trigger2 = Parent,command = "holdback"
trigger3 = command = "holdup"
trigger3 = Parent,command = "holdup"
trigger4 = command = "holddown"
trigger4 = Parent,command = "holddown"
var(58) = var(4):=0

[State 9741, ButtonTurnOnAI]
type = ParentVarSet
triggerall = !var(2)
trigger1 = Parent,command = "a"
trigger2 = Parent,command = "b"
trigger3 = Parent,command = "c"
trigger4 = Parent,command = "x"
trigger5 = Parent,command = "y"
trigger6 = Parent,command = "z"
trigger7 = Parent,command = "start"
var(58) = 1

[State 9741, ButtonTurnOffAI]
type = ParentVarSet
triggerall = !var(2)
trigger1 = command = "a"
trigger1 = Parent,command = "a"
trigger2 = command = "b"
trigger2 = Parent,command = "b"
trigger3 = command = "c"
trigger3 = Parent,command = "c"
trigger4 = command = "x"
trigger4 = Parent,command = "x"
trigger5 = command = "y"
trigger5 = Parent,command = "y"
trigger6 = command = "z"
trigger6 = Parent,command = "z"
trigger7 = command = "start"
trigger7 = Parent,command = "start"
var(58) = -1

[State 9741, UnPauseCheck]
type = VarSet
triggerall = var(2)
trigger1 = Parent,command = "a"
trigger2 = Parent,command = "b"
trigger3 = Parent,command = "c"
trigger4 = Parent,command = "x"
trigger5 = Parent,command = "y"
trigger6 = Parent,command = "z"
trigger7 = Parent,command = "start"
trigger8 = var(2) = 2
trigger8 = var(2):=0
var(2) = 2

[State 9741, Goodbye]
type = DestroySelf
triggerall = var(1):=1
trigger1 = Parent,var(58)
trigger2 = !(Parent,Alive)
trigger3 = RoundState != 2

[State 9741, DTC]
type = DisplayToClipboard
trigger1 = 1
text = "Var(2) = %d, ParentVar(57) = %d, GameTime = %d, Var(3) = %d"
params = var(2), (Parent,var(57)), GameTime, var(3)

;------------------
; AI Activation Helper State - Compatibly Partnered Version
;
; var(1) - First tick dir activation prevention
; var(2) - Used for pause/superpause and custom state check, basically.
; var(3) - (Super/)Pause & custom state-triggered dir detection disabler.
; var(4) - Hitpause check.
; var(5) - No button on previous tick.
; var(6) - Any dir on this tick.
; var(7) - Any button on this tick.
; var(8) - Matching partner button detected.
; var(9) - AutoTurn bug fixer.
; var(10)- Buffered dir detection disabler.
; parent's var(57) - Parent's GameTime var, for pause and custom state check.
; parent's var(58) - Parent's primary AI variable.
;
; The code in this state is mostly simply copy/pasteable.
; But if you're using different indices for the parent's variables,
; or if you change your character's basic commands' names, you'll
; of course need to change the code in this state accordingly.

[StateDef 9742]
type = S
movetype = I
physics = N
anim = 9741
ctrl = 0

[State 9742, Safety]; Just in case your opponent is very poorly coded.
type = SelfState
trigger1 = !IsHelper
value = 0

[State 9742, UglyHack]
type = VarSet
trigger1 = !var(1)
var(2) = var(3):=2

[State 9742, PauseCheck]
type = VarSet
trigger1 = GameTime > Parent,var(57)
trigger2 = !(Parent,Alive)
trigger3 = RoundState != 2
trigger4 = Parent,var(58)
trigger5 = var(3):=0
var(2) = var(3):=1

[State 9742, Facing]
type = Turn
trigger1 = var(9):=(Facing != Parent,Facing)

[State 9742, ParentDirCheck]
type = VarSet
trigger1 = Parent,command = "holdfwd"
trigger2 = Parent,command = "holdback"
trigger3 = Parent,command = "holdup"
trigger4 = Parent,command = "holddown"
trigger5 = var(6):=0
var(6) = 1

[State 9742, BufferCheck]
type = VarSet
trigger1 = var(3) || var(4) || var(10)
var(10) = var(6)

[State 9742, ParentButtonCheck]
type = VarSet
trigger1 = Parent,command = "a"
trigger2 = Parent,command = "b"
trigger3 = Parent,command = "c"
trigger4 = Parent,command = "x"
trigger5 = Parent,command = "y"
trigger6 = Parent,command = "z"
trigger7 = Parent,command = "start"
trigger8 = var(7):=0
var(7) = 1

[State 9742, SameButtonCheck]
type = VarSet
triggerall = var(7)
triggerall = !var(2)
triggerall = NumPartner
trigger1 = Parent,command = "a"
trigger1 = Partner,command = "a"
trigger2 = Parent,command = "b"
trigger2 = Partner,command = "b"
trigger3 = Parent,command = "c"
trigger3 = Partner,command = "c"
trigger4 = Parent,command = "x"
trigger4 = Partner,command = "x"
trigger5 = Parent,command = "y"
trigger5 = Partner,command = "y"
trigger6 = Parent,command = "z"
trigger6 = Partner,command = "z"
trigger7 = Parent,command = "start"
trigger7 = Partner,command = "start"
trigger8 = var(8):=0
var(8) = 1

[State 9742, DirTurnOnAI]
type = ParentVarSet
trigger1 = var(6)
trigger1 = !(var(9) || var(10))
var(58) = 1

[State 9742, DirTurnOffAI]
type = ParentVarSet
triggerall = var(6)
triggerall = !var(3)
triggerall = Parent,var(58)
trigger1 = command = "holdfwd"
trigger1 = Parent,command = "holdfwd"
trigger2 = command = "holdback"
trigger2 = Parent,command = "holdback"
trigger3 = command = "holdup"
trigger3 = Parent,command = "holdup"
trigger4 = command = "holddown"
trigger4 = Parent,command = "holddown"
var(58) = 0

[State 9742, ButtonTurnOnAI]
type = ParentVarSet
trigger1 = var(5) && var(7)
trigger1 = !(var(2) || var(8))
var(58) = 1

[State 9742, ButtonTurnOffAI]
type = ParentVarSet
triggerall = var(7)
triggerall = !(var(2) || var(8))
trigger1 = command = "a"
trigger1 = Parent,command = "a"
trigger2 = command = "b"
trigger2 = Parent,command = "b"
trigger3 = command = "c"
trigger3 = Parent,command = "c"
trigger4 = command = "x"
trigger4 = Parent,command = "x"
trigger5 = command = "y"
trigger5 = Parent,command = "y"
trigger6 = command = "z"
trigger6 = Parent,command = "z"
trigger7 = command = "start"
trigger7 = Parent,command = "start"
var(58) = -1

[State 9742, UnPauseCheck]
type = VarSet
triggerall = var(2)
triggerall = !var(4)
trigger1 = var(7)
trigger2 = var(2) = 2
trigger2 = var(2):=0
var(2) = 2

[State 9742, Goodbye]
type = DestroySelf
trigger1 = Parent,var(58)
trigger2 = !(Parent,Alive)
trigger3 = RoundState != 2

[State 9742, HitPauseCheck]
type = VarSet
trigger1 = var(6) || var(7)
trigger2 = !(Parent,HitPauseTime)
var(4) = Parent,HitPauseTime

[State 9742, Delay]
type = VarSet
trigger1 = var(1):=1
var(5) = !var(7)

[State 9742, DTC]
type = DisplayToClipboard
trigger1 = 1
text = "Var(2) = %d, ParentVar(57) = %d, GameTime = %d, Var(3) = %d"
params = var(2), (Parent,var(57)), GameTime, var(3)



;---------------------------------------------------------------------------
; Override common states (use same number to override) :
;---------------------------------------------------------------------------

;---------------------------------------------------------------------------
; States that are always executed (use statedef -2)
;---------------------------------------------------------------------------
[StateDef -2]

; Within StateDef -2, none of your own AI-related code should be placed
; above these next two controllers.

[State -2, StopAI]
type = VarSet
triggerall = var(58) > 0 && !IsHelper
trigger1 = RoundState != 2
trigger2 = !Alive
var(58) = -2
IgnoreHitPause = 1

; This controller is optional.  It allows you treat the AI flag as a boolean
; value rather than an integer value, letting you trigger your AI directives
; with "var(0)" instead of "var(58)>0", and letting you make moves usable only
; by humans by using "!var(0)" instead of "var(58)<1", thus slightly improving
; the size and efficiency of your code.
; Another benefit is that it makes it much easier for users to disable your AI,
; if they so choose.
[State -2, Simplifier]
type = VarSet
triggerall = !IsHelper
trigger1 = var(58) = 1
trigger2 = var(0):=0
var(0) = 1	; Another option is to replace 1 with something like MatchNo, if
		; you want to design your AI to have varying levels of difficulty.
IgnoreHitPause = 1

;[State -2, DTC]
;type = DisplayToClipboard
;trigger1 = 1
;text = "var(58) = %d, var(0) = %d, RoundState = %d, IsHomeTeam = %d, var(57) = %d"
;params = var(58), var(0), RoundState, IsHomeTeam, var(57)
;IgnoreHitPause = 1

;[State -2, ATC]
;type = AppendToClipboard
;trigger1 = 1
;text = "\nMatchNo = %d, var(56) = %d"
;params = MatchNo, var(56)
;IgnoreHitPause = 1


;==========================================================================
;    King Of Figthers 2002 Unlimited Match HSDM Fondo y Broken Glass
;==========================================================================
;--------------------------------------HSDM 2002 UM------------------------
[Statedef 40001]
anim = 9999

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noBG
flag2 = noFG

[State 40001, Tile #1-7]
type = Explod
triggerall = !numexplod(15600)
trigger1 = !time
anim = 15600
ID = 15600
pos = 0,0
postype = left  ;p2,front,back,left,right
removetime = 10
pausemovetime = -1
supermovetime = -1
scale = 1,1
sprpriority = -20
ownpal = 1
ignorehitpause = 1
bindtime = -1
persistent = 0

[State 40001, Tile #1-7]
type = Explod
triggerall = !numexplod(15601) < 2
trigger1 = !time
trigger2 = (time%10) = 0
anim = 15600
ID = 15601
pos = 320,0
postype = left  ;p2,front,back,left,right
removetime = 20
pausemovetime = -1
supermovetime = -1
scale = 1,1
sprpriority = -20
ownpal = 1
ignorehitpause = 1
bindtime = -1

[State 40001, Tile #2-6]
type = Explod
triggerall = !numexplod(15610)
trigger1 = !time
anim = 15601
ID = 15610
pos = 0,0
postype = left  ;p2,front,back,left,right
removetime = 20
pausemovetime = -1
supermovetime = -1
scale = 1,1
sprpriority = -20
ownpal = 1
ignorehitpause = 1
persistent = 0
bindtime = -1

[State 40001, Tile #2-6]
type = Explod
triggerall = !numexplod(15611) < 2
trigger1 = !time
trigger2 = (time%20) = 0
anim = 15601
ID = 15611
pos = 320,0
postype = left  ;p2,front,back,left,right
removetime = 40
pausemovetime = -1
supermovetime = -1
scale = 1,1
sprpriority = -20
ownpal = 1
ignorehitpause = 1
bindtime = -1

[State 40001, Tile #3-5]
type = Explod
triggerall = !numexplod(15620)
trigger1 = !time
anim = 15602
ID = 15620
pos = 0,0
postype = left  ;p2,front,back,left,right
removetime = 40
pausemovetime = -1
supermovetime = -1
scale = 1,1
sprpriority = -20
ownpal = 1
ignorehitpause = 1
persistent = 0
bindtime = -1

[State 40001, Tile #3-5]
type = Explod
triggerall = !numexplod(15621) < 2
trigger1 = !time
trigger2 = (time%40) = 0
anim = 15602
ID = 15621
pos = 320,0
postype = left  ;p2,front,back,left,right
removetime = 80
pausemovetime = -1
supermovetime = -1
scale = 1,1
sprpriority = -20
ownpal = 1
ignorehitpause = 1
bindtime = -1

[State 40001, Tile #4]
type = Explod
triggerall = !numexplod(15630)
trigger1 = !time
anim = 15603
ID = 15630
pos = 0,0
postype = left  ;p2,front,back,left,right
removetime = 80
pausemovetime = -1
supermovetime = -1
scale = 1,1
sprpriority = -20
ownpal = 1
ignorehitpause = 1
persistent = 0
bindtime = -1

[State 40001, Tile #4]
type = Explod
triggerall = !numexplod(15631) < 2
trigger1 = !time
trigger2 = (time%80) = 0
anim = 15603
ID = 15631
pos = 320,0
postype = left  ;p2,front,back,left,right
removetime = 160
pausemovetime = -1
supermovetime = -1
scale = 1,1
sprpriority = -20
ownpal = 1
ignorehitpause = 1
bindtime = -1

;----------Aqui cambias a broken glass tiempo-------------


[State 40001, Glass Break]
type = ChangeState
trigger1 = root,stateno != [3500,8050] ;--------> Aca pones el rango que abarca el hyper, que puede ser de varios. Si es uno solo, se anota uno solo y sin corchetes.
trigger2 = root,stateno = 8050         ;--------> Aca el estado final, o estado en el cual esta la animacion que va a romper el Broken Glass
trigger2 = root,animelem = 8050         ;--------> Aca el sprite de la animacion en el cual cambiara a Broken Glass. Tambien se puede cambiar por un Time si quieres.
value = 40002

;----------Aqui regulas el tiempo-------------

;kof 2002 um part2
[Statedef 40002]
anim = 9999

[State 40002, RemoveExplod]
type = RemoveExplod
trigger1 = !time
id = 15600
[State 40002, RemoveExplod]
type = RemoveExplod
trigger1 = !time
id = 15601
[State 40002, RemoveExplod]
type = RemoveExplod
trigger1 = !time
id = 15610
[State 40002, RemoveExplod]
type = RemoveExplod
trigger1 = !time
id = 15611
[State 40002, RemoveExplod]
type = RemoveExplod
trigger1 = !time
id = 15620
[State 40002, RemoveExplod]
type = RemoveExplod
trigger1 = !time
id = 15621
[State 40002, RemoveExplod]
type = RemoveExplod
trigger1 = !time
id = 15630
[State 40002, RemoveExplod]
type = RemoveExplod
trigger1 = !time
id = 15631

[State 40002, PlaySnd]
type = PlaySnd
trigger1 = !time
value = 20,4
volume = 200

[State 40001, Glass Break]
type = Explod
triggerall = !numexplod(15640)
trigger1 = !time
anim = 15604
ID = 15640
pos = 0,0
postype = left  ;p2,front,back,left,right
pausemovetime = -1
supermovetime = -1
removetime = -2
scale = 1,1
sprpriority = -20
ownpal = 1
bindtime = -1
ignorehitpause = 1

[State 40001, DestroySelf]
type = DestroySelf
trigger1 = time = 1
;--------------------------------------------------------------------------
;==========================================================================
;    King Of Figthers 2002 Unlimited Match HSDM Fondo y Broken Glass
;==========================================================================

;--------------------------[2002 UM MAX2 PORTRAIT]------------------------------
[Statedef 40003]
anim = 9999

[State 40003, VarSet]
type = VarSet
triggerall = enemy, numhelper(40003)
triggerall = !enemy, numhelper(40004)
trigger1 = enemy, authorname = "Vans"
trigger2 = enemy, authorname = "K.O.D"
trigger3 = enemy, authorname = "K.O.D & Vans"
trigger4 = enemy, authorname = "OrochiKOF97"
trigger5 = enemy, authorname = "Dark Saviour"
trigger6 = enemy, authorname = "Kung Fu Man"
trigger7 = enemy, authorname = "KoopaKoot"
trigger8 = enemy, authorname = "Anjel"
trigger9 = enemy, authorname = "Vans & Kung Fu Man"
var(0) = 1

[State 40003, VarSet]
type = VarSet
triggerall = teamside = 2
triggerall = enemy, numhelper(40004)
trigger1 = enemy, authorname = "Vans"
trigger2 = enemy, authorname = "K.O.D"
trigger3 = enemy, authorname = "K.O.D & Vans"
trigger4 = enemy, authorname = "OrochiKOF97"
trigger5 = enemy, authorname = "Dark Saviour"
trigger6 = enemy, authorname = "Kung Fu Man"
trigger7 = enemy, authorname = "KoopaKoot"
trigger8 = enemy, authorname = "Anjel"
trigger9 = enemy, authorname = "Vans & Kung Fu Man"
var(0) = 1

[State 40001, P1 BG]
type = Explod
triggerall = !numexplod(15650)
triggerall = teamside = 1
trigger1 = !time
anim = 15605
ID = 15650
pos = 0,abs((240*var(0))-81)
postype = left  ;p2,front,back,left,right
pausemovetime = -1
supermovetime = -1
removetime = -2
bindtime = -1
scale = 1,1
sprpriority = -20
ownpal = 1
ignorehitpause = 1

[State 40001, P2 BG]
type = Explod
triggerall = !numexplod(15651)
triggerall = teamside = 2
trigger1 = !time
anim = 15606
ID = 15651
pos = 0,abs((240*var(0))-81)
postype = right  ;p2,front,back,left,right
pausemovetime = -1
supermovetime = -1
removetime = -2
bindtime = -1
scale = 1,1
facing = -1
sprpriority = -20
ownpal = 1
ignorehitpause = 1

[State 40001, P1 PORTRAIT]
type = Explod
triggerall = !numexplod(15660)
triggerall = teamside = 1
trigger1 = !time
anim = 15607
ID = 15660
pos = 0,abs((240*var(0))-81)
postype = left  ;p2,front,back,left,right
pausemovetime = -1
supermovetime = -1
removetime = -2
bindtime = -1
scale = 1,1
sprpriority = -19
ownpal = 1
ignorehitpause = 1

[State 40001, P2 PORTRAIT]
type = Explod
triggerall = !numexplod(15661)
triggerall = teamside = 2
trigger1 = !time
anim = 15607
ID = 15661
pos = 0,abs((240*var(0))-81)
postype = right  ;p2,front,back,left,right
pausemovetime = -1
supermovetime = -1
removetime = -2
bindtime = -1
scale = 1,1
facing = -1
sprpriority = -19
ownpal = 1
ignorehitpause = 1

[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 2
ID = 15650
scale = 1,0.3
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 4
ID = 15650
scale = 1,0.54
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 6
ID = 15650
scale = 1,0.77
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 8
ID = 15650
scale = 1,1
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 56
ID = 15650
scale = 1,0.77
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 57
ID = 15650
scale = 1,0.54
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 58
ID = 15650
scale = 1,0.3
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 59
ID = 15650
scale = 1,1

[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 2
ID = 15651
scale = 1,0.3
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 4
ID = 15651
scale = 1,0.54
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 6
ID = 15651
scale = 1,0.77
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 8
ID = 15651
scale = 1,1
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 56
ID = 15651
scale = 1,0.77
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 57
ID = 15651
scale = 1,0.54
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 58
ID = 15651
scale = 1,0.3
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 59
ID = 15651
scale = 1,1

[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 2
ID = 15660
scale = 1,0.3
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 4
ID = 15660
scale = 1,0.54
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 6
ID = 15660
scale = 1,0.77
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 8
ID = 15660
scale = 1,1
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 56
ID = 15660
scale = 1,0.77
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 57
ID = 15660
scale = 1,0.54
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 58
ID = 15660
scale = 1,0.3
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 59
ID = 15660
scale = 1,1

[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 2
ID = 15661
scale = 1,0.3
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 4
ID = 15661
scale = 1,0.54
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 6
ID = 15661
scale = 1,0.77
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 8
ID = 15661
scale = 1,1
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 56
ID = 15661
scale = 1,0.77
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 57
ID = 15661
scale = 1,0.54
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 58
ID = 15661
scale = 1,0.3
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 59
ID = 15661
scale = 1,1

[State 40001, DestroySelf]
type = DestroySelf
trigger1 = time = 60

[Statedef 40004]
anim = 9999

[State 40001, DestroySelf]
type = DestroySelf
trigger1 = time = 1

;---------------------------------------------------------------------------
; States that are executed when in self's state file (use statedef -3)
;---------------------------------------------------------------------------
[Statedef -3]

; Stop Run FWD sound
[State -3, StopSnd]
type = StopSnd
trigger1 = stateno != 101
channel = 2

; Play Crouching sound
[State -3, snd]
type = Playsnd
triggerall = anim = 11
trigger1 = animelem = 12
value = s10,0
loop = 1
channel = 3

; Stop Crouching sound
[State -3, StopSnd]
type = StopSnd
trigger1 = anim != 11
channel = 3

; Remove After Images
[State -3, removeafterimage]
type = AfterImageTime
triggerall = Movetype = H
trigger1 = Time = 0
time = 0

; DisplayToClipboard
[State -3, DisplayToClipboard]
type = DisplayToClipboard
trigger1 = 1
text ="p2bodydist x = %f%%, p2bodydist y = %f%%, frontedgedist = %d"
params = p2bodydist x, p2bodydist y, frontedgedist

; Hurting Sounds
[State -3, PlaySnd]
type = PlaySnd
triggerall = Alive && Random <= 800
triggerall = time = 1
trigger1 = StateNo = 5000 || StateNo = 5010   || StateNo = 5020 || StateNo = 5070 || StateNo = 5080
value = s5000,0 + (random%4)
channel = 0

; Target Sound
[State -3, Target Sound]
type = PlaySnd
triggerall = numtarget(1100) = 1
trigger1 = target(1100), stateno = 1155 && target(1100), movetype = H  && target(1100), statetype = A
trigger1 = target(1100), Vel Y > 0 && target(1100), Pos Y >= 0
trigger2 = target(1100), stateno = 1191 && target(1100), movetype = H  && target(1100), statetype = A
trigger2 = target(1100), Vel Y > 0 && target(1100), Pos Y >= 0
value = s440,0
ignorehitpause = 1
persistent = 0

[State -3, Target Explod]
type = Explod
triggerall = numtarget(1100) = 1
trigger1 = target(1100), stateno = 1155 && target(1100), movetype = H  && target(1100), statetype = A
trigger1 = target(1100), Vel Y > 0 && target(1100), Pos Y >= 0
trigger2 = target(1100), stateno = 1191 && target(1100), movetype = H  && target(1100), statetype = A
trigger2 = target(1100), Vel Y > 0 && target(1100), Pos Y >= 0
anim = 8100
ID = 8100
pos = 0,0
postype = p2
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = 20
scale = 1,1
sprpriority = 5
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0
ignorehitpause = 1
persistent = 0

;Remove Explod Section
[State -3, Remove Stand Light Punch Explod]
type = RemoveExplod
trigger1 = stateno != 200
id = 205
ignorehitpause = 1

[State -3, Remove Stand Light Punch Explod]
type = RemoveExplod
trigger1 = stateno != 200
id = 206
ignorehitpause = 1

[State -3, Remove Crouch Strong Punchd Explod]
type = RemoveExplod
trigger1 = stateno != 410
id = 415
ignorehitpause = 1

[State -3, Remove Crouch Strong Punchd Explod]
type = RemoveExplod
trigger1 = stateno != 410
id = 416
ignorehitpause = 1

[State -3, Remove Crouch Strong Punchd Explod]
type = RemoveExplod
trigger1 = stateno != 410
id = 417
ignorehitpause = 1

[State -3, Remove Crouch Strong Punchd Explod]
type = RemoveExplod
trigger1 = stateno != 410
id = 418
ignorehitpause = 1

[State -3, Remove Crouch Strong Punchd Explod]
type = RemoveExplod
trigger1 = stateno != 410
id = 419
ignorehitpause = 1

[State -3, Remove Crouch Strong Punchd Explod]
type = RemoveExplod
trigger1 = stateno != 410
id = 420
ignorehitpause = 1

[State -3, Remove Crouch Strong Punchd Explod]
type = RemoveExplod
trigger1 = stateno != 410
id = 421
ignorehitpause = 1

[State -3, Remove Jump Strong Punch Explod]
type = RemoveExplod
trigger1 = stateno != 610
id = 615
ignorehitpause = 1

[State -3, Remove Jump Strong Punch Explod]
type = RemoveExplod
trigger1 = stateno != 610
id = 616
ignorehitpause = 1

[State -3, Remove Jump Strong Punch Explod]
type = RemoveExplod
trigger1 = stateno != 610
id = 617
ignorehitpause = 1

[State -3, Remove Jump Strong Punch Explod]
type = RemoveExplod
trigger1 = stateno != 610
id = 618
ignorehitpause = 1

; Kamek and Luchini appear to have been the first ones to use the IsHomeTeam AI
; activation concept.
; Feel free to move this controller to your character's intro state for slightly
; better efficiency.
[State -3, SetAI]
type = VarSet
triggerall = Alive && !IsHelper
triggerall = IsHomeTeam
trigger1 = TeamSide = 2
trigger2 = MatchNo > 1
var(58) = 1

[State -3, AI Helper - Compatibly Partnered Version]
type = Helper
trigger1 = !var(58) && !IsHelper
trigger1 = !NumHelper(9742)
trigger1 = Alive && RoundState = 2
trigger1 = NumPartner
trigger1 = Partner,SelfAnimExist(9741)
HelperType = normal
name = "AI Helper (Simul Version)"
ID = 9742
pos = 9999999,99999
StateNo = 9742
KeyCtrl = 1
PauseMoveTime = 2147483647
SuperMoveTime = 2147483647

; If you want to use the Guard mode, Dummy mode, Distance, or Button jam dummy
; control options in Training mode without activating the dummy's AI while
; working on the character, then all you need to do is temporarily disable
; this controller.  Or, if you want to permanently disable this controller in
; Training mode, then you could use the Training mode detection code available
; from my site ( http://www.mugenguild.net/~winane/ ), and then just add a
; "(var(59)&63)>30" triggerall to this controller.
; Alternatively, you can just set "Dummy control" to "Manual", press a P2 button
; to kill the AI helper, and then set dummy control back to "Cooperative".  (In
; fact, setting dummy control to manual isn't even necessary, if you press the
; P2 button prior to the first time you pause.)
[State -3, AI Helper]
type = Helper
triggerall = !var(58) && !IsHelper
triggerall = !NumHelper(9741)
triggerall = Alive && RoundState = 2
trigger1 = !NumPartner
trigger2 = !(Partner,SelfAnimExist(9741))
HelperType = normal
name = "AI Helper"
ID = 9741
pos = 9999999,99999
StateNo = 9741
KeyCtrl = 1
PauseMoveTime = 2147483647
SuperMoveTime = 2147483647

[State -3, TurnBackOnAI]
type = VarSet
trigger1 = var(58) = -2 && !IsHelper
trigger1 = Alive && RoundState = 2
var(58) = 1

; This method works somewhat in Linux Mugen version 2002.04.14,
; whereas the old humanly-impossible commands method does not.
; It is very important that this controller NOT be moved to State -2.
; Note that this part won't work nearly as well if AI.Cheat is turned off
; in mugen.cfg.
[State -3, XOR]
type = VarSet
triggerall = var(58)!=1 && !IsHelper
triggerall = !var(56)
triggerall = var(57) = GameTime-1
trigger1 = command = "a" ^^ command = "a2"
trigger2 = command = "b" ^^ command = "b2"
trigger3 = command = "c" ^^ command = "c2"
trigger4 = command = "x" ^^ command = "x2"
trigger5 = command = "y" ^^ command = "y2"
trigger6 = command = "z" ^^ command = "z2"
trigger7 = command = "start" ^^ command = "start2"
trigger8 = command = "holda" ^^ command = "holda2"
trigger9 = command = "holdb" ^^ command = "holdb2"
trigger10 = command = "holdc" ^^ command = "holdc2"
trigger11 = command = "holdx" ^^ command = "holdx2"
trigger12 = command = "holdy" ^^ command = "holdy2"
trigger13 = command = "holdz" ^^ command = "holdz2"
trigger14 = command = "holdstart" ^^ command = "holdstart2"
trigger15 = command = "holdfwd" ^^ command = "holdfwd2"
trigger16 = command = "holdback" ^^ command = "holdback2"
trigger17 = command = "holdup" ^^ command = "holdup2"
trigger18 = command = "holddown" ^^ command = "holddown2"
trigger19 = command = "recovery" ^^ command = "recovery2"
;Add more as desired. (See my notes in the CMD.)
var(58) = 1

; These next two controllers must be placed here, after the above XOR
; VarSet controller and before the below GameTime VarSet controller.
[State -3, fiXOR]
type = VarAdd
trigger1 = var(56) > 0 && !IsHelper
var(56) = -1

[State -3, fuXOR]
type = VarSet
trigger1 = var(57) < GameTime-1 && !IsHelper
var(56) = 31
IgnoreHitPause = 1

; It is very important that this controller NOT be moved to State -2, as putting
; it there would defeat the entire purpose of the controller, allowing the
; helper method to erroneously set the AI variable.
; And within State -3, don't put any ChangeState controllers before this
; controller, lest you unnecessarily delay your character's AI activation.
[State -3, GameTimeVar]
type = VarSet
trigger1 = !IsHelper
var(57) = GameTime
IgnoreHitPause = 1

; Within StateDef -3, none of your own AI-related code should come after the code
; provided here (and putting it before the code is also generally a bad idea).
; It's better to use State -1 (or, in special circumstances, State -2) instead.

; And finally, for lack of a better place to put this until I get
; around to writing an actual tutorial to go with the code:
; Many thanks to Roque for extensive testing in Linux Mugen.
; Also thanks to [E] for some help.



;����ً}���
[Statedef 122]
type    = S
movetype= I
physics = N
velset = 0,0
ctrl = 0
anim = 10001

[State 355, 1]
type = VelSet
trigger1 = time >= 6
x = -5

[State 355, 1]
type = NotHitBy
trigger1 = Time >= 0
value = SCA
time = 1

[State 355, 1]
type = Afterimage
trigger1 = Time = 5
time = 10
length = 5
PalBright = 0, 0, 0
PalContrast = 128,128,128
PalAdd = 0, 0, 0
PalMul = 1,1,1
FrameGap = 4
Trans = Add1

[State 355, 2]
type = VelSet
trigger1 = Time >= 24
x = 0

[State 355, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
